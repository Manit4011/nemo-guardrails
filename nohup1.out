 * Serving Flask app 'app'
 * Debug mode: off
Address already in use
Port 5000 is in use by another program. Either identify and stop that program, or start the server with a different port.
 * Serving Flask app 'app'
 * Debug mode: off
Address already in use
Port 5000 is in use by another program. Either identify and stop that program, or start the server with a different port.
 * Serving Flask app 'app'
 * Debug mode: off
Address already in use
Port 5000 is in use by another program. Either identify and stop that program, or start the server with a different port.
 * Serving Flask app 'app'
 * Debug mode: off
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5004
 * Running on http://192.168.0.247:5004
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Who is responsible for overseeing the smooth transition from primary center to the secondary center?', 'conversation_id': '123456'}
INFO:__main__:Received query: Who is responsible for overseeing the smooth transition from primary center to the secondary center?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:botocore.credentials:Found credentials from IAM Role: ACCESS_TO_AWS_SERVICES
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e15192cdf695a29256a46e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '337626a5-400a-4e72-88a2-97b00017130c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:15:15 GMT', 'content-type': 'application/json', 'content-length': '12711', 'connection': 'keep-alive', 'x-amzn-requestid': '337626a5-400a-4e72-88a2-97b00017130c', 'x-amzn-bedrock-invocation-latency': '71', 'x-amzn-bedrock-input-token-count': '17'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017a8b20>}
INFO:__main__:Response Data: {"embedding":[-0.00530377,0.019152502,-0.02357231,-0.022393694,-0.0054510967,-0.04272481,0.01465903,-0.008544962,0.008950111,0.055984236,-0.0072558518,0.03329589,-0.03314856,0.010460213,0.060404044,0.025782214,-0.05863612,-0.003443767,-0.0079556545,-0.0029465389,0.01929983,0.021362405,0.02504558,0.043903425,-0.0015745567,-0.04184085,-0.063645236,-0.009097438,0.008655458,-0.025192907,0.003333272,0.04714462,0.02887608,-0.032411925,0.031085983,0.044492736,0.027697464,-0.0044013923,0.00552476,-0.035800446,-0.03889431,-0.05392166,-9.85249E-4,0.0021638644,0.027550137,0.036831733,0.05244839,-0.029465387,0.029465387,-0.01274378,0.027550137,0.022246368,-0.04272481,0.021804387,-0.0033701037,0.031969946,0.01488002,-0.0028176277,-0.008508131,5.5247603E-4,-2.5667113E-4,-0.0075873374,-0.045376696,0.046849966,0.006077236,0.0053406013,0.08603893,0.060404044,-0.040072925,0.0050091157,0.020331116,0.017310916,0.00913427,-0.0027992118,-0.030644003,0.024750926,0.023866965,0.014806357,0.020625772,0.050385814,-0.050680466,-0.08191378,-0.012375463,0.009502588,0.020625772,0.029465387,0.009944568,0.020773098,-0.041251544,-0.014732693,0.02121508,0.026518848,-0.0760207,0.031527966,0.043903425,-0.08957478,0.004180402,-0.022835676,-0.020773098,-0.045966003,-0.045082044,-0.06718108,-0.017531905,-0.0017126757,0.027108157,0.06335058,0.06511851,-0.015911309,0.061877314,0.017310916,0.04655531,-0.0035358465,0.039188966,-0.04272481,-0.016868934,-0.025340233,0.036389753,0.055984236,0.009502588,0.027992118,0.08191378,-0.009576251,0.04419808,0.009649915,0.014364377,0.05716285,0.0721902,-0.050385814,-0.013996059,-0.013185761,0.021951713,0.015616655,-0.06276128,0.034327175,-0.008434467,0.025340233,0.06423455,0.01635329,0.041251544,-0.002909707,0.004290897,-0.02592954,-0.015542991,-0.009207933,6.537633E-4,-0.03859966,0.007108525,0.00828714,0.02018379,0.02887608,0.054510966,-0.018857848,0.024308944,0.0025598055,-0.045376696,0.03653708,0.049207196,-0.029907368,-0.009944568,0.002375647,0.006482385,0.001528517,0.05952008,-0.007071693,-0.033885196,-0.024308944,0.0048249573,0.02887608,0.034179848,0.04802858,0.0284341,0.017900223,1.2833557E-4,0.048912544,-0.006924366,-0.029023407,-0.036831733,-0.011123184,-0.030054696,-0.010018231,0.01060754,0.04095689,-1.254581E-4,0.0060404046,0.04478739,-0.045966003,0.03550579,-0.022541022,-0.03550579,-0.016058637,-0.010902193,0.02592954,-0.00637189,-0.012817443,0.033737868,-0.039188966,0.006224563,-0.031822618,-0.07160089,-0.04861789,0.033001233,-0.0013075266,0.002780796,0.056573544,0.09487855,-0.018415866,0.02357231,0.008581794,0.020036463,-0.042135503,0.007108525,0.04567135,-0.038305003,-0.06335058,0.011786155,-0.04802858,0.012228136,-0.006224563,0.0012154472,0.017458241,0.05568958,0.03270658,0.06010939,0.012301799,0.015395665,-0.014732693,0.040662233,-0.054216314,-0.0036647576,0.015174675,0.03859966,-0.004567135,0.015174675,-0.007918823,-0.00552476,0.041546196,0.002090201,0.01760557,-0.0098709045,0.04626066,0.019594483,0.003756837,0.004567135,0.0760207,0.0054142647,0.005708919,-0.042135503,-0.019005176,-0.011123184,-0.031822618,-0.015911309,-0.0284341,0.0107548665,-0.050385814,0.036831733,0.005487928,-7.999392E-5,0.013406752,-0.028286772,0.0075873374,0.005966741,-5.018324E-4,-0.024603598,0.0019797056,0.020331116,-0.020036463,-0.0051932745,0.037715696,0.04950185,-0.011491501,-0.01274378,-0.017679233,-0.0061508995,0.012080809,-0.033885196,0.038305003,0.02696083,-0.026666176,0.022393694,0.043314118,0.009502588,-0.015542991,0.037715696,-0.0360951,0.03742104,-0.013259424,-0.002633469,-0.0047881254,0.017458241,0.01929983,-0.05539493,-0.053627007,0.033443216,-0.068359695,-0.01635329,0.05480562,0.017752895,-0.04478739,0.01929983,0.048323236,0.042135503,-0.020331116,-0.018194877,-0.032853905,-0.03712639,-0.04478739,-0.01296477,0.055100273,-0.032117274,-0.031969946,-0.054216314,-0.016942598,0.02740281,-0.0075873374,0.01929983,0.0049354522,-0.011196847,-0.041251544,0.010681203,0.1213974,0.03550579,0.004180402,-0.008876448,0.020920426,-0.027550137,0.03801035,-0.021067752,-0.05568958,-0.020478444,0.02313033,-0.041251544,0.024750926,-0.0067402073,0.007918823,-0.006703376,0.03859966,0.029907368,0.006887534,-0.032853905,-0.051269773,0.043608773,-0.03859966,0.06718108,-0.0021178247,0.019594483,0.03742104,0.017089924,-0.020478444,-0.039778274,-0.0056352555,-0.00530377,-0.026518848,-0.043314118,0.022835676,-0.0022743596,0.009281597,0.02592954,0.026518848,-0.004548719,0.019889137,0.034327175,-0.03123331,-0.03712639,-0.06541316,-0.014732693,-0.048323236,0.0064455536,-0.022393694,0.021657059,0.034916483,-0.016426953,-0.019594483,0.0154693285,-0.022393694,0.0020994088,0.010902193,0.039188966,-0.05922543,0.05185908,-0.042135503,0.02887608,-0.009023775,-0.028728753,0.007329515,-0.026518848,0.0042540655,0.01443804,0.03034935,0.025782214,0.006114068,-0.019447155,-0.0042172335,0.040072925,0.03123331,-0.0025045578,-0.039778274,-0.005672087,-0.02357231,0.005082779,-0.0079556545,0.015027348,-0.0036463416,0.05156443,3.222777E-4,-0.021067752,0.03889431,-0.052153736,0.04095689,0.010091895,0.04184085,-0.016868934,-0.051269773,0.024308944,-0.005819414,-0.043019466,-0.034916483,-0.06894901,0.03550579,-0.008139813,0.0043645604,-0.0018784185,-0.0360951,-0.041546196,-0.031969946,0.012817443,-0.0021822802,-0.056278888,-0.07837793,0.013185761,0.0024493104,0.006261395,0.015837645,0.03329589,0.022835676,0.05009116,0.061288007,-0.020036463,3.2918362E-4,-0.05775216,0.050680466,-0.051269773,0.019005176,0.0360951,0.009281597,-0.08721755,-0.0035910942,-0.029612714,-0.02121508,0.0050091157,-0.0058562458,-0.053037696,0.019741809,0.02313033,0.034032524,0.01421705,-0.0057457504,0.023277655,-0.029023407,-0.021509733,-0.028728753,-0.009023775,0.03359054,-0.034474503,-0.029023407,-0.028139444,-0.04184085,-0.0057825823,-0.066002466,0.018563194,-0.0052301064,-0.02357231,-0.01760557,-0.02018379,-0.023277655,-0.041251544,0.044492736,-0.035800446,0.018415866,-0.025634887,-0.0071453564,0.022393694,-0.01443804,0.019889137,0.0067770393,0.030938657,0.013038434,-0.030938657,-0.034474503,0.036389753,0.0025966372,-0.06010939,-0.031822618,-0.0032411925,-0.019741809,-0.017900223,-0.009944568,0.024161618,-0.051269773,5.4787204E-4,-0.0284341,0.045082044,0.007661001,0.0117124915,0.018415866,0.0076978323,-0.0060035726,0.00530377,-0.018415866,-0.03859966,-0.044492736,0.07484208,0.06570781,-0.008213476,0.039778274,-0.013775068,0.06659178,0.00935526,0.005266938,-0.020036463,-0.01804755,0.021951713,0.0067402073,0.019889137,-0.023866965,-0.008655458,0.012375463,0.022393694,-0.029907368,-0.019005176,0.0040514907,-0.008323972,0.019005176,0.007329515,-0.0036831733,0.013480415,0.03079133,-0.027108157,-0.008729121,-6.399514E-4,-0.017900223,-0.04036758,-3.3148561E-4,0.022835676,0.024456272,-0.0027992118,0.06276128,0.01826854,0.019005176,0.007034861,-0.005672087,-0.01060754,-0.006703376,-0.0022006962,-0.023277655,0.021362405,-0.01296477,-0.040072925,-5.340601E-4,-0.0010727242,-0.017900223,-0.021951713,-0.024750926,0.0108285295,0.0017218835,0.029907368,-0.048912544,0.001528517,0.010975856,8.9777354E-4,0.00784516,0.006924366,0.027550137,0.009428924,0.0022006962,0.052153736,-0.01635329,0.0135540785,-0.02018379,0.021362405,-0.020036463,0.0154693285,0.027992118,0.024898252,0.03653708,0.00637189,-0.00637189,-0.009023775,0.0145853665,-0.029612714,0.05185908,-0.03079133,0.07160089,-0.03889431,-0.018415866,-0.023424983,0.025192907,0.0079556545,6.2613946E-4,-0.06246662,-8.5173384E-4,-0.004548719,-0.009723578,-0.023277655,-0.008471299,-0.0055984235,-0.0019889136,-0.02931806,-0.086628236,-0.017089924,0.016500616,-0.007476842,-0.05539493,-0.019152502,-0.0012522789,0.01826854,0.030644003,-0.012375463,-0.0145117035,-0.02784479,-0.013406752,-0.014069722,-0.03653708,-0.03712639,-0.013406752,0.03859966,-0.033001233,-0.0023203993,-0.01443804,0.044492736,-0.008323972,-0.008176645,0.033001233,-4.949264E-4,-0.08957478,0.0060404046,0.067475736,0.008618626,0.039778274,-0.046849966,0.0031306974,0.011196847,0.01421705,-0.011344174,-0.0053774333,0.006887534,0.0022375279,0.009097438,0.010165558,0.008250308,-0.033443216,0.08014585,0.034916483,0.043608773,-0.006629712,0.04478739,0.0061877314,-0.06806505,0.05716285,-0.04626066,0.007071693,0.05952008,0.038305003,0.0011509917,0.0052301064,0.003720005,-0.005672087,-0.021951713,0.032853905,0.012154472,0.0033885196,0.020478444,0.008250308,-0.05333235,-0.066002466,-0.054510966,-0.05775216,-0.020625772,-0.032264598,0.004161986,0.008397635,0.021509733,0.02887608,0.0013167345,-0.016279627,-0.015763983,-0.055984236,0.018415866,-0.04243016,0.03742104,-0.006703376,-0.019005176,0.019152502,6.9922746E-5,0.032853905,0.003333272,-0.0568682,0.025782214,-0.050385814,-0.004309313,-4.6039667E-4,0.020773098,0.0145853665,0.019005176,-7.964863E-4,-0.018194877,0.008544962,-0.007881992,0.01296477,0.0154693285,0.029465387,-0.023719637,0.0126701165,0.0025966372,0.043608773,-0.039483618,0.026813503,0.03034935,-0.02018379,-0.025340233,0.03034935,-0.04773393,-0.01104952,5.4557004E-4,0.040072925,0.0071821883,-0.015763983,-0.021657059,0.013480415,-0.058341466,-0.045966003,0.017458241,0.012449126,0.0073663467,0.0041988175,0.003351688,-0.03123331,-0.01826854,-0.0051932745,-0.05480562,-0.026224194,-0.00935526,-0.010975856,-0.03034935,-0.039483618,-0.017531905,-0.045082044,-0.013406752,-0.05009116,-0.0037015893,0.039483618,-0.006519217,-0.011123184,-0.017163588,-0.020625772,-0.006666544,0.030054696,0.025634887,-0.015174675,0.0042540655,-0.024308944,0.05568958,-0.034032524,-0.063645236,0.0048249573,0.0011371798,-0.056278888,0.020036463,-0.0117124915,0.053627007,-0.032264598,0.0014364376,0.017900223,-0.06393989,0.04861789,0.022393694,0.026518848,0.012375463,-0.00935526,-0.016500616,0.017679233,-0.0136277415,0.03889431,-0.00637189,-0.040072925,0.05009116,0.053037696,-0.019152502,-0.022393694,0.009097438,-0.031969946,-0.03859966,9.484172E-4,-0.0126701165,0.027108157,-0.020478444,0.005266938,0.0013167345,-0.002375647,-0.006887534,-0.0136277415,0.04478739,0.0031491134,-0.0038857479,-0.05009116,-0.032117274,-0.0049354522,0.015911309,0.054216314,-0.035358466,-0.0069980295,-0.0017863391,0.015616655,0.055100273,-0.029612714,0.027108157,0.005708919,0.031822618,-0.02401429,-0.03550579,0.045966003,0.05009116,0.07277951,0.0029465389,0.023424983,-0.029465387,-0.04950185,-0.036389753,-0.015395665,-0.026224194,-0.045376696,0.015911309,-0.033443216,-0.0077346643,-0.016721608,-0.040072925,-0.039188966,0.008950111,0.027255483,0.08957478,0.03079133,-0.016500616,0.0072926832,-0.008655458,0.0024677261,0.009723578,-0.054216314,-0.03123331,0.024308944,-0.01826854,-0.038305003,-0.01569032,-0.01635329,-0.0037936687,0.020036463,0.0014824773,-0.04802858,0.01657428,0.017679233,0.05333235,-0.022246368,-0.011859818,0.07661001,-0.008102981,0.045082044,-0.020331116,0.05244839,0.041251544,-0.02592954,0.005266938,-0.04861789,-0.02931806,-0.0117124915,0.0065928805,0.002080993,-0.0069611976,0.01421705,0.021509733,0.02784479,-0.044492736,0.0038489162,-0.048912544,-0.00935526,0.056573544,0.06423455,0.03742104,-0.06393989,-0.04626066,0.024456272,-0.0012614869,0.021509733,-8.28714E-4,0.03859966,-0.034916483,0.031822618,0.027697464,0.024161618,-0.043019466,0.07778862,-0.018857848,-0.006077236,0.033001233,-0.04419808,-0.034916483,-0.0035726782,0.0015561407,-0.005082779,0.040072925,0.025192907,0.02401429,0.0360951,-1.4502495E-4,-0.033443216,0.0135540785,0.004898621,0.021657059,-0.03712639,0.04626066,0.008139813,0.03859966,-0.02209904,-0.019594483,0.02504558,0.029465387,0.052153736,-0.009097438,0.035358466,0.039188966,0.03859966,0.010165558,0.0117124915,-0.036831733,0.05009116,0.010018231,-0.02784479,-0.01569032,0.0012154472,-0.019741809,-0.021362405,-0.025192907,0.012817443,0.026224194,0.0145853665,0.022541022,0.04036758,-0.048323236,-0.034032524,0.024750926,0.04095689,-0.04567135,0.0040699067,-0.04243016,-0.010386549,-0.016132299,0.041546196,0.017237252,-0.029465387,-0.033001233,-0.005119611,-0.018563194,0.03034935,0.0012062393,0.013701405,-0.010018231,0.025782214,0.01252279,-0.012375463,-0.00530377,-0.0010635164,-0.010681203,5.110403E-4,0.054510966,-0.010386549,-0.021657059,0.0046039666,0.0024493104,-0.05568958,0.008397635,0.026666176,-0.015984973,0.023277655,0.04243016,-0.01929983,0.07719932,0.0126701165,-0.002633469,0.016132299,0.028581426,-0.0360951,0.027108157,-0.020036463,0.006887534,-0.024161618,-0.019594483,-0.032264598,0.0145117035,-0.035800446,-0.04567135,0.02592954,-0.0022375279,0.024603598,0.013185761,0.006114068,-0.024456272,-0.022983002,-0.0012522789,6.7217916E-4,0.00913427,0.039778274,-0.04419808,0.01443804,-0.007071693,0.012596454,0.0045118877,-0.021657059,3.1306973E-4,-0.029612714,0.06865435,-0.008544962,-0.063645236,0.03550579,-7.596545E-5,0.017900223,-0.010091895,0.009944568],"inputTextTokenCount":17}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ac82d048-73d3-4c72-92f2-05e4afa9229e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:15:17 GMT', 'content-type': 'application/json', 'content-length': '756', 'connection': 'keep-alive', 'x-amzn-requestid': 'ac82d048-73d3-4c72-92f2-05e4afa9229e', 'x-amzn-bedrock-invocation-latency': '1451', 'x-amzn-bedrock-output-token-count': '141', 'x-amzn-bedrock-input-token-count': '1139'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017a9840>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The BC/DR Leader is responsible for overseeing the smooth transition from primary center to the secondary center.\",\n    \"References\": [\n        {\n            \"Statement\": \"To oversee the smooth transition from primary center to the secondary center\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page 22\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Who is responsible for overseeing the smooth transition from primary center to the secondary center?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"36\"\n    }\n}","prompt_token_count":1139,"generation_token_count":141,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e15195cdf695a29256a46f
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 08:15:17] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Who is responsible for reporting a power outage during off office hours?', 'conversation_id': '123456'}
INFO:__main__:Received query: Who is responsible for reporting a power outage during off office hours?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '89421484-254c-45c5-90c2-0ff48ee537da', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:17:17 GMT', 'content-type': 'application/json', 'content-length': '216', 'connection': 'keep-alive', 'x-amzn-requestid': '89421484-254c-45c5-90c2-0ff48ee537da', 'x-amzn-bedrock-invocation-latency': '297', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '273'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017a8d00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"Who is responsible for reporting a power outage during off-office hours?\"\n}","prompt_token_count":273,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: Who is responsible for reporting a power outage during off-office hours?
INFO:__main__:Query stored successfully with ID: 66e1520dcdf695a29256a471
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9f93c3e2-8995-4142-a50a-6461a0fb9b13', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:17:18 GMT', 'content-type': 'application/json', 'content-length': '12715', 'connection': 'keep-alive', 'x-amzn-requestid': '9f93c3e2-8995-4142-a50a-6461a0fb9b13', 'x-amzn-bedrock-invocation-latency': '74', 'x-amzn-bedrock-input-token-count': '14'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017aaaa0>}
INFO:__main__:Response Data: {"embedding":[-0.057594426,0.022769889,-0.026118401,-0.057326544,0.045004014,-0.054915614,0.02812751,-0.042325206,0.054111972,-0.0052571655,-0.01794803,-0.0060608084,-0.012389498,-0.09536565,-0.008505223,0.03308331,0.02035896,-0.07447093,0.026922045,-3.243872E-4,0.049290113,0.062148403,0.011451915,-0.05143316,4.2484258E-4,-0.038842753,-0.0065296004,-0.010715242,0.027725687,0.045271896,-0.001808197,-0.0047883736,-0.010715242,0.0066300556,0.070184834,0.013594963,0.057058662,0.008069917,0.060005352,-0.018617732,0.013996785,0.01004554,-5.25298E-4,0.015202249,0.047950707,0.054111972,-0.00783552,0.045004014,0.039378513,0.01834985,0.044736136,0.03911063,-0.030136617,0.005190195,0.0010338534,0.010916153,-0.012121617,0.025850521,-0.009241896,-0.0039847307,0.0015319447,0.045271896,-0.063487805,-0.02598446,0.027725687,0.001983994,-0.030002676,0.049825873,-0.05384409,-0.045539778,-0.016072862,-0.042057324,-0.046879184,0.02035896,-0.052236803,-0.020225018,0.026922045,-0.012121617,-0.038039107,-0.019421376,0.019153494,0.019153494,-0.03616394,0.078757025,0.0143986065,-0.016608624,0.036967583,0.004386552,0.023975354,0.06911331,0.022635948,-0.012322528,1.08303466E-4,-4.4210836E-5,-0.03134208,-0.03335119,0.02290383,0.02812751,-0.049290113,0.039378513,-0.017814089,0.04339673,0.016474685,-0.038842753,0.011451915,-0.009777658,-0.015938923,-0.05946959,0.014130725,-0.014666487,0.004269354,0.039378513,-0.012724349,-0.005357621,0.049825873,-0.070184834,0.05357621,0.011786766,-0.016943475,-0.04955799,-2.9927335E-4,-0.03911063,-0.044736136,0.032815427,-0.01567104,0.01279132,0.02598446,0.017278327,0.053040445,-0.032145724,0.005692472,0.0466113,0.004888829,0.05946959,0.0019672513,-0.06268416,0.019421376,-0.060005352,0.01265738,0.0204929,-0.0043195817,-0.009643718,0.022100186,0.047414944,-0.01004554,-0.0038340474,0.03094026,0.011786766,-0.016072862,-0.0025950975,0.0052906508,0.0366997,0.057862304,-0.0020928206,-0.0016742565,-0.021698365,0.061344758,-0.07232788,-0.0028294935,-0.06589874,0.02826145,0.0011384945,0.017546209,0.013862844,0.042860966,-0.013394052,-0.009576747,0.044200372,-0.0077685504,0.01265738,0.022635948,0.0017579694,-0.0012473211,-0.012255558,-0.03147602,0.01299223,-0.0143986065,0.06429145,-0.058130186,-0.043664612,-0.012456468,-0.01794803,-0.020626841,-0.0064626304,0.015537101,-0.04634342,0.055183496,-0.008706134,0.022635948,-0.027457807,0.010715242,0.020626841,-0.025046878,-0.0145325465,-0.037235465,-0.018617732,0.021028662,-0.03094026,-0.033217248,-0.04071792,0.04902223,-0.017144388,-0.01834985,0.024645057,0.03094026,-8.0364314E-4,-0.05196892,0.013594963,0.019957138,-0.003582909,0.05625502,0.027457807,-0.0071993032,0.042057324,0.02317171,-0.04018216,0.0145325465,-0.006931422,0.023707472,-0.02330565,0.05625502,0.02290383,0.038039107,0.007500669,-0.026386283,0.044736136,-0.0409858,-0.027055986,-0.021832306,0.01834985,0.0011301232,-0.034556653,0.058130186,-0.06804179,-0.016608624,-0.042593084,0.0013896329,-0.01017948,-0.001213836,0.0067974813,0.049825873,-0.024243234,-0.015202249,0.004620948,0.017278327,-0.04071792,-0.038842753,0.027859628,-0.05866595,0.004922314,-0.03134208,0.013327082,0.012322528,-0.044736136,0.011451915,0.0039345026,0.0038340474,-0.0040182155,-0.009710688,-0.07822126,0.006964907,8.2875695E-4,-0.03777123,0.019153494,-0.043128848,-0.009777658,-0.02330565,-0.045271896,-0.034824535,-0.015938923,0.031877846,-0.0066300556,0.016608624,-0.04902223,-0.0015905437,0.037235465,0.055183496,-0.032011785,0.008572194,0.0055585317,0.09054379,0.0047548884,0.009442807,0.014599517,0.034824535,6.278462E-4,0.03080632,-0.013929814,-0.021162603,0.045271896,0.02035896,-0.047414944,0.0650951,-0.0366997,0.023439592,-0.00770158,0.028797213,0.028931152,0.006897937,0.016273774,0.023975354,0.057862304,-0.011050093,0.015001338,-0.02531476,0.034154832,-0.0053241355,-0.002963434,0.0028294935,0.043664612,-2.1556053E-4,0.021028662,-0.0108491825,0.04071792,-0.027859628,0.027859628,-0.021564424,0.019957138,-2.1242129E-4,0.02317171,0.022368068,0.0029801766,0.024243234,0.009040985,0.043664612,0.0018751672,0.008270827,-0.0043195817,-0.0049892846,-0.0409858,-0.06295204,-0.0045204926,0.009576747,0.0066300556,0.019019553,-0.014599517,-0.034288775,-0.023707472,0.06188052,-0.014934368,0.01834985,-0.02076078,0.070184834,0.030270558,-0.022368068,0.042593084,-0.01540316,-0.042593084,0.036431823,-0.006429145,-0.0031308597,0.032011785,-0.0041354136,-0.01285829,-0.025850521,0.009241896,-0.02598446,-0.008706134,0.01547013,0.03911063,0.00783552,0.0012975488,0.022368068,0.004855344,-0.01768015,0.002226761,0.0029466916,-0.023573533,0.011920706,-0.015135279,-0.014867398,0.040450037,0.008572194,0.0409858,0.002276989,0.007802035,0.032145724,-0.017546209,0.026118401,0.045004014,0.061344758,-0.024778996,0.04634342,0.03147602,-0.013594963,0.022100186,-0.017814089,-0.010313421,-0.008505223,-0.022234127,0.006194749,-0.010916153,-0.05625502,-0.032279667,0.024645057,0.038842753,-0.032413606,-0.031877846,0.022100186,-0.008840075,0.0030973745,-0.047147065,-0.03830699,-0.018885614,-0.021832306,0.0015821725,0.02571658,-0.0112510035,-0.014934368,0.027859628,-0.020225018,0.027055986,-0.05196892,0.0021765335,0.01299223,-0.02571658,0.006496115,-0.032011785,0.03777123,-0.007969461,-5.8180414E-4,-0.0053241355,0.014264666,0.004922314,0.0018249396,0.0054580765,-0.013929814,-0.0013477765,0.008907044,0.04339673,-0.057594426,-0.06268416,0.05116528,-0.00385079,0.052236803,0.0016575139,-0.016809536,0.035092417,0.006596571,0.0112510035,0.066434495,0.042057324,0.00254487,0.03589606,-0.044200372,-0.010112509,0.034556653,-0.016139833,-0.01279132,-0.00632869,-0.009576747,0.009844628,0.034824535,0.054111972,-0.037235465,0.028663272,0.010648271,-0.045539778,0.014130725,-0.021832306,0.063487805,0.02035896,-0.024511116,0.04018216,-0.027725687,-0.03388695,0.0036666219,0.025448699,0.0054580765,0.031877846,-0.0076680947,0.027725687,-0.012456468,0.042860966,-0.016675595,0.047682825,0.045539778,0.02558264,0.011786766,-0.0143986065,-0.006127779,0.03616394,-0.04875435,0.07982855,0.029734796,-0.044468254,0.02558264,-0.009107956,0.013461023,0.045004014,0.026788104,0.027189925,0.015871951,-0.037235465,-0.026118401,-0.011451915,0.0035159388,0.003080632,0.029332975,-0.061344758,-0.006897937,0.0034824535,0.01794803,0.060541116,0.01808197,0.03857487,0.027591748,-0.034824535,-0.014465576,0.02826145,-0.016943475,-0.02035896,0.032815427,-0.010112509,-0.01004554,-0.035092417,-0.0029132064,0.017814089,0.0019002812,0.014130725,-0.09054379,-0.03134208,-0.002101192,-0.04339673,-0.03589606,-0.007433699,-0.014867398,-0.042057324,0.008907044,-0.008337798,-0.060005352,0.028663272,0.041253682,-0.008639163,0.0017244843,-0.001481717,-0.032011785,0.02290383,-0.03616394,0.032011785,-0.0353603,0.034556653,0.008203857,0.021698365,0.044200372,-0.030672379,0.00632869,-0.015001338,0.04634342,-0.04071792,0.010313421,0.019153494,-0.019421376,-0.021028662,-0.027457807,-0.023439592,-0.009375837,0.008270827,0.025448699,-0.014599517,0.05384409,-0.049825873,-0.003164345,0.019555315,0.028797213,-0.016072862,-0.0010882667,0.02812751,0.017546209,0.0020677068,-0.028931152,0.006429145,0.06429145,-0.025448699,-0.0039010176,0.0066300556,-0.031074202,0.021430483,-0.029600855,-0.02009108,-0.0060608084,0.036967583,-0.042593084,5.7343283E-4,0.017546209,-0.022635948,4.918128E-4,-0.006596571,-0.0366997,0.00639566,-1.0516424E-4,-0.009643718,-0.032815427,-0.055183496,-0.01265738,-0.047147065,0.009375837,0.03147602,0.017278327,-0.043128848,0.024645057,0.036967583,-0.0016575139,-0.0027625232,-0.010715242,0.03589606,0.0011636083,-0.016809536,0.016675595,0.03911063,0.07661398,-0.011050093,0.00770158,-3.139231E-4,0.027457807,-0.02009108,-0.031074202,0.011050093,-0.0010338534,0.024511116,0.06188052,0.0028127509,0.008103401,0.028797213,0.024377175,-0.011050093,0.01794803,0.03589606,-0.021564424,-0.07554246,-7.6597236E-4,0.014130725,-0.041253682,-9.752544E-4,0.078757025,-0.019555315,-0.011451915,0.057862304,-0.03616394,0.028529331,-0.03830699,-0.034556653,-0.03147602,-0.038842753,0.036967583,-0.011652825,-0.034154832,-0.047682825,-0.04018216,-0.023573533,0.06804179,0.053308327,-5.1274104E-4,-0.035628177,0.0051567103,-0.05946959,0.004353067,0.011317974,-0.0409858,0.053308327,-0.02598446,-0.017546209,0.029065093,0.0018333109,0.029065093,-0.0028964637,0.019555315,0.046879184,0.028931152,0.018617732,-0.020225018,-0.05437985,-0.014934368,-0.001925395,-0.019421376,-0.02826145,-0.027591748,0.022769889,0.0039010176,0.0054245912,0.006596571,-0.014063755,0.0148004275,-0.02531476,-0.06161264,0.01794803,0.019555315,0.029065093,0.03616394,-0.009308866,-0.016809536,0.035628177,0.01299223,0.0052571655,0.015336189,0.03308331,0.0045204926,-0.0733994,0.011853736,-0.003616394,-0.013327082,-0.044736136,-0.017144388,-0.027457807,-0.01540316,-0.043664612,-0.013260111,-0.047414944,-0.04339673,-0.007534154,-0.03134208,0.045539778,0.06616662,-0.044468254,-0.026654163,0.024645057,-0.033619072,-0.034288775,-0.029199034,-0.029065093,-0.018483792,-0.03120814,-0.013394052,-0.047414944,0.0032313152,-0.027859628,0.006897937,-0.03830699,0.07447093,-0.0053241355,-0.034020893,-0.0033317704,0.012255558,-0.055451375,-0.04902223,0.01017948,-0.02812751,0.011920706,-0.010514331,-0.03254755,0.02290383,0.024912937,-0.0020844494,0.02317171,-0.0010715242,-0.04018216,1.527759E-4,-0.02799357,-0.023841413,-0.0035661664,0.030270558,-0.017546209,-0.045004014,0.053308327,0.04634342,0.02076078,0.032815427,-0.0025281273,0.009442807,0.014666487,0.008974015,0.00502277,0.030404499,-0.024377175,0.042325206,0.004185641,1.9567873E-4,-0.03589606,0.015001338,0.032815427,-0.0027960085,0.022100186,-0.0011384945,0.014666487,0.0065296004,0.005692472,0.044200372,0.024511116,0.022502007,-0.0032648002,-0.0026285828,-0.0036331366,-0.017278327,0.042593084,0.04152156,0.060005352,0.013394052,-0.06241628,0.023573533,-0.015202249,-0.018215911,-0.016407713,-0.0819716,-0.013394052,0.044200372,-0.005658987,-0.08465041,0.042593084,0.07232788,0.0063621746,0.015938923,-0.027457807,-0.05116528,0.019555315,-0.044736136,0.04152156,0.042325206,0.01573801,0.053040445,-0.006496115,0.007534154,-0.01299223,-0.0366997,0.0010673385,0.015135279,-0.043128848,0.04955799,0.051701043,0.005357621,-0.050093755,0.05437985,0.013461023,0.0015570585,-0.0077685504,0.048486467,-0.020626841,0.003767077,0.034020893,0.035092417,-0.021028662,0.0027960085,0.005960353,-0.058130186,-0.033619072,0.011920706,-0.019019553,-0.0070318775,-0.0064626304,0.055183496,-0.011184034,0.037503347,-0.014599517,-0.03147602,0.008404768,-0.022234127,-0.01017948,-0.060808998,0.00391776,-0.01547013,0.040450037,-0.021162603,0.04634342,-0.01285829,0.004453522,-0.018483792,-0.003080632,0.035092417,-0.0466113,0.058398068,0.039378513,0.030270558,0.008471738,-0.002846236,-0.022368068,0.0025783551,0.033619072,0.013461023,0.015871951,0.011317974,-0.0019337663,-0.016273774,0.002276989,0.019957138,0.0038005624,-0.05062952,0.0030304042,0.0366997,-0.05946959,0.0013812616,0.016675595,0.024243234,0.015135279,0.03120814,0.05946959,-0.013795874,-0.034556653,0.013929814,0.02558264,-0.060808998,0.071256354,-0.0011050093,0.031877846,-0.008639163,1.0725706E-4,-0.06964907,0.05062952,-0.050897397,-0.04018216,-0.03830699,-0.011920706,-0.009174925,-0.013327082,-0.03147602,-0.03294937,-0.023439592,-0.018885614,0.0058264127,0.013929814,-5.0227693E-4,0.02558264,-0.05116528,-0.017546209,-0.06697026,0.0027625232,-0.044200372,0.03616394,0.04152156,0.0021179344,-0.021430483,-0.012724349,0.070184834,0.04580766,0.0018165683,0.014130725,-0.0057929275,0.03589606,0.077685505,-0.021698365,-0.01265738,-0.029600855,-0.0034489685,0.024912937,-0.042057324,-0.025448699,3.139231E-4,0.011117063,0.06804179,-0.009375837,0.0045204926,-0.011719796,0.007232788,0.032011785,-0.0063621746,-0.0010673385,0.0045874626,-0.0366997,-0.023841413,-0.048486467,0.03857487,0.029199034,-0.006663541,-0.035092417,-0.03147602,-0.01808197,-0.02317171,-9.124698E-4,0.018215911,0.006228234,-0.013059201,0.022234127,0.001213836,-0.08893651,0.0072997585,-0.05196892,0.014599517,0.014264666,-0.005926868,-0.043128848,0.019019553,-0.005190195,-0.008840075,0.024243234,-0.0059938384,-0.017412268,0.0040517007,0.009241896,-0.019153494,4.5204925E-4,0.02826145,-0.034556653,-0.015871951,-0.024243234,-0.040450037,0.0013645191,-0.03094026,-0.014264666,0.021028662,-0.004855344,-0.042860966,-0.05357621,0.03080632,-0.021698365,0.0108491825,-0.006663541,-0.021832306,-0.022368068,-0.02826145,0.023707472,0.019957138,0.0707206,0.006931422,-0.04875435,-0.028797213,-0.012724349,0.032011785,0.012255558,-0.0409858,-0.027591748,0.021564424,-0.0033317704,-0.039378513,0.055183496,-0.009174925,0.01279132,0.019555315,-0.017412268,0.044468254,0.01265738,-6.111036E-4,-0.04902223,0.02598446,-0.01547013,0.039914276,-0.0353603],"inputTextTokenCount":14}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '609631f0-6aaf-4b59-85f8-297a4059cf64', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:17:20 GMT', 'content-type': 'application/json', 'content-length': '836', 'connection': 'keep-alive', 'x-amzn-requestid': '609631f0-6aaf-4b59-85f8-297a4059cf64', 'x-amzn-bedrock-invocation-latency': '1560', 'x-amzn-bedrock-output-token-count': '164', 'x-amzn-bedrock-input-token-count': '1130'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017ab610>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"In case of a power outage during off-office hours, it is the duty of the full-time caretakers or security guards to report any power outage immediately to any member of the management.\",\n    \"References\": [\n        {\n            \"Statement\": \"Concerned person checks the power source and switches on the alternate option on the server and workstations.\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 19\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Who is responsible for reporting a power outage during off-office hours?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"56\"\n    }\n}","prompt_token_count":1130,"generation_token_count":164,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e15210cdf695a29256a472
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 08:17:20] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?', 'conversation_id': '123456'}
INFO:__main__:Received query: According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '54d349bb-e2ef-43dd-b0cc-965d6d16f6ba', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:21:20 GMT', 'content-type': 'application/json', 'content-length': '256', 'connection': 'keep-alive', 'x-amzn-requestid': '54d349bb-e2ef-43dd-b0cc-965d6d16f6ba', 'x-amzn-bedrock-invocation-latency': '425', 'x-amzn-bedrock-output-token-count': '37', 'x-amzn-bedrock-input-token-count': '402'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017a94b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?\"\n}","prompt_token_count":402,"generation_token_count":37,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?
INFO:__main__:Query stored successfully with ID: 66e15300cdf695a29256a474
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '84fb33bf-d1b5-4f05-9a4d-119bc3dab774', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:21:21 GMT', 'content-type': 'application/json', 'content-length': '12737', 'connection': 'keep-alive', 'x-amzn-requestid': '84fb33bf-d1b5-4f05-9a4d-119bc3dab774', 'x-amzn-bedrock-invocation-latency': '64', 'x-amzn-bedrock-input-token-count': '23'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176c250>}
INFO:__main__:Response Data: {"embedding":[-0.034719057,0.054356534,0.007501516,6.2103523E-4,0.061583128,0.0027296094,0.014217533,0.029220566,0.02466467,0.07697891,-0.039274953,0.07006652,0.023407873,-0.002670697,-0.0014924483,-0.02529307,-0.039274953,0.020108776,0.019558927,0.045558948,-2.3933176E-4,-4.2466042E-4,0.047129944,0.027806668,-0.03409066,0.018773427,-0.027806668,0.01696678,0.080120906,0.014767382,0.028120866,0.015552882,0.012725085,0.013981883,0.0842055,0.020265875,0.015709981,0.05781273,-0.047129944,-0.021522675,-0.016495481,0.040845953,5.4616732E-5,0.09237469,0.065981925,8.28456E-5,0.008129915,0.004968282,0.027492467,-0.015709981,0.03393356,0.023722071,-0.035347458,-0.015552882,-0.05247134,0.037232656,-0.02419337,-0.036918458,-0.0088368645,0.003829308,-0.036132958,0.029063465,0.0088368645,-0.0016004543,-0.011861036,0.0064018173,0.03361936,0.03361936,-0.07854991,-0.018773427,0.0025332344,-0.0064410926,0.026392769,0.032990962,0.018773427,-0.01790938,0.04932934,0.0055377684,-0.003259821,0.035347458,-0.015003032,0.03251966,0.0020913912,-0.009111789,-0.0014237171,-0.024821771,-6.259446E-4,-0.02576437,0.020894276,-0.003750758,0.011468287,-0.0048700944,-0.04995774,0.018694878,-0.035347458,-0.038489453,-0.030006064,0.012489435,0.015395782,0.01751663,-0.0012175236,-0.014453183,0.03173416,0.026392769,-0.036918458,0.003790033,0.00919034,0.0064410926,-0.0011733392,-5.473947E-4,0.056870133,0.0028474343,0.070694916,-0.040845953,0.080120906,0.028592166,0.04838674,0.012332335,-0.07854991,0.06692452,0.021836875,-0.03424776,-0.011939586,0.0016299105,0.031105764,-0.045244746,-2.2828567E-4,-0.03236256,0.022936573,0.0053806687,0.055613335,-0.0017182792,0.026392769,-0.028906366,2.5160518E-5,-0.019873127,0.040217552,-0.011782486,0.026078569,-0.024350472,0.030791564,-0.022151073,3.0560824E-4,-0.007815716,0.0135891335,-0.018145029,-0.011546836,0.022308175,-0.045873147,0.07289431,0.018145029,-0.02560727,0.019558927,0.018773427,-0.007658616,0.001462992,-1.7060059E-4,-0.06064053,-7.364054E-4,-0.010132938,-0.02670697,0.0014728107,0.05341394,0.007697891,-0.047129944,-0.043359548,-0.06818132,-0.004104233,0.010682788,-0.0050075566,0.0030241713,-0.0065981923,0.03456196,-0.023407873,0.018773427,0.03236256,-0.029063465,-0.010368587,-0.05058614,-0.01751663,-0.00895469,-0.0072265915,0.013903334,-0.015003032,0.0015906356,0.03346226,0.029691866,-0.069438115,-0.0109184375,-0.046815746,-0.015081583,-0.032833863,0.009740189,0.045558948,-0.043359548,0.011939586,0.0854623,0.001502267,-0.021679774,-0.053099737,0.00848339,-0.07949251,0.030163165,-0.02513597,0.009936564,-0.026078569,-0.014060433,4.786635E-4,0.05058614,0.023879172,-0.010054388,-0.024821771,0.010132938,0.04273115,5.473947E-4,0.029063465,0.021679774,0.0015709981,0.04273115,0.02576437,-0.01704533,0.0016397294,-0.032833863,-0.038175255,0.002327041,0.02466467,-0.036918458,-0.022465274,0.0053806687,-8.652763E-5,0.012175236,0.083577104,-0.031105764,0.020422976,0.020737175,0.0031616339,-0.0065589175,-0.0048700944,-0.0038882205,-0.020580076,0.03346226,0.0030634464,-0.0054199435,0.026549868,0.023250772,0.020894276,-0.016102731,-0.032205462,-4.467526E-4,0.0061268928,0.01680968,0.039117854,-0.009072514,0.015317232,-0.009622363,0.005773418,0.080435105,0.05938373,-0.015081583,0.008287015,-0.016416932,-0.019087628,-0.036290057,0.02560727,0.009111789,0.018616328,-0.020580076,-0.0031616339,0.037861057,0.0064803674,-0.03519036,-0.019087628,0.037232656,-0.028906366,0.02466467,0.03173416,0.0063625425,-0.012096685,-0.05121454,0.029063465,0.05121454,-0.038018156,0.012803635,0.024507571,-0.047444142,-0.030320264,0.012646535,0.019009078,0.019558927,-0.013824783,-0.009308164,0.007383691,-0.003004534,-0.005341394,0.020030227,0.028592166,0.00919034,0.011546836,-0.00793354,-0.00396677,-0.014767382,0.052785538,0.05121454,0.038175255,0.053099737,-0.03173416,-0.04241695,-0.020580076,0.03503326,0.039274953,-0.0064803674,-0.023093672,-0.010368587,-0.020265875,0.04461635,-0.0051842937,-0.055613335,0.023093672,-0.0021306663,0.010132938,0.018145029,4.2220575E-4,-0.053099737,0.031891264,0.020265875,0.011075537,0.00864049,-0.010054388,-0.029534765,-0.0791783,0.015317232,0.038175255,-0.008208466,0.02419337,0.028592166,0.07603631,-0.020422976,-0.0015513607,0.012646535,9.0332393E-4,0.06032633,0.011232637,-0.0065981923,-0.01696678,0.06692452,0.046815746,0.013903334,-0.0029848965,-0.030163165,-0.002631422,-0.0029848965,-0.0020324788,-0.018459229,-0.05058614,-0.009504539,0.01625983,-0.0122537855,-0.013510584,0.024036271,-0.022151073,0.04273115,0.014060433,0.018694878,-0.0014924483,-0.022779474,-0.0066767423,0.018066479,0.056241732,-0.022779474,0.0071480414,-0.03173416,0.0829487,0.0063232677,-0.027178267,0.0014040796,0.005851968,-0.04367375,0.009897288,0.038175255,0.04116015,0.021679774,0.04116015,-0.016416932,-0.02560727,-0.04932934,0.030634465,-0.052157138,0.020580076,0.007501516,-0.038489453,-0.029220566,-0.01759518,-0.037232656,-0.015081583,0.04116015,0.027178267,-0.03676136,0.014453183,0.03676136,-0.009111789,0.01586708,-0.015317232,0.01751663,-0.0060483427,-0.0016004543,-0.011389737,-0.05812693,-0.012725085,-0.010839887,0.015317232,-0.023879172,0.017673729,0.01673113,0.007383691,-0.072265916,-0.04995774,-0.009111789,0.009661638,0.031262863,-0.015081583,0.0029456215,-0.0047522695,0.03361936,6.9222105E-4,-0.048700944,-0.038960755,-0.036447156,0.048072543,0.0071480414,0.003829308,0.013510584,0.037232656,0.021679774,0.041788552,0.011232637,-0.027963767,-0.0088368645,-0.02529307,-0.043359548,0.044930547,-0.018066479,-0.064410925,-0.023250772,-0.03236256,-0.04116015,-0.0848339,0.016495481,-0.065981925,0.011703936,-0.032833863,0.05121454,-0.010761337,-0.0038489455,0.032833863,-0.02670697,0.022151073,0.05906953,-0.010211488,0.030006064,0.038489453,0.02419337,-0.0026903343,-0.018930528,-0.055613335,-0.040845953,-0.009936564,0.021679774,0.0069123916,-0.002513597,0.0072265915,0.010682788,-8.885958E-4,0.019873127,-0.007697891,0.040845953,0.03314806,0.015395782,-0.030320264,0.010211488,0.024350472,-0.037232656,-0.012489435,0.015395782,-0.021993974,0.021993974,-0.012646535,0.03958915,-0.0113111865,0.0066767423,0.012725085,0.03361936,-0.036447156,-0.039117854,7.5604283E-4,-0.011468287,-0.012096685,-0.010682788,-0.01618128,0.032833863,-0.081691906,0.00864049,0.0064410926,0.007815716,-0.018223578,-0.003259821,-0.054984935,-0.00879759,-0.032833863,0.02670697,-0.07163752,0.015552882,-0.022151073,-0.036290057,-0.007815716,-0.021522675,-0.0073051415,0.015552882,-0.014296083,-0.005773418,0.048072543,-0.012960735,-0.026392769,0.01751663,-0.031891264,-0.0024055908,0.02623567,0.04116015,-0.0109184375,0.027806668,0.022465274,-0.009622363,0.04367375,0.043359548,0.06786712,-0.007972816,0.0032401837,-0.008365565,0.019087628,-0.021679774,-0.03173416,-0.023879172,-0.00895469,-0.02466467,0.009111789,-0.004693357,0.017359529,0.03393356,0.020265875,-0.022779474,0.028120866,-0.02560727,0.04053175,-0.052785538,0.014453183,0.04367375,0.06786712,0.00210121,0.0013353485,-0.017673729,0.046187345,0.027806668,0.023093672,-0.032833863,-0.02529307,0.014296083,9.622364E-4,-0.070694916,-0.04932934,0.039746255,-0.02670697,0.04147435,0.029063465,1.656912E-4,-0.009622363,-0.04367375,0.024821771,-0.035661656,-0.049015142,0.021051375,-0.052785538,-0.032990962,-0.015003032,0.017673729,0.019873127,-0.009936564,0.03958915,0.035661656,-0.00840484,0.01625983,0.030163165,-0.036447156,0.03456196,-0.027021168,0.012803635,-0.040060453,-0.006951667,0.05781273,0.015003032,0.021679774,-0.019637477,0.030163165,0.0135891335,-0.0064803674,0.020737175,0.009504539,0.032205462,-0.038646553,-0.04838674,-0.02529307,-0.018459229,-0.001276436,0.03503326,-0.017359529,0.011782486,0.011939586,-0.02545017,-0.06252573,-0.0012960734,-0.007383691,2.4792313E-4,0.002474322,0.013903334,0.05247134,-0.05906953,0.014845933,0.045558948,-0.0122537855,0.046187345,0.018459229,-0.037546854,-0.022779474,-0.01657403,-0.023093672,-0.030006064,0.018066479,-0.01586708,0.04053175,-0.027963767,0.027963767,-0.07132331,-0.02419337,-0.030163165,-0.010290038,0.011625386,-0.02592147,-0.0054199435,0.009897288,-0.056241732,0.014217533,0.0035543833,-0.058441132,-0.0032990961,0.010054388,-0.022308175,0.013353485,0.045244746,-0.022779474,-0.0061661676,-0.06692452,-0.006873117,-0.07635051,0.01751663,7.020398E-4,0.0017575541,-0.011546836,0.020894276,-0.0113111865,-0.014296083,-0.027963767,-0.01712388,0.011703936,-0.037389755,-0.026392769,0.03581876,0.016495481,-0.031891264,0.0014040796,0.0056163184,0.004536257,0.06064053,0.015631432,0.009897288,-0.0014237171,0.012646535,0.027963767,0.04116015,-0.036918458,0.011389737,-0.04116015,0.026392769,0.009818738,-0.0014237171,-0.0032794587,-0.02545017,0.035347458,0.02529307,0.031419963,0.031419963,-0.015552882,0.012803635,-0.0131963845,-0.021365575,0.031105764,-0.05090034,0.036290057,-0.014610283,-0.027178267,0.021208474,-0.037389755,0.0040649576,-0.0018851978,0.007776441,-0.073836915,-0.044302147,0.009308164,0.035347458,0.02497887,-0.0036329331,0.0860907,-0.04367375,0.015003032,-0.010604237,-0.011389737,0.004398795,-0.015631432,0.01625983,-0.015160132,0.023093672,0.009661638,0.011468287,0.012332335,0.004909369,0.011389737,0.036132958,-0.031262863,0.009347439,3.166543E-4,0.00404532,7.265866E-4,0.028592166,0.010839887,0.0050075566,0.004693357,0.019558927,0.00856194,0.011154087,0.03676136,0.027178267,-0.011075537,-0.039117854,-0.031891264,-0.013824783,0.010132938,6.627648E-4,0.0015219045,0.015552882,0.011939586,0.052785538,0.012410886,5.9648836E-4,0.0066767423,-0.009465264,0.05938373,0.04147435,0.0053806687,0.0065589175,0.037389755,0.044302147,0.013746234,0.06472512,0.04273115,-0.0015415419,0.018694878,0.009543814,0.009033239,-0.055299133,-0.023407873,-0.012096685,-0.007854991,0.0012420705,-0.015945632,0.0022386725,0.0035151083,-0.015003032,0.0066767423,0.06032633,0.027178267,0.03424776,-0.030791564,0.031891264,0.00856194,-0.006873117,-0.104314275,-0.01625983,0.03393356,0.01625983,-0.080120906,-0.027806668,-0.0063232677,0.010761337,0.053728137,-0.05781273,-0.0854623,0.065981925,-0.07477951,-0.008051366,0.005969793,0.008758315,0.031891264,-0.04367375,-0.01759518,-0.015160132,0.032990962,0.06503932,0.0032990961,-0.026392769,0.037389755,-1.9882945E-4,-0.04147435,-0.028906366,0.023564972,-0.015317232,0.0011193362,-0.013981883,-0.021836875,-0.022465274,0.0065589175,-0.0135891335,0.005969793,-0.0029848965,0.007854991,0.09425989,0.01759518,0.012332335,-0.011703936,-0.080435105,0.023093672,0.008522665,0.04995774,-0.072265916,0.012489435,-0.0022288535,-0.049643543,-0.004477345,0.017359529,-0.061583128,0.037389755,0.017673729,-0.10117228,-0.04053175,-0.005262844,-0.030163165,-0.0039274953,0.014060433,-0.043359548,-0.0023368597,0.011861036,-0.035661656,-2.0251148E-4,-0.0040649576,0.026392769,-0.00793354,-0.044302147,0.011075537,0.014767382,0.0035740207,0.0135891335,-0.012096685,-0.021522675,-0.046187345,-0.049015142,0.010682788,-0.010839887,-0.061583128,-0.004693357,-0.04273115,0.0074229664,0.038960755,-0.012646535,0.018773427,-0.009504539,0.01712388,-0.012567985,0.023250772,-0.0072265915,0.031262863,-0.05906953,-0.014845933,0.038646553,-0.012882185,-2.3442238E-4,-0.008051366,0.005027194,-0.037389755,-0.009308164,-0.026864069,-0.039117854,-0.009033239,0.02497887,0.054670736,0.006519642,-0.009740189,-0.03346226,-0.0072265915,-0.007815716,-0.04995774,0.03424776,0.0061661676,-0.023564972,0.009033239,0.0074229664,-0.04398795,0.04932934,5.940337E-4,-0.061583128,-0.028592166,-0.021522675,0.0066767423,0.05341394,-0.01657403,0.01712388,0.016495481,0.012018136,-0.00879759,0.010447138,-0.006716017,-0.022465274,0.011546836,0.016416932,-0.019637477,-0.07635051,0.02529307,0.0034954709,-0.005145019,-0.018145029,-0.018066479,0.021051375,0.019794576,-0.016495481,0.0045558945,-0.012410886,-0.037232656,9.376895E-4,0.10871307,0.03581876,-0.02592147,0.038646553,0.028435066,-0.010525688,-0.054984935,0.021051375,0.03251966,0.004654082,-0.011939586,0.014453183,-0.030320264,-0.047129944,0.055927534,-0.07572211,0.013117835,1.4850842E-4,-0.0028474343,0.047444142,0.029220566,-0.0041827825,-0.0135891335,-0.030006064,-0.00840484,0.034719057,-0.013746234,0.04053175,-0.020580076,0.03424776,0.028906366,0.004457707,0.038646553,-0.010839887,0.0067945668,0.038175255,0.009033239,0.0044184322,-0.022622373,0.0045166197,0.029063465,-0.044930547,-0.013274934,0.022779474,-0.019637477,0.003790033,0.0015611794,-0.019637477,-0.0064018173,-0.026392769,0.0055377684,-0.04932934,0.010132938,-0.09174629,0.052157138,-0.04995774,0.031891264,-0.02560727,0.083577104,0.027492467,0.0015611794,-0.028120866,0.002169941,-0.069438115,0.020265875,0.030791564,0.013824783,-0.022779474,-0.005262844,-0.015709981,-0.009740189,0.0056163184,0.016102731,-0.006873117,0.022779474,-0.03314806,0.012803635,0.05090034,0.04995774,-0.07132331,0.012018136],"inputTextTokenCount":23}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5f680535-2965-4c77-a763-f920db7ab10d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:21:23 GMT', 'content-type': 'application/json', 'content-length': '1124', 'connection': 'keep-alive', 'x-amzn-requestid': '5f680535-2965-4c77-a763-f920db7ab10d', 'x-amzn-bedrock-invocation-latency': '2350', 'x-amzn-bedrock-output-token-count': '236', 'x-amzn-bedrock-input-token-count': '1167'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176cd00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The purpose of the Crisis Management Team (CMT) in the event of an emergency is to ensure the safety of all personnel at the site, assess injuries and damage, evaluate options for business continuity, and inform customers about the crisis.\",\n    \"References\": [\n        {\n            \"Statement\": \"Ensure the safety of all personnel at the site\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page 7 - N/A - N/A\"\n        },\n        {\n            \"Statement\": \"The Crisis Management Team objectives, by priority, are as follows: Ensure the safety of all personnel at the site\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page 7 - N/A - N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1167,"generation_token_count":236,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e15303cdf695a29256a475
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 08:21:23] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?', 'conversation_id': '123456'}
INFO:__main__:Received query: Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a26d3422-173f-41f5-9006-e18e4e678f97', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:29:24 GMT', 'content-type': 'application/json', 'content-length': '370', 'connection': 'keep-alive', 'x-amzn-requestid': 'a26d3422-173f-41f5-9006-e18e4e678f97', 'x-amzn-bedrock-invocation-latency': '549', 'x-amzn-bedrock-output-token-count': '50', 'x-amzn-bedrock-input-token-count': '510'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017ab490>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?\"\n}","prompt_token_count":510,"generation_token_count":50,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?
INFO:__main__:Query stored successfully with ID: 66e154e4cdf695a29256a477
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5b83e4bd-ab5a-4ee6-bf01-2d47494b81a0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:29:25 GMT', 'content-type': 'application/json', 'content-length': '12759', 'connection': 'keep-alive', 'x-amzn-requestid': '5b83e4bd-ab5a-4ee6-bf01-2d47494b81a0', 'x-amzn-bedrock-invocation-latency': '74', 'x-amzn-bedrock-input-token-count': '36'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176d300>}
INFO:__main__:Response Data: {"embedding":[-0.040087312,0.04511992,-0.04511992,-0.06386204,0.036790088,0.01770089,0.118700095,0.022212882,0.06629157,0.008243062,0.016052278,-0.07878632,-0.011366748,-0.0029718408,0.0032972246,-0.015358126,-0.0135359755,0.02516303,0.012928592,-0.047896527,0.039740235,-0.0024837647,-0.023080572,-0.017440584,-0.06351496,-0.08329831,0.0010032674,0.012841823,0.108287804,-0.06351496,0.036095936,-0.032972246,0.010499057,0.028460255,0.020217193,0.016399354,0.029501485,0.0033839939,-0.027939642,0.030369176,0.0168332,-0.0044035306,-8.08037E-4,-0.0052929134,0.011887363,0.009544598,-0.0027332257,0.0035575319,-0.012494747,0.031063328,0.090933986,0.019870117,-0.040434387,0.07115064,-0.029501485,0.03817839,6.33821E-5,0.019089196,0.03540178,-0.0047072223,0.005987066,0.05969712,-0.027766103,-0.032625172,0.07080356,0.014403666,0.033492863,0.014230127,-0.028286718,-0.012928592,0.004143223,-0.04477284,-0.02984856,-0.0043818383,-0.048937757,-0.06837403,0.05518513,-0.026377797,0.0027223798,0.010195366,-0.012755054,-0.004273377,0.05796174,-0.02429534,0.029501485,-0.06351496,-0.019349502,0.028807333,-0.002906764,-0.03470763,0.003709378,0.015271356,-0.044425763,-7.26691E-4,-9.617471E-6,-0.04859068,-0.05969712,-0.042516846,-0.028460255,0.022039345,-0.041302077,0.06282081,0.033492863,0.02984856,-0.046508223,0.028807333,0.030716252,0.04199623,-0.0063341423,-0.054838054,-0.031583942,-0.0216055,-0.02238642,-0.043211,-0.007679063,-0.010932903,0.004143223,-0.036963623,0.006551065,-0.019089196,-0.01587874,-0.026898412,0.021171654,0.031583942,0.033145785,-6.1009505E-5,-0.017006738,-0.0016919969,0.019089196,-0.014316897,0.017440584,0.01587874,0.0135359755,-0.04963191,4.934991E-4,0.025857184,0.012841823,-0.009544598,0.032972246,0.022039345,0.015358126,-0.015705202,0.031236866,-0.01501105,0.033492863,-0.0059436816,-0.005987066,-0.021171654,-0.049978986,9.381906E-4,0.016052278,-0.022907035,0.07948047,-0.0070716795,0.021779038,0.0094578285,0.07566263,-0.03175748,-0.019089196,0.0336664,-0.027071951,0.0022993805,0.056226358,0.04581407,-0.01119321,-0.02429534,-0.046161145,0.0042516845,-0.016225817,-0.011627056,-0.020998115,0.020998115,-0.009935059,-0.042343307,-0.06490327,-0.027939642,-0.0047939913,-0.013796283,0.09718136,-0.026551336,0.0030803022,-0.029327946,-0.0036659932,-0.0022017653,0.020998115,-0.03557532,0.05692051,0.028460255,0.047202375,-0.011019672,0.023254111,0.03540178,-0.011453518,-0.034013476,-0.0067679877,-0.027766103,0.007592294,0.029501485,0.0091107525,-0.03088979,-0.010932903,0.02429534,0.009023984,0.023601187,0.0135359755,0.035054706,-0.005683374,0.044425763,0.07774509,0.009804905,0.0015618433,0.032625172,-0.019262735,0.0038612238,0.07635678,0.02533657,0.045466993,-0.008676907,0.08191001,0.022733497,0.03661655,1.4642281E-4,-0.07010941,0.0068547567,-0.061432503,-0.027766103,-0.018395044,0.019002426,0.011106441,0.028807333,-0.02984856,-0.012668285,0.04199623,0.024989493,-0.015358126,-0.004273377,0.03088979,0.017353814,-0.005813528,0.014056589,-0.05067314,-2.969129E-4,-0.0064209113,0.041302077,-0.020217193,0.06594449,-0.01127998,0.040955003,0.020477502,-0.05136729,0.08885153,0.05865589,0.03557532,-0.05032606,0.009544598,0.005683374,0.020477502,0.02429534,0.037137162,-0.008546754,-0.0035575319,0.04407869,-0.0091107525,0.0014316897,-0.042516846,0.018481812,-0.016572893,-0.0018221505,0.020043656,-0.003405686,0.031236866,-0.027766103,-0.01071598,-0.0094578285,-0.0468553,-0.014403666,0.009587983,0.0028633794,-0.036790088,0.037831314,0.03626947,-0.01770089,-0.019870117,0.017093508,0.027071951,0.0038612238,-0.0045770686,0.0026464567,0.013188899,-0.021258423,-0.016225817,0.01119321,-0.0023102264,0.032104556,-0.0065944493,0.016572893,9.815751E-4,0.044425763,0.0067679877,-0.005596605,0.01071598,0.027939642,-0.025683645,-0.0041649155,-0.032972246,0.052061442,-0.01492428,0.06802695,-0.041302077,0.023601187,0.0069415257,-0.0033839939,-0.013449206,0.012060901,0.014230127,0.022907035,0.023080572,0.026551336,0.036790088,-0.071844794,-0.032278094,0.0011442672,-0.017874429,0.060391273,0.028460255,0.0216055,0.0010791903,-0.036963623,0.0034273784,-0.010629212,-0.009718136,0.0019631502,-0.011540286,0.040955003,-0.0016919969,-0.015271356,0.0135359755,-0.056573436,-0.015618433,0.019783348,-0.074274324,0.025683645,0.01080275,-0.020217193,-0.010108597,-0.02255996,-0.08711615,-0.019523041,-0.017006738,0.00210415,-0.0025271492,0.010325519,-0.016139047,-0.025857184,-0.007375371,-0.018221505,-0.03557532,0.029675024,4.8807604E-5,-0.03175748,0.016486123,-0.0027332257,0.032625172,0.008546754,-0.022212882,0.008850445,0.0071584485,-0.029501485,-0.011019672,-0.029675024,-0.04581407,0.0373107,-0.020824578,-0.051020216,0.0015509971,0.0091107525,0.02342765,0.036790088,0.0012798439,0.0040781465,-0.019262735,-0.014577204,0.07913339,-0.08399246,0.010932903,-0.0017679199,-0.0034490707,-0.023774726,0.0168332,0.03817839,0.034013476,-0.024989493,-0.008633522,-0.033319324,-0.0013991513,0.0137095135,-0.07878632,0.005596605,0.03175748,0.024642417,-0.01492428,0.032798707,-0.042516846,-0.028460255,-0.036790088,-0.031063328,0.004034762,0.062126655,-0.040087312,0.035054706,0.013622744,0.017961198,0.09440475,-0.017267045,-0.022907035,0.024815954,0.0023102264,0.020477502,-0.002505457,0.043558076,0.010629212,-1.0574981E-4,0.038872544,-0.034013476,0.02620426,-0.04581407,0.036790088,8.3515234E-4,-0.062473733,0.0030803022,-0.026898412,0.029154409,0.032451633,0.036095936,-0.012668285,-0.027245488,0.0216055,0.01080275,0.0025813798,0.054490976,0.012581515,-0.013275668,-0.0024512263,0.026898412,0.009154137,-0.01071598,0.035228245,-0.057267588,-0.027071951,0.014230127,0.025510108,-0.054838054,0.03453409,-0.028286718,-0.0028633794,0.0039046083,-0.01127998,-0.07288602,0.0042516845,-0.009197522,0.053796824,-0.024989493,0.029327946,-9.761521E-4,-0.0027006874,0.015791971,-0.0046421452,-0.043558076,0.0020607654,-0.036095936,-0.03765778,-0.0011171518,0.007982755,0.011627056,0.04199623,0.03644301,0.010585827,-0.01865535,-0.01127998,-0.009327675,-0.013275668,-0.0051627597,-0.012841823,-0.04286392,-0.042516846,-0.0087636765,-0.021258423,-0.03921962,0.005683374,-0.019089196,-0.0035792242,0.011453518,-0.0036659932,-0.023601187,-0.057614665,0.042343307,0.01214767,6.372104E-4,-0.039740235,-0.028807333,-0.033839937,0.0011063056,0.019002426,-0.009587983,-0.020651039,0.0022126113,-0.042343307,0.032278094,-0.008503369,-0.031410404,7.971909E-4,-0.048937757,-0.032625172,-2.7522066E-4,0.039740235,-0.01492428,-0.039566696,-0.014143359,-0.038872544,-0.04581407,-3.7419162E-4,0.017180277,0.047896527,-0.049978986,0.02533657,0.0078092166,-0.01770089,-4.8807604E-4,-0.002906764,0.029675024,-0.016746432,-0.0048807603,-0.020651039,-0.033492863,0.016572893,-0.011887363,0.021779038,-0.046508223,0.018915657,-0.043211,-3.0233597E-4,-0.055532206,-0.022907035,0.03852547,-0.041302077,-0.012928592,0.0092842905,0.0071150637,-0.019175965,-0.0026464567,0.02620426,-0.014056589,-0.01214767,-0.031236866,0.048937757,0.03193102,-0.04477284,0.01492428,0.027592566,0.019523041,-0.0017787659,0.026377797,-0.040955003,-0.00563999,-0.03175748,-0.031583942,-0.034881167,0.0092842905,-0.04407869,-0.032625172,0.055879284,0.018395044,0.026377797,-0.029154409,0.002429534,0.02533657,-0.052061442,-0.024468878,0.020477502,-0.065250345,-0.047896527,0.01127998,0.045466993,0.015791971,0.0031236866,0.020477502,0.004446915,0.010932903,0.0013015361,0.011540286,-0.01310213,0.022907035,0.040087312,-0.023774726,-0.008112908,-0.027245488,0.06802695,-0.036963623,0.012755054,-0.05344975,0.032278094,0.022733497,-0.020043656,-0.0020499192,-0.025510108,-0.023774726,0.017267045,-0.013796283,0.040087312,0.013188899,-0.002657303,0.009414445,0.019870117,-0.0066812187,-0.02516303,0.019783348,0.04511992,-0.046508223,0.0020065347,-0.023948263,0.001865535,0.012755054,-0.015358126,0.0468553,0.011106441,0.009935059,-9.815751E-4,0.032451633,0.0039263004,-0.0049675293,-0.017093508,0.047549453,0.013883051,0.09856967,0.039566696,0.006811372,-0.016399354,-0.007375371,4.4740303E-4,5.8569125E-4,0.008980599,-0.044425763,-0.0013666129,-0.04581407,-0.02342765,1.0464824E-5,-0.0077224476,0.018395044,-0.024121802,-0.01119321,-0.05136729,-0.01596551,-0.032104556,0.027766103,0.0058569126,0.02429534,-0.09926382,-0.0216055,0.0039913775,0.023254111,-0.0062473733,0.0373107,0.040087312,0.0030152253,0.005509836,0.01492428,0.01770089,0.0019848426,-0.062473733,-0.039566696,0.025683645,-0.0018329966,-0.015358126,0.006073835,-0.008156293,0.014490435,-0.02984856,0.049284834,0.0046421452,0.02143196,-0.01874212,0.04581407,0.0051627597,-0.0012364592,0.022039345,0.00563999,-0.016312586,-0.013449206,0.013622744,0.015358126,-0.013796283,-0.0018980735,0.021779038,0.015184588,0.004772299,-6.4534496E-4,0.0050542983,0.036790088,-0.012321209,0.0133624375,0.073927246,0.03817839,0.0014099975,-0.014056589,0.012494747,-0.062126655,-0.04477284,0.026377797,0.022039345,-0.02238642,-0.07288602,0.03852547,-0.07635678,-0.055532206,0.03835193,-0.053102672,0.012928592,0.004511992,0.05518513,0.01960981,-0.032625172,0.008807061,-0.028460255,0.019349502,0.027071951,3.3758592E-4,-0.02429534,-0.0047072223,-0.006811372,-0.027071951,0.0026030722,-0.046161145,-0.032798707,-0.008459984,-0.019870117,-0.010629212,-0.0137095135,-0.0023861495,0.004772299,0.055879284,0.037137162,0.027939642,-0.0092842905,0.027939642,0.026377797,0.018568581,-0.02238642,0.004772299,0.06073835,0.044425763,0.009197522,0.05969712,0.006637834,0.01882889,-0.009023984,-0.010585827,0.0016052278,-0.040955003,0.045466993,0.042516846,-0.005813528,0.0025488415,0.0135359755,-0.02620426,0.01770089,0.0036876856,0.042516846,-0.025857184,0.012234439,0.08399246,0.03817839,-0.0077224476,0.0017245354,-0.013622744,0.010585827,-0.024121802,-0.0336664,0.065250345,0.03540178,0.019870117,-0.04199623,-0.0029501484,-0.06872111,0.025683645,0.05969712,0.048937757,-0.022907035,-0.015531664,0.028113179,1.6540354E-4,-0.029154409,-0.038699005,-0.0468553,-0.009154137,-0.022212882,0.006073835,-0.04963191,0.039740235,0.05136729,0.0135359755,-0.008503369,-7.5922936E-4,0.005900297,0.035054706,-0.012234439,0.0050542983,-0.024121802,-0.01119321,-0.0047289142,0.01882889,0.025683645,0.029154409,-0.07878632,0.073927246,0.009935059,0.009935059,0.01119321,0.016312586,-0.0468553,-0.010932903,0.039740235,-0.03661655,0.001865535,-0.004945837,0.026724875,0.018568581,0.04373161,-0.016225817,-0.039740235,-0.052061442,0.025857184,-0.013969821,-5.938258E-4,0.020998115,-0.008503369,-0.0084166,-0.03453409,0.024121802,0.019523041,-0.013622744,-0.015358126,-0.047549453,-0.027939642,0.017874429,-0.002678995,-0.002754918,0.0060304506,0.023254111,0.007375371,-0.043558076,0.032451633,0.040087312,-0.011453518,0.084686615,-0.010325519,-0.016746432,0.006377527,-0.05344975,0.022907035,0.023254111,0.04963191,0.08885153,0.002505457,-0.027071951,-0.011713825,-0.0039263004,-0.027766103,-0.002180073,-0.017006738,-0.0027223798,0.031410404,-0.019089196,-0.05136729,-0.08572784,0.010195366,0.0025271492,-6.643257E-4,-0.001854689,0.04477284,-0.0020499192,-0.05136729,-0.019089196,0.046161145,0.021865806,-0.05969712,0.026030721,-0.041649155,0.053796824,0.011453518,-8.188831E-4,-4.9621065E-4,0.060391273,0.052755594,-0.03175748,-0.004186608,-0.00889383,-0.008459984,0.015618433,-0.015618433,0.040434387,0.011366748,-3.958839E-4,-0.014490435,-0.002906764,-0.039566696,-0.04859068,-0.0031236866,0.002819995,0.011540286,-0.013015361,-0.021171654,4.3384536E-4,-0.023254111,0.002017381,-0.0468553,-0.0016486123,1.8980734E-4,0.07948047,0.009240906,-0.006724603,0.0300221,-0.030195637,-0.0017787659,-0.020043656,-0.00373107,0.07878632,-0.012494747,-0.016486123,0.016486123,-0.010585827,0.05136729,-0.026551336,0.0024620725,-0.013449206,-0.020651039,-0.020651039,0.004772299,-0.046161145,0.005509836,-0.007375371,8.1346004E-4,-0.041649155,-0.023601187,0.033319324,0.0036009166,-0.032625172,1.1049499E-4,-0.013188899,0.008720292,0.017267045,0.030195637,-0.039740235,0.0029284563,0.01770089,-0.009761521,-0.016225817,-0.05136729,-0.05969712,-0.017440584,0.038872544,-0.00793937,-0.01596551,0.032625172,-0.029327946,0.01865535,0.010499057,0.035228245,-0.045466993,0.009804905,0.014577204,-0.02255996,0.0017679199,7.212679E-4,-0.04859068,0.004533684,-0.02255996,-0.03175748,0.0030152253,0.0018438428,-0.036790088,-0.0069415257,-0.04199623,-0.02533657,0.04407869,-0.035054706,0.004945837,-0.0059436816,0.0027223798,0.015097818,-0.07253894,0.025510108,-0.005314606,0.034360554,0.010195366,-0.034013476,0.029675024,0.017353814,0.040087312,0.069762334,0.017267045,0.019436272,0.011713825,-0.009587983,0.0032104556,-0.002657303,0.018308274,-0.022212882,0.025683645,-0.0012798439,-0.00937106,-0.0064209113,-0.0022126113,0.040781464,0.03939316,-0.011713825,-0.030542713,-0.013015361,0.035228245,0.03661655,0.012841823,0.012060901,0.02516303,-0.005314606,0.033319324],"inputTextTokenCount":36}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8e9bd983-fb9e-494e-a3f4-e093843cca62', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:29:29 GMT', 'content-type': 'application/json', 'content-length': '1746', 'connection': 'keep-alive', 'x-amzn-requestid': '8e9bd983-fb9e-494e-a3f4-e093843cca62', 'x-amzn-bedrock-invocation-latency': '3301', 'x-amzn-bedrock-output-token-count': '334', 'x-amzn-bedrock-input-token-count': '1178'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176de70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Yes, sabotage or vandalism to building, computer equipment, and local communication facilities can be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building. This can be achieved through measures such as frisking employees at entry and exit points, performing background checks on prospective employees, restricting access to critical IT equipment, and monitoring visitors. Additionally, regular monitoring of the premises by security guards and cameras can help prevent theft of equipment.\",\n    \"References\": [\n        {\n            \"Statement\": \"All employees frisked at the time of entry and exit\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 18\"\n        },\n        {\n            \"Statement\": \"Access to all critical IT equipment is restricted to named users\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 18\"\n        },\n        {\n            \"Statement\": \"The site is manned 24x7 by security guards as well as monitored by security cameras to prevent theft of equipment\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 18\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1178,"generation_token_count":334,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e154e9cdf695a29256a478
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 08:29:29] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Who should be immediately notified in case of loss or theft of equipment or data?', 'conversation_id': '123456'}
INFO:__main__:Received query: Who should be immediately notified in case of loss or theft of equipment or data?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '39cc61a9-5463-43a5-baf5-4a956efcdb9f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:45:29 GMT', 'content-type': 'application/json', 'content-length': '226', 'connection': 'keep-alive', 'x-amzn-requestid': '39cc61a9-5463-43a5-baf5-4a956efcdb9f', 'x-amzn-bedrock-invocation-latency': '400', 'x-amzn-bedrock-output-token-count': '31', 'x-amzn-bedrock-input-token-count': '671'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017ab310>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"Who should be immediately notified in case of loss or theft of equipment or data?\"\n}","prompt_token_count":671,"generation_token_count":31,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: Who should be immediately notified in case of loss or theft of equipment or data?
INFO:__main__:Query stored successfully with ID: 66e158a9cdf695a29256a47a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '6eb559ce-8dbb-4103-9f7e-51c77d07f717', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:45:30 GMT', 'content-type': 'application/json', 'content-length': '12724', 'connection': 'keep-alive', 'x-amzn-requestid': '6eb559ce-8dbb-4103-9f7e-51c77d07f717', 'x-amzn-bedrock-invocation-latency': '60', 'x-amzn-bedrock-input-token-count': '17'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0174a230>}
INFO:__main__:Response Data: {"embedding":[-3.8339285E-4,-0.015136548,0.021828497,-0.005696122,0.06341417,0.0014539052,0.0213505,-0.025333801,0.017446864,-0.06182085,-0.005337625,-0.008524267,8.3649345E-4,-0.04333833,-0.029635768,0.03282241,-0.0029476436,-0.017606195,0.03744304,0.016729869,0.018641854,0.041107677,-2.9127896E-4,0.031707086,-0.031866416,0.004162551,-0.025493134,-0.019119851,0.067556806,-0.07679807,0.08603933,-0.025652466,0.015773878,-0.009838756,0.018641854,0.03983302,0.0023999396,0.005735955,0.04333833,3.435598E-4,-0.005257959,0.03744304,-2.9376853E-4,0.013463561,-0.026927123,0.05257959,0.008842931,-0.014977216,-0.02437781,0.026289795,0.0068512796,0.07807272,-0.028361112,0.04047035,-0.009201428,0.02437781,-0.023899812,0.0595902,0.00804627,-0.030751092,-0.005218126,0.01975718,0.009679425,-0.007568274,0.03600905,-0.0014738218,0.04811829,0.012905899,-0.06500749,-0.048436955,-0.014180556,-0.07488608,-0.04588764,0.020235175,-0.040151685,0.0065326155,0.024218477,0.04525031,0.047480963,-0.020394508,0.02517447,0.005656289,0.042063672,0.030273097,0.05034894,-0.016490871,0.014817884,-0.006970779,0.02676779,-0.011870241,-0.020235175,0.0064131166,0.0387177,-0.00553679,-0.016331539,-0.022306493,-0.040151685,-0.025652466,0.009201428,0.057678215,-0.027883116,0.07679807,-0.018482523,0.033300407,-0.03664638,-0.003983302,-0.001170095,-0.009440426,0.012268571,-0.031866416,0.0809407,-0.008723432,0.013144897,-0.017765528,0.05417291,-0.03122909,0.058634207,-0.018482523,-0.032344412,-0.0342564,0.051623598,-0.007369109,-0.03505306,-0.025652466,0.030751092,0.010276919,0.023899812,-0.024218477,-0.049392946,-0.024218477,0.017367197,-1.381708E-4,-0.040151685,0.012666901,0.04333833,0.023740482,0.020872504,-0.049074285,0.052898254,-0.0342564,-0.023899812,0.01752653,-0.017606195,-0.06341417,-0.0083649345,-0.012427903,0.013782226,0.010037921,-0.041107677,0.042063672,0.023421817,-1.4875144E-4,0.03808037,0.035371725,0.07679807,-0.062139515,0.10834582,-0.01935885,-0.033300407,0.007687773,0.034097068,0.0017128199,0.059271537,0.03282241,-0.02517447,-0.03664638,-0.03664638,0.012029572,-0.023262484,-8.96243E-4,-0.0070106117,-0.02899844,-0.04333833,-0.009201428,0.0061342856,-0.061183523,-0.026608458,0.009201428,-0.03202575,2.8505505E-4,0.046843633,-0.013463561,-0.020235175,0.016968867,0.02214716,-0.028520444,0.093687266,-0.027883116,-0.04333833,-0.065326154,-0.0042223004,-0.010436252,-0.007528441,-0.03218508,-0.066282146,-0.055128902,0.019677512,0.007488608,-0.043975655,0.0024696474,-0.012587235,0.033778403,0.01951818,0.033778403,-0.051304933,-0.0019119851,-0.01975718,0.026130462,-0.004879545,-0.038239703,0.037921038,-0.027723784,-0.025333801,0.05640356,0.04333833,0.03505306,0.016968867,0.015136548,0.034097068,-0.025652466,0.027405119,-0.015295881,0.0019020268,-0.012268571,-0.022784488,0.01449922,-0.06787547,0.02899844,-0.0066521144,0.06500749,0.06022753,-0.007847105,0.021987827,-0.012188905,-0.014658552,0.01975718,-0.009559926,-0.049074285,-0.003863803,0.030273097,-0.048436955,-0.03983302,0.013463561,0.020075843,-0.017048534,-0.041745007,-7.767439E-4,-0.0028679776,-0.009838756,-0.041426342,0.007209777,0.028361112,-0.013224564,-0.015853543,0.017048534,0.004441382,-0.023581149,-0.027405119,-0.01951818,-0.027405119,0.039355025,-0.005417291,0.0022505657,-0.0076081073,-0.03808037,0.021669164,-0.015455212,-4.2322587E-4,0.019119851,-2.1783684E-4,0.007369109,-0.067556806,-0.013941558,-0.028520444,-0.046843633,-0.003863803,0.038399033,0.025652466,-0.020235175,0.056722224,0.042063672,0.02676779,0.06086486,-0.020872504,0.0077674394,0.011392244,0.037761703,-0.056722224,0.011312578,-3.9833022E-4,4.8795453E-4,-0.04047035,-0.01067525,-0.01951818,-0.010754916,-0.0015236131,-0.007329276,-0.01975718,-0.029317103,0.05417291,0.003385807,0.042063672,-0.015136548,0.025493134,0.018482523,0.010993914,0.030591762,0.033937734,-0.03138842,-0.0019418598,-0.033778403,0.013144897,-0.042701,0.0010605542,-0.027883116,0.007528441,-0.0060546193,0.0027086455,0.025652466,-0.023899812,-0.017207865,7.269526E-4,-0.043019664,0.042063672,-0.012029572,0.01792486,-0.020075843,-0.08030337,-0.037124377,-0.02820178,-0.076479405,0.058634207,0.0062139514,0.013383895,0.035371725,0.041426342,-0.0387177,0.0387177,-0.049074285,0.015614545,-0.046206307,0.009599758,0.035690386,-0.024696473,-0.059908863,-0.001991651,0.01752653,0.0015534878,0.03903636,-0.010914248,-0.0013543228,-0.021031836,-0.0011203038,-0.028520444,-0.064688824,0.01991651,-0.02214716,0.01951818,-0.012109239,-0.010993914,-0.048436955,-0.029317103,0.039355025,-0.01410089,0.023581149,-0.03441573,0.03951436,-0.015216215,-0.029317103,0.029317103,-0.024059145,0.037602372,-0.013941558,0.025652466,0.0016729869,0.008245436,0.004879545,0.014817884,-0.029157773,-0.011949906,-0.030273097,-0.0070106117,0.014578886,0.0062936177,-0.03680571,-0.005696122,-0.00975909,-0.03808037,0.03680571,-0.032344412,0.03505306,-0.031707086,-0.032981742,-0.06883146,0.0015236131,-0.008205603,-0.046524968,0.008404768,0.0387177,0.03951436,-0.01935885,0.010595583,0.028839108,-0.046206307,0.0063334503,-0.0595902,0.029954432,0.0083649345,0.009002263,-0.084127344,-0.018960519,-0.028361112,-0.007528441,-0.020394508,-0.008444601,0.011631242,-0.04525031,0.005815621,0.032663077,-0.0064529497,-0.017367197,0.0010954081,0.017207865,-0.029317103,0.028839108,-0.04047035,-0.006891113,-0.023581149,0.008165769,-0.0051384596,-0.007568274,0.017207865,0.050030276,-0.00724961,-0.025015138,-0.0085641,-0.017287532,-0.016809536,-0.0025692298,-0.02437781,0.015136548,0.0042422167,0.03441573,0.038399033,0.07807272,-0.048436955,0.07297409,-0.045568977,0.008404768,0.003385807,-0.0076479404,-0.021669164,0.053216916,0.042063672,-0.041107677,0.021669164,-0.020713171,-0.009121762,0.005735955,-0.012985565,0.031866416,0.0028878942,-0.0076081073,0.01107358,-0.0021211084,-0.04811829,-0.01752653,-0.036327716,0.00987859,0.03951436,0.015853543,-0.0022704822,0.058634207,0.05735955,0.013622893,0.065963484,0.021669164,-0.020713171,0.010276919,-0.014817884,-0.021987827,0.0031468088,-0.03808037,-0.015295881,-0.025333801,-0.02676779,0.03680571,-0.015933208,0.014817884,0.058634207,0.013782226,-0.033619072,0.012587235,-0.012109239,-0.055128902,0.016968867,0.0040430515,0.024537142,-0.046206307,-0.017207865,-0.036965046,0.0045011314,-0.045568977,-0.005377458,-0.007568274,0.01107358,-0.017287532,0.012188905,-0.023421817,-0.011631242,0.01609254,0.011153246,0.039355025,-0.01991651,-0.02294382,0.010834582,0.018562188,-0.024696473,-0.037602372,0.029157773,-0.043656994,-0.0056164563,0.018163858,-0.0068114465,-0.03903636,0.012826233,0.042701,-0.03951436,0.004879545,-0.0029675602,-0.004720213,0.0064927824,0.0036845545,-0.046843633,0.020713171,-0.019040184,0.0068114465,-0.050986268,-0.006014786,-0.021031836,0.0042621335,-0.007130111,-0.018482523,0.041745007,-0.004122718,-0.014021223,0.02676779,-0.005815621,0.046206307,-0.018004525,0.010754916,0.004939295,0.007488608,0.0023501483,0.046524968,-0.0010008047,-0.016411206,0.050030276,0.015375546,-0.030591762,0.01609254,0.02899844,0.0045011314,0.020713171,0.03521239,0.004720213,-0.015933208,-0.01449922,-0.020235175,-0.02517447,0.0387177,0.0039434694,0.059271537,-0.04429432,0.008165769,0.011710908,-0.027564451,-0.013224564,0.012109239,-0.015216215,0.0030273097,0.017685862,0.004720213,8.613891E-4,-0.011232913,0.013782226,0.052260924,0.010834582,0.008444601,0.033619072,-0.031866416,0.031866416,0.053216916,-0.062139515,-0.0774354,-0.042063672,0.0387177,0.048436955,-0.018960519,-0.05640356,0.04525031,-0.03202575,0.04588764,0.013383895,-0.0297951,-0.026927123,0.013383895,-0.0014738218,-0.008325102,-0.03138842,0.05194226,-0.019677512,0.084127344,-0.051304933,0.051304933,-0.020075843,0.0016729869,-0.07902872,-0.023103153,-0.008524267,-0.02676779,-0.0057757883,-0.020713171,0.033459738,-0.018641854,-0.032981742,8.613891E-4,0.024059145,-0.013941558,0.0036845545,0.04971161,0.016331539,-0.03505306,0.017845193,-0.02676779,0.021509832,0.0010107629,-0.0034057233,0.04333833,-0.011551577,-0.017765528,-0.010117588,0.0030273097,-0.020713171,0.016490871,-0.004919378,-0.03489373,0.06946879,-0.036965046,-0.0029675602,8.265352E-4,0.03138842,-0.024696473,0.009201428,-0.01107358,0.03489373,0.004321883,-0.040789016,-0.03489373,-1.9543077E-4,0.007169944,-0.00936076,0.03489373,0.0012945732,0.033459738,0.0297951,-0.0044015488,0.03664638,-0.038239703,-0.018004525,-0.009042096,-0.033937734,-0.015933208,-0.0025692298,0.018482523,-0.03505306,-0.030751092,-0.03282241,0.0045011314,0.04811829,-0.0117905745,0.028361112,0.0076479404,-0.0011999698,-0.014578886,-0.008763265,-0.0027086455,0.013702559,-0.041107677,0.0043417993,0.027564451,-0.0297951,-0.0024397725,0.01147191,-0.016172206,-0.03202575,0.023899812,0.027723784,0.0088030975,0.048436955,0.05034894,0.02676779,0.037761703,-0.01410089,0.036965046,-0.016650204,0.002141025,-0.012985565,-0.005656289,0.051304933,-0.025811799,0.025333801,-0.03043243,-0.06500749,0.008006438,-0.011710908,-9.6097164E-4,-0.009520092,-0.00804627,0.0038040536,-0.024855806,0.0034455564,-0.020075843,-0.03202575,8.315143E-4,0.03808037,0.017765528,0.025811799,0.026289795,-2.763416E-4,-0.013782226,0.03218508,0.016012875,-0.009042096,-0.067556806,0.010595583,-0.06022753,0.008683599,-0.020394508,-0.05353558,0.024059145,-0.015534879,0.046524968,0.018243523,-9.709299E-4,-0.0014439471,0.0050189607,-0.05257959,0.00987859,-0.0031468088,0.043656994,0.002768395,0.053216916,-0.026449127,-0.014658552,0.017207865,0.012666901,-0.049074285,0.009440426,0.052260924,0.004799879,-0.04333833,0.028361112,0.0026488958,-6.099431E-4,0.026130462,0.0017327365,-0.015534879,0.034575064,0.04047035,0.05257959,0.02676779,0.06182085,-0.030113764,-0.012188905,0.039355025,0.0011352411,-0.009081929,0.053854246,0.0061741183,-0.014180556,0.0041028014,0.01449922,0.035371725,-0.022625156,0.031707086,0.01569421,-0.005337625,0.0057757883,-0.026130462,0.015933208,-0.0060546193,-0.103247195,-0.021191167,0.074567415,0.027405119,-0.082215354,0.045568977,0.058634207,0.019677512,-0.0092412615,-0.00975909,0.027086455,0.041107677,-0.020235175,0.05353558,0.028042447,-0.0052977917,0.04429432,-0.03441573,0.013782226,0.009559926,-0.014180556,0.00553679,-0.012507569,0.01935885,0.021987827,0.005496957,-0.039355025,-0.010117588,0.038399033,0.004939295,0.0010655334,-0.036965046,0.04588764,-0.055447567,-0.007687773,0.01991651,0.019199517,-0.014021223,-0.026289795,-0.03282241,0.011551577,-0.0048397123,0.021191167,-0.06245818,0.015216215,0.038399033,0.050986268,-0.028042447,-0.03983302,-0.066282146,-0.024537142,0.014339888,-0.0085641,-0.012666901,-0.056084894,-0.020872504,-0.05417291,-0.06787547,-0.022784488,0.0898633,-0.016012875,0.0809407,-0.04429432,-0.007966604,0.0026688124,-0.024537142,0.04333833,0.034097068,0.03664638,0.033619072,-0.043656994,0.0595902,-0.005855454,-0.030910425,-0.0063334503,0.024696473,0.007926771,0.053216916,0.031707086,0.01067525,-0.0018422772,-0.0036048885,0.038239703,-0.047799625,0.034097068,-0.01951818,0.023103153,-2.1783684E-4,0.025811799,0.01147191,0.019040184,-0.008404768,-0.067556806,0.018482523,0.00724961,-0.005974953,0.03282241,0.06500749,-6.0496404E-4,0.06564482,0.016570536,0.0035650556,-0.014738218,0.0032663078,-0.020235175,0.021191167,-0.0049791276,0.082852684,-0.023740482,0.005337625,-0.0062537845,-0.0039036362,-0.030910425,-0.058634207,0.054810237,0.02214716,-0.013622893,0.04811829,0.020872504,-0.013543228,0.0012547402,0.002150983,-0.009599758,0.03600905,0.008723432,0.040151685,0.020553838,0.03138842,0.034575064,0.013383895,0.01609254,-0.018243523,0.0014837801,-0.009838756,0.043656994,-0.025493134,0.034097068,-0.074567415,0.041745007,0.029157773,0.007209777,-0.07010612,0.024696473,0.0022804404,0.015933208,-0.015136548,-0.036965046,0.02597113,0.0016331539,0.03505306,-0.036965046,0.032503746,-0.023581149,-8.315143E-4,0.015933208,0.014738218,-0.022306493,-0.03983302,-0.002688729,-0.016650204,-0.007926771,-0.019040184,-0.007488608,-0.013782226,-2.3152944E-4,0.009042096,0.0076479404,0.022784488,-0.030751092,-0.0068512796,0.043019664,0.010595583,0.011232913,-0.052260924,0.0117905745,0.013224564,-0.029635768,0.035371725,0.019677512,0.0027086455,-0.0063732835,-0.0043417993,0.004799879,-0.012029572,-0.07138077,-0.019119851,-0.0103565855,0.005735955,0.03584972,-0.0051782927,4.406528E-4,-0.008603932,-0.012507569,-0.043975655,0.0024696474,0.0064131166,0.013383895,-0.075523406,0.064688824,-0.0025891464,-0.017207865,-0.009121762,0.013463561,0.020872504,-0.04333833,0.0018621938,0.024855806,0.08030337,7.3193177E-4,-0.051304933,0.03600905,-0.015933208,0.021669164,0.047162298,-0.023103153,0.043975655,0.036965046,0.016570536,-0.010117588,-0.023740482,0.0023601064,0.04333833,0.01951818,0.0076081073,0.03505306,0.020394508,0.015853543,-0.029157773,-0.004162551,0.01951818,-0.035690386,-0.02214716],"inputTextTokenCount":17}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '36a29798-dc36-477c-8725-59dd5d14ebdd', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 08:45:32 GMT', 'content-type': 'application/json', 'content-length': '1095', 'connection': 'keep-alive', 'x-amzn-requestid': '36a29798-dc36-477c-8725-59dd5d14ebdd', 'x-amzn-bedrock-invocation-latency': '2135', 'x-amzn-bedrock-output-token-count': '214', 'x-amzn-bedrock-input-token-count': '1085'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0174b280>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"In case of loss or theft of equipment or data, the following individuals should be immediately notified: immediate supervisor, Admin, and IT department.\",\n    \"References\": [\n        {\n            \"Statement\": \"Immediately report the incident to your immediate supervisor, Admin, and IT department\",\n            \"source\": \"Gemini - Asset Management Policy and Procedure v1.9_India.pdf - Page 5\"\n        },\n        {\n            \"Statement\": \"If an employee's computing device be lost or stolen, the employee MUST: (i) Immediately report the incident to his/her immediate supervisor, Admin, and IT department;\",\n            \"source\": \"Geimini - E POLICY V1.6_India.pdf - Page 6\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Who should be immediately notified in case of loss or theft of equipment or data?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1085,"generation_token_count":214,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e158accdf695a29256a47b
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 08:45:32] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster?" ', 'conversation_id': '123456'}
INFO:__main__:Received query: How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster?" 
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ee72bccd-ef36-44ba-b155-41bf005cd165', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 09:17:33 GMT', 'content-type': 'application/json', 'content-length': '375', 'connection': 'keep-alive', 'x-amzn-requestid': 'ee72bccd-ef36-44ba-b155-41bf005cd165', 'x-amzn-bedrock-invocation-latency': '618', 'x-amzn-bedrock-output-token-count': '53', 'x-amzn-bedrock-input-token-count': '655'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0174a950>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster, considering measures to prevent sabotage or vandalism and protocols for reporting loss or theft of equipment or data?\"\n}","prompt_token_count":655,"generation_token_count":53,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster, considering measures to prevent sabotage or vandalism and protocols for reporting loss or theft of equipment or data?
INFO:__main__:Query stored successfully with ID: 66e1602dcdf695a29256a47d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '80325bf5-d0dc-4815-a440-b08a7906bfed', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 09:17:34 GMT', 'content-type': 'application/json', 'content-length': '12759', 'connection': 'keep-alive', 'x-amzn-requestid': '80325bf5-d0dc-4815-a440-b08a7906bfed', 'x-amzn-bedrock-invocation-latency': '66', 'x-amzn-bedrock-input-token-count': '39'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0174ad40>}
INFO:__main__:Response Data: {"embedding":[-0.011081182,0.08069883,0.023851871,-0.013317295,0.05048646,0.021168536,0.041740775,0.031802494,0.036771636,0.033988915,-0.01351606,-0.008447538,0.016100014,-0.009739514,-0.0094413655,-4.0374263E-4,-0.055256836,0.031007433,0.038162995,-0.0010994222,-0.0055157454,7.857453E-4,0.033193853,0.03975312,-0.026833355,-0.07115808,-0.016596926,0.033790153,0.05724449,-0.037367932,0.06400252,0.024746317,0.003142981,-0.013416678,0.05366671,0.036175337,0.029616075,0.042734604,-0.025441997,-0.009838897,-0.04472226,0.05644943,-9.192909E-4,0.081096366,0.05962968,0.0038510833,0.012919764,0.01028612,-0.011329639,0.032200027,0.06678524,0.007503401,-0.03160373,0.03021237,-0.054461773,0.044921026,0.002894524,-0.03875929,0.01987656,0.006608956,-0.020075325,0.06519511,-0.0069071045,-0.037367932,-0.03339262,0.023354957,0.07314574,0.07354327,-0.08944452,-0.0045964546,0.0026957584,-0.051281523,0.010783033,0.018584583,-0.02802595,-0.02057224,0.054461773,-0.0092922915,-0.016100014,0.046312384,-0.007851241,0.05366671,0.02236113,-0.0012795535,0.05366671,-0.005863585,0.012720998,0.012174393,-0.02623706,-0.038560525,-0.011478713,0.01878335,-0.024448168,-0.013019146,-0.035380278,-0.01207501,-0.03339262,0.03160373,0.007602784,0.018683966,-0.017391989,0.04571609,0.028224714,0.03021237,-0.0036026265,0.031007433,0.025640761,0.035976574,0.03796423,-0.016100014,0.014509888,0.014112357,0.078711174,-0.00993828,0.07314574,-0.008944452,0.020174708,0.010435194,-0.017988287,0.038560525,0.02415002,-0.027230887,-0.010335811,-0.03339262,0.020075325,0.0047206827,0.044921026,-0.0053418255,-0.030808667,0.031206198,0.02802595,-0.0047206827,-0.030411135,-0.0369704,0.040349416,0.0085469205,0.018982114,0.009540749,0.07433833,0.0045964546,0.031206198,0.0053915167,0.024348786,-0.058834616,0.030411135,0.023951255,0.029218543,0.049492635,-0.042138305,0.0083978465,-0.009739514,-0.030411135,0.05406424,-0.009192909,0.0053915167,0.007304636,0.032200027,-0.03796423,-0.022957426,-0.029417308,0.006857413,0.0020249246,0.028622245,0.0012795535,-0.043132134,-0.017391989,-0.06082227,0.020771004,-0.041740775,-0.0071555614,0.0433309,0.040349416,-0.024746317,0.014410506,-0.017491372,0.0184852,-0.03557904,0.028622245,-0.020373473,-0.029616075,-0.0017640446,-0.0044970717,0.00257153,-0.023653107,0.029019777,0.061617333,0.05366671,-0.041343246,-0.014509888,-0.042734604,0.02415002,0.012571924,-0.012571924,0.016795693,0.0039504664,-0.042734604,0.062014867,-6.894682E-4,-0.031206198,-0.074735865,0.0075530927,-0.047703743,-0.0012360736,-0.033591386,-0.016596926,-1.2267564E-4,-0.027628418,0.049492635,0.07036302,0.01918088,-0.023951255,0.0375667,-0.024348786,0.07354327,0.011578096,0.020870388,0.02663459,-0.012323467,0.06599018,0.036771636,0.008348155,0.046709914,-0.047306214,0.0023727643,-0.044125963,-0.008149389,-0.0078015495,0.011677478,0.040945712,0.0040250034,0.005863585,-0.014112357,-0.022858044,0.050883994,0.015702482,-0.014012975,-0.020174708,-0.008994143,-0.005615128,0.02345434,0.006559265,-0.010932107,-0.023156192,0.06042474,0.017590756,-0.0018882732,0.015205568,0.018187052,-0.028622245,-0.024348786,0.04690868,0.04790251,0.009640131,-0.058437087,0.034982745,0.0040250034,0.02345434,0.046709914,-0.016100014,-0.008000315,0.0022733815,-0.03438645,-0.02524323,0.006360499,-0.032597557,0.038560525,-0.008845069,-0.024945082,0.055256836,0.012720998,-0.0029193696,-0.040349416,-0.025640761,-0.047703743,-0.018385818,-0.0064101904,0.026038293,-0.009640131,-0.046709914,0.075530924,0.020671623,-0.012571924,0.029616075,0.012621615,-0.0039256206,-0.047703743,0.015404333,-0.004372843,0.038958058,-0.019280262,-0.026435824,-0.0079506235,0.024945082,-0.003627472,-0.027628418,0.044921026,0.007304636,-0.009888588,-0.0016398162,-0.022162365,-0.0056648194,0.017690139,0.023653107,-0.010584268,-0.010534576,-0.040746946,-0.026833355,0.077916116,-0.006509573,0.012820381,-0.024746317,-0.0013665134,-0.022460513,0.041740775,0.031007433,0.038560525,-0.046709914,0.04472226,0.024646934,-0.012919764,0.047703743,0.0020746158,-0.04432473,0.044125963,0.05724449,0.032597557,0.020373473,-0.036771636,0.010832725,-0.055654366,-0.049890164,0.033193853,0.0091432175,0.01918088,0.0014286278,0.015205568,-0.008994143,-0.008497229,0.021566067,0.016596926,-0.0016646619,0.004521917,0.041343246,-0.006037505,0.0024100328,0.05724449,-0.024348786,-0.022659278,-0.064400055,-0.018187052,-0.0029193696,-0.04790251,-0.01421174,0.0057393564,-0.022858044,0.0043479973,-0.05923215,0.012174393,0.030808667,-0.0032547866,0.0433309,-0.022460513,0.02166545,-0.048697572,-0.045318555,0.0077021667,0.00959044,0.033193853,-0.0433309,0.033591386,-0.02345434,0.044125963,0.031404965,-0.03875929,0.0020125017,0.008795378,0.01172717,0.0040001576,0.021566067,0.0016646619,-0.021069152,0.027827183,0.040349416,-0.06917043,-0.05923215,0.010683651,-0.04372843,-0.025441997,-0.0075530927,-0.04432473,0.020472856,-0.037765462,-0.031007433,-0.046709914,0.011975627,0.017491372,-0.016298778,0.029616075,0.033591386,0.0041492316,0.045318555,0.035976574,-0.010534576,-0.018982114,-0.0010435194,0.02345434,-0.038560525,0.04690868,-0.030808667,0.012621615,0.027827183,-0.012224084,0.05048646,-0.0055902824,-0.066387706,-0.033988915,-0.012720998,-0.015901247,0.0011056337,0.017988287,0.015205568,5.714511E-4,0.055256836,-0.051281523,0.010236428,-0.058039553,-0.033988915,-0.003379015,0.036175337,-0.008497229,-0.04571609,0.055654366,-0.02345434,0.041343246,-0.0040250034,0.013019146,0.0055157454,0.009987971,-0.039554354,0.022957426,-0.002807564,-0.048896335,-0.03200126,0.0013789363,-0.0030187524,-0.046312384,0.008497229,-0.0918297,0.075530924,-0.0036026265,0.0047206827,-0.05724449,0.032200027,0.016795693,-0.023156192,-0.003726855,0.008298463,-0.034982745,-0.009391675,-0.008298463,0.048697572,-0.014509888,0.0024473013,-0.057642024,-0.04591485,-0.033591386,-0.0041989232,-0.05366671,-7.081024E-4,0.010037662,-0.008050007,0.034187682,0.04432473,-0.017988287,0.027628418,0.028224714,-0.0030932897,-0.023156192,-0.0048946026,0.012323467,-0.024646934,-0.020771004,0.0014162048,-0.055256836,0.010435194,-0.04591485,0.0077021667,-0.013416678,0.0071555614,0.03657287,0.015304951,-0.017690139,-0.070760556,-0.025839528,-0.016100014,-0.012174393,0.042138305,-0.0040995404,0.013814209,-0.064400055,0.029616075,0.0048946026,0.01778952,-0.0026709128,0.0074040187,-0.029616075,-0.0026957584,0.03299509,-0.015503717,-0.029616075,0.006459882,0.0086959945,0.007900933,-0.0018385818,-0.033988915,-0.017690139,0.019479029,0.009689823,-0.027628418,-0.031802494,-0.025839528,-0.02524323,0.021168536,-0.010335811,-0.0022982273,0.025839528,0.027827183,-0.008099698,-0.018982114,0.0071555614,-0.017491372,0.05366671,0.015304951,0.020174708,-0.013814209,-0.018882731,-0.02842348,-0.032200027,-0.04432473,-0.024746317,0.017491372,-0.033591386,-0.006459882,0.034187682,-0.006559265,7.795338E-4,0.0037517005,0.017093841,-0.006037505,-0.035976574,0.011677478,0.01600063,-0.016298778,0.0092426,0.054461773,0.058834616,-0.022659278,-0.025143849,-0.0019876559,0.02345434,0.007602784,0.02842348,4.938083E-4,-0.040746946,0.018187052,-0.037169166,-0.06559265,-0.028622245,0.011478713,0.012174393,0.05326918,0.06280993,0.05684696,-0.038162995,-0.037169166,0.034585215,-0.05247412,-0.042734604,0.008994143,-0.046312384,-0.05287165,0.020472856,0.002894524,0.014708654,-0.006559265,0.05287165,-0.013416678,0.0030932897,0.04571609,0.023951255,-0.012224084,0.03975312,0.020472856,-0.0092922915,-0.042138305,-0.015304951,0.033193853,0.015006802,0.0369704,-0.03796423,0.016497545,0.0061865794,-7.8885094E-4,0.05247412,0.030411135,-0.014509888,-0.014410506,-0.042734604,-0.010783033,0.0069567957,0.02057224,0.020174708,-0.0025839529,0.006285962,0.016100014,-0.029616075,-0.030609902,0.012919764,-0.0060871965,0.03657287,-0.025640761,-0.0028572555,-0.02166545,0.0025094156,0.040349416,-0.020771004,-0.02524323,5.714511E-4,0.03836176,-0.031404965,-0.014808037,0.03975312,-0.017292608,-0.014012975,0.02842348,-0.01878335,-0.026833355,0.0040250034,0.032796323,-0.058039553,-0.03021237,-0.014311123,-0.0010373079,0.0042486144,0.0015217991,0.004372843,0.019677794,-0.018385818,-0.029616075,0.010236428,-0.008745686,-0.010335811,0.020174708,-0.0039256206,0.008050007,0.05923215,-0.0739408,-0.0017516218,-0.022162365,0.037169166,-0.0051679057,0.04929387,0.037765462,0.0047703744,-0.0014783192,0.029019777,-0.022858044,0.012373159,-0.011677478,-0.019777177,0.026038293,-0.04432473,-0.054859303,0.020472856,0.0054660537,-0.014708654,-0.02663459,-0.024945082,0.0053915167,0.013714826,0.028224714,0.04591485,0.0059132767,0.0048200656,0.023354957,0.027628418,0.007205253,0.0041243862,-0.044125963,0.020671623,0.041343246,-0.02842348,0.01778952,-0.0053915167,0.010534576,0.009043834,0.023653107,-0.019777177,-0.009043834,0.023951255,2.4224557E-4,0.015205568,0.033193853,-0.051679056,0.04432473,-0.010335811,-0.019280262,-0.020274092,-0.025143849,0.0071555614,-0.055654366,0.042734604,-0.07831364,-0.05923215,0.011329639,-0.011975627,0.0751334,0.029019777,0.061617333,0.016497545,0.015702482,-8.3854236E-4,-0.018385818,-0.025839528,-0.0042734602,-0.01421174,-0.01207501,0.011081182,0.0085469205,-0.02166545,0.014311123,-0.030411135,0.01172717,-0.0029317925,-0.06797783,0.009341983,-0.020870388,0.0027330269,-0.0012981878,0.023354957,0.01207501,-8.199081E-4,-0.008199081,-0.029218543,-0.011031491,-0.010783033,0.0028696782,0.00479522,0.032200027,-0.008994143,-0.032200027,-0.003056021,0.0012360736,-0.010335811,-0.024746317,0.041740775,0.021168536,0.0020125017,-0.0055157454,0.029218543,-0.0040995404,-0.014012975,0.007304636,-0.020870388,0.01421174,0.0012547078,0.039951883,0.023354957,0.029218543,0.025143849,0.06996549,0.004372843,-0.0078015495,0.007254944,0.030013604,-0.029218543,-0.035976574,-0.012621615,0.0017764675,0.022957426,-0.02663459,0.0062362705,-0.08626427,0.005962968,0.013714826,0.0076524755,0.015801866,-0.014708654,0.0023851872,0.045318555,0.004323152,-0.031404965,-0.08149389,-0.025839528,0.01207501,-0.005714511,-0.05366671,-0.010385502,0.01987656,0.027230887,0.05406424,-0.025839528,-0.048697572,0.020870388,-0.05923215,-0.024348786,0.010932107,-0.010087354,-5.776625E-4,-0.023951255,-0.009491057,0.01028612,-0.009640131,0.02415002,0.009491057,-0.016199397,-0.018882731,0.038560525,-0.0092426,-0.038958058,0.01028612,-0.022062982,0.0019876559,0.025640761,6.58411E-4,-0.017292608,-0.0025839529,6.894682E-4,-0.03975312,-0.04154201,0.016795693,0.018882731,-0.017292608,-0.04372843,-0.0035032437,-0.08069883,0.02166545,0.024646934,0.0866618,-0.05247412,-0.008050007,-0.0433309,0.0046461457,-0.0031802496,0.02415002,-0.0369704,0.034187682,-0.011081182,-0.081891425,-0.07910871,0.029218543,-0.0042486144,0.0015466448,0.064400055,-0.08984205,-0.020274092,0.0031181353,-0.038560525,0.0369704,-0.00479522,0.024945082,0.064400055,-0.017590756,0.035976574,-0.00889476,0.030411135,-0.011429022,0.00959044,-0.07712105,-0.021168536,-0.03339262,0.021566067,-0.011230256,-0.061617333,0.011180565,-0.0011863821,0.05962968,-0.0034783978,0.0060871965,0.035777807,-0.002894524,-0.019677794,0.036374103,0.050883994,-0.069567956,0.008298463,-0.08984205,4.4644617E-6,0.035976574,0.019280262,7.376067E-5,0.038560525,0.030808667,-0.030609902,-0.01351606,-0.002646067,-0.029019777,-0.004944294,-0.033591386,0.05326918,-0.009888588,0.022162365,-0.029616075,-0.026833355,-0.048697572,-0.033988915,0.032398794,-0.0034038608,-0.034187682,0.019379646,0.019280262,-0.009789205,0.024746317,0.0022485359,-0.04571609,-0.0433309,-0.007205253,0.03836176,0.0029939068,-0.003801392,0.0016895075,0.029218543,4.9691397E-4,0.023156192,-0.018882731,0.03796423,-0.030609902,-2.624327E-4,-0.0047206827,-0.03299509,0.0044970717,0.025640761,0.008447538,-0.05684696,-6.025082E-4,-0.008994143,0.01918088,-0.045318555,-0.021864215,0.0063108075,0.009789205,-0.011478713,-0.023653107,0.09381736,0.035976574,-0.049890164,0.017988287,0.017093841,-0.022858044,0.015901247,0.041343246,-0.0041492316,-0.015106185,-0.0035032437,-0.0013354564,-0.013317295,-0.075530924,0.06360499,-0.03160373,-0.0027081813,4.53434E-4,0.0059132767,0.04472226,0.012373159,-0.014808037,-0.021864215,0.008447538,0.0069567957,-0.008994143,-0.0184852,0.030609902,0.01421174,-0.034783978,-0.013814209,0.0039256206,0.015205568,-0.01987656,0.018087668,0.062412396,0.04015065,-0.023951255,0.020870388,0.01028612,0.05287165,-0.06320746,-0.032200027,0.013913591,-0.041740775,0.010584268,-0.04372843,0.021168536,-0.005267288,0.03200126,0.011578096,-0.044125963,-9.938279E-4,-0.069567956,0.04154201,0.012720998,0.048697572,-0.019777177,0.064400055,0.019379646,0.015106185,-0.019677794,0.021069152,-0.017193224,0.020373473,0.0018882732,0.002807564,-0.03200126,-0.005118214,-0.0075530927,0.014012975,-0.014311123,0.01490742,0.0086959945,0.015603099,-0.01172717,-0.02981484,0.035976574,0.035976574,-0.046709914,0.009491057],"inputTextTokenCount":39}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ea077a14-b7b9-4dcb-b80d-1d134cf6bd40', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 09:17:38 GMT', 'content-type': 'application/json', 'content-length': '1666', 'connection': 'keep-alive', 'x-amzn-requestid': 'ea077a14-b7b9-4dcb-b80d-1d134cf6bd40', 'x-amzn-bedrock-invocation-latency': '3075', 'x-amzn-bedrock-output-token-count': '310', 'x-amzn-bedrock-input-token-count': '1148'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176d420>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The Crisis Management Team ensures a smooth transition from emergency to normal conditions in a disaster by following a structured approach. This includes assessing injuries and damage, evaluating business continuity options, and informing customers and teams. The team also ensures that all personnel attend an annual safety class and participate in practice evacuation and disaster drills. Additionally, the team has a plan in place to prevent sabotage or vandalism and protocols for reporting loss or theft of equipment or data. The team's responsibilities are clearly defined, with the CML (GSPL) approving site BCP/DRP plans and informing GSPL management on disasters.\",\n    \"References\": [\n        {\n            \"Statement\": \"Provide complete guidance and co-ordination to ensure the objectives of Crisis Management Team are met\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page 7\"\n        },\n        {\n            \"Statement\": \"The Crisis Management Team Responsibilities, by role, are as follows:\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page 7\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster, considering measures to prevent sabotage or vandalism and protocols for reporting loss or theft of equipment or data?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1148,"generation_token_count":310,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e16032cdf695a29256a47e
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 09:17:38] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How does GSPL ensure business continuity in case of a disaster?', 'conversation_id': '123456'}
INFO:__main__:Received query: How does GSPL ensure business continuity in case of a disaster?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e16f32cdf695a29256a480
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8058505f-90ae-4446-a9e5-bb38a7c3bcca', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 10:21:39 GMT', 'content-type': 'application/json', 'content-length': '12847', 'connection': 'keep-alive', 'x-amzn-requestid': '8058505f-90ae-4446-a9e5-bb38a7c3bcca', 'x-amzn-bedrock-invocation-latency': '75', 'x-amzn-bedrock-input-token-count': '14'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0174ab00>}
INFO:__main__:Response Data: {"embedding":[-0.034415245,0.072812416,0.022469457,-0.06826164,0.034984093,0.015145551,0.03000668,-0.048351996,0.019056374,0.0021509528,-0.043232374,0.017136516,-0.029295621,-0.06541741,0.011448046,0.001777647,-0.046929877,0.023464939,-0.08475821,-0.011803576,0.001777647,0.023180516,0.017278729,-0.025171481,-0.0036975057,-0.012159105,0.008248282,0.0070750345,0.1535887,-0.016496563,0.056600276,0.023038303,-0.046076607,0.015501081,0.06740837,0.027304657,0.012016893,0.023180516,-0.0027553528,0.053187195,-0.00835494,0.045507763,-0.0021331762,0.044085644,0.045507763,-0.023749363,0.005795129,0.013225693,-0.0036441763,-0.036690634,-4.3052387E-5,0.0157144,-0.028300138,0.022469457,-0.09158437,0.017492047,0.006506188,0.045792185,-0.009883717,-0.07565665,-0.041525833,-0.030717738,-0.050342962,-0.050627384,-0.0086393645,0.019340798,-0.015216658,0.04863642,-0.040103715,0.021616187,0.011732469,-0.015287763,0.010239246,-0.009812611,-0.019198587,0.0077505405,0.037259478,-0.019909646,-0.018629739,0.028015716,0.017634258,0.022327246,0.032139856,-0.019625222,0.006363976,0.033846397,0.043801222,-0.050911807,-0.020762917,-0.03327755,-0.018629739,0.014363388,-0.0024175998,-0.0042307996,-0.023180516,-0.068546064,-0.0024531528,-9.6437347E-4,-0.052333925,0.006257317,0.028584562,0.053756043,-0.019767433,-0.023607152,-0.041241407,0.0077860937,0.0067195054,0.035126302,0.003679729,0.0014221176,0.039250445,-0.019625222,0.043801222,0.0018309763,0.06314202,-0.015145551,0.042663526,-0.03171322,-0.014007858,-0.020905128,-0.009670399,-0.048351996,0.054893736,0.035552938,9.499301E-5,-0.022042822,0.052902773,-0.030291103,0.0023642704,0.010665881,-0.022611668,0.032850914,0.002346494,-0.044085644,-0.0109503055,-0.020194069,-0.011803576,-0.021473974,0.005724023,-0.0030931057,-0.03541073,-0.030717738,-0.0014310058,-0.028015716,-0.034984093,-0.024887057,0.016852092,-0.0061862115,-0.041241407,0.046929877,-0.005724023,-0.043232374,0.0314288,-0.02431821,-0.034273032,-0.06228875,-0.022896092,-0.008994893,0.052902773,-0.020905128,-0.029722257,0.0015732176,0.005724023,-0.027162446,-0.082482815,-0.06456414,0.016354352,-0.053756043,0.051765077,0.0049418584,0.010310352,0.012016893,0.038397174,0.006257317,-0.010665881,0.028584562,-0.027446868,0.0043196823,0.009883717,-0.028726775,-0.011803576,0.015998822,0.013083481,0.04863642,0.05517816,-0.0061506582,-0.03171322,-0.024175998,-0.028300138,-0.0012354646,-0.036690634,0.0109503055,0.0050840704,0.018914163,0.016141035,0.001439894,0.013012376,-0.025882538,-0.011305834,0.004799647,0.029437833,-0.006826164,-0.012585741,-0.052333925,-0.01742094,-0.0060084467,-0.007110588,0.026166962,-0.030291103,-0.07508781,-0.024175998,8.132735E-4,0.019767433,0.037828326,0.03896602,-0.019625222,0.027731292,-0.019198587,0.079638585,0.033846397,0.021331763,-4.777426E-4,-7.155029E-4,0.03541073,0.017705364,-0.021189552,-0.010310352,0.0017598704,0.09158437,0.039819293,-0.0049774116,0.047214303,-0.0314288,0.017776469,-0.00750167,0.041241407,-0.01500334,-0.008781576,-0.0073950114,0.03157101,0.0071461406,-0.024744846,-0.017847575,-0.014292281,0.056031432,-0.037828326,-0.015429975,-0.009243764,0.013439011,-0.022042822,0.01706541,-0.0070750345,0.0032886467,-0.0038041645,0.054040466,0.0053684935,-0.0019820763,0.050627384,-0.023607152,-0.025171481,-0.046076607,-0.030433316,-0.0617199,-0.03327755,-0.011519152,-0.0070750345,0.0314288,0.005759576,-0.025740327,-0.008746023,-0.005724023,-0.045223337,-0.09158437,0.006506188,-0.024602633,-0.024175998,0.0027909058,-0.0056173643,0.027446868,0.034415245,0.04948969,-0.0016443233,-0.0628576,-0.018132,0.014221176,-0.052902773,0.005155176,-0.051765077,0.0617199,0.019767433,0.005155176,0.07338127,0.09613515,0.04948969,-0.014932234,0.021473974,-0.024887057,0.0064706346,-0.006506188,-0.03171322,-0.026309174,0.054040466,0.034984093,-0.008177176,0.04863642,0.054893736,-0.025740327,0.0665551,-0.009883717,0.04863642,-0.023180516,0.0018665292,-0.032993127,0.021616187,0.062004324,0.018629739,-0.030717738,0.035268515,0.022327246,5.7773525E-4,0.040103715,0.004586329,0.037543904,-0.022327246,0.011376941,0.08305167,0.025455903,-0.0073239054,0.040672563,0.0124435285,-0.053756043,-0.010665881,-0.0035019645,-0.013439011,-0.022469457,-6.177323E-4,0.036690634,0.0012087999,-0.016638774,-0.045507763,0.010168141,-0.0028975646,0.035126302,0.041241407,0.044938914,0.039534867,0.003555294,0.023464939,0.004088588,0.021758398,-0.0056173643,-0.037259478,0.020051857,0.006363976,0.052618347,-0.015429975,0.020478493,-0.0028264585,0.017776469,-0.0124435285,0.023180516,-0.018203104,0.023749363,-0.042379104,0.021331763,-0.037828326,0.0021065115,0.004390788,-0.008781576,-0.017634258,-0.045223337,0.081345126,-0.014932234,-0.022753881,0.0030219997,0.008177176,0.039534867,0.017989786,0.045223337,0.022469457,-0.031002162,-0.035979573,0.032139856,-0.036975056,-0.030291103,0.018132,-0.010594776,-0.020194069,0.0039819293,-0.059444513,0.01500334,0.03413082,0.013723434,-0.017989786,0.056031432,-0.021900611,-0.019056374,0.006826164,0.047498725,0.021900611,0.020620704,-0.016496563,0.032993127,-0.056600276,0.050058536,-0.013296799,-0.020051857,-0.011376941,-0.025171481,0.03811275,-0.013439011,0.0055818115,-0.06627068,0.023749363,0.037259478,0.036406208,-0.025740327,-0.044654492,-0.019198587,0.048351996,0.002613141,0.004124141,0.041525833,-0.06086663,-0.0084971525,-0.0053329407,0.013012376,-0.014078964,0.014078964,0.015287763,-0.040672563,0.036975056,0.0066128466,-0.024175998,0.016283246,0.016496563,0.020620704,0.0055818115,0.013012376,0.008603811,-0.0665551,0.052902773,-0.019056374,-0.024033787,0.009101552,-0.06314202,0.043232374,0.025313692,-0.008781576,0.0027553528,-0.031002162,0.032993127,0.036406208,-0.029864468,-0.017207623,0.014078964,0.018487528,0.024887057,-0.049774114,-0.03341976,0.0015643293,0.008817129,-0.025455903,-0.019056374,-0.03313534,-0.003377529,-0.025455903,-0.004799647,-0.041241407,-0.018203104,0.041525833,0.045223337,-0.015501081,0.071105875,0.046361033,-0.019198587,-0.045507763,0.05432489,0.051480655,0.016425457,-0.011021411,-0.024887057,0.010097034,0.034984093,-0.014718916,-0.021758398,-0.0038574939,-0.049774114,0.008461599,0.011021411,-0.05517816,0.0060795527,-0.0032708703,0.014150069,-0.0017865351,-0.026593598,0.036690634,0.03085995,0.017705364,-0.0046574348,0.015358869,0.008426046,0.013083481,-0.026878022,0.0011465823,0.018914163,0.0109503055,0.0059728934,-0.015927717,-0.026878022,-0.047214303,2.6998014E-4,0.027446868,-0.016994305,-0.03171322,0.040388137,-0.013012376,-0.0037330585,-0.006257317,0.014790023,-0.057737973,0.0155721875,0.048067573,0.031144375,-0.0060084467,-0.003679729,-0.021189552,-0.021758398,0.0048707523,0.01670988,-0.010879199,0.052618347,-0.024175998,0.0084971525,-0.03313534,0.0055818115,-0.051765077,-0.029722257,-0.026309174,-0.003750835,0.016283246,0.025455903,0.037828326,0.03896602,0.037543904,-0.04863642,0.03811275,-0.021189552,0.022327246,-0.0076438817,-0.024744846,0.033704184,0.008248282,-0.005226282,-0.0071461406,0.03085995,-0.038397174,0.035979573,-0.0036086233,-0.018060893,-0.025029268,-0.04948969,-0.012159105,-0.0013687882,0.0014310058,-0.052902773,0.009528187,-0.004426341,-0.010310352,0.025882538,-0.0067906114,-0.01585661,0.059444513,-0.10182361,-0.007181694,-0.023749363,-0.027731292,-0.014576705,-0.02758908,5.2884995E-4,-0.010025929,-0.026024751,0.0054040467,0.02431821,-0.0076794345,0.0060084467,0.023607152,-0.009243764,0.027020233,0.085895896,-0.0123013165,0.01948301,-0.0015643293,-0.0077860937,0.030717738,-0.0011154735,0.059728935,0.0027197998,-0.017776469,0.007999411,0.051765077,-0.014221176,-0.03313534,0.022753881,-0.048351996,0.040388137,-0.009457082,-0.05745355,0.037828326,-0.0039641527,-0.014292281,0.0075727757,1.3054594E-4,-0.025882538,0.0071461406,0.044938914,-0.004088588,0.023038303,-0.010736987,0.028157927,0.007928305,-0.016141035,-0.005901788,-0.024175998,0.008034964,0.021189552,-0.03256649,0.011448046,0.037828326,0.035268515,-0.017278729,0.023891574,0.037828326,0.018914163,0.020336282,-0.012870164,-0.028157927,0.0059373407,-0.052049503,-0.040672563,-0.056315854,-0.019909646,0.006506188,0.032850914,-0.018060893,-0.026451387,-0.025029268,0.0155721875,-0.03341976,-0.036690634,-0.002088735,0.020762917,0.03811275,0.0109503055,0.07793204,-0.017776469,-0.044085644,0.026878022,-0.019625222,-0.01706541,0.015429975,0.048351996,0.0056173643,0.005155176,2.2776102E-4,0.026166962,0.012585741,0.047498725,-0.02758908,0.045507763,-0.019056374,0.03896602,-0.0059728934,0.03157101,-0.009030446,-0.015998822,-0.054609314,-0.028300138,0.0039819293,-0.017563151,-0.019909646,-0.023749363,0.026166962,0.026309174,-0.014790023,0.004088588,0.041810255,0.0056884703,0.029580045,0.011376941,-0.0019287469,-0.03000668,0.0124435285,0.07565665,0.036975056,-0.0124435285,-0.037259478,-0.00871047,-0.024602633,0.018629739,-0.012941269,-0.046361033,0.002613141,-0.035552938,-0.011945787,0.023038303,0.0016532117,-0.020336282,-0.035126302,-0.035552938,-0.047498725,0.05745355,-0.015145551,-0.019198587,0.0072172466,0.037828326,-0.011021411,-0.014932234,9.110441E-4,-0.012016893,-0.018132,-0.0028620115,-0.016141035,-0.025740327,0.009670399,-0.052049503,0.0022487233,0.0060084467,0.020620704,-0.017136516,-0.037259478,-0.049205266,-0.030575527,-0.020051857,0.005724023,-0.011803576,0.007430564,0.006506188,-0.024175998,0.050342962,0.013154587,-0.068546064,-0.0035375173,0.0060795527,0.026451387,-9.86594E-4,0.008852682,0.040388137,-0.0034308585,-0.052333925,-0.06086663,0.0024531528,0.0155721875,0.039819293,-0.020762917,6.666176E-4,-0.035552938,0.0072172466,0.021473974,0.045792185,-0.05830682,-0.035552938,0.035552938,0.012016893,0.0123013165,-0.052902773,0.023180516,-0.030433316,0.032708704,-0.018914163,-0.004461894,0.019198587,-0.0013776764,-0.0017954234,-0.017989786,0.0617199,0.024887057,-0.029580045,0.007110588,-0.0030397763,-0.029722257,-0.0019643,-0.06371087,0.003413082,0.040103715,0.03896602,0.03811275,0.016069928,-0.018487528,-0.05916009,0.06399529,-0.017705364,-0.040388137,0.009599294,0.012870164,0.026024751,-0.013581223,0.028868986,0.020194069,0.021900611,0.010097034,-0.021758398,-0.037828326,0.014292281,0.025455903,0.010168141,0.08020743,0.020478493,0.05517816,-0.047498725,-0.0108080935,0.0053684935,-0.030575527,0.0048707523,0.018771952,0.016994305,0.021189552,0.03085995,0.027731292,0.010239246,0.017705364,0.028300138,0.0033597527,-0.010097034,0.0093148695,-0.017847575,0.018487528,0.06314202,-0.029722257,0.0053329407,-0.023891574,0.020478493,-0.020051857,-0.020762917,3.0414429E-5,-0.022469457,-0.024033787,-0.047214303,-0.010879199,-0.021900611,-0.022042822,-0.0762255,-0.0028975646,-0.006435082,0.031144375,0.012727952,-0.026166962,-0.02758908,-0.01948301,-0.017492047,0.0039286,-0.013225693,0.0050129644,0.044938914,-0.017563151,-0.050342962,0.0055818115,0.0025242586,0.027020233,0.029580045,0.022327246,0.041810255,-0.026024751,0.020620704,0.023607152,-0.029437833,0.0050840704,-0.017634258,-0.020336282,0.02915341,0.014078964,0.019767433,-0.021758398,-0.014007858,0.067692794,-0.05432489,-0.025455903,-0.040672563,-0.0628576,-0.06342644,0.038681597,-0.053187195,0.050911807,0.031997643,0.0035375173,0.014292281,3.177544E-4,0.012941269,-0.057737973,-2.2887204E-4,-0.0018398645,0.08191397,-0.006826164,0.008781576,0.055462584,0.0047640936,-0.046361033,-1.4554484E-4,-0.017278729,0.008817129,-0.06513298,0.015429975,-0.026166962,0.040672563,0.0061862115,-0.005795129,0.019909646,-0.028300138,-0.004533,-0.027731292,0.019625222,-0.031002162,0.019909646,0.0050129644,-0.0031286585,0.030717738,-0.017705364,0.020762917,0.042663526,0.0021065115,0.004444117,-0.043801222,0.050627384,0.011945787,-0.024602633,-0.0060795527,0.0108080935,-0.034415245,0.0054040467,-0.012941269,-0.0022931646,-0.032708704,0.008746023,0.009883717,0.020620704,-0.03896602,-5.221838E-4,0.017136516,-0.005901788,-0.0027909058,-0.018629739,-0.017776469,-0.047498725,0.113769405,8.221617E-4,0.010381458,0.010168141,-0.035268515,0.047498725,0.026451387,0.013225693,-0.023038303,-0.0019998527,0.019625222,0.0014221176,-0.072528,-0.020336282,0.011803576,-0.014790023,-0.01670988,0.03484188,-0.041241407,-0.0061862115,0.020194069,-0.0016798764,-0.023891574,-0.054893736,0.022469457,-0.007181694,0.01948301,0.008781576,0.07508781,-0.024887057,0.016852092,0.0039641527,-0.012941269,0.020336282,0.029580045,-0.024744846,0.043232374,-0.009954823,0.037259478,-0.031855434,0.057737973,-0.0039641527,-0.040388137,0.028868986,-0.03413082,0.026451387,0.054040466,-2.6442498E-4,0.012585741,0.018771952,0.014718916,-0.042947948,0.009599294,-0.025313692,0.03341976,-0.013723434,-0.016994305,0.0155721875,0.041810255,0.023038303,0.0011465823,0.024033787,0.035126302,-0.011519152,-0.02915341,0.020051857,0.0086393645,-0.0028264585,-0.061435476,0.060582206,-0.009457082,0.0010888088,0.0053684935,0.056315854,0.006755058,0.020194069,-0.037828326,0.016994305,0.027162446,-0.0036619527,0.034984093],"inputTextTokenCount":14}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5de3de27-e7d3-4f36-8b9f-55e821bd581b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 10:21:42 GMT', 'content-type': 'application/json', 'content-length': '1411', 'connection': 'keep-alive', 'x-amzn-requestid': '5de3de27-e7d3-4f36-8b9f-55e821bd581b', 'x-amzn-bedrock-invocation-latency': '2456', 'x-amzn-bedrock-output-token-count': '268', 'x-amzn-bedrock-input-token-count': '1025'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176d0c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"GSPL ensures business continuity in case of a disaster by having an effective Business Continuity and Disaster Recovery Plan (BCP/DRP) in place. The plan is prepared jointly by stakeholders, including Compliance and Security, System Administration teams, and account managers. The objectives of the plan are to minimize loss and ensure business continuity by responding effectively to disaster events. The plan covers recovery from technical and natural disasters, and the scope includes recovery of business critical services for customers at facilities operating from various locations.\",\n    \"References\": [\n        {\n            \"Statement\": \"An effective business continuity and disaster recovery plan serves to secure businesses against such above mentioned disasters.\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 5\"\n        },\n        {\n            \"Statement\": \"The objectives of the BCP/DRP are:\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"How does GSPL ensure business continuity in case of a disaster?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1025,"generation_token_count":268,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e16f36cdf695a29256a481
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 10:21:42] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Who is responsible for maintaining fire alarms, smoke detectors and fire extinguishers?\n', 'conversation_id': '123456'}
INFO:__main__:Received query: Who is responsible for maintaining fire alarms, smoke detectors and fire extinguishers?

INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e18d36cdf695a29256a483
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b2fd3294-e3ee-4b07-abea-563cb6b9ab08', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 12:29:43 GMT', 'content-type': 'application/json', 'content-length': '12721', 'connection': 'keep-alive', 'x-amzn-requestid': 'b2fd3294-e3ee-4b07-abea-563cb6b9ab08', 'x-amzn-bedrock-invocation-latency': '61', 'x-amzn-bedrock-input-token-count': '17'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176d270>}
INFO:__main__:Response Data: {"embedding":[-0.10402696,0.025486603,-0.0050279694,-0.003294187,0.004681213,0.008582224,-0.0037276326,-0.055134285,0.0059382054,-0.01291668,-0.028607413,0.04178416,-0.016644312,-0.033288624,0.012223167,-0.0031641533,-0.005071314,-0.03467565,0.04091727,-0.04681213,0.0014737152,0.042477675,0.006501685,0.010359351,-0.06310969,0.006675063,0.085995615,0.048545912,0.0662305,-0.036409434,-0.0025139847,-0.0279139,0.06588374,-0.10194641,0.03675619,-0.02288593,0.005071314,5.7160645E-4,-0.014390396,0.019158298,0.0021563922,0.050973207,-8.343829E-4,0.023752822,-0.013263437,0.046118617,0.053400505,0.05374726,-0.062416174,0.04889267,0.0742059,0.018118028,0.038489975,0.021412214,-0.028607413,0.026526874,0.04681213,-0.014823841,0.008408845,0.0059382054,-0.023232687,0.036236055,-0.019418364,-0.03866335,0.085995615,-0.014823841,0.06553698,0.08044751,-4.0364626E-4,-0.06068239,-0.015083908,-0.020111877,-0.016210867,0.01889823,-0.08044751,-0.033288624,0.026353495,0.05270699,-0.025313227,0.023579443,0.012223167,-0.05270699,0.016384246,0.021412214,0.03796984,-0.015690733,0.017164448,-0.023406064,-0.010706107,-0.011529654,0.042130917,-0.010142628,-0.042130917,-0.050626453,0.055481043,-0.007238542,-0.028260656,-0.028954169,0.009189048,0.041264027,0.01898492,-0.0031208086,0.024966469,-0.0051796753,-0.030341195,0.020198567,0.00949246,-0.0046161963,0.05201348,-0.047158886,-9.2649006E-4,-0.013263437,-0.0023406064,-0.05478753,0.019418364,-0.01100952,-0.012223167,-0.013870261,-0.0020913752,0.010532729,-0.027740521,-0.046118617,-0.012136478,0.0662305,0.061029147,-0.04681213,0.037449703,-0.066924006,0.017597893,0.05998888,0.022365795,0.033288624,0.038143218,0.023406064,-0.038143218,-0.090850204,-0.0239262,-0.034502275,0.03692957,0.014390396,-0.0011648852,0.024272956,0.016210867,-0.012049789,0.030341195,0.017511204,0.049932938,0.008062089,0.065190226,4.144824E-4,0.009319082,-0.019678432,0.021672282,0.0050279694,-0.008192123,-0.018724851,0.050626453,-0.029127548,-0.026353495,0.0020913752,0.07524616,0.0018638163,0.066924006,-0.028260656,0.024966469,-0.026526874,-0.056174558,-0.030341195,0.010272662,0.018724851,-0.028260656,0.028780792,-0.035715923,1.5847856E-4,0.03276849,-0.0053097093,-0.047158886,-0.04577186,-0.08148778,-0.040223755,-0.00996925,0.10333344,-0.02201904,-0.0043561286,-0.028434034,0.049239427,0.039183486,-0.0038576662,0.005071314,-0.03467565,0.01881154,-0.059295364,-0.020025188,-0.032074977,0.0016687658,-0.019071609,-0.030341195,-0.022192417,-0.03883673,-0.004984625,0.032074977,0.0030557918,0.021845661,2.0995023E-4,0.0032508424,-0.025139848,-0.035369165,-0.0011432129,0.017597893,0.04074389,0.018464785,0.004919608,0.035715923,-0.0014086984,-0.039010108,0.020111877,0.01395695,0.0031208086,0.02479309,-0.012743302,0.05686807,-0.018551474,-0.049239427,-0.001452043,0.008972325,-0.04178416,-0.004291112,-0.048199154,0.0558278,0.035715923,-0.025139848,0.019331675,-0.010619419,0.026353495,0.019158298,-0.011529654,0.021498904,0.034328897,-6.1630555E-5,-0.02288593,0.022365795,0.024272956,0.027393766,0.024099577,0.02089208,-0.035195787,-0.08010075,-7.043492E-4,-0.026180116,-0.055481043,0.010272662,-0.021412214,0.039183486,0.042477675,-0.0037059602,0.00645834,-0.0062416173,0.013176748,-0.026180116,-0.017164448,0.036062676,0.029300926,0.023752822,0.0075852987,-0.022539174,-0.010706107,-5.2013475E-4,0.038316596,0.03363538,-0.013870261,0.015430665,-0.05652131,0.02687363,-0.03675619,0.031381465,0.03484903,-0.026700253,-0.005764827,0.014390396,-0.003966028,0.021412214,-0.004811247,-0.0068050968,-0.04282443,-0.014823841,-0.02687363,0.02999444,0.013263437,0.028607413,-0.042997807,-0.009362426,-0.0061549284,0.050973207,0.013263437,0.021065459,0.0034675652,0.0053530536,0.03796984,0.018724851,-0.025486603,0.0018204717,0.010619419,0.0045511792,0.023232687,0.047158886,0.015950799,0.022365795,-0.038489975,-0.010185973,0.05270699,0.035542544,-0.00474623,-0.009362426,0.020545324,0.0358893,-0.0077153323,-0.002990775,-0.025659982,-0.009882561,-0.013176748,-0.07108509,-5.9327873E-4,-0.0061115837,0.006675063,-0.023232687,-3.291478E-4,0.008798947,0.03779646,-8.831455E-4,0.056174558,-0.05374726,0.01499722,0.05374726,0.066924006,-0.047505643,0.038143218,-0.008018744,-0.042477675,-0.004962953,-0.045425102,-0.020111877,0.020718701,-0.03883673,0.023579443,0.024966469,-0.025139848,-0.010922831,0.017511204,-0.062416174,-0.0058948607,2.8038517E-4,-0.011096208,0.015690733,-0.042477675,0.018378096,0.01300337,0.012309857,-0.035542544,0.028954169,-0.015343976,-0.005808172,0.015083908,0.035022408,0.04091727,8.560552E-4,-0.016644312,0.0061549284,-0.028607413,-0.007541954,0.024446335,-0.061375905,0.04074389,0.041437402,-0.019158298,0.0010781961,0.01044604,0.0039443555,-0.010706107,0.03883673,-0.037449703,-0.003294187,-0.046118617,0.005374726,0.01699107,0.004009372,-0.011703032,-0.022539174,-0.039703622,-0.019071609,-0.011789721,0.073165625,0.002145556,0.010185973,0.033288624,8.025517E-5,0.0040310444,-0.007932056,-0.023752822,0.039183486,0.01881154,0.033462003,0.010359351,-0.05652131,-0.021065459,-0.0048329188,0.0061549284,-0.038316596,0.018638164,-0.004594524,-0.0014195344,-0.03276849,0.04109065,-0.02982106,0.028780792,0.030341195,-0.024099577,0.029647682,0.016384246,0.002687363,0.07524616,-4.6053602E-4,-0.026700253,-0.008148778,-0.029127548,-0.0478524,-0.012049789,0.0035759266,-0.01699107,-0.023406064,0.012569924,3.8197398E-4,-0.03710295,0.0038793385,0.009232393,-0.024966469,-0.036062676,-0.01794465,0.033288624,-0.0033592037,0.04178416,-0.029647682,-0.008668913,0.012829991,0.012743302,0.026526874,-0.08876967,0.034502275,0.012829991,0.054094017,-0.01881154,-0.047505643,0.008322156,0.021412214,0.026353495,-0.019071609,0.04109065,0.02288593,-0.031728223,0.027220387,0.06484347,0.011529654,-0.03866335,-0.013176748,0.09154372,0.0151705975,0.051319964,0.0026331823,-0.03484903,0.0025790017,0.04403808,-0.012743302,0.009622494,-0.030341195,4.1719145E-4,-0.028607413,0.01100952,-0.0478524,0.0051146587,0.0052663647,-0.002774052,0.020111877,0.03710295,0.0054614153,0.003532582,2.451677E-4,-0.0053530536,0.042997807,-0.04473159,0.018204717,0.02687363,-0.040223755,0.015690733,0.02982106,0.02201904,-0.06172266,0.034502275,0.0059382054,-0.015517354,0.005548104,0.024619713,-0.03276849,0.0038793385,-0.03710295,-0.012309857,0.026353495,-0.03762308,0.04282443,0.011096208,0.04161078,-0.0239262,0.04958618,0.02479309,-0.017164448,0.04577186,-0.043344565,-0.008712257,0.018118028,-0.032421734,-0.004074389,0.017684583,-0.05652131,-0.03883673,0.015430665,0.009579149,-0.0014953875,0.0034025484,-2.1943187E-4,-0.035369165,0.007888711,0.074899405,-0.020371946,0.05201348,0.01100952,0.008625569,0.002383951,0.025486603,0.009015669,-0.026526874,-0.003597599,-0.03467565,0.0017337826,0.05652131,0.028607413,0.02600674,0.025313227,0.004377801,0.018291406,-0.0068484414,-0.022539174,-0.035022408,-1.3748354E-4,-0.0013165912,-0.01681769,1.4645722E-5,0.029300926,-0.031901598,0.04403808,-0.01300337,0.03276849,0.03398214,0.005006297,0.008278812,-0.0078020217,0.055134285,-0.0023406064,0.006501685,-0.009189048,-0.026353495,-0.054094017,0.04507835,-0.061029147,0.002925758,-0.026700253,-4.849173E-4,-0.038143218,-0.021238837,-0.05270699,0.047505643,3.684288E-4,-0.039183486,-0.017251138,-0.01044604,-0.031728223,0.029127548,0.009795872,-0.025659982,-0.021498904,-0.008538879,0.0044644903,0.035715923,-0.018031338,-0.013176748,0.03484903,0.014390396,-0.027220387,-0.033288624,0.021672282,0.03398214,-0.05270699,0.04161078,0.013350126,0.030514574,-0.013350126,5.2555284E-4,-0.046118617,0.010359351,-0.019851811,1.7337826E-4,0.017077759,0.013696883,0.009535804,-0.029127548,-0.023579443,0.050626453,-0.020285256,-0.014823841,0.021845661,-0.07108509,0.003749305,0.0051146587,-0.013523504,0.0199385,-0.01681769,0.030167816,-0.004681213,-0.037276328,0.01794465,0.06553698,0.012656613,-0.012309857,-0.004702885,0.027393766,-0.04473159,-0.002774052,-6.93513E-4,0.025139848,0.036409434,0.0147371525,-0.017771272,0.021845661,-0.055481043,-0.05270699,-0.003922683,-0.0693513,-0.008105434,-0.004074389,0.03675619,0.02089208,-0.009189048,-6.528775E-4,-0.018378096,0.036409434,-0.032595113,-0.010836141,0.026180116,0.006675063,-0.026180116,-0.01491053,-0.017337825,-0.0067184074,-0.027047008,0.04577186,0.018031338,-5.824426E-4,-0.01395695,0.017857961,0.012743302,0.048199154,-0.005808172,0.028954169,0.0021889005,0.025139848,-0.0051796753,-0.025486603,-0.05652131,-0.07247211,0.036236055,0.082528055,0.0050279694,0.018724851,0.016557625,0.0030341195,-0.01690438,0.03866335,-0.017771272,-0.02600674,0.008798947,0.08876967,-0.03398214,-0.041264027,-0.028087279,-0.01499722,0.030687952,4.307366E-4,-0.012396545,0.014303707,0.018638164,-0.016384246,-0.043691322,0.028260656,0.012136478,-0.010185973,0.034502275,-0.01681769,0.034328897,0.009535804,-0.017684583,0.014563774,-0.014390396,0.022539174,0.019765122,0.018638164,-0.013523504,-0.04889267,0.008755602,0.0239262,-0.011529654,-0.009752527,0.022365795,0.010619419,0.0010944502,-0.0056347935,-0.049239427,0.034502275,0.008668913,0.03398214,0.01395695,0.03692957,0.076286435,-0.023579443,-0.010619419,-0.014303707,0.0076286434,-0.008885636,-0.003966028,-0.05478753,-0.0076286434,-0.038489975,0.025486603,-0.05686807,-0.026526874,-0.021065459,0.040223755,0.0091023585,-0.010619419,0.029300926,-0.034328897,-0.051319964,0.0048329188,0.02687363,-0.041437402,0.020285256,-0.0018746525,0.031901598,0.013090058,-0.013870261,0.021498904,-0.036582813,0.036409434,0.009925906,0.063456446,-0.032421734,-0.008148778,-0.037449703,0.027740521,0.028607413,-0.010836141,-0.05270699,0.012569924,0.04507835,-8.9939975E-4,0.04074389,-0.017251138,0.027740521,-0.011529654,-0.04577186,0.0074119205,-0.023232687,0.016037488,-0.017424515,0.0034892375,-0.030514574,-0.004442818,0.011442965,0.02201904,0.020632014,0.001614585,-0.0015929127,0.0199385,-0.029127548,0.034502275,-0.047158886,-0.025659982,0.027567143,0.010619419,0.009925906,-0.04889267,0.026700253,0.046118617,-0.029300926,0.025139848,0.016731001,0.012049789,0.0024923126,-9.6441654E-4,0.07108509,-0.006545029,0.004681213,0.0478524,-0.020458635,0.00749861,-0.019158298,-0.034502275,0.05374726,0.0821813,-0.0011865575,-0.05374726,-0.012136478,-0.031554844,-0.07593968,0.030687952,0.014650463,5.147167E-4,-0.002069703,0.022192417,-0.034328897,0.015604043,-0.001305755,-0.0017337826,0.048545912,0.018378096,-0.015604043,-0.0010673599,0.020111877,0.009449115,-0.0012786647,-0.004074389,-0.046118617,-0.023059309,-0.12483235,0.022539174,0.0054614153,0.036409434,0.01491053,0.004377801,-0.042997807,-0.022192417,0.040223755,-0.021065459,0.006761752,0.005764827,0.07663319,-0.009275737,0.062069416,-0.0028390689,-0.082874805,0.01794465,0.022539174,-0.017424515,0.015604043,0.046465375,0.09431777,0.031728223,-0.0136101935,0.043344565,-0.010099283,-0.032248355,-0.031554844,-0.031381465,-0.042477675,-0.015517354,0.013350126,0.01681769,-0.03779646,0.0071518533,-0.03883673,0.022365795,-0.050626453,0.058255095,-0.0026331823,-0.035715923,0.023406064,0.04958618,-0.010836141,-0.03883673,-0.02201904,-0.0102293175,0.015864111,-0.008625569,-0.010055939,3.7113784E-4,-0.042130917,0.019765122,0.019244988,-0.046118617,0.004919608,-0.032595113,0.017337825,-0.031208087,-0.010619419,0.002221409,0.011789721,-0.03467565,0.008408845,-0.01898492,-0.057908338,-0.013176748,0.025659982,9.2649006E-4,-0.0031858254,-0.012396545,0.021412214,0.015083908,1.6592841E-5,-0.035195787,-0.032595113,0.014563774,-0.012743302,0.03467565,0.055481043,0.02479309,0.002297262,-0.017337825,-0.031208087,-0.011096208,-0.008495535,0.020198567,0.034328897,-0.01699107,-0.025313227,0.050626453,0.040050376,-0.012309857,0.021845661,0.018724851,0.027220387,-0.028780792,-0.020371946,-0.027567143,-0.036236055,-0.0026548547,-0.008712257,0.018204717,0.03762308,-0.029300926,-0.008538879,-0.011789721,-0.06310969,0.018464785,-0.030167816,0.015777422,-0.01889823,0.0013274273,0.0199385,-0.03276849,0.005136331,0.009925906,-0.029474305,0.043691322,0.014217017,-0.011096208,-0.014303707,-0.015517354,-0.021672282,4.144824E-4,-0.0239262,-0.033288624,-0.042477675,-0.03380876,0.008495535,0.058255095,-0.009449115,0.039530244,0.010922831,0.005764827,0.03363538,-0.024619713,-0.03484903,-0.031208087,-0.010532729,-0.009449115,-0.06761752,-0.043344565,0.0558278,-0.031554844,0.032595113,0.019505054,-0.024099577,-0.0024164594,0.006588374,0.020111877,-0.023752822,-0.028260656,-0.0019721778,-0.023752822,-0.015690733,-0.019765122,0.030514574,0.040570512,0.004052717,0.01681769,0.018724851,0.0016579296,-0.062416174,0.0119631,0.005591449,-0.014650463,-0.0061115837,0.050973207,0.0358893,-0.030514574,-0.0079753995,0.046465375,0.012656613,0.017424515,-0.026700253,0.023579443,0.009449115,0.015690733,-0.0023189343,-0.008278812,0.020458635,-0.023059309,-6.474594E-4],"inputTextTokenCount":17}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4a78afda-ab43-49da-bc34-1ab2a2e09204', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 12:29:45 GMT', 'content-type': 'application/json', 'content-length': '1156', 'connection': 'keep-alive', 'x-amzn-requestid': '4a78afda-ab43-49da-bc34-1ab2a2e09204', 'x-amzn-bedrock-invocation-latency': '2175', 'x-amzn-bedrock-output-token-count': '218', 'x-amzn-bedrock-input-token-count': '1028'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176d660>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The responsibility for maintaining fire alarms, smoke detectors, and fire extinguishers is not explicitly stated in the provided texts. However, it can be inferred that the Internal Security and the Incident Response Team (IRT) are involved in fire safety and response procedures.\",\n    \"References\": [\n        {\n            \"Statement\": \"Proper Fire prevention and detection mechanisms are in place.\",\n            \"source\": \"Gemini - Physical Security Policy_v3.4_India.pdf - Page 15\"\n        },\n        {\n            \"Statement\": \"Periodic Mock Fire Drills are conducted once in a year and the Fire safety devices are under regular maintenance.\",\n            \"source\": \"Gemini - Physical Security Policy_v3.4_India.pdf - Page 11\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Who is responsible for maintaining fire alarms, smoke detectors and fire extinguishers?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1028,"generation_token_count":218,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e18d39cdf695a29256a484
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 12:29:45] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Who should be informed by the security guard in case of a fire occurrence?', 'conversation_id': '123456'}
INFO:__main__:Received query: Who should be informed by the security guard in case of a fire occurrence?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e1c93acdf695a29256a486
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5d84e0f3-39fe-438c-9c30-7708a1e3fd6c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 16:45:46 GMT', 'content-type': 'application/json', 'content-length': '12764', 'connection': 'keep-alive', 'x-amzn-requestid': '5d84e0f3-39fe-438c-9c30-7708a1e3fd6c', 'x-amzn-bedrock-invocation-latency': '76', 'x-amzn-bedrock-input-token-count': '16'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017ab310>}
INFO:__main__:Response Data: {"embedding":[0.005473922,5.305027E-4,-0.0059243077,-0.07705065,0.083702505,0.007968367,0.048503105,-0.049057428,0.017322538,0.019955564,-0.028963283,0.042959895,-0.037971005,0.07261608,-0.020648465,0.05958953,-0.030349087,-0.034922235,0.03201205,0.006270759,0.016213896,0.043237053,0.001931463,0.025083035,-0.041851252,-0.010116362,-0.0010480136,-0.019955564,0.05875805,-0.055432122,0.04101977,-0.016213896,-0.016698927,-0.005508567,0.03215063,-0.011225005,0.025914516,-0.016906798,-0.0039841835,0.05986669,-0.04157409,-0.03145773,-0.0011173037,-0.030349087,0.015798155,0.09312596,0.029656185,0.024112973,-0.008730559,0.035476558,0.06707287,0.0022346075,-0.029656185,0.044068538,0.016006025,0.028131802,0.03159631,0.0457315,0.011363585,-0.025914516,0.0069290153,-0.065132745,-0.03630804,-0.043237053,0.03201205,0.008695914,0.03991113,0.059035208,0.029794766,-0.052660514,-0.03201205,-0.030210506,-0.08758275,-0.029794766,-0.016698927,-0.03242779,0.06014385,0.044345696,-0.030903408,0.026191678,-0.043514214,-0.00935417,0.025498776,0.038525324,0.030903408,-0.034783658,0.060421012,-0.016421765,-0.0040361513,-0.014966672,0.033536434,0.005092826,0.019816983,-0.023835812,0.016698927,-0.026053097,-0.009839201,-0.027023159,0.034645077,0.046285823,-0.02799322,0.053492,0.017114667,0.024528714,-0.03242779,0.01856976,0.016006025,0.026884578,4.265675E-4,0.007310111,-0.009423461,0.016976086,0.011710036,-0.067904346,0.021618526,-0.015313123,-0.012264357,-0.013026549,-0.0088691395,-0.019678403,-0.017599698,-0.056263603,-0.017183958,0.012749388,-0.008003012,0.0032566371,-0.035199396,0.010116362,0.0039668614,0.006305404,-0.015243833,-0.0056471475,0.020925626,-0.052383356,0.038248163,-0.03131915,0.03575372,-0.0023385426,-0.0118486155,-0.018431181,0.0048503107,0.0066172094,-0.0063400487,0.034229334,0.019401243,-0.0043999245,-0.028131802,0.05460064,0.0365852,0.029240444,0.04074261,0.061252493,0.03201205,0.024112973,0.043237053,0.014204481,0.06762719,-0.01392732,0.0044345697,0.052660514,0.041851252,0.0016543024,0.042959895,0.019816983,0.009908492,-0.0010913198,-0.057926565,0.0031353794,-0.017738279,-0.007414046,-0.020094143,-0.01815402,-0.009492751,0.012957258,-3.3778948E-4,-0.06873583,0.0015330446,-0.017253248,-0.0039148936,-0.046285823,-0.021064207,0.0047810203,-0.015520994,0.025775936,-0.016837507,-0.024944454,0.08702843,-0.018015439,-0.021341367,-0.035476558,0.007206176,-0.01399661,0.040465448,0.019955564,-0.009769911,0.043237053,-0.010254943,-0.016421765,-0.034506496,-0.014689513,-0.017391829,0.053769156,-0.006859725,0.056540765,0.032704953,0.05460064,0.049611747,0.043514214,0.02245001,-0.005855018,-0.009631331,-0.014550932,-0.016421765,0.03187347,0.015313123,0.0626383,0.047671624,-5.110149E-4,0.043237053,0.02286575,0.06457842,-0.012610808,0.012333647,-0.029933345,-3.7243456E-4,-0.012125776,-0.021202786,0.0057164375,0.025360195,0.05931237,-0.0626383,-0.021895688,0.061529655,0.012541518,-0.013165128,0.002061382,-0.006062888,-0.025637357,-0.005958953,0.008210883,0.05432348,-4.8719638E-5,-0.004001506,0.019678403,0.061252493,-0.008591979,-0.06873583,0.030487666,-0.034229334,-0.00457315,0.017114667,0.0037243457,-0.006305404,-0.008384109,0.048780266,0.0021393334,0.024112973,-0.05875805,-0.005508567,-0.028270382,-0.0067557897,-0.0016196573,-0.039633967,0.02245001,-0.028963283,0.04240557,-0.035199396,-0.020787045,-0.010185652,2.8149123E-4,0.024944454,-0.03298211,0.018015439,-0.08259386,0.013234419,0.03713952,0.044345696,0.022311429,0.011017134,0.028963283,0.032704953,-0.0062361136,0.080930896,-0.03242779,0.0548778,-0.010324232,0.031041987,-0.009769911,0.005092826,-0.020371305,-0.010185652,-0.039079644,0.003291282,0.014550932,-0.016837507,-0.008799849,0.00893843,-0.011155714,-0.030071925,0.02286575,0.0105321035,0.030626247,-0.0043652793,-0.010809263,0.0029621539,0.016213896,-0.0066172094,-5.543212E-4,-0.048503105,0.012541518,-0.062083974,0.019124081,-0.02730032,0.04129693,-0.017738279,0.024528714,0.03575372,-0.014966672,-0.0065479195,-0.056817923,-0.04101977,0.0015330446,0.0062361136,0.03145773,-0.0030487666,-0.05099755,0.008314818,0.004382602,-0.0011432875,-0.028547542,-0.0135115795,0.07261608,-0.03575372,0.028824704,-0.048225947,-0.019955564,-0.012056487,-0.012818678,-0.061252493,-0.023835812,0.013234419,-0.0041920543,0.0074486914,0.013095839,-0.056817923,-0.036862362,-0.010809263,-0.009769911,0.00457315,0.012957258,-8.4014307E-4,-0.030210506,-0.0071715307,-0.0057510827,-0.0061321785,0.05016607,0.021618526,0.0053006965,-0.011363585,0.012195067,0.013858031,-0.010254943,0.0057164375,0.028963283,-0.016213896,-0.032566372,-0.010047072,0.016560346,-0.036030877,-0.028963283,-0.030071925,0.01815402,0.01392732,0.0028408961,0.0025290905,0.0047463756,0.0041400865,0.0365852,0.041851252,0.018431181,0.02799322,0.013858031,0.04490002,0.01787686,-0.024667295,-0.008072303,0.008280173,-0.03215063,0.056817923,0.0023038976,0.016491055,0.089245714,0.033397853,3.3562417E-5,0.021341367,-0.020648465,-0.072061755,0.004538505,-0.0019228017,0.012264357,-0.01371945,-0.010739974,-0.016213896,-0.037693843,-0.040465448,-0.0026676708,0.052106194,-6.0628884E-4,-0.0017582376,0.009492751,-0.041851252,-0.01371945,0.04157409,-0.047948785,-0.049057428,-0.046840142,0.007899078,-0.039633967,0.056817923,0.038525324,-0.021618526,-0.013373,9.051026E-4,0.0027889286,-0.025221616,-0.06014385,0.0060282433,-0.086474106,-0.02716174,-0.014273771,0.018015439,-0.047117304,0.023697231,-0.007414046,-0.012472227,-0.0069290153,-0.028547542,0.0015417059,0.032566372,0.014758802,-0.014966672,0.007483336,0.016560346,0.042959895,0.044345696,-0.08591979,0.023558652,-0.07538769,0.017530408,-0.004088119,-0.03575372,0.016837507,0.06735003,0.034367915,-0.02328149,0.020925626,0.011017134,-0.025083035,0.009769911,-0.011502165,-0.004538505,0.030764828,-0.02272717,0.016144605,-0.019955564,-0.0135115795,0.03630804,0.0017235925,0.0014204481,0.03228921,-0.01378874,0.048780266,-0.015659574,0.043791376,-0.03145773,0.03575372,-0.052660514,0.0015330446,0.030349087,-0.047117304,-0.014550932,0.025775936,-0.03284353,0.019678403,-0.0105321035,-0.028131802,-0.005092826,-0.014065901,0.0088691395,0.051274713,-0.0033952175,0.0015070608,-0.020787045,0.009839201,-0.041851252,-0.015520994,-0.029933345,0.03713952,-0.015313123,-0.06097533,-0.03131915,0.006409339,-0.003603088,-0.014620222,0.014620222,0.026884578,-0.030210506,0.019262662,0.016768217,0.021757107,-0.04129693,-0.03131915,-0.025637357,-0.04600866,-0.039356805,-0.037693843,0.04933459,-0.029656185,-0.00928488,-0.019539822,-0.07538769,-0.01392732,0.05099755,0.0043999245,-0.0041054413,0.044622857,-0.05155187,-0.040465448,0.019401243,-0.0118486155,0.058203727,0.028824704,0.01378874,4.50386E-4,-0.035337977,0.0018968179,0.005958953,-0.017114667,-0.021479947,-0.07483336,0.024944454,0.023697231,0.030487666,0.030626247,0.003741668,-0.010601393,0.030349087,0.014620222,0.034367915,-0.04129693,0.018846922,-0.033397853,-0.015035963,-0.01378874,0.011917906,-0.008418754,-0.018985502,0.030764828,0.072061755,0.06735003,0.067904346,0.028270382,0.03187347,0.006582564,-0.067904346,-0.00682508,-0.016768217,-0.048225947,-0.046840142,-0.005889663,0.005785728,-0.014828092,-0.019124081,-0.06374694,0.052106194,0.057926565,-0.0457315,0.020094143,0.037693843,0.0143430615,-0.009007719,-0.020232724,-0.05570928,0.014550932,-0.008730559,-0.015313123,0.018846922,-0.017183958,-0.07261608,0.026191678,-0.032566372,0.021341367,0.01371945,-0.0043652793,-0.052937675,-0.02716174,0.019262662,0.05986669,-0.062361136,-0.06374694,0.044622857,0.011432875,0.0020873658,-0.0025983807,-0.028963283,0.008730559,-0.04240557,0.010739974,0.027023159,-0.015798155,-0.0070329504,-0.048780266,-0.012749388,-0.009977782,3.8109583E-4,-0.043514214,-0.025637357,-0.042959895,-0.0023038976,0.0071022403,0.012541518,0.020648465,-0.025360195,0.02757748,-0.034367915,-0.0047117304,-0.013234419,0.047394462,0.005958953,0.049057428,-0.0021046884,-0.003741668,-0.014828092,-0.014689513,-0.011294295,-0.03312069,-0.0080376575,0.004677085,-0.01870834,0.028131802,-0.020232724,-0.024251552,0.012125776,0.0043306346,0.011432875,-0.011710036,-0.06596422,0.019816983,-9.35417E-4,-0.008799849,-0.005369987,0.029517604,0.0058203726,0.013442289,-0.047671624,0.0028062512,-0.05570928,-0.036862362,-0.030487666,0.010393523,-0.0026503482,-0.03312069,-0.0025983807,0.0016976087,0.024944454,-0.0039668614,0.013303709,0.016698927,-0.04545434,0.03713952,0.00935417,-0.00689437,0.015035963,0.022311429,-0.016491055,-0.0457315,-0.020787045,0.04240557,0.003932216,0.026053097,0.0126800975,-0.030487666,-0.023420071,0.038525324,-0.029656185,-0.012818678,0.0053353417,0.008799849,-0.037971005,0.0070675956,0.027023159,0.020925626,0.028270382,0.044068538,0.013026549,0.0143430615,0.032566372,-0.019678403,-0.022034269,-0.0060975333,0.06596422,-7.9683674E-4,-0.0023905102,0.0048503107,0.049057428,-0.046285823,-0.04656298,0.002736961,-0.06735003,0.038525324,0.043514214,0.029794766,0.016075315,9.83054E-4,-0.017668989,-0.017668989,-0.02286575,-0.033397853,0.030210506,-0.025221616,0.018846922,-0.04545434,-0.057926565,0.00464244,0.005162116,0.038248163,0.023420071,0.035476558,0.016698927,0.010047072,-0.002927509,-0.017253248,-0.026468838,0.022034269,-0.04656298,-0.01358087,0.004053474,-0.0070329504,-0.01815402,-0.011294295,-0.018431181,-0.0031353794,-0.0010176991,0.010809263,-0.042682733,0.0037936359,0.011571456,-0.05072039,-0.015243833,-0.016213896,-0.012749388,0.011571456,-0.033259273,-0.033813596,0.012056487,-0.030903408,0.006478629,0.021479947,0.019539822,0.008695914,0.046285823,-0.03284353,0.03741668,-0.024251552,0.00907701,-0.0075179813,0.06568706,-0.042959895,-0.005058181,0.057926565,0.048780266,0.056817923,0.010185652,-0.011363585,0.011640745,-0.043237053,-0.016698927,0.0076565617,-0.023558652,-0.01399661,-0.035337977,0.019539822,-0.0071368855,0.018431181,0.020648465,0.046285823,0.028824704,-0.03575372,0.06596422,-0.019262662,-0.014689513,0.03201205,-0.024390133,7.362079E-4,0.033259273,0.019539822,-0.016075315,-0.01365016,0.03741668,0.011917906,-0.010739974,-0.0151745435,-0.010947844,0.05848089,-0.03741668,0.033675015,0.0105321035,-0.044345696,0.03575372,-0.03187347,0.053769156,0.0033086047,-0.023420071,0.06707287,0.057926565,-0.0048503107,-0.012472227,0.007414046,-0.0052660517,-0.036030877,0.053769156,-0.03741668,0.0023038976,0.009769911,0.076496325,-0.076496325,0.015105253,0.003932216,0.021341367,0.017530408,0.0035857654,-0.004347957,-0.015798155,0.033397853,-0.025498776,-0.08148522,0.01392732,0.024251552,0.0457315,-0.061806817,-0.024667295,-0.022172848,0.059035208,0.0126800975,-4.4605535E-4,-0.035337977,0.017668989,0.02272717,-0.048780266,-0.024944454,-0.047948785,0.07150744,-0.0035857654,0.03215063,0.040188286,-0.034090754,0.017253248,-0.043237053,0.014620222,0.083702505,0.07012163,0.043514214,0.009977782,-0.0048503107,0.023697231,-0.09534325,0.0011865939,-0.024251552,-0.009423461,-0.010254943,0.0053006965,0.0053353417,-0.012818678,-0.024528714,0.008141593,-0.026330257,-0.039633967,-0.0365852,0.042682733,0.04517718,-0.02716174,-0.018985502,0.0076565617,0.05016607,-0.033259273,0.061252493,0.02328149,0.025775936,0.009839201,-5.023536E-4,-6.669177E-4,4.5904727E-4,0.015243833,0.0011259649,-0.009562041,0.02272717,-0.0118486155,-0.007691207,-0.023835812,0.025498776,0.001740915,-0.042959895,0.0075872717,-0.048780266,-0.014204481,-0.0731704,-0.013303709,0.033952173,-0.0011952551,0.038248163,0.027716061,0.0135115795,-0.05155187,0.0022692524,-0.047394462,0.009977782,0.03284353,0.04129693,0.026884578,-0.0075872717,0.034090754,-0.027023159,0.024251552,0.025775936,0.034506496,0.0075179813,0.011917906,0.010809263,0.026053097,0.029656185,0.0640241,-0.017599698,0.0033952175,-0.00457315,0.04157409,-0.01856976,-0.025637357,0.013234419,-0.012195067,-0.012610808,-0.030626247,0.0031700244,-0.037971005,0.013165128,0.005577857,-0.02730032,0.025637357,-0.0151745435,-0.014689513,-0.03713952,0.026884578,-0.02799322,0.008765204,-0.031041987,0.0020180757,-0.027716061,0.020925626,0.007829787,0.026884578,-0.018985502,-0.020232724,0.029517604,0.020371305,-0.011086424,-0.008765204,-0.011710036,-0.003949539,0.0063400487,0.026468838,0.011294295,0.04240557,-0.025637357,0.0731704,0.0047810203,0.0048503107,0.025221616,-0.030903408,-0.010601393,0.011432875,0.007933723,0.024667295,-0.03159631,-4.8286575E-4,0.034783658,-0.03215063,-0.033675015,-0.018015439,0.015451704,0.025637357,-0.015590284,0.034367915,-0.02716174,-0.035476558,-0.02757748,-0.016006025,0.016906798,0.00907701,-0.010878554,0.029656185,0.046840142,0.018431181,0.0074486914,0.05432348,-0.033675015,0.026191678,0.0118486155,-0.016976086,-9.1809453E-4,0.018431181,0.030071925,-0.024805874,-0.015035963,0.036030877,-0.0075872717,-0.010947844,-0.012541518,0.0091463,0.029240444,0.021757107,-9.3974767E-4,0.018846922,0.06097533,-0.05875805,0.01787686],"inputTextTokenCount":16}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e863c222-9be1-48eb-a81d-8847bc889133', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 16:45:48 GMT', 'content-type': 'application/json', 'content-length': '723', 'connection': 'keep-alive', 'x-amzn-requestid': 'e863c222-9be1-48eb-a81d-8847bc889133', 'x-amzn-bedrock-invocation-latency': '1493', 'x-amzn-bedrock-output-token-count': '140', 'x-amzn-bedrock-input-token-count': '1130'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176de10>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"In case of a fire occurrence, the security guard should immediately inform the Admin team and the Crisis Management Leader.\",\n    \"References\": [\n        {\n            \"Statement\": \"Immediately inform the security guard as well as Admin team\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page 21\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Who should be informed by the security guard in case of a fire occurrence?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"56\"\n    }\n}","prompt_token_count":1130,"generation_token_count":140,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e1c93ccdf695a29256a487
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 16:45:48] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Who is responsible for overseeing the smooth transition from primary center to the secondary center?', 'conversation_id': '123456'}
INFO:__main__:Received query: Who is responsible for overseeing the smooth transition from primary center to the secondary center?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e204f6cdf695a29256a489
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '48d39043-a557-46ef-9178-f21ccd6d0699', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:00:39 GMT', 'content-type': 'application/json', 'content-length': '12711', 'connection': 'keep-alive', 'x-amzn-requestid': '48d39043-a557-46ef-9178-f21ccd6d0699', 'x-amzn-bedrock-invocation-latency': '66', 'x-amzn-bedrock-input-token-count': '17'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176d7b0>}
INFO:__main__:Response Data: {"embedding":[-0.00530377,0.019152502,-0.02357231,-0.022393694,-0.0054510967,-0.04272481,0.01465903,-0.008544962,0.008950111,0.055984236,-0.0072558518,0.03329589,-0.03314856,0.010460213,0.060404044,0.025782214,-0.05863612,-0.003443767,-0.0079556545,-0.0029465389,0.01929983,0.021362405,0.02504558,0.043903425,-0.0015745567,-0.04184085,-0.063645236,-0.009097438,0.008655458,-0.025192907,0.003333272,0.04714462,0.02887608,-0.032411925,0.031085983,0.044492736,0.027697464,-0.0044013923,0.00552476,-0.035800446,-0.03889431,-0.05392166,-9.85249E-4,0.0021638644,0.027550137,0.036831733,0.05244839,-0.029465387,0.029465387,-0.01274378,0.027550137,0.022246368,-0.04272481,0.021804387,-0.0033701037,0.031969946,0.01488002,-0.0028176277,-0.008508131,5.5247603E-4,-2.5667113E-4,-0.0075873374,-0.045376696,0.046849966,0.006077236,0.0053406013,0.08603893,0.060404044,-0.040072925,0.0050091157,0.020331116,0.017310916,0.00913427,-0.0027992118,-0.030644003,0.024750926,0.023866965,0.014806357,0.020625772,0.050385814,-0.050680466,-0.08191378,-0.012375463,0.009502588,0.020625772,0.029465387,0.009944568,0.020773098,-0.041251544,-0.014732693,0.02121508,0.026518848,-0.0760207,0.031527966,0.043903425,-0.08957478,0.004180402,-0.022835676,-0.020773098,-0.045966003,-0.045082044,-0.06718108,-0.017531905,-0.0017126757,0.027108157,0.06335058,0.06511851,-0.015911309,0.061877314,0.017310916,0.04655531,-0.0035358465,0.039188966,-0.04272481,-0.016868934,-0.025340233,0.036389753,0.055984236,0.009502588,0.027992118,0.08191378,-0.009576251,0.04419808,0.009649915,0.014364377,0.05716285,0.0721902,-0.050385814,-0.013996059,-0.013185761,0.021951713,0.015616655,-0.06276128,0.034327175,-0.008434467,0.025340233,0.06423455,0.01635329,0.041251544,-0.002909707,0.004290897,-0.02592954,-0.015542991,-0.009207933,6.537633E-4,-0.03859966,0.007108525,0.00828714,0.02018379,0.02887608,0.054510966,-0.018857848,0.024308944,0.0025598055,-0.045376696,0.03653708,0.049207196,-0.029907368,-0.009944568,0.002375647,0.006482385,0.001528517,0.05952008,-0.007071693,-0.033885196,-0.024308944,0.0048249573,0.02887608,0.034179848,0.04802858,0.0284341,0.017900223,1.2833557E-4,0.048912544,-0.006924366,-0.029023407,-0.036831733,-0.011123184,-0.030054696,-0.010018231,0.01060754,0.04095689,-1.254581E-4,0.0060404046,0.04478739,-0.045966003,0.03550579,-0.022541022,-0.03550579,-0.016058637,-0.010902193,0.02592954,-0.00637189,-0.012817443,0.033737868,-0.039188966,0.006224563,-0.031822618,-0.07160089,-0.04861789,0.033001233,-0.0013075266,0.002780796,0.056573544,0.09487855,-0.018415866,0.02357231,0.008581794,0.020036463,-0.042135503,0.007108525,0.04567135,-0.038305003,-0.06335058,0.011786155,-0.04802858,0.012228136,-0.006224563,0.0012154472,0.017458241,0.05568958,0.03270658,0.06010939,0.012301799,0.015395665,-0.014732693,0.040662233,-0.054216314,-0.0036647576,0.015174675,0.03859966,-0.004567135,0.015174675,-0.007918823,-0.00552476,0.041546196,0.002090201,0.01760557,-0.0098709045,0.04626066,0.019594483,0.003756837,0.004567135,0.0760207,0.0054142647,0.005708919,-0.042135503,-0.019005176,-0.011123184,-0.031822618,-0.015911309,-0.0284341,0.0107548665,-0.050385814,0.036831733,0.005487928,-7.999392E-5,0.013406752,-0.028286772,0.0075873374,0.005966741,-5.018324E-4,-0.024603598,0.0019797056,0.020331116,-0.020036463,-0.0051932745,0.037715696,0.04950185,-0.011491501,-0.01274378,-0.017679233,-0.0061508995,0.012080809,-0.033885196,0.038305003,0.02696083,-0.026666176,0.022393694,0.043314118,0.009502588,-0.015542991,0.037715696,-0.0360951,0.03742104,-0.013259424,-0.002633469,-0.0047881254,0.017458241,0.01929983,-0.05539493,-0.053627007,0.033443216,-0.068359695,-0.01635329,0.05480562,0.017752895,-0.04478739,0.01929983,0.048323236,0.042135503,-0.020331116,-0.018194877,-0.032853905,-0.03712639,-0.04478739,-0.01296477,0.055100273,-0.032117274,-0.031969946,-0.054216314,-0.016942598,0.02740281,-0.0075873374,0.01929983,0.0049354522,-0.011196847,-0.041251544,0.010681203,0.1213974,0.03550579,0.004180402,-0.008876448,0.020920426,-0.027550137,0.03801035,-0.021067752,-0.05568958,-0.020478444,0.02313033,-0.041251544,0.024750926,-0.0067402073,0.007918823,-0.006703376,0.03859966,0.029907368,0.006887534,-0.032853905,-0.051269773,0.043608773,-0.03859966,0.06718108,-0.0021178247,0.019594483,0.03742104,0.017089924,-0.020478444,-0.039778274,-0.0056352555,-0.00530377,-0.026518848,-0.043314118,0.022835676,-0.0022743596,0.009281597,0.02592954,0.026518848,-0.004548719,0.019889137,0.034327175,-0.03123331,-0.03712639,-0.06541316,-0.014732693,-0.048323236,0.0064455536,-0.022393694,0.021657059,0.034916483,-0.016426953,-0.019594483,0.0154693285,-0.022393694,0.0020994088,0.010902193,0.039188966,-0.05922543,0.05185908,-0.042135503,0.02887608,-0.009023775,-0.028728753,0.007329515,-0.026518848,0.0042540655,0.01443804,0.03034935,0.025782214,0.006114068,-0.019447155,-0.0042172335,0.040072925,0.03123331,-0.0025045578,-0.039778274,-0.005672087,-0.02357231,0.005082779,-0.0079556545,0.015027348,-0.0036463416,0.05156443,3.222777E-4,-0.021067752,0.03889431,-0.052153736,0.04095689,0.010091895,0.04184085,-0.016868934,-0.051269773,0.024308944,-0.005819414,-0.043019466,-0.034916483,-0.06894901,0.03550579,-0.008139813,0.0043645604,-0.0018784185,-0.0360951,-0.041546196,-0.031969946,0.012817443,-0.0021822802,-0.056278888,-0.07837793,0.013185761,0.0024493104,0.006261395,0.015837645,0.03329589,0.022835676,0.05009116,0.061288007,-0.020036463,3.2918362E-4,-0.05775216,0.050680466,-0.051269773,0.019005176,0.0360951,0.009281597,-0.08721755,-0.0035910942,-0.029612714,-0.02121508,0.0050091157,-0.0058562458,-0.053037696,0.019741809,0.02313033,0.034032524,0.01421705,-0.0057457504,0.023277655,-0.029023407,-0.021509733,-0.028728753,-0.009023775,0.03359054,-0.034474503,-0.029023407,-0.028139444,-0.04184085,-0.0057825823,-0.066002466,0.018563194,-0.0052301064,-0.02357231,-0.01760557,-0.02018379,-0.023277655,-0.041251544,0.044492736,-0.035800446,0.018415866,-0.025634887,-0.0071453564,0.022393694,-0.01443804,0.019889137,0.0067770393,0.030938657,0.013038434,-0.030938657,-0.034474503,0.036389753,0.0025966372,-0.06010939,-0.031822618,-0.0032411925,-0.019741809,-0.017900223,-0.009944568,0.024161618,-0.051269773,5.4787204E-4,-0.0284341,0.045082044,0.007661001,0.0117124915,0.018415866,0.0076978323,-0.0060035726,0.00530377,-0.018415866,-0.03859966,-0.044492736,0.07484208,0.06570781,-0.008213476,0.039778274,-0.013775068,0.06659178,0.00935526,0.005266938,-0.020036463,-0.01804755,0.021951713,0.0067402073,0.019889137,-0.023866965,-0.008655458,0.012375463,0.022393694,-0.029907368,-0.019005176,0.0040514907,-0.008323972,0.019005176,0.007329515,-0.0036831733,0.013480415,0.03079133,-0.027108157,-0.008729121,-6.399514E-4,-0.017900223,-0.04036758,-3.3148561E-4,0.022835676,0.024456272,-0.0027992118,0.06276128,0.01826854,0.019005176,0.007034861,-0.005672087,-0.01060754,-0.006703376,-0.0022006962,-0.023277655,0.021362405,-0.01296477,-0.040072925,-5.340601E-4,-0.0010727242,-0.017900223,-0.021951713,-0.024750926,0.0108285295,0.0017218835,0.029907368,-0.048912544,0.001528517,0.010975856,8.9777354E-4,0.00784516,0.006924366,0.027550137,0.009428924,0.0022006962,0.052153736,-0.01635329,0.0135540785,-0.02018379,0.021362405,-0.020036463,0.0154693285,0.027992118,0.024898252,0.03653708,0.00637189,-0.00637189,-0.009023775,0.0145853665,-0.029612714,0.05185908,-0.03079133,0.07160089,-0.03889431,-0.018415866,-0.023424983,0.025192907,0.0079556545,6.2613946E-4,-0.06246662,-8.5173384E-4,-0.004548719,-0.009723578,-0.023277655,-0.008471299,-0.0055984235,-0.0019889136,-0.02931806,-0.086628236,-0.017089924,0.016500616,-0.007476842,-0.05539493,-0.019152502,-0.0012522789,0.01826854,0.030644003,-0.012375463,-0.0145117035,-0.02784479,-0.013406752,-0.014069722,-0.03653708,-0.03712639,-0.013406752,0.03859966,-0.033001233,-0.0023203993,-0.01443804,0.044492736,-0.008323972,-0.008176645,0.033001233,-4.949264E-4,-0.08957478,0.0060404046,0.067475736,0.008618626,0.039778274,-0.046849966,0.0031306974,0.011196847,0.01421705,-0.011344174,-0.0053774333,0.006887534,0.0022375279,0.009097438,0.010165558,0.008250308,-0.033443216,0.08014585,0.034916483,0.043608773,-0.006629712,0.04478739,0.0061877314,-0.06806505,0.05716285,-0.04626066,0.007071693,0.05952008,0.038305003,0.0011509917,0.0052301064,0.003720005,-0.005672087,-0.021951713,0.032853905,0.012154472,0.0033885196,0.020478444,0.008250308,-0.05333235,-0.066002466,-0.054510966,-0.05775216,-0.020625772,-0.032264598,0.004161986,0.008397635,0.021509733,0.02887608,0.0013167345,-0.016279627,-0.015763983,-0.055984236,0.018415866,-0.04243016,0.03742104,-0.006703376,-0.019005176,0.019152502,6.9922746E-5,0.032853905,0.003333272,-0.0568682,0.025782214,-0.050385814,-0.004309313,-4.6039667E-4,0.020773098,0.0145853665,0.019005176,-7.964863E-4,-0.018194877,0.008544962,-0.007881992,0.01296477,0.0154693285,0.029465387,-0.023719637,0.0126701165,0.0025966372,0.043608773,-0.039483618,0.026813503,0.03034935,-0.02018379,-0.025340233,0.03034935,-0.04773393,-0.01104952,5.4557004E-4,0.040072925,0.0071821883,-0.015763983,-0.021657059,0.013480415,-0.058341466,-0.045966003,0.017458241,0.012449126,0.0073663467,0.0041988175,0.003351688,-0.03123331,-0.01826854,-0.0051932745,-0.05480562,-0.026224194,-0.00935526,-0.010975856,-0.03034935,-0.039483618,-0.017531905,-0.045082044,-0.013406752,-0.05009116,-0.0037015893,0.039483618,-0.006519217,-0.011123184,-0.017163588,-0.020625772,-0.006666544,0.030054696,0.025634887,-0.015174675,0.0042540655,-0.024308944,0.05568958,-0.034032524,-0.063645236,0.0048249573,0.0011371798,-0.056278888,0.020036463,-0.0117124915,0.053627007,-0.032264598,0.0014364376,0.017900223,-0.06393989,0.04861789,0.022393694,0.026518848,0.012375463,-0.00935526,-0.016500616,0.017679233,-0.0136277415,0.03889431,-0.00637189,-0.040072925,0.05009116,0.053037696,-0.019152502,-0.022393694,0.009097438,-0.031969946,-0.03859966,9.484172E-4,-0.0126701165,0.027108157,-0.020478444,0.005266938,0.0013167345,-0.002375647,-0.006887534,-0.0136277415,0.04478739,0.0031491134,-0.0038857479,-0.05009116,-0.032117274,-0.0049354522,0.015911309,0.054216314,-0.035358466,-0.0069980295,-0.0017863391,0.015616655,0.055100273,-0.029612714,0.027108157,0.005708919,0.031822618,-0.02401429,-0.03550579,0.045966003,0.05009116,0.07277951,0.0029465389,0.023424983,-0.029465387,-0.04950185,-0.036389753,-0.015395665,-0.026224194,-0.045376696,0.015911309,-0.033443216,-0.0077346643,-0.016721608,-0.040072925,-0.039188966,0.008950111,0.027255483,0.08957478,0.03079133,-0.016500616,0.0072926832,-0.008655458,0.0024677261,0.009723578,-0.054216314,-0.03123331,0.024308944,-0.01826854,-0.038305003,-0.01569032,-0.01635329,-0.0037936687,0.020036463,0.0014824773,-0.04802858,0.01657428,0.017679233,0.05333235,-0.022246368,-0.011859818,0.07661001,-0.008102981,0.045082044,-0.020331116,0.05244839,0.041251544,-0.02592954,0.005266938,-0.04861789,-0.02931806,-0.0117124915,0.0065928805,0.002080993,-0.0069611976,0.01421705,0.021509733,0.02784479,-0.044492736,0.0038489162,-0.048912544,-0.00935526,0.056573544,0.06423455,0.03742104,-0.06393989,-0.04626066,0.024456272,-0.0012614869,0.021509733,-8.28714E-4,0.03859966,-0.034916483,0.031822618,0.027697464,0.024161618,-0.043019466,0.07778862,-0.018857848,-0.006077236,0.033001233,-0.04419808,-0.034916483,-0.0035726782,0.0015561407,-0.005082779,0.040072925,0.025192907,0.02401429,0.0360951,-1.4502495E-4,-0.033443216,0.0135540785,0.004898621,0.021657059,-0.03712639,0.04626066,0.008139813,0.03859966,-0.02209904,-0.019594483,0.02504558,0.029465387,0.052153736,-0.009097438,0.035358466,0.039188966,0.03859966,0.010165558,0.0117124915,-0.036831733,0.05009116,0.010018231,-0.02784479,-0.01569032,0.0012154472,-0.019741809,-0.021362405,-0.025192907,0.012817443,0.026224194,0.0145853665,0.022541022,0.04036758,-0.048323236,-0.034032524,0.024750926,0.04095689,-0.04567135,0.0040699067,-0.04243016,-0.010386549,-0.016132299,0.041546196,0.017237252,-0.029465387,-0.033001233,-0.005119611,-0.018563194,0.03034935,0.0012062393,0.013701405,-0.010018231,0.025782214,0.01252279,-0.012375463,-0.00530377,-0.0010635164,-0.010681203,5.110403E-4,0.054510966,-0.010386549,-0.021657059,0.0046039666,0.0024493104,-0.05568958,0.008397635,0.026666176,-0.015984973,0.023277655,0.04243016,-0.01929983,0.07719932,0.0126701165,-0.002633469,0.016132299,0.028581426,-0.0360951,0.027108157,-0.020036463,0.006887534,-0.024161618,-0.019594483,-0.032264598,0.0145117035,-0.035800446,-0.04567135,0.02592954,-0.0022375279,0.024603598,0.013185761,0.006114068,-0.024456272,-0.022983002,-0.0012522789,6.7217916E-4,0.00913427,0.039778274,-0.04419808,0.01443804,-0.007071693,0.012596454,0.0045118877,-0.021657059,3.1306973E-4,-0.029612714,0.06865435,-0.008544962,-0.063645236,0.03550579,-7.596545E-5,0.017900223,-0.010091895,0.009944568],"inputTextTokenCount":17}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0157e7de-2897-499a-bd31-edaa15441973', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:00:41 GMT', 'content-type': 'application/json', 'content-length': '756', 'connection': 'keep-alive', 'x-amzn-requestid': '0157e7de-2897-499a-bd31-edaa15441973', 'x-amzn-bedrock-invocation-latency': '1470', 'x-amzn-bedrock-output-token-count': '141', 'x-amzn-bedrock-input-token-count': '1139'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176c1c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The BC/DR Leader is responsible for overseeing the smooth transition from primary center to the secondary center.\",\n    \"References\": [\n        {\n            \"Statement\": \"To oversee the smooth transition from primary center to the secondary center\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page 22\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Who is responsible for overseeing the smooth transition from primary center to the secondary center?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"36\"\n    }\n}","prompt_token_count":1139,"generation_token_count":141,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e204f9cdf695a29256a48a
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 21:00:41] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Who is responsible for reporting a power outage during off office hours?', 'conversation_id': '123456'}
INFO:__main__:Received query: Who is responsible for reporting a power outage during off office hours?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '634518ea-df59-4849-b01f-5a0da90dc723', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:02:41 GMT', 'content-type': 'application/json', 'content-length': '216', 'connection': 'keep-alive', 'x-amzn-requestid': '634518ea-df59-4849-b01f-5a0da90dc723', 'x-amzn-bedrock-invocation-latency': '340', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '273'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017a8c40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"Who is responsible for reporting a power outage during off-office hours?\"\n}","prompt_token_count":273,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: Who is responsible for reporting a power outage during off-office hours?
INFO:__main__:Query stored successfully with ID: 66e20571cdf695a29256a48c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9773223d-1040-4710-bba6-08435e84c2df', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:02:42 GMT', 'content-type': 'application/json', 'content-length': '12715', 'connection': 'keep-alive', 'x-amzn-requestid': '9773223d-1040-4710-bba6-08435e84c2df', 'x-amzn-bedrock-invocation-latency': '64', 'x-amzn-bedrock-input-token-count': '14'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176cb50>}
INFO:__main__:Response Data: {"embedding":[-0.057594426,0.022769889,-0.026118401,-0.057326544,0.045004014,-0.054915614,0.02812751,-0.042325206,0.054111972,-0.0052571655,-0.01794803,-0.0060608084,-0.012389498,-0.09536565,-0.008505223,0.03308331,0.02035896,-0.07447093,0.026922045,-3.243872E-4,0.049290113,0.062148403,0.011451915,-0.05143316,4.2484258E-4,-0.038842753,-0.0065296004,-0.010715242,0.027725687,0.045271896,-0.001808197,-0.0047883736,-0.010715242,0.0066300556,0.070184834,0.013594963,0.057058662,0.008069917,0.060005352,-0.018617732,0.013996785,0.01004554,-5.25298E-4,0.015202249,0.047950707,0.054111972,-0.00783552,0.045004014,0.039378513,0.01834985,0.044736136,0.03911063,-0.030136617,0.005190195,0.0010338534,0.010916153,-0.012121617,0.025850521,-0.009241896,-0.0039847307,0.0015319447,0.045271896,-0.063487805,-0.02598446,0.027725687,0.001983994,-0.030002676,0.049825873,-0.05384409,-0.045539778,-0.016072862,-0.042057324,-0.046879184,0.02035896,-0.052236803,-0.020225018,0.026922045,-0.012121617,-0.038039107,-0.019421376,0.019153494,0.019153494,-0.03616394,0.078757025,0.0143986065,-0.016608624,0.036967583,0.004386552,0.023975354,0.06911331,0.022635948,-0.012322528,1.08303466E-4,-4.4210836E-5,-0.03134208,-0.03335119,0.02290383,0.02812751,-0.049290113,0.039378513,-0.017814089,0.04339673,0.016474685,-0.038842753,0.011451915,-0.009777658,-0.015938923,-0.05946959,0.014130725,-0.014666487,0.004269354,0.039378513,-0.012724349,-0.005357621,0.049825873,-0.070184834,0.05357621,0.011786766,-0.016943475,-0.04955799,-2.9927335E-4,-0.03911063,-0.044736136,0.032815427,-0.01567104,0.01279132,0.02598446,0.017278327,0.053040445,-0.032145724,0.005692472,0.0466113,0.004888829,0.05946959,0.0019672513,-0.06268416,0.019421376,-0.060005352,0.01265738,0.0204929,-0.0043195817,-0.009643718,0.022100186,0.047414944,-0.01004554,-0.0038340474,0.03094026,0.011786766,-0.016072862,-0.0025950975,0.0052906508,0.0366997,0.057862304,-0.0020928206,-0.0016742565,-0.021698365,0.061344758,-0.07232788,-0.0028294935,-0.06589874,0.02826145,0.0011384945,0.017546209,0.013862844,0.042860966,-0.013394052,-0.009576747,0.044200372,-0.0077685504,0.01265738,0.022635948,0.0017579694,-0.0012473211,-0.012255558,-0.03147602,0.01299223,-0.0143986065,0.06429145,-0.058130186,-0.043664612,-0.012456468,-0.01794803,-0.020626841,-0.0064626304,0.015537101,-0.04634342,0.055183496,-0.008706134,0.022635948,-0.027457807,0.010715242,0.020626841,-0.025046878,-0.0145325465,-0.037235465,-0.018617732,0.021028662,-0.03094026,-0.033217248,-0.04071792,0.04902223,-0.017144388,-0.01834985,0.024645057,0.03094026,-8.0364314E-4,-0.05196892,0.013594963,0.019957138,-0.003582909,0.05625502,0.027457807,-0.0071993032,0.042057324,0.02317171,-0.04018216,0.0145325465,-0.006931422,0.023707472,-0.02330565,0.05625502,0.02290383,0.038039107,0.007500669,-0.026386283,0.044736136,-0.0409858,-0.027055986,-0.021832306,0.01834985,0.0011301232,-0.034556653,0.058130186,-0.06804179,-0.016608624,-0.042593084,0.0013896329,-0.01017948,-0.001213836,0.0067974813,0.049825873,-0.024243234,-0.015202249,0.004620948,0.017278327,-0.04071792,-0.038842753,0.027859628,-0.05866595,0.004922314,-0.03134208,0.013327082,0.012322528,-0.044736136,0.011451915,0.0039345026,0.0038340474,-0.0040182155,-0.009710688,-0.07822126,0.006964907,8.2875695E-4,-0.03777123,0.019153494,-0.043128848,-0.009777658,-0.02330565,-0.045271896,-0.034824535,-0.015938923,0.031877846,-0.0066300556,0.016608624,-0.04902223,-0.0015905437,0.037235465,0.055183496,-0.032011785,0.008572194,0.0055585317,0.09054379,0.0047548884,0.009442807,0.014599517,0.034824535,6.278462E-4,0.03080632,-0.013929814,-0.021162603,0.045271896,0.02035896,-0.047414944,0.0650951,-0.0366997,0.023439592,-0.00770158,0.028797213,0.028931152,0.006897937,0.016273774,0.023975354,0.057862304,-0.011050093,0.015001338,-0.02531476,0.034154832,-0.0053241355,-0.002963434,0.0028294935,0.043664612,-2.1556053E-4,0.021028662,-0.0108491825,0.04071792,-0.027859628,0.027859628,-0.021564424,0.019957138,-2.1242129E-4,0.02317171,0.022368068,0.0029801766,0.024243234,0.009040985,0.043664612,0.0018751672,0.008270827,-0.0043195817,-0.0049892846,-0.0409858,-0.06295204,-0.0045204926,0.009576747,0.0066300556,0.019019553,-0.014599517,-0.034288775,-0.023707472,0.06188052,-0.014934368,0.01834985,-0.02076078,0.070184834,0.030270558,-0.022368068,0.042593084,-0.01540316,-0.042593084,0.036431823,-0.006429145,-0.0031308597,0.032011785,-0.0041354136,-0.01285829,-0.025850521,0.009241896,-0.02598446,-0.008706134,0.01547013,0.03911063,0.00783552,0.0012975488,0.022368068,0.004855344,-0.01768015,0.002226761,0.0029466916,-0.023573533,0.011920706,-0.015135279,-0.014867398,0.040450037,0.008572194,0.0409858,0.002276989,0.007802035,0.032145724,-0.017546209,0.026118401,0.045004014,0.061344758,-0.024778996,0.04634342,0.03147602,-0.013594963,0.022100186,-0.017814089,-0.010313421,-0.008505223,-0.022234127,0.006194749,-0.010916153,-0.05625502,-0.032279667,0.024645057,0.038842753,-0.032413606,-0.031877846,0.022100186,-0.008840075,0.0030973745,-0.047147065,-0.03830699,-0.018885614,-0.021832306,0.0015821725,0.02571658,-0.0112510035,-0.014934368,0.027859628,-0.020225018,0.027055986,-0.05196892,0.0021765335,0.01299223,-0.02571658,0.006496115,-0.032011785,0.03777123,-0.007969461,-5.8180414E-4,-0.0053241355,0.014264666,0.004922314,0.0018249396,0.0054580765,-0.013929814,-0.0013477765,0.008907044,0.04339673,-0.057594426,-0.06268416,0.05116528,-0.00385079,0.052236803,0.0016575139,-0.016809536,0.035092417,0.006596571,0.0112510035,0.066434495,0.042057324,0.00254487,0.03589606,-0.044200372,-0.010112509,0.034556653,-0.016139833,-0.01279132,-0.00632869,-0.009576747,0.009844628,0.034824535,0.054111972,-0.037235465,0.028663272,0.010648271,-0.045539778,0.014130725,-0.021832306,0.063487805,0.02035896,-0.024511116,0.04018216,-0.027725687,-0.03388695,0.0036666219,0.025448699,0.0054580765,0.031877846,-0.0076680947,0.027725687,-0.012456468,0.042860966,-0.016675595,0.047682825,0.045539778,0.02558264,0.011786766,-0.0143986065,-0.006127779,0.03616394,-0.04875435,0.07982855,0.029734796,-0.044468254,0.02558264,-0.009107956,0.013461023,0.045004014,0.026788104,0.027189925,0.015871951,-0.037235465,-0.026118401,-0.011451915,0.0035159388,0.003080632,0.029332975,-0.061344758,-0.006897937,0.0034824535,0.01794803,0.060541116,0.01808197,0.03857487,0.027591748,-0.034824535,-0.014465576,0.02826145,-0.016943475,-0.02035896,0.032815427,-0.010112509,-0.01004554,-0.035092417,-0.0029132064,0.017814089,0.0019002812,0.014130725,-0.09054379,-0.03134208,-0.002101192,-0.04339673,-0.03589606,-0.007433699,-0.014867398,-0.042057324,0.008907044,-0.008337798,-0.060005352,0.028663272,0.041253682,-0.008639163,0.0017244843,-0.001481717,-0.032011785,0.02290383,-0.03616394,0.032011785,-0.0353603,0.034556653,0.008203857,0.021698365,0.044200372,-0.030672379,0.00632869,-0.015001338,0.04634342,-0.04071792,0.010313421,0.019153494,-0.019421376,-0.021028662,-0.027457807,-0.023439592,-0.009375837,0.008270827,0.025448699,-0.014599517,0.05384409,-0.049825873,-0.003164345,0.019555315,0.028797213,-0.016072862,-0.0010882667,0.02812751,0.017546209,0.0020677068,-0.028931152,0.006429145,0.06429145,-0.025448699,-0.0039010176,0.0066300556,-0.031074202,0.021430483,-0.029600855,-0.02009108,-0.0060608084,0.036967583,-0.042593084,5.7343283E-4,0.017546209,-0.022635948,4.918128E-4,-0.006596571,-0.0366997,0.00639566,-1.0516424E-4,-0.009643718,-0.032815427,-0.055183496,-0.01265738,-0.047147065,0.009375837,0.03147602,0.017278327,-0.043128848,0.024645057,0.036967583,-0.0016575139,-0.0027625232,-0.010715242,0.03589606,0.0011636083,-0.016809536,0.016675595,0.03911063,0.07661398,-0.011050093,0.00770158,-3.139231E-4,0.027457807,-0.02009108,-0.031074202,0.011050093,-0.0010338534,0.024511116,0.06188052,0.0028127509,0.008103401,0.028797213,0.024377175,-0.011050093,0.01794803,0.03589606,-0.021564424,-0.07554246,-7.6597236E-4,0.014130725,-0.041253682,-9.752544E-4,0.078757025,-0.019555315,-0.011451915,0.057862304,-0.03616394,0.028529331,-0.03830699,-0.034556653,-0.03147602,-0.038842753,0.036967583,-0.011652825,-0.034154832,-0.047682825,-0.04018216,-0.023573533,0.06804179,0.053308327,-5.1274104E-4,-0.035628177,0.0051567103,-0.05946959,0.004353067,0.011317974,-0.0409858,0.053308327,-0.02598446,-0.017546209,0.029065093,0.0018333109,0.029065093,-0.0028964637,0.019555315,0.046879184,0.028931152,0.018617732,-0.020225018,-0.05437985,-0.014934368,-0.001925395,-0.019421376,-0.02826145,-0.027591748,0.022769889,0.0039010176,0.0054245912,0.006596571,-0.014063755,0.0148004275,-0.02531476,-0.06161264,0.01794803,0.019555315,0.029065093,0.03616394,-0.009308866,-0.016809536,0.035628177,0.01299223,0.0052571655,0.015336189,0.03308331,0.0045204926,-0.0733994,0.011853736,-0.003616394,-0.013327082,-0.044736136,-0.017144388,-0.027457807,-0.01540316,-0.043664612,-0.013260111,-0.047414944,-0.04339673,-0.007534154,-0.03134208,0.045539778,0.06616662,-0.044468254,-0.026654163,0.024645057,-0.033619072,-0.034288775,-0.029199034,-0.029065093,-0.018483792,-0.03120814,-0.013394052,-0.047414944,0.0032313152,-0.027859628,0.006897937,-0.03830699,0.07447093,-0.0053241355,-0.034020893,-0.0033317704,0.012255558,-0.055451375,-0.04902223,0.01017948,-0.02812751,0.011920706,-0.010514331,-0.03254755,0.02290383,0.024912937,-0.0020844494,0.02317171,-0.0010715242,-0.04018216,1.527759E-4,-0.02799357,-0.023841413,-0.0035661664,0.030270558,-0.017546209,-0.045004014,0.053308327,0.04634342,0.02076078,0.032815427,-0.0025281273,0.009442807,0.014666487,0.008974015,0.00502277,0.030404499,-0.024377175,0.042325206,0.004185641,1.9567873E-4,-0.03589606,0.015001338,0.032815427,-0.0027960085,0.022100186,-0.0011384945,0.014666487,0.0065296004,0.005692472,0.044200372,0.024511116,0.022502007,-0.0032648002,-0.0026285828,-0.0036331366,-0.017278327,0.042593084,0.04152156,0.060005352,0.013394052,-0.06241628,0.023573533,-0.015202249,-0.018215911,-0.016407713,-0.0819716,-0.013394052,0.044200372,-0.005658987,-0.08465041,0.042593084,0.07232788,0.0063621746,0.015938923,-0.027457807,-0.05116528,0.019555315,-0.044736136,0.04152156,0.042325206,0.01573801,0.053040445,-0.006496115,0.007534154,-0.01299223,-0.0366997,0.0010673385,0.015135279,-0.043128848,0.04955799,0.051701043,0.005357621,-0.050093755,0.05437985,0.013461023,0.0015570585,-0.0077685504,0.048486467,-0.020626841,0.003767077,0.034020893,0.035092417,-0.021028662,0.0027960085,0.005960353,-0.058130186,-0.033619072,0.011920706,-0.019019553,-0.0070318775,-0.0064626304,0.055183496,-0.011184034,0.037503347,-0.014599517,-0.03147602,0.008404768,-0.022234127,-0.01017948,-0.060808998,0.00391776,-0.01547013,0.040450037,-0.021162603,0.04634342,-0.01285829,0.004453522,-0.018483792,-0.003080632,0.035092417,-0.0466113,0.058398068,0.039378513,0.030270558,0.008471738,-0.002846236,-0.022368068,0.0025783551,0.033619072,0.013461023,0.015871951,0.011317974,-0.0019337663,-0.016273774,0.002276989,0.019957138,0.0038005624,-0.05062952,0.0030304042,0.0366997,-0.05946959,0.0013812616,0.016675595,0.024243234,0.015135279,0.03120814,0.05946959,-0.013795874,-0.034556653,0.013929814,0.02558264,-0.060808998,0.071256354,-0.0011050093,0.031877846,-0.008639163,1.0725706E-4,-0.06964907,0.05062952,-0.050897397,-0.04018216,-0.03830699,-0.011920706,-0.009174925,-0.013327082,-0.03147602,-0.03294937,-0.023439592,-0.018885614,0.0058264127,0.013929814,-5.0227693E-4,0.02558264,-0.05116528,-0.017546209,-0.06697026,0.0027625232,-0.044200372,0.03616394,0.04152156,0.0021179344,-0.021430483,-0.012724349,0.070184834,0.04580766,0.0018165683,0.014130725,-0.0057929275,0.03589606,0.077685505,-0.021698365,-0.01265738,-0.029600855,-0.0034489685,0.024912937,-0.042057324,-0.025448699,3.139231E-4,0.011117063,0.06804179,-0.009375837,0.0045204926,-0.011719796,0.007232788,0.032011785,-0.0063621746,-0.0010673385,0.0045874626,-0.0366997,-0.023841413,-0.048486467,0.03857487,0.029199034,-0.006663541,-0.035092417,-0.03147602,-0.01808197,-0.02317171,-9.124698E-4,0.018215911,0.006228234,-0.013059201,0.022234127,0.001213836,-0.08893651,0.0072997585,-0.05196892,0.014599517,0.014264666,-0.005926868,-0.043128848,0.019019553,-0.005190195,-0.008840075,0.024243234,-0.0059938384,-0.017412268,0.0040517007,0.009241896,-0.019153494,4.5204925E-4,0.02826145,-0.034556653,-0.015871951,-0.024243234,-0.040450037,0.0013645191,-0.03094026,-0.014264666,0.021028662,-0.004855344,-0.042860966,-0.05357621,0.03080632,-0.021698365,0.0108491825,-0.006663541,-0.021832306,-0.022368068,-0.02826145,0.023707472,0.019957138,0.0707206,0.006931422,-0.04875435,-0.028797213,-0.012724349,0.032011785,0.012255558,-0.0409858,-0.027591748,0.021564424,-0.0033317704,-0.039378513,0.055183496,-0.009174925,0.01279132,0.019555315,-0.017412268,0.044468254,0.01265738,-6.111036E-4,-0.04902223,0.02598446,-0.01547013,0.039914276,-0.0353603],"inputTextTokenCount":14}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'fa75ef89-0fb0-4540-993d-6cf7364c321e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:02:44 GMT', 'content-type': 'application/json', 'content-length': '836', 'connection': 'keep-alive', 'x-amzn-requestid': 'fa75ef89-0fb0-4540-993d-6cf7364c321e', 'x-amzn-bedrock-invocation-latency': '1676', 'x-amzn-bedrock-output-token-count': '164', 'x-amzn-bedrock-input-token-count': '1130'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176e740>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"In case of a power outage during off-office hours, it is the duty of the full-time caretakers or security guards to report any power outage immediately to any member of the management.\",\n    \"References\": [\n        {\n            \"Statement\": \"Concerned person checks the power source and switches on the alternate option on the server and workstations.\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 19\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Who is responsible for reporting a power outage during off-office hours?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"56\"\n    }\n}","prompt_token_count":1130,"generation_token_count":164,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e20574cdf695a29256a48d
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 21:02:44] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?', 'conversation_id': '123456'}
INFO:__main__:Received query: According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd8e94131-7575-46bc-af00-8aa7f912ce78', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:06:44 GMT', 'content-type': 'application/json', 'content-length': '256', 'connection': 'keep-alive', 'x-amzn-requestid': 'd8e94131-7575-46bc-af00-8aa7f912ce78', 'x-amzn-bedrock-invocation-latency': '459', 'x-amzn-bedrock-output-token-count': '37', 'x-amzn-bedrock-input-token-count': '402'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176c700>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?\"\n}","prompt_token_count":402,"generation_token_count":37,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?
INFO:__main__:Query stored successfully with ID: 66e20664cdf695a29256a48f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '26cf96ea-fd8f-4fe3-89b7-5c59c392e06a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:06:45 GMT', 'content-type': 'application/json', 'content-length': '12737', 'connection': 'keep-alive', 'x-amzn-requestid': '26cf96ea-fd8f-4fe3-89b7-5c59c392e06a', 'x-amzn-bedrock-invocation-latency': '75', 'x-amzn-bedrock-input-token-count': '23'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176f160>}
INFO:__main__:Response Data: {"embedding":[-0.034719057,0.054356534,0.007501516,6.2103523E-4,0.061583128,0.0027296094,0.014217533,0.029220566,0.02466467,0.07697891,-0.039274953,0.07006652,0.023407873,-0.002670697,-0.0014924483,-0.02529307,-0.039274953,0.020108776,0.019558927,0.045558948,-2.3933176E-4,-4.2466042E-4,0.047129944,0.027806668,-0.03409066,0.018773427,-0.027806668,0.01696678,0.080120906,0.014767382,0.028120866,0.015552882,0.012725085,0.013981883,0.0842055,0.020265875,0.015709981,0.05781273,-0.047129944,-0.021522675,-0.016495481,0.040845953,5.4616732E-5,0.09237469,0.065981925,8.28456E-5,0.008129915,0.004968282,0.027492467,-0.015709981,0.03393356,0.023722071,-0.035347458,-0.015552882,-0.05247134,0.037232656,-0.02419337,-0.036918458,-0.0088368645,0.003829308,-0.036132958,0.029063465,0.0088368645,-0.0016004543,-0.011861036,0.0064018173,0.03361936,0.03361936,-0.07854991,-0.018773427,0.0025332344,-0.0064410926,0.026392769,0.032990962,0.018773427,-0.01790938,0.04932934,0.0055377684,-0.003259821,0.035347458,-0.015003032,0.03251966,0.0020913912,-0.009111789,-0.0014237171,-0.024821771,-6.259446E-4,-0.02576437,0.020894276,-0.003750758,0.011468287,-0.0048700944,-0.04995774,0.018694878,-0.035347458,-0.038489453,-0.030006064,0.012489435,0.015395782,0.01751663,-0.0012175236,-0.014453183,0.03173416,0.026392769,-0.036918458,0.003790033,0.00919034,0.0064410926,-0.0011733392,-5.473947E-4,0.056870133,0.0028474343,0.070694916,-0.040845953,0.080120906,0.028592166,0.04838674,0.012332335,-0.07854991,0.06692452,0.021836875,-0.03424776,-0.011939586,0.0016299105,0.031105764,-0.045244746,-2.2828567E-4,-0.03236256,0.022936573,0.0053806687,0.055613335,-0.0017182792,0.026392769,-0.028906366,2.5160518E-5,-0.019873127,0.040217552,-0.011782486,0.026078569,-0.024350472,0.030791564,-0.022151073,3.0560824E-4,-0.007815716,0.0135891335,-0.018145029,-0.011546836,0.022308175,-0.045873147,0.07289431,0.018145029,-0.02560727,0.019558927,0.018773427,-0.007658616,0.001462992,-1.7060059E-4,-0.06064053,-7.364054E-4,-0.010132938,-0.02670697,0.0014728107,0.05341394,0.007697891,-0.047129944,-0.043359548,-0.06818132,-0.004104233,0.010682788,-0.0050075566,0.0030241713,-0.0065981923,0.03456196,-0.023407873,0.018773427,0.03236256,-0.029063465,-0.010368587,-0.05058614,-0.01751663,-0.00895469,-0.0072265915,0.013903334,-0.015003032,0.0015906356,0.03346226,0.029691866,-0.069438115,-0.0109184375,-0.046815746,-0.015081583,-0.032833863,0.009740189,0.045558948,-0.043359548,0.011939586,0.0854623,0.001502267,-0.021679774,-0.053099737,0.00848339,-0.07949251,0.030163165,-0.02513597,0.009936564,-0.026078569,-0.014060433,4.786635E-4,0.05058614,0.023879172,-0.010054388,-0.024821771,0.010132938,0.04273115,5.473947E-4,0.029063465,0.021679774,0.0015709981,0.04273115,0.02576437,-0.01704533,0.0016397294,-0.032833863,-0.038175255,0.002327041,0.02466467,-0.036918458,-0.022465274,0.0053806687,-8.652763E-5,0.012175236,0.083577104,-0.031105764,0.020422976,0.020737175,0.0031616339,-0.0065589175,-0.0048700944,-0.0038882205,-0.020580076,0.03346226,0.0030634464,-0.0054199435,0.026549868,0.023250772,0.020894276,-0.016102731,-0.032205462,-4.467526E-4,0.0061268928,0.01680968,0.039117854,-0.009072514,0.015317232,-0.009622363,0.005773418,0.080435105,0.05938373,-0.015081583,0.008287015,-0.016416932,-0.019087628,-0.036290057,0.02560727,0.009111789,0.018616328,-0.020580076,-0.0031616339,0.037861057,0.0064803674,-0.03519036,-0.019087628,0.037232656,-0.028906366,0.02466467,0.03173416,0.0063625425,-0.012096685,-0.05121454,0.029063465,0.05121454,-0.038018156,0.012803635,0.024507571,-0.047444142,-0.030320264,0.012646535,0.019009078,0.019558927,-0.013824783,-0.009308164,0.007383691,-0.003004534,-0.005341394,0.020030227,0.028592166,0.00919034,0.011546836,-0.00793354,-0.00396677,-0.014767382,0.052785538,0.05121454,0.038175255,0.053099737,-0.03173416,-0.04241695,-0.020580076,0.03503326,0.039274953,-0.0064803674,-0.023093672,-0.010368587,-0.020265875,0.04461635,-0.0051842937,-0.055613335,0.023093672,-0.0021306663,0.010132938,0.018145029,4.2220575E-4,-0.053099737,0.031891264,0.020265875,0.011075537,0.00864049,-0.010054388,-0.029534765,-0.0791783,0.015317232,0.038175255,-0.008208466,0.02419337,0.028592166,0.07603631,-0.020422976,-0.0015513607,0.012646535,9.0332393E-4,0.06032633,0.011232637,-0.0065981923,-0.01696678,0.06692452,0.046815746,0.013903334,-0.0029848965,-0.030163165,-0.002631422,-0.0029848965,-0.0020324788,-0.018459229,-0.05058614,-0.009504539,0.01625983,-0.0122537855,-0.013510584,0.024036271,-0.022151073,0.04273115,0.014060433,0.018694878,-0.0014924483,-0.022779474,-0.0066767423,0.018066479,0.056241732,-0.022779474,0.0071480414,-0.03173416,0.0829487,0.0063232677,-0.027178267,0.0014040796,0.005851968,-0.04367375,0.009897288,0.038175255,0.04116015,0.021679774,0.04116015,-0.016416932,-0.02560727,-0.04932934,0.030634465,-0.052157138,0.020580076,0.007501516,-0.038489453,-0.029220566,-0.01759518,-0.037232656,-0.015081583,0.04116015,0.027178267,-0.03676136,0.014453183,0.03676136,-0.009111789,0.01586708,-0.015317232,0.01751663,-0.0060483427,-0.0016004543,-0.011389737,-0.05812693,-0.012725085,-0.010839887,0.015317232,-0.023879172,0.017673729,0.01673113,0.007383691,-0.072265916,-0.04995774,-0.009111789,0.009661638,0.031262863,-0.015081583,0.0029456215,-0.0047522695,0.03361936,6.9222105E-4,-0.048700944,-0.038960755,-0.036447156,0.048072543,0.0071480414,0.003829308,0.013510584,0.037232656,0.021679774,0.041788552,0.011232637,-0.027963767,-0.0088368645,-0.02529307,-0.043359548,0.044930547,-0.018066479,-0.064410925,-0.023250772,-0.03236256,-0.04116015,-0.0848339,0.016495481,-0.065981925,0.011703936,-0.032833863,0.05121454,-0.010761337,-0.0038489455,0.032833863,-0.02670697,0.022151073,0.05906953,-0.010211488,0.030006064,0.038489453,0.02419337,-0.0026903343,-0.018930528,-0.055613335,-0.040845953,-0.009936564,0.021679774,0.0069123916,-0.002513597,0.0072265915,0.010682788,-8.885958E-4,0.019873127,-0.007697891,0.040845953,0.03314806,0.015395782,-0.030320264,0.010211488,0.024350472,-0.037232656,-0.012489435,0.015395782,-0.021993974,0.021993974,-0.012646535,0.03958915,-0.0113111865,0.0066767423,0.012725085,0.03361936,-0.036447156,-0.039117854,7.5604283E-4,-0.011468287,-0.012096685,-0.010682788,-0.01618128,0.032833863,-0.081691906,0.00864049,0.0064410926,0.007815716,-0.018223578,-0.003259821,-0.054984935,-0.00879759,-0.032833863,0.02670697,-0.07163752,0.015552882,-0.022151073,-0.036290057,-0.007815716,-0.021522675,-0.0073051415,0.015552882,-0.014296083,-0.005773418,0.048072543,-0.012960735,-0.026392769,0.01751663,-0.031891264,-0.0024055908,0.02623567,0.04116015,-0.0109184375,0.027806668,0.022465274,-0.009622363,0.04367375,0.043359548,0.06786712,-0.007972816,0.0032401837,-0.008365565,0.019087628,-0.021679774,-0.03173416,-0.023879172,-0.00895469,-0.02466467,0.009111789,-0.004693357,0.017359529,0.03393356,0.020265875,-0.022779474,0.028120866,-0.02560727,0.04053175,-0.052785538,0.014453183,0.04367375,0.06786712,0.00210121,0.0013353485,-0.017673729,0.046187345,0.027806668,0.023093672,-0.032833863,-0.02529307,0.014296083,9.622364E-4,-0.070694916,-0.04932934,0.039746255,-0.02670697,0.04147435,0.029063465,1.656912E-4,-0.009622363,-0.04367375,0.024821771,-0.035661656,-0.049015142,0.021051375,-0.052785538,-0.032990962,-0.015003032,0.017673729,0.019873127,-0.009936564,0.03958915,0.035661656,-0.00840484,0.01625983,0.030163165,-0.036447156,0.03456196,-0.027021168,0.012803635,-0.040060453,-0.006951667,0.05781273,0.015003032,0.021679774,-0.019637477,0.030163165,0.0135891335,-0.0064803674,0.020737175,0.009504539,0.032205462,-0.038646553,-0.04838674,-0.02529307,-0.018459229,-0.001276436,0.03503326,-0.017359529,0.011782486,0.011939586,-0.02545017,-0.06252573,-0.0012960734,-0.007383691,2.4792313E-4,0.002474322,0.013903334,0.05247134,-0.05906953,0.014845933,0.045558948,-0.0122537855,0.046187345,0.018459229,-0.037546854,-0.022779474,-0.01657403,-0.023093672,-0.030006064,0.018066479,-0.01586708,0.04053175,-0.027963767,0.027963767,-0.07132331,-0.02419337,-0.030163165,-0.010290038,0.011625386,-0.02592147,-0.0054199435,0.009897288,-0.056241732,0.014217533,0.0035543833,-0.058441132,-0.0032990961,0.010054388,-0.022308175,0.013353485,0.045244746,-0.022779474,-0.0061661676,-0.06692452,-0.006873117,-0.07635051,0.01751663,7.020398E-4,0.0017575541,-0.011546836,0.020894276,-0.0113111865,-0.014296083,-0.027963767,-0.01712388,0.011703936,-0.037389755,-0.026392769,0.03581876,0.016495481,-0.031891264,0.0014040796,0.0056163184,0.004536257,0.06064053,0.015631432,0.009897288,-0.0014237171,0.012646535,0.027963767,0.04116015,-0.036918458,0.011389737,-0.04116015,0.026392769,0.009818738,-0.0014237171,-0.0032794587,-0.02545017,0.035347458,0.02529307,0.031419963,0.031419963,-0.015552882,0.012803635,-0.0131963845,-0.021365575,0.031105764,-0.05090034,0.036290057,-0.014610283,-0.027178267,0.021208474,-0.037389755,0.0040649576,-0.0018851978,0.007776441,-0.073836915,-0.044302147,0.009308164,0.035347458,0.02497887,-0.0036329331,0.0860907,-0.04367375,0.015003032,-0.010604237,-0.011389737,0.004398795,-0.015631432,0.01625983,-0.015160132,0.023093672,0.009661638,0.011468287,0.012332335,0.004909369,0.011389737,0.036132958,-0.031262863,0.009347439,3.166543E-4,0.00404532,7.265866E-4,0.028592166,0.010839887,0.0050075566,0.004693357,0.019558927,0.00856194,0.011154087,0.03676136,0.027178267,-0.011075537,-0.039117854,-0.031891264,-0.013824783,0.010132938,6.627648E-4,0.0015219045,0.015552882,0.011939586,0.052785538,0.012410886,5.9648836E-4,0.0066767423,-0.009465264,0.05938373,0.04147435,0.0053806687,0.0065589175,0.037389755,0.044302147,0.013746234,0.06472512,0.04273115,-0.0015415419,0.018694878,0.009543814,0.009033239,-0.055299133,-0.023407873,-0.012096685,-0.007854991,0.0012420705,-0.015945632,0.0022386725,0.0035151083,-0.015003032,0.0066767423,0.06032633,0.027178267,0.03424776,-0.030791564,0.031891264,0.00856194,-0.006873117,-0.104314275,-0.01625983,0.03393356,0.01625983,-0.080120906,-0.027806668,-0.0063232677,0.010761337,0.053728137,-0.05781273,-0.0854623,0.065981925,-0.07477951,-0.008051366,0.005969793,0.008758315,0.031891264,-0.04367375,-0.01759518,-0.015160132,0.032990962,0.06503932,0.0032990961,-0.026392769,0.037389755,-1.9882945E-4,-0.04147435,-0.028906366,0.023564972,-0.015317232,0.0011193362,-0.013981883,-0.021836875,-0.022465274,0.0065589175,-0.0135891335,0.005969793,-0.0029848965,0.007854991,0.09425989,0.01759518,0.012332335,-0.011703936,-0.080435105,0.023093672,0.008522665,0.04995774,-0.072265916,0.012489435,-0.0022288535,-0.049643543,-0.004477345,0.017359529,-0.061583128,0.037389755,0.017673729,-0.10117228,-0.04053175,-0.005262844,-0.030163165,-0.0039274953,0.014060433,-0.043359548,-0.0023368597,0.011861036,-0.035661656,-2.0251148E-4,-0.0040649576,0.026392769,-0.00793354,-0.044302147,0.011075537,0.014767382,0.0035740207,0.0135891335,-0.012096685,-0.021522675,-0.046187345,-0.049015142,0.010682788,-0.010839887,-0.061583128,-0.004693357,-0.04273115,0.0074229664,0.038960755,-0.012646535,0.018773427,-0.009504539,0.01712388,-0.012567985,0.023250772,-0.0072265915,0.031262863,-0.05906953,-0.014845933,0.038646553,-0.012882185,-2.3442238E-4,-0.008051366,0.005027194,-0.037389755,-0.009308164,-0.026864069,-0.039117854,-0.009033239,0.02497887,0.054670736,0.006519642,-0.009740189,-0.03346226,-0.0072265915,-0.007815716,-0.04995774,0.03424776,0.0061661676,-0.023564972,0.009033239,0.0074229664,-0.04398795,0.04932934,5.940337E-4,-0.061583128,-0.028592166,-0.021522675,0.0066767423,0.05341394,-0.01657403,0.01712388,0.016495481,0.012018136,-0.00879759,0.010447138,-0.006716017,-0.022465274,0.011546836,0.016416932,-0.019637477,-0.07635051,0.02529307,0.0034954709,-0.005145019,-0.018145029,-0.018066479,0.021051375,0.019794576,-0.016495481,0.0045558945,-0.012410886,-0.037232656,9.376895E-4,0.10871307,0.03581876,-0.02592147,0.038646553,0.028435066,-0.010525688,-0.054984935,0.021051375,0.03251966,0.004654082,-0.011939586,0.014453183,-0.030320264,-0.047129944,0.055927534,-0.07572211,0.013117835,1.4850842E-4,-0.0028474343,0.047444142,0.029220566,-0.0041827825,-0.0135891335,-0.030006064,-0.00840484,0.034719057,-0.013746234,0.04053175,-0.020580076,0.03424776,0.028906366,0.004457707,0.038646553,-0.010839887,0.0067945668,0.038175255,0.009033239,0.0044184322,-0.022622373,0.0045166197,0.029063465,-0.044930547,-0.013274934,0.022779474,-0.019637477,0.003790033,0.0015611794,-0.019637477,-0.0064018173,-0.026392769,0.0055377684,-0.04932934,0.010132938,-0.09174629,0.052157138,-0.04995774,0.031891264,-0.02560727,0.083577104,0.027492467,0.0015611794,-0.028120866,0.002169941,-0.069438115,0.020265875,0.030791564,0.013824783,-0.022779474,-0.005262844,-0.015709981,-0.009740189,0.0056163184,0.016102731,-0.006873117,0.022779474,-0.03314806,0.012803635,0.05090034,0.04995774,-0.07132331,0.012018136],"inputTextTokenCount":23}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '59d7132f-a404-43c2-938e-7d7313af0339', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:06:48 GMT', 'content-type': 'application/json', 'content-length': '1124', 'connection': 'keep-alive', 'x-amzn-requestid': '59d7132f-a404-43c2-938e-7d7313af0339', 'x-amzn-bedrock-invocation-latency': '2373', 'x-amzn-bedrock-output-token-count': '236', 'x-amzn-bedrock-input-token-count': '1167'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176fc70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The purpose of the Crisis Management Team (CMT) in the event of an emergency is to ensure the safety of all personnel at the site, assess injuries and damage, evaluate options for business continuity, and inform customers about the crisis.\",\n    \"References\": [\n        {\n            \"Statement\": \"Ensure the safety of all personnel at the site\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page 7 - N/A - N/A\"\n        },\n        {\n            \"Statement\": \"The Crisis Management Team objectives, by priority, are as follows: Ensure the safety of all personnel at the site\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page 7 - N/A - N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"According to the given context, what is the purpose of the Crisis Management Team in the event of an emergency?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1167,"generation_token_count":236,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e20668cdf695a29256a490
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 21:06:48] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?', 'conversation_id': '123456'}
INFO:__main__:Received query: Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c6973921-fd03-4d5e-8584-3f03fb07b937', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:14:49 GMT', 'content-type': 'application/json', 'content-length': '370', 'connection': 'keep-alive', 'x-amzn-requestid': 'c6973921-fd03-4d5e-8584-3f03fb07b937', 'x-amzn-bedrock-invocation-latency': '599', 'x-amzn-bedrock-output-token-count': '50', 'x-amzn-bedrock-input-token-count': '510'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176cdc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?\"\n}","prompt_token_count":510,"generation_token_count":50,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?
INFO:__main__:Query stored successfully with ID: 66e20849cdf695a29256a492
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b3853e18-b140-46e5-942a-0a93dd7bbbd7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:14:49 GMT', 'content-type': 'application/json', 'content-length': '12759', 'connection': 'keep-alive', 'x-amzn-requestid': 'b3853e18-b140-46e5-942a-0a93dd7bbbd7', 'x-amzn-bedrock-invocation-latency': '79', 'x-amzn-bedrock-input-token-count': '36'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176ec50>}
INFO:__main__:Response Data: {"embedding":[-0.040087312,0.04511992,-0.04511992,-0.06386204,0.036790088,0.01770089,0.118700095,0.022212882,0.06629157,0.008243062,0.016052278,-0.07878632,-0.011366748,-0.0029718408,0.0032972246,-0.015358126,-0.0135359755,0.02516303,0.012928592,-0.047896527,0.039740235,-0.0024837647,-0.023080572,-0.017440584,-0.06351496,-0.08329831,0.0010032674,0.012841823,0.108287804,-0.06351496,0.036095936,-0.032972246,0.010499057,0.028460255,0.020217193,0.016399354,0.029501485,0.0033839939,-0.027939642,0.030369176,0.0168332,-0.0044035306,-8.08037E-4,-0.0052929134,0.011887363,0.009544598,-0.0027332257,0.0035575319,-0.012494747,0.031063328,0.090933986,0.019870117,-0.040434387,0.07115064,-0.029501485,0.03817839,6.33821E-5,0.019089196,0.03540178,-0.0047072223,0.005987066,0.05969712,-0.027766103,-0.032625172,0.07080356,0.014403666,0.033492863,0.014230127,-0.028286718,-0.012928592,0.004143223,-0.04477284,-0.02984856,-0.0043818383,-0.048937757,-0.06837403,0.05518513,-0.026377797,0.0027223798,0.010195366,-0.012755054,-0.004273377,0.05796174,-0.02429534,0.029501485,-0.06351496,-0.019349502,0.028807333,-0.002906764,-0.03470763,0.003709378,0.015271356,-0.044425763,-7.26691E-4,-9.617471E-6,-0.04859068,-0.05969712,-0.042516846,-0.028460255,0.022039345,-0.041302077,0.06282081,0.033492863,0.02984856,-0.046508223,0.028807333,0.030716252,0.04199623,-0.0063341423,-0.054838054,-0.031583942,-0.0216055,-0.02238642,-0.043211,-0.007679063,-0.010932903,0.004143223,-0.036963623,0.006551065,-0.019089196,-0.01587874,-0.026898412,0.021171654,0.031583942,0.033145785,-6.1009505E-5,-0.017006738,-0.0016919969,0.019089196,-0.014316897,0.017440584,0.01587874,0.0135359755,-0.04963191,4.934991E-4,0.025857184,0.012841823,-0.009544598,0.032972246,0.022039345,0.015358126,-0.015705202,0.031236866,-0.01501105,0.033492863,-0.0059436816,-0.005987066,-0.021171654,-0.049978986,9.381906E-4,0.016052278,-0.022907035,0.07948047,-0.0070716795,0.021779038,0.0094578285,0.07566263,-0.03175748,-0.019089196,0.0336664,-0.027071951,0.0022993805,0.056226358,0.04581407,-0.01119321,-0.02429534,-0.046161145,0.0042516845,-0.016225817,-0.011627056,-0.020998115,0.020998115,-0.009935059,-0.042343307,-0.06490327,-0.027939642,-0.0047939913,-0.013796283,0.09718136,-0.026551336,0.0030803022,-0.029327946,-0.0036659932,-0.0022017653,0.020998115,-0.03557532,0.05692051,0.028460255,0.047202375,-0.011019672,0.023254111,0.03540178,-0.011453518,-0.034013476,-0.0067679877,-0.027766103,0.007592294,0.029501485,0.0091107525,-0.03088979,-0.010932903,0.02429534,0.009023984,0.023601187,0.0135359755,0.035054706,-0.005683374,0.044425763,0.07774509,0.009804905,0.0015618433,0.032625172,-0.019262735,0.0038612238,0.07635678,0.02533657,0.045466993,-0.008676907,0.08191001,0.022733497,0.03661655,1.4642281E-4,-0.07010941,0.0068547567,-0.061432503,-0.027766103,-0.018395044,0.019002426,0.011106441,0.028807333,-0.02984856,-0.012668285,0.04199623,0.024989493,-0.015358126,-0.004273377,0.03088979,0.017353814,-0.005813528,0.014056589,-0.05067314,-2.969129E-4,-0.0064209113,0.041302077,-0.020217193,0.06594449,-0.01127998,0.040955003,0.020477502,-0.05136729,0.08885153,0.05865589,0.03557532,-0.05032606,0.009544598,0.005683374,0.020477502,0.02429534,0.037137162,-0.008546754,-0.0035575319,0.04407869,-0.0091107525,0.0014316897,-0.042516846,0.018481812,-0.016572893,-0.0018221505,0.020043656,-0.003405686,0.031236866,-0.027766103,-0.01071598,-0.0094578285,-0.0468553,-0.014403666,0.009587983,0.0028633794,-0.036790088,0.037831314,0.03626947,-0.01770089,-0.019870117,0.017093508,0.027071951,0.0038612238,-0.0045770686,0.0026464567,0.013188899,-0.021258423,-0.016225817,0.01119321,-0.0023102264,0.032104556,-0.0065944493,0.016572893,9.815751E-4,0.044425763,0.0067679877,-0.005596605,0.01071598,0.027939642,-0.025683645,-0.0041649155,-0.032972246,0.052061442,-0.01492428,0.06802695,-0.041302077,0.023601187,0.0069415257,-0.0033839939,-0.013449206,0.012060901,0.014230127,0.022907035,0.023080572,0.026551336,0.036790088,-0.071844794,-0.032278094,0.0011442672,-0.017874429,0.060391273,0.028460255,0.0216055,0.0010791903,-0.036963623,0.0034273784,-0.010629212,-0.009718136,0.0019631502,-0.011540286,0.040955003,-0.0016919969,-0.015271356,0.0135359755,-0.056573436,-0.015618433,0.019783348,-0.074274324,0.025683645,0.01080275,-0.020217193,-0.010108597,-0.02255996,-0.08711615,-0.019523041,-0.017006738,0.00210415,-0.0025271492,0.010325519,-0.016139047,-0.025857184,-0.007375371,-0.018221505,-0.03557532,0.029675024,4.8807604E-5,-0.03175748,0.016486123,-0.0027332257,0.032625172,0.008546754,-0.022212882,0.008850445,0.0071584485,-0.029501485,-0.011019672,-0.029675024,-0.04581407,0.0373107,-0.020824578,-0.051020216,0.0015509971,0.0091107525,0.02342765,0.036790088,0.0012798439,0.0040781465,-0.019262735,-0.014577204,0.07913339,-0.08399246,0.010932903,-0.0017679199,-0.0034490707,-0.023774726,0.0168332,0.03817839,0.034013476,-0.024989493,-0.008633522,-0.033319324,-0.0013991513,0.0137095135,-0.07878632,0.005596605,0.03175748,0.024642417,-0.01492428,0.032798707,-0.042516846,-0.028460255,-0.036790088,-0.031063328,0.004034762,0.062126655,-0.040087312,0.035054706,0.013622744,0.017961198,0.09440475,-0.017267045,-0.022907035,0.024815954,0.0023102264,0.020477502,-0.002505457,0.043558076,0.010629212,-1.0574981E-4,0.038872544,-0.034013476,0.02620426,-0.04581407,0.036790088,8.3515234E-4,-0.062473733,0.0030803022,-0.026898412,0.029154409,0.032451633,0.036095936,-0.012668285,-0.027245488,0.0216055,0.01080275,0.0025813798,0.054490976,0.012581515,-0.013275668,-0.0024512263,0.026898412,0.009154137,-0.01071598,0.035228245,-0.057267588,-0.027071951,0.014230127,0.025510108,-0.054838054,0.03453409,-0.028286718,-0.0028633794,0.0039046083,-0.01127998,-0.07288602,0.0042516845,-0.009197522,0.053796824,-0.024989493,0.029327946,-9.761521E-4,-0.0027006874,0.015791971,-0.0046421452,-0.043558076,0.0020607654,-0.036095936,-0.03765778,-0.0011171518,0.007982755,0.011627056,0.04199623,0.03644301,0.010585827,-0.01865535,-0.01127998,-0.009327675,-0.013275668,-0.0051627597,-0.012841823,-0.04286392,-0.042516846,-0.0087636765,-0.021258423,-0.03921962,0.005683374,-0.019089196,-0.0035792242,0.011453518,-0.0036659932,-0.023601187,-0.057614665,0.042343307,0.01214767,6.372104E-4,-0.039740235,-0.028807333,-0.033839937,0.0011063056,0.019002426,-0.009587983,-0.020651039,0.0022126113,-0.042343307,0.032278094,-0.008503369,-0.031410404,7.971909E-4,-0.048937757,-0.032625172,-2.7522066E-4,0.039740235,-0.01492428,-0.039566696,-0.014143359,-0.038872544,-0.04581407,-3.7419162E-4,0.017180277,0.047896527,-0.049978986,0.02533657,0.0078092166,-0.01770089,-4.8807604E-4,-0.002906764,0.029675024,-0.016746432,-0.0048807603,-0.020651039,-0.033492863,0.016572893,-0.011887363,0.021779038,-0.046508223,0.018915657,-0.043211,-3.0233597E-4,-0.055532206,-0.022907035,0.03852547,-0.041302077,-0.012928592,0.0092842905,0.0071150637,-0.019175965,-0.0026464567,0.02620426,-0.014056589,-0.01214767,-0.031236866,0.048937757,0.03193102,-0.04477284,0.01492428,0.027592566,0.019523041,-0.0017787659,0.026377797,-0.040955003,-0.00563999,-0.03175748,-0.031583942,-0.034881167,0.0092842905,-0.04407869,-0.032625172,0.055879284,0.018395044,0.026377797,-0.029154409,0.002429534,0.02533657,-0.052061442,-0.024468878,0.020477502,-0.065250345,-0.047896527,0.01127998,0.045466993,0.015791971,0.0031236866,0.020477502,0.004446915,0.010932903,0.0013015361,0.011540286,-0.01310213,0.022907035,0.040087312,-0.023774726,-0.008112908,-0.027245488,0.06802695,-0.036963623,0.012755054,-0.05344975,0.032278094,0.022733497,-0.020043656,-0.0020499192,-0.025510108,-0.023774726,0.017267045,-0.013796283,0.040087312,0.013188899,-0.002657303,0.009414445,0.019870117,-0.0066812187,-0.02516303,0.019783348,0.04511992,-0.046508223,0.0020065347,-0.023948263,0.001865535,0.012755054,-0.015358126,0.0468553,0.011106441,0.009935059,-9.815751E-4,0.032451633,0.0039263004,-0.0049675293,-0.017093508,0.047549453,0.013883051,0.09856967,0.039566696,0.006811372,-0.016399354,-0.007375371,4.4740303E-4,5.8569125E-4,0.008980599,-0.044425763,-0.0013666129,-0.04581407,-0.02342765,1.0464824E-5,-0.0077224476,0.018395044,-0.024121802,-0.01119321,-0.05136729,-0.01596551,-0.032104556,0.027766103,0.0058569126,0.02429534,-0.09926382,-0.0216055,0.0039913775,0.023254111,-0.0062473733,0.0373107,0.040087312,0.0030152253,0.005509836,0.01492428,0.01770089,0.0019848426,-0.062473733,-0.039566696,0.025683645,-0.0018329966,-0.015358126,0.006073835,-0.008156293,0.014490435,-0.02984856,0.049284834,0.0046421452,0.02143196,-0.01874212,0.04581407,0.0051627597,-0.0012364592,0.022039345,0.00563999,-0.016312586,-0.013449206,0.013622744,0.015358126,-0.013796283,-0.0018980735,0.021779038,0.015184588,0.004772299,-6.4534496E-4,0.0050542983,0.036790088,-0.012321209,0.0133624375,0.073927246,0.03817839,0.0014099975,-0.014056589,0.012494747,-0.062126655,-0.04477284,0.026377797,0.022039345,-0.02238642,-0.07288602,0.03852547,-0.07635678,-0.055532206,0.03835193,-0.053102672,0.012928592,0.004511992,0.05518513,0.01960981,-0.032625172,0.008807061,-0.028460255,0.019349502,0.027071951,3.3758592E-4,-0.02429534,-0.0047072223,-0.006811372,-0.027071951,0.0026030722,-0.046161145,-0.032798707,-0.008459984,-0.019870117,-0.010629212,-0.0137095135,-0.0023861495,0.004772299,0.055879284,0.037137162,0.027939642,-0.0092842905,0.027939642,0.026377797,0.018568581,-0.02238642,0.004772299,0.06073835,0.044425763,0.009197522,0.05969712,0.006637834,0.01882889,-0.009023984,-0.010585827,0.0016052278,-0.040955003,0.045466993,0.042516846,-0.005813528,0.0025488415,0.0135359755,-0.02620426,0.01770089,0.0036876856,0.042516846,-0.025857184,0.012234439,0.08399246,0.03817839,-0.0077224476,0.0017245354,-0.013622744,0.010585827,-0.024121802,-0.0336664,0.065250345,0.03540178,0.019870117,-0.04199623,-0.0029501484,-0.06872111,0.025683645,0.05969712,0.048937757,-0.022907035,-0.015531664,0.028113179,1.6540354E-4,-0.029154409,-0.038699005,-0.0468553,-0.009154137,-0.022212882,0.006073835,-0.04963191,0.039740235,0.05136729,0.0135359755,-0.008503369,-7.5922936E-4,0.005900297,0.035054706,-0.012234439,0.0050542983,-0.024121802,-0.01119321,-0.0047289142,0.01882889,0.025683645,0.029154409,-0.07878632,0.073927246,0.009935059,0.009935059,0.01119321,0.016312586,-0.0468553,-0.010932903,0.039740235,-0.03661655,0.001865535,-0.004945837,0.026724875,0.018568581,0.04373161,-0.016225817,-0.039740235,-0.052061442,0.025857184,-0.013969821,-5.938258E-4,0.020998115,-0.008503369,-0.0084166,-0.03453409,0.024121802,0.019523041,-0.013622744,-0.015358126,-0.047549453,-0.027939642,0.017874429,-0.002678995,-0.002754918,0.0060304506,0.023254111,0.007375371,-0.043558076,0.032451633,0.040087312,-0.011453518,0.084686615,-0.010325519,-0.016746432,0.006377527,-0.05344975,0.022907035,0.023254111,0.04963191,0.08885153,0.002505457,-0.027071951,-0.011713825,-0.0039263004,-0.027766103,-0.002180073,-0.017006738,-0.0027223798,0.031410404,-0.019089196,-0.05136729,-0.08572784,0.010195366,0.0025271492,-6.643257E-4,-0.001854689,0.04477284,-0.0020499192,-0.05136729,-0.019089196,0.046161145,0.021865806,-0.05969712,0.026030721,-0.041649155,0.053796824,0.011453518,-8.188831E-4,-4.9621065E-4,0.060391273,0.052755594,-0.03175748,-0.004186608,-0.00889383,-0.008459984,0.015618433,-0.015618433,0.040434387,0.011366748,-3.958839E-4,-0.014490435,-0.002906764,-0.039566696,-0.04859068,-0.0031236866,0.002819995,0.011540286,-0.013015361,-0.021171654,4.3384536E-4,-0.023254111,0.002017381,-0.0468553,-0.0016486123,1.8980734E-4,0.07948047,0.009240906,-0.006724603,0.0300221,-0.030195637,-0.0017787659,-0.020043656,-0.00373107,0.07878632,-0.012494747,-0.016486123,0.016486123,-0.010585827,0.05136729,-0.026551336,0.0024620725,-0.013449206,-0.020651039,-0.020651039,0.004772299,-0.046161145,0.005509836,-0.007375371,8.1346004E-4,-0.041649155,-0.023601187,0.033319324,0.0036009166,-0.032625172,1.1049499E-4,-0.013188899,0.008720292,0.017267045,0.030195637,-0.039740235,0.0029284563,0.01770089,-0.009761521,-0.016225817,-0.05136729,-0.05969712,-0.017440584,0.038872544,-0.00793937,-0.01596551,0.032625172,-0.029327946,0.01865535,0.010499057,0.035228245,-0.045466993,0.009804905,0.014577204,-0.02255996,0.0017679199,7.212679E-4,-0.04859068,0.004533684,-0.02255996,-0.03175748,0.0030152253,0.0018438428,-0.036790088,-0.0069415257,-0.04199623,-0.02533657,0.04407869,-0.035054706,0.004945837,-0.0059436816,0.0027223798,0.015097818,-0.07253894,0.025510108,-0.005314606,0.034360554,0.010195366,-0.034013476,0.029675024,0.017353814,0.040087312,0.069762334,0.017267045,0.019436272,0.011713825,-0.009587983,0.0032104556,-0.002657303,0.018308274,-0.022212882,0.025683645,-0.0012798439,-0.00937106,-0.0064209113,-0.0022126113,0.040781464,0.03939316,-0.011713825,-0.030542713,-0.013015361,0.035228245,0.03661655,0.012841823,0.012060901,0.02516303,-0.005314606,0.033319324],"inputTextTokenCount":36}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ccd42a11-569d-40f2-a161-5b19a7143008', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:14:53 GMT', 'content-type': 'application/json', 'content-length': '1754', 'connection': 'keep-alive', 'x-amzn-requestid': 'ccd42a11-569d-40f2-a161-5b19a7143008', 'x-amzn-bedrock-invocation-latency': '3318', 'x-amzn-bedrock-output-token-count': '335', 'x-amzn-bedrock-input-token-count': '1178'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176d180>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Yes, sabotage or vandalism to building, computer equipment, and local communication facilities can be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building. This can be achieved through various measures such as frisking employees at entry and exit points, performing background checks on prospective employees, restricting access to critical IT equipment, and monitoring visitors. Additionally, regular monitoring of the premises by security guards and cameras can help prevent theft of equipment.\",\n    \"References\": [\n        {\n            \"Statement\": \"All employees frisked at the time of entry and exit\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 18\"\n        },\n        {\n            \"Statement\": \"Access to all critical IT equipment is restricted to named users\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 18\"\n        },\n        {\n            \"Statement\": \"The site is manned 24x7 by security guards as well as monitored by security cameras to prevent theft of equipment\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 18\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Can sabotage or vandalism to building, computer equipment, and local communication facilities be prevented by people and staff being aware of suspicious activities/items and regular monitoring of visitors inside the building?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1178,"generation_token_count":335,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e2084dcdf695a29256a493
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 21:14:53] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Who should be immediately notified in case of loss or theft of equipment or data?', 'conversation_id': '123456'}
INFO:__main__:Received query: Who should be immediately notified in case of loss or theft of equipment or data?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5e4644e2-5b9e-42b9-8587-9ba94611f63d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:30:54 GMT', 'content-type': 'application/json', 'content-length': '226', 'connection': 'keep-alive', 'x-amzn-requestid': '5e4644e2-5b9e-42b9-8587-9ba94611f63d', 'x-amzn-bedrock-invocation-latency': '406', 'x-amzn-bedrock-output-token-count': '31', 'x-amzn-bedrock-input-token-count': '672'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0174af50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"Who should be immediately notified in case of loss or theft of equipment or data?\"\n}","prompt_token_count":672,"generation_token_count":31,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: Who should be immediately notified in case of loss or theft of equipment or data?
INFO:__main__:Query stored successfully with ID: 66e20c0ecdf695a29256a495
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7342e759-99d9-4555-8c8b-3aeb86ae9e31', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:30:54 GMT', 'content-type': 'application/json', 'content-length': '12724', 'connection': 'keep-alive', 'x-amzn-requestid': '7342e759-99d9-4555-8c8b-3aeb86ae9e31', 'x-amzn-bedrock-invocation-latency': '64', 'x-amzn-bedrock-input-token-count': '17'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176cfa0>}
INFO:__main__:Response Data: {"embedding":[-3.8339285E-4,-0.015136548,0.021828497,-0.005696122,0.06341417,0.0014539052,0.0213505,-0.025333801,0.017446864,-0.06182085,-0.005337625,-0.008524267,8.3649345E-4,-0.04333833,-0.029635768,0.03282241,-0.0029476436,-0.017606195,0.03744304,0.016729869,0.018641854,0.041107677,-2.9127896E-4,0.031707086,-0.031866416,0.004162551,-0.025493134,-0.019119851,0.067556806,-0.07679807,0.08603933,-0.025652466,0.015773878,-0.009838756,0.018641854,0.03983302,0.0023999396,0.005735955,0.04333833,3.435598E-4,-0.005257959,0.03744304,-2.9376853E-4,0.013463561,-0.026927123,0.05257959,0.008842931,-0.014977216,-0.02437781,0.026289795,0.0068512796,0.07807272,-0.028361112,0.04047035,-0.009201428,0.02437781,-0.023899812,0.0595902,0.00804627,-0.030751092,-0.005218126,0.01975718,0.009679425,-0.007568274,0.03600905,-0.0014738218,0.04811829,0.012905899,-0.06500749,-0.048436955,-0.014180556,-0.07488608,-0.04588764,0.020235175,-0.040151685,0.0065326155,0.024218477,0.04525031,0.047480963,-0.020394508,0.02517447,0.005656289,0.042063672,0.030273097,0.05034894,-0.016490871,0.014817884,-0.006970779,0.02676779,-0.011870241,-0.020235175,0.0064131166,0.0387177,-0.00553679,-0.016331539,-0.022306493,-0.040151685,-0.025652466,0.009201428,0.057678215,-0.027883116,0.07679807,-0.018482523,0.033300407,-0.03664638,-0.003983302,-0.001170095,-0.009440426,0.012268571,-0.031866416,0.0809407,-0.008723432,0.013144897,-0.017765528,0.05417291,-0.03122909,0.058634207,-0.018482523,-0.032344412,-0.0342564,0.051623598,-0.007369109,-0.03505306,-0.025652466,0.030751092,0.010276919,0.023899812,-0.024218477,-0.049392946,-0.024218477,0.017367197,-1.381708E-4,-0.040151685,0.012666901,0.04333833,0.023740482,0.020872504,-0.049074285,0.052898254,-0.0342564,-0.023899812,0.01752653,-0.017606195,-0.06341417,-0.0083649345,-0.012427903,0.013782226,0.010037921,-0.041107677,0.042063672,0.023421817,-1.4875144E-4,0.03808037,0.035371725,0.07679807,-0.062139515,0.10834582,-0.01935885,-0.033300407,0.007687773,0.034097068,0.0017128199,0.059271537,0.03282241,-0.02517447,-0.03664638,-0.03664638,0.012029572,-0.023262484,-8.96243E-4,-0.0070106117,-0.02899844,-0.04333833,-0.009201428,0.0061342856,-0.061183523,-0.026608458,0.009201428,-0.03202575,2.8505505E-4,0.046843633,-0.013463561,-0.020235175,0.016968867,0.02214716,-0.028520444,0.093687266,-0.027883116,-0.04333833,-0.065326154,-0.0042223004,-0.010436252,-0.007528441,-0.03218508,-0.066282146,-0.055128902,0.019677512,0.007488608,-0.043975655,0.0024696474,-0.012587235,0.033778403,0.01951818,0.033778403,-0.051304933,-0.0019119851,-0.01975718,0.026130462,-0.004879545,-0.038239703,0.037921038,-0.027723784,-0.025333801,0.05640356,0.04333833,0.03505306,0.016968867,0.015136548,0.034097068,-0.025652466,0.027405119,-0.015295881,0.0019020268,-0.012268571,-0.022784488,0.01449922,-0.06787547,0.02899844,-0.0066521144,0.06500749,0.06022753,-0.007847105,0.021987827,-0.012188905,-0.014658552,0.01975718,-0.009559926,-0.049074285,-0.003863803,0.030273097,-0.048436955,-0.03983302,0.013463561,0.020075843,-0.017048534,-0.041745007,-7.767439E-4,-0.0028679776,-0.009838756,-0.041426342,0.007209777,0.028361112,-0.013224564,-0.015853543,0.017048534,0.004441382,-0.023581149,-0.027405119,-0.01951818,-0.027405119,0.039355025,-0.005417291,0.0022505657,-0.0076081073,-0.03808037,0.021669164,-0.015455212,-4.2322587E-4,0.019119851,-2.1783684E-4,0.007369109,-0.067556806,-0.013941558,-0.028520444,-0.046843633,-0.003863803,0.038399033,0.025652466,-0.020235175,0.056722224,0.042063672,0.02676779,0.06086486,-0.020872504,0.0077674394,0.011392244,0.037761703,-0.056722224,0.011312578,-3.9833022E-4,4.8795453E-4,-0.04047035,-0.01067525,-0.01951818,-0.010754916,-0.0015236131,-0.007329276,-0.01975718,-0.029317103,0.05417291,0.003385807,0.042063672,-0.015136548,0.025493134,0.018482523,0.010993914,0.030591762,0.033937734,-0.03138842,-0.0019418598,-0.033778403,0.013144897,-0.042701,0.0010605542,-0.027883116,0.007528441,-0.0060546193,0.0027086455,0.025652466,-0.023899812,-0.017207865,7.269526E-4,-0.043019664,0.042063672,-0.012029572,0.01792486,-0.020075843,-0.08030337,-0.037124377,-0.02820178,-0.076479405,0.058634207,0.0062139514,0.013383895,0.035371725,0.041426342,-0.0387177,0.0387177,-0.049074285,0.015614545,-0.046206307,0.009599758,0.035690386,-0.024696473,-0.059908863,-0.001991651,0.01752653,0.0015534878,0.03903636,-0.010914248,-0.0013543228,-0.021031836,-0.0011203038,-0.028520444,-0.064688824,0.01991651,-0.02214716,0.01951818,-0.012109239,-0.010993914,-0.048436955,-0.029317103,0.039355025,-0.01410089,0.023581149,-0.03441573,0.03951436,-0.015216215,-0.029317103,0.029317103,-0.024059145,0.037602372,-0.013941558,0.025652466,0.0016729869,0.008245436,0.004879545,0.014817884,-0.029157773,-0.011949906,-0.030273097,-0.0070106117,0.014578886,0.0062936177,-0.03680571,-0.005696122,-0.00975909,-0.03808037,0.03680571,-0.032344412,0.03505306,-0.031707086,-0.032981742,-0.06883146,0.0015236131,-0.008205603,-0.046524968,0.008404768,0.0387177,0.03951436,-0.01935885,0.010595583,0.028839108,-0.046206307,0.0063334503,-0.0595902,0.029954432,0.0083649345,0.009002263,-0.084127344,-0.018960519,-0.028361112,-0.007528441,-0.020394508,-0.008444601,0.011631242,-0.04525031,0.005815621,0.032663077,-0.0064529497,-0.017367197,0.0010954081,0.017207865,-0.029317103,0.028839108,-0.04047035,-0.006891113,-0.023581149,0.008165769,-0.0051384596,-0.007568274,0.017207865,0.050030276,-0.00724961,-0.025015138,-0.0085641,-0.017287532,-0.016809536,-0.0025692298,-0.02437781,0.015136548,0.0042422167,0.03441573,0.038399033,0.07807272,-0.048436955,0.07297409,-0.045568977,0.008404768,0.003385807,-0.0076479404,-0.021669164,0.053216916,0.042063672,-0.041107677,0.021669164,-0.020713171,-0.009121762,0.005735955,-0.012985565,0.031866416,0.0028878942,-0.0076081073,0.01107358,-0.0021211084,-0.04811829,-0.01752653,-0.036327716,0.00987859,0.03951436,0.015853543,-0.0022704822,0.058634207,0.05735955,0.013622893,0.065963484,0.021669164,-0.020713171,0.010276919,-0.014817884,-0.021987827,0.0031468088,-0.03808037,-0.015295881,-0.025333801,-0.02676779,0.03680571,-0.015933208,0.014817884,0.058634207,0.013782226,-0.033619072,0.012587235,-0.012109239,-0.055128902,0.016968867,0.0040430515,0.024537142,-0.046206307,-0.017207865,-0.036965046,0.0045011314,-0.045568977,-0.005377458,-0.007568274,0.01107358,-0.017287532,0.012188905,-0.023421817,-0.011631242,0.01609254,0.011153246,0.039355025,-0.01991651,-0.02294382,0.010834582,0.018562188,-0.024696473,-0.037602372,0.029157773,-0.043656994,-0.0056164563,0.018163858,-0.0068114465,-0.03903636,0.012826233,0.042701,-0.03951436,0.004879545,-0.0029675602,-0.004720213,0.0064927824,0.0036845545,-0.046843633,0.020713171,-0.019040184,0.0068114465,-0.050986268,-0.006014786,-0.021031836,0.0042621335,-0.007130111,-0.018482523,0.041745007,-0.004122718,-0.014021223,0.02676779,-0.005815621,0.046206307,-0.018004525,0.010754916,0.004939295,0.007488608,0.0023501483,0.046524968,-0.0010008047,-0.016411206,0.050030276,0.015375546,-0.030591762,0.01609254,0.02899844,0.0045011314,0.020713171,0.03521239,0.004720213,-0.015933208,-0.01449922,-0.020235175,-0.02517447,0.0387177,0.0039434694,0.059271537,-0.04429432,0.008165769,0.011710908,-0.027564451,-0.013224564,0.012109239,-0.015216215,0.0030273097,0.017685862,0.004720213,8.613891E-4,-0.011232913,0.013782226,0.052260924,0.010834582,0.008444601,0.033619072,-0.031866416,0.031866416,0.053216916,-0.062139515,-0.0774354,-0.042063672,0.0387177,0.048436955,-0.018960519,-0.05640356,0.04525031,-0.03202575,0.04588764,0.013383895,-0.0297951,-0.026927123,0.013383895,-0.0014738218,-0.008325102,-0.03138842,0.05194226,-0.019677512,0.084127344,-0.051304933,0.051304933,-0.020075843,0.0016729869,-0.07902872,-0.023103153,-0.008524267,-0.02676779,-0.0057757883,-0.020713171,0.033459738,-0.018641854,-0.032981742,8.613891E-4,0.024059145,-0.013941558,0.0036845545,0.04971161,0.016331539,-0.03505306,0.017845193,-0.02676779,0.021509832,0.0010107629,-0.0034057233,0.04333833,-0.011551577,-0.017765528,-0.010117588,0.0030273097,-0.020713171,0.016490871,-0.004919378,-0.03489373,0.06946879,-0.036965046,-0.0029675602,8.265352E-4,0.03138842,-0.024696473,0.009201428,-0.01107358,0.03489373,0.004321883,-0.040789016,-0.03489373,-1.9543077E-4,0.007169944,-0.00936076,0.03489373,0.0012945732,0.033459738,0.0297951,-0.0044015488,0.03664638,-0.038239703,-0.018004525,-0.009042096,-0.033937734,-0.015933208,-0.0025692298,0.018482523,-0.03505306,-0.030751092,-0.03282241,0.0045011314,0.04811829,-0.0117905745,0.028361112,0.0076479404,-0.0011999698,-0.014578886,-0.008763265,-0.0027086455,0.013702559,-0.041107677,0.0043417993,0.027564451,-0.0297951,-0.0024397725,0.01147191,-0.016172206,-0.03202575,0.023899812,0.027723784,0.0088030975,0.048436955,0.05034894,0.02676779,0.037761703,-0.01410089,0.036965046,-0.016650204,0.002141025,-0.012985565,-0.005656289,0.051304933,-0.025811799,0.025333801,-0.03043243,-0.06500749,0.008006438,-0.011710908,-9.6097164E-4,-0.009520092,-0.00804627,0.0038040536,-0.024855806,0.0034455564,-0.020075843,-0.03202575,8.315143E-4,0.03808037,0.017765528,0.025811799,0.026289795,-2.763416E-4,-0.013782226,0.03218508,0.016012875,-0.009042096,-0.067556806,0.010595583,-0.06022753,0.008683599,-0.020394508,-0.05353558,0.024059145,-0.015534879,0.046524968,0.018243523,-9.709299E-4,-0.0014439471,0.0050189607,-0.05257959,0.00987859,-0.0031468088,0.043656994,0.002768395,0.053216916,-0.026449127,-0.014658552,0.017207865,0.012666901,-0.049074285,0.009440426,0.052260924,0.004799879,-0.04333833,0.028361112,0.0026488958,-6.099431E-4,0.026130462,0.0017327365,-0.015534879,0.034575064,0.04047035,0.05257959,0.02676779,0.06182085,-0.030113764,-0.012188905,0.039355025,0.0011352411,-0.009081929,0.053854246,0.0061741183,-0.014180556,0.0041028014,0.01449922,0.035371725,-0.022625156,0.031707086,0.01569421,-0.005337625,0.0057757883,-0.026130462,0.015933208,-0.0060546193,-0.103247195,-0.021191167,0.074567415,0.027405119,-0.082215354,0.045568977,0.058634207,0.019677512,-0.0092412615,-0.00975909,0.027086455,0.041107677,-0.020235175,0.05353558,0.028042447,-0.0052977917,0.04429432,-0.03441573,0.013782226,0.009559926,-0.014180556,0.00553679,-0.012507569,0.01935885,0.021987827,0.005496957,-0.039355025,-0.010117588,0.038399033,0.004939295,0.0010655334,-0.036965046,0.04588764,-0.055447567,-0.007687773,0.01991651,0.019199517,-0.014021223,-0.026289795,-0.03282241,0.011551577,-0.0048397123,0.021191167,-0.06245818,0.015216215,0.038399033,0.050986268,-0.028042447,-0.03983302,-0.066282146,-0.024537142,0.014339888,-0.0085641,-0.012666901,-0.056084894,-0.020872504,-0.05417291,-0.06787547,-0.022784488,0.0898633,-0.016012875,0.0809407,-0.04429432,-0.007966604,0.0026688124,-0.024537142,0.04333833,0.034097068,0.03664638,0.033619072,-0.043656994,0.0595902,-0.005855454,-0.030910425,-0.0063334503,0.024696473,0.007926771,0.053216916,0.031707086,0.01067525,-0.0018422772,-0.0036048885,0.038239703,-0.047799625,0.034097068,-0.01951818,0.023103153,-2.1783684E-4,0.025811799,0.01147191,0.019040184,-0.008404768,-0.067556806,0.018482523,0.00724961,-0.005974953,0.03282241,0.06500749,-6.0496404E-4,0.06564482,0.016570536,0.0035650556,-0.014738218,0.0032663078,-0.020235175,0.021191167,-0.0049791276,0.082852684,-0.023740482,0.005337625,-0.0062537845,-0.0039036362,-0.030910425,-0.058634207,0.054810237,0.02214716,-0.013622893,0.04811829,0.020872504,-0.013543228,0.0012547402,0.002150983,-0.009599758,0.03600905,0.008723432,0.040151685,0.020553838,0.03138842,0.034575064,0.013383895,0.01609254,-0.018243523,0.0014837801,-0.009838756,0.043656994,-0.025493134,0.034097068,-0.074567415,0.041745007,0.029157773,0.007209777,-0.07010612,0.024696473,0.0022804404,0.015933208,-0.015136548,-0.036965046,0.02597113,0.0016331539,0.03505306,-0.036965046,0.032503746,-0.023581149,-8.315143E-4,0.015933208,0.014738218,-0.022306493,-0.03983302,-0.002688729,-0.016650204,-0.007926771,-0.019040184,-0.007488608,-0.013782226,-2.3152944E-4,0.009042096,0.0076479404,0.022784488,-0.030751092,-0.0068512796,0.043019664,0.010595583,0.011232913,-0.052260924,0.0117905745,0.013224564,-0.029635768,0.035371725,0.019677512,0.0027086455,-0.0063732835,-0.0043417993,0.004799879,-0.012029572,-0.07138077,-0.019119851,-0.0103565855,0.005735955,0.03584972,-0.0051782927,4.406528E-4,-0.008603932,-0.012507569,-0.043975655,0.0024696474,0.0064131166,0.013383895,-0.075523406,0.064688824,-0.0025891464,-0.017207865,-0.009121762,0.013463561,0.020872504,-0.04333833,0.0018621938,0.024855806,0.08030337,7.3193177E-4,-0.051304933,0.03600905,-0.015933208,0.021669164,0.047162298,-0.023103153,0.043975655,0.036965046,0.016570536,-0.010117588,-0.023740482,0.0023601064,0.04333833,0.01951818,0.0076081073,0.03505306,0.020394508,0.015853543,-0.029157773,-0.004162551,0.01951818,-0.035690386,-0.02214716],"inputTextTokenCount":17}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2d8db8bd-764d-4438-8a95-c7dd74ff516a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 21:30:57 GMT', 'content-type': 'application/json', 'content-length': '1095', 'connection': 'keep-alive', 'x-amzn-requestid': '2d8db8bd-764d-4438-8a95-c7dd74ff516a', 'x-amzn-bedrock-invocation-latency': '2146', 'x-amzn-bedrock-output-token-count': '214', 'x-amzn-bedrock-input-token-count': '1085'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176c850>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"In case of loss or theft of equipment or data, the following individuals should be immediately notified: immediate supervisor, Admin, and IT department.\",\n    \"References\": [\n        {\n            \"Statement\": \"Immediately report the incident to your immediate supervisor, Admin, and IT department\",\n            \"source\": \"Gemini - Asset Management Policy and Procedure v1.9_India.pdf - Page 5\"\n        },\n        {\n            \"Statement\": \"If an employee's computing device be lost or stolen, the employee MUST: (i) Immediately report the incident to his/her immediate supervisor, Admin, and IT department;\",\n            \"source\": \"Geimini - E POLICY V1.6_India.pdf - Page 6\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Who should be immediately notified in case of loss or theft of equipment or data?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1085,"generation_token_count":214,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e20c11cdf695a29256a496
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 21:30:57] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster?" ', 'conversation_id': '123456'}
INFO:__main__:Received query: How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster?" 
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '147dc28e-e221-4d11-9798-7a5d8dfdf7f5', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 22:02:58 GMT', 'content-type': 'application/json', 'content-length': '375', 'connection': 'keep-alive', 'x-amzn-requestid': '147dc28e-e221-4d11-9798-7a5d8dfdf7f5', 'x-amzn-bedrock-invocation-latency': '652', 'x-amzn-bedrock-output-token-count': '53', 'x-amzn-bedrock-input-token-count': '656'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176d540>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster, considering measures to prevent sabotage or vandalism and protocols for reporting loss or theft of equipment or data?\"\n}","prompt_token_count":656,"generation_token_count":53,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster, considering measures to prevent sabotage or vandalism and protocols for reporting loss or theft of equipment or data?
INFO:__main__:Query stored successfully with ID: 66e21392cdf695a29256a498
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a2d0133e-852e-408c-b6f0-91df0d25c29b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 22:02:58 GMT', 'content-type': 'application/json', 'content-length': '12759', 'connection': 'keep-alive', 'x-amzn-requestid': 'a2d0133e-852e-408c-b6f0-91df0d25c29b', 'x-amzn-bedrock-invocation-latency': '69', 'x-amzn-bedrock-input-token-count': '39'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176c2b0>}
INFO:__main__:Response Data: {"embedding":[-0.011081182,0.08069883,0.023851871,-0.013317295,0.05048646,0.021168536,0.041740775,0.031802494,0.036771636,0.033988915,-0.01351606,-0.008447538,0.016100014,-0.009739514,-0.0094413655,-4.0374263E-4,-0.055256836,0.031007433,0.038162995,-0.0010994222,-0.0055157454,7.857453E-4,0.033193853,0.03975312,-0.026833355,-0.07115808,-0.016596926,0.033790153,0.05724449,-0.037367932,0.06400252,0.024746317,0.003142981,-0.013416678,0.05366671,0.036175337,0.029616075,0.042734604,-0.025441997,-0.009838897,-0.04472226,0.05644943,-9.192909E-4,0.081096366,0.05962968,0.0038510833,0.012919764,0.01028612,-0.011329639,0.032200027,0.06678524,0.007503401,-0.03160373,0.03021237,-0.054461773,0.044921026,0.002894524,-0.03875929,0.01987656,0.006608956,-0.020075325,0.06519511,-0.0069071045,-0.037367932,-0.03339262,0.023354957,0.07314574,0.07354327,-0.08944452,-0.0045964546,0.0026957584,-0.051281523,0.010783033,0.018584583,-0.02802595,-0.02057224,0.054461773,-0.0092922915,-0.016100014,0.046312384,-0.007851241,0.05366671,0.02236113,-0.0012795535,0.05366671,-0.005863585,0.012720998,0.012174393,-0.02623706,-0.038560525,-0.011478713,0.01878335,-0.024448168,-0.013019146,-0.035380278,-0.01207501,-0.03339262,0.03160373,0.007602784,0.018683966,-0.017391989,0.04571609,0.028224714,0.03021237,-0.0036026265,0.031007433,0.025640761,0.035976574,0.03796423,-0.016100014,0.014509888,0.014112357,0.078711174,-0.00993828,0.07314574,-0.008944452,0.020174708,0.010435194,-0.017988287,0.038560525,0.02415002,-0.027230887,-0.010335811,-0.03339262,0.020075325,0.0047206827,0.044921026,-0.0053418255,-0.030808667,0.031206198,0.02802595,-0.0047206827,-0.030411135,-0.0369704,0.040349416,0.0085469205,0.018982114,0.009540749,0.07433833,0.0045964546,0.031206198,0.0053915167,0.024348786,-0.058834616,0.030411135,0.023951255,0.029218543,0.049492635,-0.042138305,0.0083978465,-0.009739514,-0.030411135,0.05406424,-0.009192909,0.0053915167,0.007304636,0.032200027,-0.03796423,-0.022957426,-0.029417308,0.006857413,0.0020249246,0.028622245,0.0012795535,-0.043132134,-0.017391989,-0.06082227,0.020771004,-0.041740775,-0.0071555614,0.0433309,0.040349416,-0.024746317,0.014410506,-0.017491372,0.0184852,-0.03557904,0.028622245,-0.020373473,-0.029616075,-0.0017640446,-0.0044970717,0.00257153,-0.023653107,0.029019777,0.061617333,0.05366671,-0.041343246,-0.014509888,-0.042734604,0.02415002,0.012571924,-0.012571924,0.016795693,0.0039504664,-0.042734604,0.062014867,-6.894682E-4,-0.031206198,-0.074735865,0.0075530927,-0.047703743,-0.0012360736,-0.033591386,-0.016596926,-1.2267564E-4,-0.027628418,0.049492635,0.07036302,0.01918088,-0.023951255,0.0375667,-0.024348786,0.07354327,0.011578096,0.020870388,0.02663459,-0.012323467,0.06599018,0.036771636,0.008348155,0.046709914,-0.047306214,0.0023727643,-0.044125963,-0.008149389,-0.0078015495,0.011677478,0.040945712,0.0040250034,0.005863585,-0.014112357,-0.022858044,0.050883994,0.015702482,-0.014012975,-0.020174708,-0.008994143,-0.005615128,0.02345434,0.006559265,-0.010932107,-0.023156192,0.06042474,0.017590756,-0.0018882732,0.015205568,0.018187052,-0.028622245,-0.024348786,0.04690868,0.04790251,0.009640131,-0.058437087,0.034982745,0.0040250034,0.02345434,0.046709914,-0.016100014,-0.008000315,0.0022733815,-0.03438645,-0.02524323,0.006360499,-0.032597557,0.038560525,-0.008845069,-0.024945082,0.055256836,0.012720998,-0.0029193696,-0.040349416,-0.025640761,-0.047703743,-0.018385818,-0.0064101904,0.026038293,-0.009640131,-0.046709914,0.075530924,0.020671623,-0.012571924,0.029616075,0.012621615,-0.0039256206,-0.047703743,0.015404333,-0.004372843,0.038958058,-0.019280262,-0.026435824,-0.0079506235,0.024945082,-0.003627472,-0.027628418,0.044921026,0.007304636,-0.009888588,-0.0016398162,-0.022162365,-0.0056648194,0.017690139,0.023653107,-0.010584268,-0.010534576,-0.040746946,-0.026833355,0.077916116,-0.006509573,0.012820381,-0.024746317,-0.0013665134,-0.022460513,0.041740775,0.031007433,0.038560525,-0.046709914,0.04472226,0.024646934,-0.012919764,0.047703743,0.0020746158,-0.04432473,0.044125963,0.05724449,0.032597557,0.020373473,-0.036771636,0.010832725,-0.055654366,-0.049890164,0.033193853,0.0091432175,0.01918088,0.0014286278,0.015205568,-0.008994143,-0.008497229,0.021566067,0.016596926,-0.0016646619,0.004521917,0.041343246,-0.006037505,0.0024100328,0.05724449,-0.024348786,-0.022659278,-0.064400055,-0.018187052,-0.0029193696,-0.04790251,-0.01421174,0.0057393564,-0.022858044,0.0043479973,-0.05923215,0.012174393,0.030808667,-0.0032547866,0.0433309,-0.022460513,0.02166545,-0.048697572,-0.045318555,0.0077021667,0.00959044,0.033193853,-0.0433309,0.033591386,-0.02345434,0.044125963,0.031404965,-0.03875929,0.0020125017,0.008795378,0.01172717,0.0040001576,0.021566067,0.0016646619,-0.021069152,0.027827183,0.040349416,-0.06917043,-0.05923215,0.010683651,-0.04372843,-0.025441997,-0.0075530927,-0.04432473,0.020472856,-0.037765462,-0.031007433,-0.046709914,0.011975627,0.017491372,-0.016298778,0.029616075,0.033591386,0.0041492316,0.045318555,0.035976574,-0.010534576,-0.018982114,-0.0010435194,0.02345434,-0.038560525,0.04690868,-0.030808667,0.012621615,0.027827183,-0.012224084,0.05048646,-0.0055902824,-0.066387706,-0.033988915,-0.012720998,-0.015901247,0.0011056337,0.017988287,0.015205568,5.714511E-4,0.055256836,-0.051281523,0.010236428,-0.058039553,-0.033988915,-0.003379015,0.036175337,-0.008497229,-0.04571609,0.055654366,-0.02345434,0.041343246,-0.0040250034,0.013019146,0.0055157454,0.009987971,-0.039554354,0.022957426,-0.002807564,-0.048896335,-0.03200126,0.0013789363,-0.0030187524,-0.046312384,0.008497229,-0.0918297,0.075530924,-0.0036026265,0.0047206827,-0.05724449,0.032200027,0.016795693,-0.023156192,-0.003726855,0.008298463,-0.034982745,-0.009391675,-0.008298463,0.048697572,-0.014509888,0.0024473013,-0.057642024,-0.04591485,-0.033591386,-0.0041989232,-0.05366671,-7.081024E-4,0.010037662,-0.008050007,0.034187682,0.04432473,-0.017988287,0.027628418,0.028224714,-0.0030932897,-0.023156192,-0.0048946026,0.012323467,-0.024646934,-0.020771004,0.0014162048,-0.055256836,0.010435194,-0.04591485,0.0077021667,-0.013416678,0.0071555614,0.03657287,0.015304951,-0.017690139,-0.070760556,-0.025839528,-0.016100014,-0.012174393,0.042138305,-0.0040995404,0.013814209,-0.064400055,0.029616075,0.0048946026,0.01778952,-0.0026709128,0.0074040187,-0.029616075,-0.0026957584,0.03299509,-0.015503717,-0.029616075,0.006459882,0.0086959945,0.007900933,-0.0018385818,-0.033988915,-0.017690139,0.019479029,0.009689823,-0.027628418,-0.031802494,-0.025839528,-0.02524323,0.021168536,-0.010335811,-0.0022982273,0.025839528,0.027827183,-0.008099698,-0.018982114,0.0071555614,-0.017491372,0.05366671,0.015304951,0.020174708,-0.013814209,-0.018882731,-0.02842348,-0.032200027,-0.04432473,-0.024746317,0.017491372,-0.033591386,-0.006459882,0.034187682,-0.006559265,7.795338E-4,0.0037517005,0.017093841,-0.006037505,-0.035976574,0.011677478,0.01600063,-0.016298778,0.0092426,0.054461773,0.058834616,-0.022659278,-0.025143849,-0.0019876559,0.02345434,0.007602784,0.02842348,4.938083E-4,-0.040746946,0.018187052,-0.037169166,-0.06559265,-0.028622245,0.011478713,0.012174393,0.05326918,0.06280993,0.05684696,-0.038162995,-0.037169166,0.034585215,-0.05247412,-0.042734604,0.008994143,-0.046312384,-0.05287165,0.020472856,0.002894524,0.014708654,-0.006559265,0.05287165,-0.013416678,0.0030932897,0.04571609,0.023951255,-0.012224084,0.03975312,0.020472856,-0.0092922915,-0.042138305,-0.015304951,0.033193853,0.015006802,0.0369704,-0.03796423,0.016497545,0.0061865794,-7.8885094E-4,0.05247412,0.030411135,-0.014509888,-0.014410506,-0.042734604,-0.010783033,0.0069567957,0.02057224,0.020174708,-0.0025839529,0.006285962,0.016100014,-0.029616075,-0.030609902,0.012919764,-0.0060871965,0.03657287,-0.025640761,-0.0028572555,-0.02166545,0.0025094156,0.040349416,-0.020771004,-0.02524323,5.714511E-4,0.03836176,-0.031404965,-0.014808037,0.03975312,-0.017292608,-0.014012975,0.02842348,-0.01878335,-0.026833355,0.0040250034,0.032796323,-0.058039553,-0.03021237,-0.014311123,-0.0010373079,0.0042486144,0.0015217991,0.004372843,0.019677794,-0.018385818,-0.029616075,0.010236428,-0.008745686,-0.010335811,0.020174708,-0.0039256206,0.008050007,0.05923215,-0.0739408,-0.0017516218,-0.022162365,0.037169166,-0.0051679057,0.04929387,0.037765462,0.0047703744,-0.0014783192,0.029019777,-0.022858044,0.012373159,-0.011677478,-0.019777177,0.026038293,-0.04432473,-0.054859303,0.020472856,0.0054660537,-0.014708654,-0.02663459,-0.024945082,0.0053915167,0.013714826,0.028224714,0.04591485,0.0059132767,0.0048200656,0.023354957,0.027628418,0.007205253,0.0041243862,-0.044125963,0.020671623,0.041343246,-0.02842348,0.01778952,-0.0053915167,0.010534576,0.009043834,0.023653107,-0.019777177,-0.009043834,0.023951255,2.4224557E-4,0.015205568,0.033193853,-0.051679056,0.04432473,-0.010335811,-0.019280262,-0.020274092,-0.025143849,0.0071555614,-0.055654366,0.042734604,-0.07831364,-0.05923215,0.011329639,-0.011975627,0.0751334,0.029019777,0.061617333,0.016497545,0.015702482,-8.3854236E-4,-0.018385818,-0.025839528,-0.0042734602,-0.01421174,-0.01207501,0.011081182,0.0085469205,-0.02166545,0.014311123,-0.030411135,0.01172717,-0.0029317925,-0.06797783,0.009341983,-0.020870388,0.0027330269,-0.0012981878,0.023354957,0.01207501,-8.199081E-4,-0.008199081,-0.029218543,-0.011031491,-0.010783033,0.0028696782,0.00479522,0.032200027,-0.008994143,-0.032200027,-0.003056021,0.0012360736,-0.010335811,-0.024746317,0.041740775,0.021168536,0.0020125017,-0.0055157454,0.029218543,-0.0040995404,-0.014012975,0.007304636,-0.020870388,0.01421174,0.0012547078,0.039951883,0.023354957,0.029218543,0.025143849,0.06996549,0.004372843,-0.0078015495,0.007254944,0.030013604,-0.029218543,-0.035976574,-0.012621615,0.0017764675,0.022957426,-0.02663459,0.0062362705,-0.08626427,0.005962968,0.013714826,0.0076524755,0.015801866,-0.014708654,0.0023851872,0.045318555,0.004323152,-0.031404965,-0.08149389,-0.025839528,0.01207501,-0.005714511,-0.05366671,-0.010385502,0.01987656,0.027230887,0.05406424,-0.025839528,-0.048697572,0.020870388,-0.05923215,-0.024348786,0.010932107,-0.010087354,-5.776625E-4,-0.023951255,-0.009491057,0.01028612,-0.009640131,0.02415002,0.009491057,-0.016199397,-0.018882731,0.038560525,-0.0092426,-0.038958058,0.01028612,-0.022062982,0.0019876559,0.025640761,6.58411E-4,-0.017292608,-0.0025839529,6.894682E-4,-0.03975312,-0.04154201,0.016795693,0.018882731,-0.017292608,-0.04372843,-0.0035032437,-0.08069883,0.02166545,0.024646934,0.0866618,-0.05247412,-0.008050007,-0.0433309,0.0046461457,-0.0031802496,0.02415002,-0.0369704,0.034187682,-0.011081182,-0.081891425,-0.07910871,0.029218543,-0.0042486144,0.0015466448,0.064400055,-0.08984205,-0.020274092,0.0031181353,-0.038560525,0.0369704,-0.00479522,0.024945082,0.064400055,-0.017590756,0.035976574,-0.00889476,0.030411135,-0.011429022,0.00959044,-0.07712105,-0.021168536,-0.03339262,0.021566067,-0.011230256,-0.061617333,0.011180565,-0.0011863821,0.05962968,-0.0034783978,0.0060871965,0.035777807,-0.002894524,-0.019677794,0.036374103,0.050883994,-0.069567956,0.008298463,-0.08984205,4.4644617E-6,0.035976574,0.019280262,7.376067E-5,0.038560525,0.030808667,-0.030609902,-0.01351606,-0.002646067,-0.029019777,-0.004944294,-0.033591386,0.05326918,-0.009888588,0.022162365,-0.029616075,-0.026833355,-0.048697572,-0.033988915,0.032398794,-0.0034038608,-0.034187682,0.019379646,0.019280262,-0.009789205,0.024746317,0.0022485359,-0.04571609,-0.0433309,-0.007205253,0.03836176,0.0029939068,-0.003801392,0.0016895075,0.029218543,4.9691397E-4,0.023156192,-0.018882731,0.03796423,-0.030609902,-2.624327E-4,-0.0047206827,-0.03299509,0.0044970717,0.025640761,0.008447538,-0.05684696,-6.025082E-4,-0.008994143,0.01918088,-0.045318555,-0.021864215,0.0063108075,0.009789205,-0.011478713,-0.023653107,0.09381736,0.035976574,-0.049890164,0.017988287,0.017093841,-0.022858044,0.015901247,0.041343246,-0.0041492316,-0.015106185,-0.0035032437,-0.0013354564,-0.013317295,-0.075530924,0.06360499,-0.03160373,-0.0027081813,4.53434E-4,0.0059132767,0.04472226,0.012373159,-0.014808037,-0.021864215,0.008447538,0.0069567957,-0.008994143,-0.0184852,0.030609902,0.01421174,-0.034783978,-0.013814209,0.0039256206,0.015205568,-0.01987656,0.018087668,0.062412396,0.04015065,-0.023951255,0.020870388,0.01028612,0.05287165,-0.06320746,-0.032200027,0.013913591,-0.041740775,0.010584268,-0.04372843,0.021168536,-0.005267288,0.03200126,0.011578096,-0.044125963,-9.938279E-4,-0.069567956,0.04154201,0.012720998,0.048697572,-0.019777177,0.064400055,0.019379646,0.015106185,-0.019677794,0.021069152,-0.017193224,0.020373473,0.0018882732,0.002807564,-0.03200126,-0.005118214,-0.0075530927,0.014012975,-0.014311123,0.01490742,0.0086959945,0.015603099,-0.01172717,-0.02981484,0.035976574,0.035976574,-0.046709914,0.009491057],"inputTextTokenCount":39}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c01ba6a5-13a5-4d9f-b55b-c6a8ce69e9f8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 22:03:04 GMT', 'content-type': 'application/json', 'content-length': '2835', 'connection': 'keep-alive', 'x-amzn-requestid': 'c01ba6a5-13a5-4d9f-b55b-c6a8ce69e9f8', 'x-amzn-bedrock-invocation-latency': '5145', 'x-amzn-bedrock-output-token-count': '529', 'x-amzn-bedrock-input-token-count': '1148'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017bc430>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The Crisis Management Team ensures a smooth transition from emergency to normal conditions in a disaster by following a structured approach. This includes assessing injuries and damage, evaluating business continuity options, and informing customers and teams. The team also ensures that all personnel attend annual safety classes and participate in practice evacuation and disaster drills. Additionally, the team has a plan in place to prevent sabotage or vandalism and protocols for reporting loss or theft of equipment or data.\n\nThe team's responsibilities are clearly defined, with the CML (GSPL) approving site BCP/DRP plans and informing GSPL management on disasters. The team also has a plan for off-site recovery and continues communication with all teams, functions, and customers.\n\nTo ensure information security, the team has established incident response personnel with necessary responsibility, authority, and competence to manage an incident and maintain information security.\n\n* Assess injuries and damage to personnel and equipment\n* Evaluate business continuity options\n* Inform customers and teams\n* Ensure personnel attend annual safety classes and participate in practice evacuation and disaster drills\n* Prevent sabotage or vandalism\n* Report loss or theft of equipment or data\n* Establish incident response personnel with necessary responsibility, authority, and competence\n* Document and obtain approval for a plan, response, and recovery procedures\n\nReferences:\n[\n    {\n        \"Statement\": \"Provide complete guidance and co-ordination to ensure the objectives of Crisis Management Team are met\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf - Page 7\"\n    },\n    {\n        \"Statement\": \"The Crisis Management Team Responsibilities, by role, are as follows:\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf - Page 7\"\n    },\n    {\n        \"Statement\": \"Ensure that the Department is kept informed during a crisis\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf - Page 7\"\n    },\n    {\n        \"Statement\": \"Establishing incident response personnel with necessary responsibility, authority and competence to manage an incident and maintain information security;\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf - Page 25\"\n    }\n]\n\"Metadata\": {\n    \"conversation_id\": \"123456\",\n    \"query\": \"How does the Crisis Management Team ensure a smooth transition from emergency to normal conditions in a disaster, considering measures to prevent sabotage or vandalism and protocols for reporting loss or theft of equipment or data?\",\n    \"source\": \"BC _ DR plans V1.4_India.pdf\",\n    \"response_length\": \"246\"\n}","prompt_token_count":1148,"generation_token_count":529,"stop_reason":"stop"}
ERROR:__main__:JSONDecodeError: Invalid control character at: line 4 column 546 (char 549)
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 22:03:04] "[35m[1mPOST /process_query HTTP/1.1[0m" 500 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How does GSPL ensure business continuity in case of a disaster?', 'conversation_id': '123456'}
INFO:__main__:Received query: How does GSPL ensure business continuity in case of a disaster?
INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e22299cdf695a29256a49a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c7ddfbcc-3e7b-44fb-9f91-b5b2df88c225', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 23:07:05 GMT', 'content-type': 'application/json', 'content-length': '12847', 'connection': 'keep-alive', 'x-amzn-requestid': 'c7ddfbcc-3e7b-44fb-9f91-b5b2df88c225', 'x-amzn-bedrock-invocation-latency': '86', 'x-amzn-bedrock-input-token-count': '14'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176c040>}
INFO:__main__:Response Data: {"embedding":[-0.034415245,0.072812416,0.022469457,-0.06826164,0.034984093,0.015145551,0.03000668,-0.048351996,0.019056374,0.0021509528,-0.043232374,0.017136516,-0.029295621,-0.06541741,0.011448046,0.001777647,-0.046929877,0.023464939,-0.08475821,-0.011803576,0.001777647,0.023180516,0.017278729,-0.025171481,-0.0036975057,-0.012159105,0.008248282,0.0070750345,0.1535887,-0.016496563,0.056600276,0.023038303,-0.046076607,0.015501081,0.06740837,0.027304657,0.012016893,0.023180516,-0.0027553528,0.053187195,-0.00835494,0.045507763,-0.0021331762,0.044085644,0.045507763,-0.023749363,0.005795129,0.013225693,-0.0036441763,-0.036690634,-4.3052387E-5,0.0157144,-0.028300138,0.022469457,-0.09158437,0.017492047,0.006506188,0.045792185,-0.009883717,-0.07565665,-0.041525833,-0.030717738,-0.050342962,-0.050627384,-0.0086393645,0.019340798,-0.015216658,0.04863642,-0.040103715,0.021616187,0.011732469,-0.015287763,0.010239246,-0.009812611,-0.019198587,0.0077505405,0.037259478,-0.019909646,-0.018629739,0.028015716,0.017634258,0.022327246,0.032139856,-0.019625222,0.006363976,0.033846397,0.043801222,-0.050911807,-0.020762917,-0.03327755,-0.018629739,0.014363388,-0.0024175998,-0.0042307996,-0.023180516,-0.068546064,-0.0024531528,-9.6437347E-4,-0.052333925,0.006257317,0.028584562,0.053756043,-0.019767433,-0.023607152,-0.041241407,0.0077860937,0.0067195054,0.035126302,0.003679729,0.0014221176,0.039250445,-0.019625222,0.043801222,0.0018309763,0.06314202,-0.015145551,0.042663526,-0.03171322,-0.014007858,-0.020905128,-0.009670399,-0.048351996,0.054893736,0.035552938,9.499301E-5,-0.022042822,0.052902773,-0.030291103,0.0023642704,0.010665881,-0.022611668,0.032850914,0.002346494,-0.044085644,-0.0109503055,-0.020194069,-0.011803576,-0.021473974,0.005724023,-0.0030931057,-0.03541073,-0.030717738,-0.0014310058,-0.028015716,-0.034984093,-0.024887057,0.016852092,-0.0061862115,-0.041241407,0.046929877,-0.005724023,-0.043232374,0.0314288,-0.02431821,-0.034273032,-0.06228875,-0.022896092,-0.008994893,0.052902773,-0.020905128,-0.029722257,0.0015732176,0.005724023,-0.027162446,-0.082482815,-0.06456414,0.016354352,-0.053756043,0.051765077,0.0049418584,0.010310352,0.012016893,0.038397174,0.006257317,-0.010665881,0.028584562,-0.027446868,0.0043196823,0.009883717,-0.028726775,-0.011803576,0.015998822,0.013083481,0.04863642,0.05517816,-0.0061506582,-0.03171322,-0.024175998,-0.028300138,-0.0012354646,-0.036690634,0.0109503055,0.0050840704,0.018914163,0.016141035,0.001439894,0.013012376,-0.025882538,-0.011305834,0.004799647,0.029437833,-0.006826164,-0.012585741,-0.052333925,-0.01742094,-0.0060084467,-0.007110588,0.026166962,-0.030291103,-0.07508781,-0.024175998,8.132735E-4,0.019767433,0.037828326,0.03896602,-0.019625222,0.027731292,-0.019198587,0.079638585,0.033846397,0.021331763,-4.777426E-4,-7.155029E-4,0.03541073,0.017705364,-0.021189552,-0.010310352,0.0017598704,0.09158437,0.039819293,-0.0049774116,0.047214303,-0.0314288,0.017776469,-0.00750167,0.041241407,-0.01500334,-0.008781576,-0.0073950114,0.03157101,0.0071461406,-0.024744846,-0.017847575,-0.014292281,0.056031432,-0.037828326,-0.015429975,-0.009243764,0.013439011,-0.022042822,0.01706541,-0.0070750345,0.0032886467,-0.0038041645,0.054040466,0.0053684935,-0.0019820763,0.050627384,-0.023607152,-0.025171481,-0.046076607,-0.030433316,-0.0617199,-0.03327755,-0.011519152,-0.0070750345,0.0314288,0.005759576,-0.025740327,-0.008746023,-0.005724023,-0.045223337,-0.09158437,0.006506188,-0.024602633,-0.024175998,0.0027909058,-0.0056173643,0.027446868,0.034415245,0.04948969,-0.0016443233,-0.0628576,-0.018132,0.014221176,-0.052902773,0.005155176,-0.051765077,0.0617199,0.019767433,0.005155176,0.07338127,0.09613515,0.04948969,-0.014932234,0.021473974,-0.024887057,0.0064706346,-0.006506188,-0.03171322,-0.026309174,0.054040466,0.034984093,-0.008177176,0.04863642,0.054893736,-0.025740327,0.0665551,-0.009883717,0.04863642,-0.023180516,0.0018665292,-0.032993127,0.021616187,0.062004324,0.018629739,-0.030717738,0.035268515,0.022327246,5.7773525E-4,0.040103715,0.004586329,0.037543904,-0.022327246,0.011376941,0.08305167,0.025455903,-0.0073239054,0.040672563,0.0124435285,-0.053756043,-0.010665881,-0.0035019645,-0.013439011,-0.022469457,-6.177323E-4,0.036690634,0.0012087999,-0.016638774,-0.045507763,0.010168141,-0.0028975646,0.035126302,0.041241407,0.044938914,0.039534867,0.003555294,0.023464939,0.004088588,0.021758398,-0.0056173643,-0.037259478,0.020051857,0.006363976,0.052618347,-0.015429975,0.020478493,-0.0028264585,0.017776469,-0.0124435285,0.023180516,-0.018203104,0.023749363,-0.042379104,0.021331763,-0.037828326,0.0021065115,0.004390788,-0.008781576,-0.017634258,-0.045223337,0.081345126,-0.014932234,-0.022753881,0.0030219997,0.008177176,0.039534867,0.017989786,0.045223337,0.022469457,-0.031002162,-0.035979573,0.032139856,-0.036975056,-0.030291103,0.018132,-0.010594776,-0.020194069,0.0039819293,-0.059444513,0.01500334,0.03413082,0.013723434,-0.017989786,0.056031432,-0.021900611,-0.019056374,0.006826164,0.047498725,0.021900611,0.020620704,-0.016496563,0.032993127,-0.056600276,0.050058536,-0.013296799,-0.020051857,-0.011376941,-0.025171481,0.03811275,-0.013439011,0.0055818115,-0.06627068,0.023749363,0.037259478,0.036406208,-0.025740327,-0.044654492,-0.019198587,0.048351996,0.002613141,0.004124141,0.041525833,-0.06086663,-0.0084971525,-0.0053329407,0.013012376,-0.014078964,0.014078964,0.015287763,-0.040672563,0.036975056,0.0066128466,-0.024175998,0.016283246,0.016496563,0.020620704,0.0055818115,0.013012376,0.008603811,-0.0665551,0.052902773,-0.019056374,-0.024033787,0.009101552,-0.06314202,0.043232374,0.025313692,-0.008781576,0.0027553528,-0.031002162,0.032993127,0.036406208,-0.029864468,-0.017207623,0.014078964,0.018487528,0.024887057,-0.049774114,-0.03341976,0.0015643293,0.008817129,-0.025455903,-0.019056374,-0.03313534,-0.003377529,-0.025455903,-0.004799647,-0.041241407,-0.018203104,0.041525833,0.045223337,-0.015501081,0.071105875,0.046361033,-0.019198587,-0.045507763,0.05432489,0.051480655,0.016425457,-0.011021411,-0.024887057,0.010097034,0.034984093,-0.014718916,-0.021758398,-0.0038574939,-0.049774114,0.008461599,0.011021411,-0.05517816,0.0060795527,-0.0032708703,0.014150069,-0.0017865351,-0.026593598,0.036690634,0.03085995,0.017705364,-0.0046574348,0.015358869,0.008426046,0.013083481,-0.026878022,0.0011465823,0.018914163,0.0109503055,0.0059728934,-0.015927717,-0.026878022,-0.047214303,2.6998014E-4,0.027446868,-0.016994305,-0.03171322,0.040388137,-0.013012376,-0.0037330585,-0.006257317,0.014790023,-0.057737973,0.0155721875,0.048067573,0.031144375,-0.0060084467,-0.003679729,-0.021189552,-0.021758398,0.0048707523,0.01670988,-0.010879199,0.052618347,-0.024175998,0.0084971525,-0.03313534,0.0055818115,-0.051765077,-0.029722257,-0.026309174,-0.003750835,0.016283246,0.025455903,0.037828326,0.03896602,0.037543904,-0.04863642,0.03811275,-0.021189552,0.022327246,-0.0076438817,-0.024744846,0.033704184,0.008248282,-0.005226282,-0.0071461406,0.03085995,-0.038397174,0.035979573,-0.0036086233,-0.018060893,-0.025029268,-0.04948969,-0.012159105,-0.0013687882,0.0014310058,-0.052902773,0.009528187,-0.004426341,-0.010310352,0.025882538,-0.0067906114,-0.01585661,0.059444513,-0.10182361,-0.007181694,-0.023749363,-0.027731292,-0.014576705,-0.02758908,5.2884995E-4,-0.010025929,-0.026024751,0.0054040467,0.02431821,-0.0076794345,0.0060084467,0.023607152,-0.009243764,0.027020233,0.085895896,-0.0123013165,0.01948301,-0.0015643293,-0.0077860937,0.030717738,-0.0011154735,0.059728935,0.0027197998,-0.017776469,0.007999411,0.051765077,-0.014221176,-0.03313534,0.022753881,-0.048351996,0.040388137,-0.009457082,-0.05745355,0.037828326,-0.0039641527,-0.014292281,0.0075727757,1.3054594E-4,-0.025882538,0.0071461406,0.044938914,-0.004088588,0.023038303,-0.010736987,0.028157927,0.007928305,-0.016141035,-0.005901788,-0.024175998,0.008034964,0.021189552,-0.03256649,0.011448046,0.037828326,0.035268515,-0.017278729,0.023891574,0.037828326,0.018914163,0.020336282,-0.012870164,-0.028157927,0.0059373407,-0.052049503,-0.040672563,-0.056315854,-0.019909646,0.006506188,0.032850914,-0.018060893,-0.026451387,-0.025029268,0.0155721875,-0.03341976,-0.036690634,-0.002088735,0.020762917,0.03811275,0.0109503055,0.07793204,-0.017776469,-0.044085644,0.026878022,-0.019625222,-0.01706541,0.015429975,0.048351996,0.0056173643,0.005155176,2.2776102E-4,0.026166962,0.012585741,0.047498725,-0.02758908,0.045507763,-0.019056374,0.03896602,-0.0059728934,0.03157101,-0.009030446,-0.015998822,-0.054609314,-0.028300138,0.0039819293,-0.017563151,-0.019909646,-0.023749363,0.026166962,0.026309174,-0.014790023,0.004088588,0.041810255,0.0056884703,0.029580045,0.011376941,-0.0019287469,-0.03000668,0.0124435285,0.07565665,0.036975056,-0.0124435285,-0.037259478,-0.00871047,-0.024602633,0.018629739,-0.012941269,-0.046361033,0.002613141,-0.035552938,-0.011945787,0.023038303,0.0016532117,-0.020336282,-0.035126302,-0.035552938,-0.047498725,0.05745355,-0.015145551,-0.019198587,0.0072172466,0.037828326,-0.011021411,-0.014932234,9.110441E-4,-0.012016893,-0.018132,-0.0028620115,-0.016141035,-0.025740327,0.009670399,-0.052049503,0.0022487233,0.0060084467,0.020620704,-0.017136516,-0.037259478,-0.049205266,-0.030575527,-0.020051857,0.005724023,-0.011803576,0.007430564,0.006506188,-0.024175998,0.050342962,0.013154587,-0.068546064,-0.0035375173,0.0060795527,0.026451387,-9.86594E-4,0.008852682,0.040388137,-0.0034308585,-0.052333925,-0.06086663,0.0024531528,0.0155721875,0.039819293,-0.020762917,6.666176E-4,-0.035552938,0.0072172466,0.021473974,0.045792185,-0.05830682,-0.035552938,0.035552938,0.012016893,0.0123013165,-0.052902773,0.023180516,-0.030433316,0.032708704,-0.018914163,-0.004461894,0.019198587,-0.0013776764,-0.0017954234,-0.017989786,0.0617199,0.024887057,-0.029580045,0.007110588,-0.0030397763,-0.029722257,-0.0019643,-0.06371087,0.003413082,0.040103715,0.03896602,0.03811275,0.016069928,-0.018487528,-0.05916009,0.06399529,-0.017705364,-0.040388137,0.009599294,0.012870164,0.026024751,-0.013581223,0.028868986,0.020194069,0.021900611,0.010097034,-0.021758398,-0.037828326,0.014292281,0.025455903,0.010168141,0.08020743,0.020478493,0.05517816,-0.047498725,-0.0108080935,0.0053684935,-0.030575527,0.0048707523,0.018771952,0.016994305,0.021189552,0.03085995,0.027731292,0.010239246,0.017705364,0.028300138,0.0033597527,-0.010097034,0.0093148695,-0.017847575,0.018487528,0.06314202,-0.029722257,0.0053329407,-0.023891574,0.020478493,-0.020051857,-0.020762917,3.0414429E-5,-0.022469457,-0.024033787,-0.047214303,-0.010879199,-0.021900611,-0.022042822,-0.0762255,-0.0028975646,-0.006435082,0.031144375,0.012727952,-0.026166962,-0.02758908,-0.01948301,-0.017492047,0.0039286,-0.013225693,0.0050129644,0.044938914,-0.017563151,-0.050342962,0.0055818115,0.0025242586,0.027020233,0.029580045,0.022327246,0.041810255,-0.026024751,0.020620704,0.023607152,-0.029437833,0.0050840704,-0.017634258,-0.020336282,0.02915341,0.014078964,0.019767433,-0.021758398,-0.014007858,0.067692794,-0.05432489,-0.025455903,-0.040672563,-0.0628576,-0.06342644,0.038681597,-0.053187195,0.050911807,0.031997643,0.0035375173,0.014292281,3.177544E-4,0.012941269,-0.057737973,-2.2887204E-4,-0.0018398645,0.08191397,-0.006826164,0.008781576,0.055462584,0.0047640936,-0.046361033,-1.4554484E-4,-0.017278729,0.008817129,-0.06513298,0.015429975,-0.026166962,0.040672563,0.0061862115,-0.005795129,0.019909646,-0.028300138,-0.004533,-0.027731292,0.019625222,-0.031002162,0.019909646,0.0050129644,-0.0031286585,0.030717738,-0.017705364,0.020762917,0.042663526,0.0021065115,0.004444117,-0.043801222,0.050627384,0.011945787,-0.024602633,-0.0060795527,0.0108080935,-0.034415245,0.0054040467,-0.012941269,-0.0022931646,-0.032708704,0.008746023,0.009883717,0.020620704,-0.03896602,-5.221838E-4,0.017136516,-0.005901788,-0.0027909058,-0.018629739,-0.017776469,-0.047498725,0.113769405,8.221617E-4,0.010381458,0.010168141,-0.035268515,0.047498725,0.026451387,0.013225693,-0.023038303,-0.0019998527,0.019625222,0.0014221176,-0.072528,-0.020336282,0.011803576,-0.014790023,-0.01670988,0.03484188,-0.041241407,-0.0061862115,0.020194069,-0.0016798764,-0.023891574,-0.054893736,0.022469457,-0.007181694,0.01948301,0.008781576,0.07508781,-0.024887057,0.016852092,0.0039641527,-0.012941269,0.020336282,0.029580045,-0.024744846,0.043232374,-0.009954823,0.037259478,-0.031855434,0.057737973,-0.0039641527,-0.040388137,0.028868986,-0.03413082,0.026451387,0.054040466,-2.6442498E-4,0.012585741,0.018771952,0.014718916,-0.042947948,0.009599294,-0.025313692,0.03341976,-0.013723434,-0.016994305,0.0155721875,0.041810255,0.023038303,0.0011465823,0.024033787,0.035126302,-0.011519152,-0.02915341,0.020051857,0.0086393645,-0.0028264585,-0.061435476,0.060582206,-0.009457082,0.0010888088,0.0053684935,0.056315854,0.006755058,0.020194069,-0.037828326,0.016994305,0.027162446,-0.0036619527,0.034984093],"inputTextTokenCount":14}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '17cacf6b-7bf6-4b0f-b172-b0dd7bcda97b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 11 Sep 2024 23:07:08 GMT', 'content-type': 'application/json', 'content-length': '1415', 'connection': 'keep-alive', 'x-amzn-requestid': '17cacf6b-7bf6-4b0f-b172-b0dd7bcda97b', 'x-amzn-bedrock-invocation-latency': '2665', 'x-amzn-bedrock-output-token-count': '279', 'x-amzn-bedrock-input-token-count': '1025'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db017e4640>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"GSPL ensures business continuity in case of a disaster by having an effective Business Continuity and Disaster Recovery Plan (BCP/DRP) in place. The plan is prepared jointly by stakeholders, including Compliance and Security, System Administration teams, and account managers. The objectives of the plan are to minimize loss and ensure business continuity by responding effectively to disaster events. The plan covers recovery from technical and natural disasters, and has a targeted duration of time for restoration of services, ranging from 0-24 hours to 3+ days depending on the situation.\",\n    \"References\": [\n        {\n            \"Statement\": \"An effective business continuity and disaster recovery plan serves to secure businesses against such above mentioned disasters.\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 5\"\n        },\n        {\n            \"Statement\": \"The objectives of the BCP/DRP are:\",\n            \"source\": \"BC _ DR plans V1.4_India.pdf - Page No: 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"How does GSPL ensure business continuity in case of a disaster?\",\n        \"source\": \"BC _ DR plans V1.4_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1025,"generation_token_count":279,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e2229ccdf695a29256a49b
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [11/Sep/2024 23:07:08] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'Who is responsible for maintaining fire alarms, smoke detectors and fire extinguishers?\n', 'conversation_id': '123456'}
INFO:__main__:Received query: Who is responsible for maintaining fire alarms, smoke detectors and fire extinguishers?

INFO:__main__:Received conversation_id: 123456
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e2409dcdf695a29256a49d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f98b131a-9416-4c4b-b937-8027c4ac2232', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 12 Sep 2024 01:15:09 GMT', 'content-type': 'application/json', 'content-length': '12721', 'connection': 'keep-alive', 'x-amzn-requestid': 'f98b131a-9416-4c4b-b937-8027c4ac2232', 'x-amzn-bedrock-invocation-latency': '90', 'x-amzn-bedrock-input-token-count': '17'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176cf10>}
INFO:__main__:Response Data: {"embedding":[-0.10402696,0.025486603,-0.0050279694,-0.003294187,0.004681213,0.008582224,-0.0037276326,-0.055134285,0.0059382054,-0.01291668,-0.028607413,0.04178416,-0.016644312,-0.033288624,0.012223167,-0.0031641533,-0.005071314,-0.03467565,0.04091727,-0.04681213,0.0014737152,0.042477675,0.006501685,0.010359351,-0.06310969,0.006675063,0.085995615,0.048545912,0.0662305,-0.036409434,-0.0025139847,-0.0279139,0.06588374,-0.10194641,0.03675619,-0.02288593,0.005071314,5.7160645E-4,-0.014390396,0.019158298,0.0021563922,0.050973207,-8.343829E-4,0.023752822,-0.013263437,0.046118617,0.053400505,0.05374726,-0.062416174,0.04889267,0.0742059,0.018118028,0.038489975,0.021412214,-0.028607413,0.026526874,0.04681213,-0.014823841,0.008408845,0.0059382054,-0.023232687,0.036236055,-0.019418364,-0.03866335,0.085995615,-0.014823841,0.06553698,0.08044751,-4.0364626E-4,-0.06068239,-0.015083908,-0.020111877,-0.016210867,0.01889823,-0.08044751,-0.033288624,0.026353495,0.05270699,-0.025313227,0.023579443,0.012223167,-0.05270699,0.016384246,0.021412214,0.03796984,-0.015690733,0.017164448,-0.023406064,-0.010706107,-0.011529654,0.042130917,-0.010142628,-0.042130917,-0.050626453,0.055481043,-0.007238542,-0.028260656,-0.028954169,0.009189048,0.041264027,0.01898492,-0.0031208086,0.024966469,-0.0051796753,-0.030341195,0.020198567,0.00949246,-0.0046161963,0.05201348,-0.047158886,-9.2649006E-4,-0.013263437,-0.0023406064,-0.05478753,0.019418364,-0.01100952,-0.012223167,-0.013870261,-0.0020913752,0.010532729,-0.027740521,-0.046118617,-0.012136478,0.0662305,0.061029147,-0.04681213,0.037449703,-0.066924006,0.017597893,0.05998888,0.022365795,0.033288624,0.038143218,0.023406064,-0.038143218,-0.090850204,-0.0239262,-0.034502275,0.03692957,0.014390396,-0.0011648852,0.024272956,0.016210867,-0.012049789,0.030341195,0.017511204,0.049932938,0.008062089,0.065190226,4.144824E-4,0.009319082,-0.019678432,0.021672282,0.0050279694,-0.008192123,-0.018724851,0.050626453,-0.029127548,-0.026353495,0.0020913752,0.07524616,0.0018638163,0.066924006,-0.028260656,0.024966469,-0.026526874,-0.056174558,-0.030341195,0.010272662,0.018724851,-0.028260656,0.028780792,-0.035715923,1.5847856E-4,0.03276849,-0.0053097093,-0.047158886,-0.04577186,-0.08148778,-0.040223755,-0.00996925,0.10333344,-0.02201904,-0.0043561286,-0.028434034,0.049239427,0.039183486,-0.0038576662,0.005071314,-0.03467565,0.01881154,-0.059295364,-0.020025188,-0.032074977,0.0016687658,-0.019071609,-0.030341195,-0.022192417,-0.03883673,-0.004984625,0.032074977,0.0030557918,0.021845661,2.0995023E-4,0.0032508424,-0.025139848,-0.035369165,-0.0011432129,0.017597893,0.04074389,0.018464785,0.004919608,0.035715923,-0.0014086984,-0.039010108,0.020111877,0.01395695,0.0031208086,0.02479309,-0.012743302,0.05686807,-0.018551474,-0.049239427,-0.001452043,0.008972325,-0.04178416,-0.004291112,-0.048199154,0.0558278,0.035715923,-0.025139848,0.019331675,-0.010619419,0.026353495,0.019158298,-0.011529654,0.021498904,0.034328897,-6.1630555E-5,-0.02288593,0.022365795,0.024272956,0.027393766,0.024099577,0.02089208,-0.035195787,-0.08010075,-7.043492E-4,-0.026180116,-0.055481043,0.010272662,-0.021412214,0.039183486,0.042477675,-0.0037059602,0.00645834,-0.0062416173,0.013176748,-0.026180116,-0.017164448,0.036062676,0.029300926,0.023752822,0.0075852987,-0.022539174,-0.010706107,-5.2013475E-4,0.038316596,0.03363538,-0.013870261,0.015430665,-0.05652131,0.02687363,-0.03675619,0.031381465,0.03484903,-0.026700253,-0.005764827,0.014390396,-0.003966028,0.021412214,-0.004811247,-0.0068050968,-0.04282443,-0.014823841,-0.02687363,0.02999444,0.013263437,0.028607413,-0.042997807,-0.009362426,-0.0061549284,0.050973207,0.013263437,0.021065459,0.0034675652,0.0053530536,0.03796984,0.018724851,-0.025486603,0.0018204717,0.010619419,0.0045511792,0.023232687,0.047158886,0.015950799,0.022365795,-0.038489975,-0.010185973,0.05270699,0.035542544,-0.00474623,-0.009362426,0.020545324,0.0358893,-0.0077153323,-0.002990775,-0.025659982,-0.009882561,-0.013176748,-0.07108509,-5.9327873E-4,-0.0061115837,0.006675063,-0.023232687,-3.291478E-4,0.008798947,0.03779646,-8.831455E-4,0.056174558,-0.05374726,0.01499722,0.05374726,0.066924006,-0.047505643,0.038143218,-0.008018744,-0.042477675,-0.004962953,-0.045425102,-0.020111877,0.020718701,-0.03883673,0.023579443,0.024966469,-0.025139848,-0.010922831,0.017511204,-0.062416174,-0.0058948607,2.8038517E-4,-0.011096208,0.015690733,-0.042477675,0.018378096,0.01300337,0.012309857,-0.035542544,0.028954169,-0.015343976,-0.005808172,0.015083908,0.035022408,0.04091727,8.560552E-4,-0.016644312,0.0061549284,-0.028607413,-0.007541954,0.024446335,-0.061375905,0.04074389,0.041437402,-0.019158298,0.0010781961,0.01044604,0.0039443555,-0.010706107,0.03883673,-0.037449703,-0.003294187,-0.046118617,0.005374726,0.01699107,0.004009372,-0.011703032,-0.022539174,-0.039703622,-0.019071609,-0.011789721,0.073165625,0.002145556,0.010185973,0.033288624,8.025517E-5,0.0040310444,-0.007932056,-0.023752822,0.039183486,0.01881154,0.033462003,0.010359351,-0.05652131,-0.021065459,-0.0048329188,0.0061549284,-0.038316596,0.018638164,-0.004594524,-0.0014195344,-0.03276849,0.04109065,-0.02982106,0.028780792,0.030341195,-0.024099577,0.029647682,0.016384246,0.002687363,0.07524616,-4.6053602E-4,-0.026700253,-0.008148778,-0.029127548,-0.0478524,-0.012049789,0.0035759266,-0.01699107,-0.023406064,0.012569924,3.8197398E-4,-0.03710295,0.0038793385,0.009232393,-0.024966469,-0.036062676,-0.01794465,0.033288624,-0.0033592037,0.04178416,-0.029647682,-0.008668913,0.012829991,0.012743302,0.026526874,-0.08876967,0.034502275,0.012829991,0.054094017,-0.01881154,-0.047505643,0.008322156,0.021412214,0.026353495,-0.019071609,0.04109065,0.02288593,-0.031728223,0.027220387,0.06484347,0.011529654,-0.03866335,-0.013176748,0.09154372,0.0151705975,0.051319964,0.0026331823,-0.03484903,0.0025790017,0.04403808,-0.012743302,0.009622494,-0.030341195,4.1719145E-4,-0.028607413,0.01100952,-0.0478524,0.0051146587,0.0052663647,-0.002774052,0.020111877,0.03710295,0.0054614153,0.003532582,2.451677E-4,-0.0053530536,0.042997807,-0.04473159,0.018204717,0.02687363,-0.040223755,0.015690733,0.02982106,0.02201904,-0.06172266,0.034502275,0.0059382054,-0.015517354,0.005548104,0.024619713,-0.03276849,0.0038793385,-0.03710295,-0.012309857,0.026353495,-0.03762308,0.04282443,0.011096208,0.04161078,-0.0239262,0.04958618,0.02479309,-0.017164448,0.04577186,-0.043344565,-0.008712257,0.018118028,-0.032421734,-0.004074389,0.017684583,-0.05652131,-0.03883673,0.015430665,0.009579149,-0.0014953875,0.0034025484,-2.1943187E-4,-0.035369165,0.007888711,0.074899405,-0.020371946,0.05201348,0.01100952,0.008625569,0.002383951,0.025486603,0.009015669,-0.026526874,-0.003597599,-0.03467565,0.0017337826,0.05652131,0.028607413,0.02600674,0.025313227,0.004377801,0.018291406,-0.0068484414,-0.022539174,-0.035022408,-1.3748354E-4,-0.0013165912,-0.01681769,1.4645722E-5,0.029300926,-0.031901598,0.04403808,-0.01300337,0.03276849,0.03398214,0.005006297,0.008278812,-0.0078020217,0.055134285,-0.0023406064,0.006501685,-0.009189048,-0.026353495,-0.054094017,0.04507835,-0.061029147,0.002925758,-0.026700253,-4.849173E-4,-0.038143218,-0.021238837,-0.05270699,0.047505643,3.684288E-4,-0.039183486,-0.017251138,-0.01044604,-0.031728223,0.029127548,0.009795872,-0.025659982,-0.021498904,-0.008538879,0.0044644903,0.035715923,-0.018031338,-0.013176748,0.03484903,0.014390396,-0.027220387,-0.033288624,0.021672282,0.03398214,-0.05270699,0.04161078,0.013350126,0.030514574,-0.013350126,5.2555284E-4,-0.046118617,0.010359351,-0.019851811,1.7337826E-4,0.017077759,0.013696883,0.009535804,-0.029127548,-0.023579443,0.050626453,-0.020285256,-0.014823841,0.021845661,-0.07108509,0.003749305,0.0051146587,-0.013523504,0.0199385,-0.01681769,0.030167816,-0.004681213,-0.037276328,0.01794465,0.06553698,0.012656613,-0.012309857,-0.004702885,0.027393766,-0.04473159,-0.002774052,-6.93513E-4,0.025139848,0.036409434,0.0147371525,-0.017771272,0.021845661,-0.055481043,-0.05270699,-0.003922683,-0.0693513,-0.008105434,-0.004074389,0.03675619,0.02089208,-0.009189048,-6.528775E-4,-0.018378096,0.036409434,-0.032595113,-0.010836141,0.026180116,0.006675063,-0.026180116,-0.01491053,-0.017337825,-0.0067184074,-0.027047008,0.04577186,0.018031338,-5.824426E-4,-0.01395695,0.017857961,0.012743302,0.048199154,-0.005808172,0.028954169,0.0021889005,0.025139848,-0.0051796753,-0.025486603,-0.05652131,-0.07247211,0.036236055,0.082528055,0.0050279694,0.018724851,0.016557625,0.0030341195,-0.01690438,0.03866335,-0.017771272,-0.02600674,0.008798947,0.08876967,-0.03398214,-0.041264027,-0.028087279,-0.01499722,0.030687952,4.307366E-4,-0.012396545,0.014303707,0.018638164,-0.016384246,-0.043691322,0.028260656,0.012136478,-0.010185973,0.034502275,-0.01681769,0.034328897,0.009535804,-0.017684583,0.014563774,-0.014390396,0.022539174,0.019765122,0.018638164,-0.013523504,-0.04889267,0.008755602,0.0239262,-0.011529654,-0.009752527,0.022365795,0.010619419,0.0010944502,-0.0056347935,-0.049239427,0.034502275,0.008668913,0.03398214,0.01395695,0.03692957,0.076286435,-0.023579443,-0.010619419,-0.014303707,0.0076286434,-0.008885636,-0.003966028,-0.05478753,-0.0076286434,-0.038489975,0.025486603,-0.05686807,-0.026526874,-0.021065459,0.040223755,0.0091023585,-0.010619419,0.029300926,-0.034328897,-0.051319964,0.0048329188,0.02687363,-0.041437402,0.020285256,-0.0018746525,0.031901598,0.013090058,-0.013870261,0.021498904,-0.036582813,0.036409434,0.009925906,0.063456446,-0.032421734,-0.008148778,-0.037449703,0.027740521,0.028607413,-0.010836141,-0.05270699,0.012569924,0.04507835,-8.9939975E-4,0.04074389,-0.017251138,0.027740521,-0.011529654,-0.04577186,0.0074119205,-0.023232687,0.016037488,-0.017424515,0.0034892375,-0.030514574,-0.004442818,0.011442965,0.02201904,0.020632014,0.001614585,-0.0015929127,0.0199385,-0.029127548,0.034502275,-0.047158886,-0.025659982,0.027567143,0.010619419,0.009925906,-0.04889267,0.026700253,0.046118617,-0.029300926,0.025139848,0.016731001,0.012049789,0.0024923126,-9.6441654E-4,0.07108509,-0.006545029,0.004681213,0.0478524,-0.020458635,0.00749861,-0.019158298,-0.034502275,0.05374726,0.0821813,-0.0011865575,-0.05374726,-0.012136478,-0.031554844,-0.07593968,0.030687952,0.014650463,5.147167E-4,-0.002069703,0.022192417,-0.034328897,0.015604043,-0.001305755,-0.0017337826,0.048545912,0.018378096,-0.015604043,-0.0010673599,0.020111877,0.009449115,-0.0012786647,-0.004074389,-0.046118617,-0.023059309,-0.12483235,0.022539174,0.0054614153,0.036409434,0.01491053,0.004377801,-0.042997807,-0.022192417,0.040223755,-0.021065459,0.006761752,0.005764827,0.07663319,-0.009275737,0.062069416,-0.0028390689,-0.082874805,0.01794465,0.022539174,-0.017424515,0.015604043,0.046465375,0.09431777,0.031728223,-0.0136101935,0.043344565,-0.010099283,-0.032248355,-0.031554844,-0.031381465,-0.042477675,-0.015517354,0.013350126,0.01681769,-0.03779646,0.0071518533,-0.03883673,0.022365795,-0.050626453,0.058255095,-0.0026331823,-0.035715923,0.023406064,0.04958618,-0.010836141,-0.03883673,-0.02201904,-0.0102293175,0.015864111,-0.008625569,-0.010055939,3.7113784E-4,-0.042130917,0.019765122,0.019244988,-0.046118617,0.004919608,-0.032595113,0.017337825,-0.031208087,-0.010619419,0.002221409,0.011789721,-0.03467565,0.008408845,-0.01898492,-0.057908338,-0.013176748,0.025659982,9.2649006E-4,-0.0031858254,-0.012396545,0.021412214,0.015083908,1.6592841E-5,-0.035195787,-0.032595113,0.014563774,-0.012743302,0.03467565,0.055481043,0.02479309,0.002297262,-0.017337825,-0.031208087,-0.011096208,-0.008495535,0.020198567,0.034328897,-0.01699107,-0.025313227,0.050626453,0.040050376,-0.012309857,0.021845661,0.018724851,0.027220387,-0.028780792,-0.020371946,-0.027567143,-0.036236055,-0.0026548547,-0.008712257,0.018204717,0.03762308,-0.029300926,-0.008538879,-0.011789721,-0.06310969,0.018464785,-0.030167816,0.015777422,-0.01889823,0.0013274273,0.0199385,-0.03276849,0.005136331,0.009925906,-0.029474305,0.043691322,0.014217017,-0.011096208,-0.014303707,-0.015517354,-0.021672282,4.144824E-4,-0.0239262,-0.033288624,-0.042477675,-0.03380876,0.008495535,0.058255095,-0.009449115,0.039530244,0.010922831,0.005764827,0.03363538,-0.024619713,-0.03484903,-0.031208087,-0.010532729,-0.009449115,-0.06761752,-0.043344565,0.0558278,-0.031554844,0.032595113,0.019505054,-0.024099577,-0.0024164594,0.006588374,0.020111877,-0.023752822,-0.028260656,-0.0019721778,-0.023752822,-0.015690733,-0.019765122,0.030514574,0.040570512,0.004052717,0.01681769,0.018724851,0.0016579296,-0.062416174,0.0119631,0.005591449,-0.014650463,-0.0061115837,0.050973207,0.0358893,-0.030514574,-0.0079753995,0.046465375,0.012656613,0.017424515,-0.026700253,0.023579443,0.009449115,0.015690733,-0.0023189343,-0.008278812,0.020458635,-0.023059309,-6.474594E-4],"inputTextTokenCount":17}
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9af89756-d0b7-4d0e-b703-e0c27297a552', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 12 Sep 2024 01:15:12 GMT', 'content-type': 'application/json', 'content-length': '1166', 'connection': 'keep-alive', 'x-amzn-requestid': '9af89756-d0b7-4d0e-b703-e0c27297a552', 'x-amzn-bedrock-invocation-latency': '2058', 'x-amzn-bedrock-output-token-count': '219', 'x-amzn-bedrock-input-token-count': '1028'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xf6db0176cb80>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The responsibility for maintaining fire alarms, smoke detectors, and fire extinguishers is not explicitly stated in the provided texts. However, it can be inferred that the Internal Security and the Incident Response Team (IRT) are involved in fire safety and emergency response procedures.\",\n    \"References\": [\n        {\n            \"Statement\": \"Proper Fire prevention and detection mechanisms are in place.\",\n            \"source\": \"Gemini - Physical Security Policy_v3.4_India.pdf - Page 15\"\n        },\n        {\n            \"Statement\": \"Periodic Mock Fire Drills are conducted once in a year and the Fire safety devices are under regular maintenance.\",\n            \"source\": \"Gemini - Physical Security Policy_v3.4_India.pdf - Page 11\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123456\",\n        \"query\": \"Who is responsible for maintaining fire alarms, smoke detectors and fire extinguishers?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1028,"generation_token_count":219,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e240a0cdf695a29256a49e
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.66.10.81 - - [12/Sep/2024 01:15:12] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:35.203.210.238 - - [12/Sep/2024 04:49:25] "[33mGET / HTTP/1.1[0m" 404 -
 * Serving Flask app 'app'
 * Debug mode: off
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.247:5000
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:__main__:Flask handler started.
INFO:werkzeug:182.69.176.14 - - [13/Sep/2024 08:47:04] "[31m[1mPOST /process_query HTTP/1.1[0m" 401 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'What are the steps to download my payslips?', 'conversation_id': 'abc'}
INFO:__main__:Received query: What are the steps to download my payslips?
INFO:__main__:Received conversation_id: abc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:botocore.credentials:Found credentials from IAM Role: ACCESS_TO_AWS_SERVICES
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ec0a7cbd-cbe6-43e5-a07d-3a90f2703706', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 08:47:23 GMT', 'content-type': 'application/json', 'content-length': '188', 'connection': 'keep-alive', 'x-amzn-requestid': 'ec0a7cbd-cbe6-43e5-a07d-3a90f2703706', 'x-amzn-bedrock-invocation-latency': '319', 'x-amzn-bedrock-output-token-count': '26', 'x-amzn-bedrock-input-token-count': '553'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a04f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"What are the steps to download my payslips?\"\n}","prompt_token_count":553,"generation_token_count":26,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What are the steps to download my payslips?
INFO:__main__:Query stored successfully with ID: 66e3fc1b05895ec2589bacf6
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e6d4d904-42bc-47bc-a9ac-4675cb46c8c9', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 08:47:26 GMT', 'content-type': 'application/json', 'content-length': '1111', 'connection': 'keep-alive', 'x-amzn-requestid': 'e6d4d904-42bc-47bc-a9ac-4675cb46c8c9', 'x-amzn-bedrock-invocation-latency': '2185', 'x-amzn-bedrock-output-token-count': '234', 'x-amzn-bedrock-input-token-count': '849'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2950>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To download your payslips, log in to your GreytHR account and navigate to the payslips section to view your monthly payslips. You can also access the payslips from the 'Accounts portal' tab on MIS, which will further lead you to the GreytHR portal.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can log in to your GreytHR account, navigate to your payslips section to view your monthly payslips there.\",\n            \"source\": \"Text Block 1\"\n        },\n        {\n            \"Statement\": \"As mentioned during your induction, please visit the Accounts portal tab on MIS, it will further lead you to GreytHR portal. You can view/ download payslips from there.\",\n            \"source\": \"Text Block 2\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"abc\",\n        \"query\": \"What are the steps to download my payslips?\",\n        \"source\": \"GreytHR account and MIS portal\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":849,"generation_token_count":234,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e3fc1e05895ec2589bacf7
INFO:__main__:Process completed successfully.
INFO:werkzeug:182.69.176.14 - - [13/Sep/2024 08:47:26] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'from where i can download my payslips', 'conversation_id': '234589076ftre'}
INFO:__main__:Received query: from where i can download my payslips
INFO:__main__:Received conversation_id: 234589076ftre
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e3ffcf05895ec2589bacf9
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '48ee3f3b-2229-4c05-bbb1-fc1b6b091d1f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:03:13 GMT', 'content-type': 'application/json', 'content-length': '727', 'connection': 'keep-alive', 'x-amzn-requestid': '48ee3f3b-2229-4c05-bbb1-fc1b6b091d1f', 'x-amzn-bedrock-invocation-latency': '1535', 'x-amzn-bedrock-output-token-count': '147', 'x-amzn-bedrock-input-token-count': '825'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3310>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"You can download your payslips by logging in to your GreytHR account and navigating to the payslips section.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can log in to your GreytHR account, navigate to your payslips section to view your monthly payslips there.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index 43\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"234589076ftre\",\n        \"query\": \"from where i can download my payslips\",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"56\"\n    }\n}","prompt_token_count":825,"generation_token_count":147,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e3ffd105895ec2589bacfa
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:03:13] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: hi
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e4010b05895ec2589bacfc
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd8207014-4b22-49d5-93ea-54b8f62729d6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:08:31 GMT', 'content-type': 'application/json', 'content-length': '691', 'connection': 'keep-alive', 'x-amzn-requestid': 'd8207014-4b22-49d5-93ea-54b8f62729d6', 'x-amzn-bedrock-invocation-latency': '2074', 'x-amzn-bedrock-output-token-count': '204', 'x-amzn-bedrock-input-token-count': '764'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024c490>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind? Please feel free to ask a specific question, and I'll do my best to provide a clear and concise answer.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"hi\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":764,"generation_token_count":204,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e4010f05895ec2589bacfd
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:08:31] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: hi
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '76184c1a-afe4-4cce-bfb4-37beee5ca515', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:12:00 GMT', 'content-type': 'application/json', 'content-length': '147', 'connection': 'keep-alive', 'x-amzn-requestid': '76184c1a-afe4-4cce-bfb4-37beee5ca515', 'x-amzn-bedrock-invocation-latency': '209', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '234'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a36a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"hi\"\n}","prompt_token_count":234,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: hi
INFO:__main__:Query stored successfully with ID: 66e401e005895ec2589bacff
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e0459187-6135-40da-a229-8c7520ed596b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:12:03 GMT', 'content-type': 'application/json', 'content-length': '691', 'connection': 'keep-alive', 'x-amzn-requestid': 'e0459187-6135-40da-a229-8c7520ed596b', 'x-amzn-bedrock-invocation-latency': '1999', 'x-amzn-bedrock-output-token-count': '204', 'x-amzn-bedrock-input-token-count': '764'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024dd50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind? Please feel free to ask a specific question, and I'll do my best to provide a clear and concise answer.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"hi\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":764,"generation_token_count":204,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e401e305895ec2589bad00
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:12:03] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hey hey hey hi', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: hey hey hey hi
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '672a6bb8-5cb5-49bb-872f-5c57d4531a5a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:12:33 GMT', 'content-type': 'application/json', 'content-length': '146', 'connection': 'keep-alive', 'x-amzn-requestid': '672a6bb8-5cb5-49bb-872f-5c57d4531a5a', 'x-amzn-bedrock-invocation-latency': '205', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '309'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2380>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"hi\"\n}","prompt_token_count":309,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: hi
INFO:__main__:Query stored successfully with ID: 66e4020105895ec2589bad02
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f3f68ef5-f5e9-4157-8481-1bb3a5adcd47', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:12:36 GMT', 'content-type': 'application/json', 'content-length': '691', 'connection': 'keep-alive', 'x-amzn-requestid': 'f3f68ef5-f5e9-4157-8481-1bb3a5adcd47', 'x-amzn-bedrock-invocation-latency': '1918', 'x-amzn-bedrock-output-token-count': '204', 'x-amzn-bedrock-input-token-count': '764'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac13100d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind? Please feel free to ask a specific question, and I'll do my best to provide a clear and concise answer.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"hi\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":764,"generation_token_count":204,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e4020405895ec2589bad03
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:12:36] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'buddy', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: buddy
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3525613e-bda7-4cb2-8378-8eadce498050', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:12:50 GMT', 'content-type': 'application/json', 'content-length': '146', 'connection': 'keep-alive', 'x-amzn-requestid': '3525613e-bda7-4cb2-8378-8eadce498050', 'x-amzn-bedrock-invocation-latency': '209', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '309'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac141fdc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"hi\"\n}","prompt_token_count":309,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: hi
INFO:__main__:Query stored successfully with ID: 66e4021205895ec2589bad05
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '19af8aa5-4847-4443-adf5-2ab461ed86c6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:12:52 GMT', 'content-type': 'application/json', 'content-length': '586', 'connection': 'keep-alive', 'x-amzn-requestid': '19af8aa5-4847-4443-adf5-2ab461ed86c6', 'x-amzn-bedrock-invocation-latency': '1805', 'x-amzn-bedrock-output-token-count': '181', 'x-amzn-bedrock-input-token-count': '764'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024d9f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"hi\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":764,"generation_token_count":181,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e4021405895ec2589bad06
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:12:52] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'bye', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: bye
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c1866ae3-d8bb-467d-abd4-f2c2af48ed98', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:13:01 GMT', 'content-type': 'application/json', 'content-length': '146', 'connection': 'keep-alive', 'x-amzn-requestid': 'c1866ae3-d8bb-467d-abd4-f2c2af48ed98', 'x-amzn-bedrock-invocation-latency': '206', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '286'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0c70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"hi\"\n}","prompt_token_count":286,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: hi
INFO:__main__:Query stored successfully with ID: 66e4021d05895ec2589bad08
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '54221164-38a1-4ada-adf6-57b32fd53415', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:13:04 GMT', 'content-type': 'application/json', 'content-length': '586', 'connection': 'keep-alive', 'x-amzn-requestid': '54221164-38a1-4ada-adf6-57b32fd53415', 'x-amzn-bedrock-invocation-latency': '1660', 'x-amzn-bedrock-output-token-count': '181', 'x-amzn-bedrock-input-token-count': '764'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024e020>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"hi\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":764,"generation_token_count":181,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e4022005895ec2589bad09
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:13:04] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'he', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: he
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c677f553-a4ef-4813-8720-17bb2a261234', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:23:37 GMT', 'content-type': 'application/json', 'content-length': '146', 'connection': 'keep-alive', 'x-amzn-requestid': 'c677f553-a4ef-4813-8720-17bb2a261234', 'x-amzn-bedrock-invocation-latency': '292', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '260'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0e20>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"hi\"\n}","prompt_token_count":260,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: hi
INFO:__main__:Query stored successfully with ID: 66e4049905895ec2589bad0b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7ecf951f-333a-4151-b6dd-7777b62267d4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:23:40 GMT', 'content-type': 'application/json', 'content-length': '691', 'connection': 'keep-alive', 'x-amzn-requestid': '7ecf951f-333a-4151-b6dd-7777b62267d4', 'x-amzn-bedrock-invocation-latency': '2047', 'x-amzn-bedrock-output-token-count': '204', 'x-amzn-bedrock-input-token-count': '764'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024e920>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind? Please feel free to ask a specific question, and I'll do my best to provide a clear and concise answer.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"hi\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":764,"generation_token_count":204,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e4049c05895ec2589bad0c
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:23:41] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'helloe', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: helloe
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '76a4b7d0-c468-4302-936f-c9367203c029', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:23:58 GMT', 'content-type': 'application/json', 'content-length': '149', 'connection': 'keep-alive', 'x-amzn-requestid': '76a4b7d0-c468-4302-936f-c9367203c029', 'x-amzn-bedrock-invocation-latency': '205', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '284'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024c340>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"hello\"\n}","prompt_token_count":284,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: hello
INFO:__main__:Query stored successfully with ID: 66e404ae05895ec2589bad0e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a8745cfc-d9df-4346-a136-fcc155dd45a6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:24:01 GMT', 'content-type': 'application/json', 'content-length': '694', 'connection': 'keep-alive', 'x-amzn-requestid': 'a8745cfc-d9df-4346-a136-fcc155dd45a6', 'x-amzn-bedrock-invocation-latency': '1882', 'x-amzn-bedrock-output-token-count': '204', 'x-amzn-bedrock-input-token-count': '723'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024c0d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind? Please feel free to ask a specific question, and I'll do my best to provide a clear and concise answer.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"hello\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":723,"generation_token_count":204,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e404b105895ec2589bad0f
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:24:01] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'buddy you are reat', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: buddy you are reat
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'afc0958d-6382-4e92-8b3e-b49798877767', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:24:12 GMT', 'content-type': 'application/json', 'content-length': '157', 'connection': 'keep-alive', 'x-amzn-requestid': 'afc0958d-6382-4e92-8b3e-b49798877767', 'x-amzn-bedrock-invocation-latency': '232', 'x-amzn-bedrock-output-token-count': '19', 'x-amzn-bedrock-input-token-count': '311'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a05b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"you are great\"\n}","prompt_token_count":311,"generation_token_count":19,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: you are great
INFO:__main__:Query stored successfully with ID: 66e404bc05895ec2589bad11
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '63cee5a8-6605-40b2-bb00-99c4d18e00f4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:24:15 GMT', 'content-type': 'application/json', 'content-length': '716', 'connection': 'keep-alive', 'x-amzn-requestid': '63cee5a8-6605-40b2-bb00-99c4d18e00f4', 'x-amzn-bedrock-invocation-latency': '2071', 'x-amzn-bedrock-output-token-count': '206', 'x-amzn-bedrock-input-token-count': '1221'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024d5a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Thank you for your kind words! As Jinie, I'm happy to assist you with any queries related to Gemini Solutions' policies. If you have any specific questions or concerns, feel free to ask, and I'll do my best to provide you with accurate and clear information.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"you are great\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1221,"generation_token_count":206,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e404bf05895ec2589bad12
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:24:15] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'welcomne', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: welcomne
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '83e4b985-32f3-4c86-bb40-5062fcd9e12c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:24:27 GMT', 'content-type': 'application/json', 'content-length': '151', 'connection': 'keep-alive', 'x-amzn-requestid': '83e4b985-32f3-4c86-bb40-5062fcd9e12c', 'x-amzn-bedrock-invocation-latency': '219', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '314'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac1310250>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"welcome\"\n}","prompt_token_count":314,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: welcome
INFO:__main__:Query stored successfully with ID: 66e404cb05895ec2589bad14
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '568f5de3-fe2e-4645-9062-a50a23100ee0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:24:31 GMT', 'content-type': 'application/json', 'content-length': '1190', 'connection': 'keep-alive', 'x-amzn-requestid': '568f5de3-fe2e-4645-9062-a50a23100ee0', 'x-amzn-bedrock-invocation-latency': '2912', 'x-amzn-bedrock-output-token-count': '294', 'x-amzn-bedrock-input-token-count': '1134'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ebc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Welcome to Gemini Solutions! We are a company that values diversity and inclusion, and we strive to create a safe and respectful environment for all our employees. Our diversity and inclusion policy aims to ensure that every individual is treated with dignity and respect, and is given the opportunity to contribute to our future success.\",\n    \"References\": [\n        {\n            \"Statement\": \"The purpose of this policy is to create a safe environment where all employees are included, treated with dignity and respect, and placed in positions to contribute to our future success.\",\n            \"source\": \"Gemini-Diversity and Inclusion Policy_Version 4.0_India.pdf - Page No: 1\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"welcome\",\n        \"source\": \"Gemini-Diversity and Inclusion Policy_Version 4.0_India.pdf\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1134,"generation_token_count":294,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e404cf05895ec2589bad15
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:24:31] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': "vuryw'", 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: vuryw'
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ecc3f810-d295-4c3f-adaf-280dcc012625', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:25:28 GMT', 'content-type': 'application/json', 'content-length': '148', 'connection': 'keep-alive', 'x-amzn-requestid': 'ecc3f810-d295-4c3f-adaf-280dcc012625', 'x-amzn-bedrock-invocation-latency': '215', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '383'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024d8a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"very\"\n}","prompt_token_count":383,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: very
INFO:__main__:Query stored successfully with ID: 66e4050805895ec2589bad17
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd9dd45cd-aa26-4cde-96ca-d3b6187d0977', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:25:31 GMT', 'content-type': 'application/json', 'content-length': '794', 'connection': 'keep-alive', 'x-amzn-requestid': 'd9dd45cd-aa26-4cde-96ca-d3b6187d0977', 'x-amzn-bedrock-invocation-latency': '2216', 'x-amzn-bedrock-output-token-count': '226', 'x-amzn-bedrock-input-token-count': '862'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024fc70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"I'm Jinie, the HR policy bot for Gemini Solutions. I'm happy to help you with your query. However, I couldn't find any relevant information related to the word 'very' in our database. If you meant to ask about a specific policy or process, please feel free to rephrase your query. I'm here to assist you with any company-related policies or FAQs.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"very\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":862,"generation_token_count":226,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e4050b05895ec2589bad18
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:25:31] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'heifjiwe', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: heifjiwe
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0545aa23-9404-4d06-817f-03ff594c768d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:30:15 GMT', 'content-type': 'application/json', 'content-length': '148', 'connection': 'keep-alive', 'x-amzn-requestid': '0545aa23-9404-4d06-817f-03ff594c768d', 'x-amzn-bedrock-invocation-latency': '279', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '402'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024dea0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"help\"\n}","prompt_token_count":402,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: help
INFO:__main__:Query stored successfully with ID: 66e4062705895ec2589bad1a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '311cd219-f19f-44a6-b7e5-59e205267313', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 09:30:20 GMT', 'content-type': 'application/json', 'content-length': '1490', 'connection': 'keep-alive', 'x-amzn-requestid': '311cd219-f19f-44a6-b7e5-59e205267313', 'x-amzn-bedrock-invocation-latency': '3583', 'x-amzn-bedrock-output-token-count': '362', 'x-amzn-bedrock-input-token-count': '1042'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024c340>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"As an HR policy bot for Gemini Solutions, I'm here to assist you with any queries or concerns you may have. I can provide information on various company policies, including the Sexual Harassment Policy, Travel Policy, and International Transfer Policy. If you need help with visas, work, and residency permits, you can coordinate with the Visa team by raising a request on the Helpdesk. Additionally, I can provide guidance on building networks, communication, and understanding the company culture. If you have any specific questions or concerns, feel free to ask!\",\n    \"References\": [\n        {\n            \"Statement\": \"Assistance in securing visas, work, and residence permits may be coordinated by the Visa team by raising a request on the Helpdesk.\",\n            \"source\": \"Travel Policy.csv - N/A - 32\"\n        },\n        {\n            \"Statement\": \"The HR and Admin team will work with you to obtain all proper work-related documentation.\",\n            \"source\": \"Gemini-ESOP scheme - final 1_India.pdf - 11 - N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"help\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1042,"generation_token_count":362,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e4062c05895ec2589bad1b
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.7.153 - - [13/Sep/2024 09:30:20] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:werkzeug:103.177.174.159 - - [13/Sep/2024 12:09:52] "[31m[1mPOST /process_query HTTP/1.1[0m" 401 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'What are the steps to download my payslips?', 'conversation_id': '123'}
INFO:__main__:Received query: What are the steps to download my payslips?
INFO:__main__:Received conversation_id: 123
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e42bac05895ec2589bad1d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '02cf9dab-c6c3-49ed-b784-5e643e465952', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 12:10:23 GMT', 'content-type': 'application/json', 'content-length': '1111', 'connection': 'keep-alive', 'x-amzn-requestid': '02cf9dab-c6c3-49ed-b784-5e643e465952', 'x-amzn-bedrock-invocation-latency': '2194', 'x-amzn-bedrock-output-token-count': '234', 'x-amzn-bedrock-input-token-count': '849'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ef50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To download your payslips, log in to your GreytHR account and navigate to the payslips section to view your monthly payslips. You can also access the payslips from the 'Accounts portal' tab on MIS, which will further lead you to the GreytHR portal.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can log in to your GreytHR account, navigate to your payslips section to view your monthly payslips there.\",\n            \"source\": \"Text Block 1\"\n        },\n        {\n            \"Statement\": \"As mentioned during your induction, please visit the Accounts portal tab on MIS, it will further lead you to GreytHR portal. You can view/ download payslips from there.\",\n            \"source\": \"Text Block 2\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"123\",\n        \"query\": \"What are the steps to download my payslips?\",\n        \"source\": \"GreytHR account and MIS portal\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":849,"generation_token_count":234,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e42baf05895ec2589bad1e
INFO:__main__:Process completed successfully.
INFO:werkzeug:103.177.174.159 - - [13/Sep/2024 12:10:23] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'What are the steps to download my payslips?', 'conversation_id': 'abc'}
INFO:__main__:Received query: What are the steps to download my payslips?
INFO:__main__:Received conversation_id: abc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e45e0905895ec2589bad20
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '82872f2c-200d-4d69-b239-2111f19c81b2', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 13 Sep 2024 15:45:16 GMT', 'content-type': 'application/json', 'content-length': '1111', 'connection': 'keep-alive', 'x-amzn-requestid': '82872f2c-200d-4d69-b239-2111f19c81b2', 'x-amzn-bedrock-invocation-latency': '2378', 'x-amzn-bedrock-output-token-count': '234', 'x-amzn-bedrock-input-token-count': '849'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024cfd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To download your payslips, log in to your GreytHR account and navigate to the payslips section to view your monthly payslips. You can also access the payslips from the 'Accounts portal' tab on MIS, which will further lead you to the GreytHR portal.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can log in to your GreytHR account, navigate to your payslips section to view your monthly payslips there.\",\n            \"source\": \"Text Block 1\"\n        },\n        {\n            \"Statement\": \"As mentioned during your induction, please visit the Accounts portal tab on MIS, it will further lead you to GreytHR portal. You can view/ download payslips from there.\",\n            \"source\": \"Text Block 2\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"abc\",\n        \"query\": \"What are the steps to download my payslips?\",\n        \"source\": \"GreytHR account and MIS portal\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":849,"generation_token_count":234,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e45e0c05895ec2589bad21
INFO:__main__:Process completed successfully.
INFO:werkzeug:182.69.176.14 - - [13/Sep/2024 15:45:16] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:45.84.89.3 - - [13/Sep/2024 18:40:01] code 400, message Bad request version ('\x00\x04\x03\x00\x01\x02\x00')
INFO:werkzeug:45.84.89.3 - - [13/Sep/2024 18:40:01] "[31m[1m\x16\x03\x01\x00\x85\x01\x00\x00\x81\x03\x03UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU\x00\x00\x06À0\x00\x9c\x00\x9d\x01\x00\x00R\x00\x0b\x00\x04\x03\x00\x01\x02\x00[0m" 400 -
INFO:werkzeug:147.185.132.109 - - [13/Sep/2024 18:44:27] "[33mGET / HTTP/1.0[0m" 404 -
INFO:werkzeug:198.235.24.132 - - [13/Sep/2024 19:55:29] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:165.232.100.188 - - [14/Sep/2024 07:25:10] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03\x1bÒÌ¢%\x7fÝ\x97§K\x15îà;Ú\x16')
INFO:werkzeug:165.232.100.188 - - [14/Sep/2024 07:25:10] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03\x1bÒÌ¢%\x7fÝ\x97§K\x15îà;Ú\x16\x1eóS\x1bµöC\x98ÙSN.¥\x19Îx\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
ERROR:werkzeug:161.35.101.28 - - [14/Sep/2024 08:33:32] code 400, message Bad request version ('À\x14À')
INFO:werkzeug:161.35.101.28 - - [14/Sep/2024 08:33:32] "[31m[1m\x16\x03\x01\x00{\x01\x00\x00w\x03\x03\x0cÀ\x8eö\x9eyÖ:\x95W\x03ÑÌ\x0dùr¸\x9f\x82%={\x93O£\x07¾Ý=s\x8f-\x00\x00\x1aÀ/À+À\x11À\x07À\x13À\x09À\x14À[0m" 400 -
ERROR:werkzeug:161.35.101.28 - - [14/Sep/2024 08:33:33] code 400, message Bad request version ('À\x14À')
INFO:werkzeug:161.35.101.28 - - [14/Sep/2024 08:33:33] "[31m[1m\x16\x03\x01\x00{\x01\x00\x00w\x03\x03Eg?u\x8dñ\x02®<V\x9aK¥% ä¢\x871ñ\x09¿xÙ¨\x06Ò\x1d¯I­\x02\x00\x00\x1aÀ/À+À\x11À\x07À\x13À\x09À\x14À[0m" 400 -
INFO:werkzeug:161.35.101.28 - - [14/Sep/2024 08:33:33] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:198.235.24.84 - - [14/Sep/2024 23:38:54] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:173.255.221.189 - - [15/Sep/2024 00:02:15] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:157.245.36.72 - - [15/Sep/2024 05:55:10] code 400, message Bad request version ('\x9a[Ìè*\x83ô$;%ëý<\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À')
INFO:werkzeug:157.245.36.72 - - [15/Sep/2024 05:55:10] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03G¼ök\x9a\x8dÌ}ò*\x0d\x11að\x9d\x9d\x9aí\x0c\x9a[Ìè*\x83ô$;%ëý<\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
INFO:werkzeug:35.89.83.246 - - [15/Sep/2024 08:33:48] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:154.212.141.144 - - [15/Sep/2024 12:37:21] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:205.210.31.48 - - [15/Sep/2024 18:42:17] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:45.84.89.2 - - [15/Sep/2024 21:37:34] code 400, message Bad request version ('\x00\x04\x03\x00\x01\x02\x00')
INFO:werkzeug:45.84.89.2 - - [15/Sep/2024 21:37:34] "[31m[1m\x16\x03\x01\x00\x85\x01\x00\x00\x81\x03\x03UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU\x00\x00\x06À0\x00\x9c\x00\x9d\x01\x00\x00R\x00\x0b\x00\x04\x03\x00\x01\x02\x00[0m" 400 -
INFO:werkzeug:185.180.140.6 - - [16/Sep/2024 01:17:02] "[33mGET /cgi-bin/authLogin.cgi HTTP/1.1[0m" 404 -
INFO:werkzeug:172.202.177.160 - - [16/Sep/2024 04:41:41] "[33mGET /v2/ HTTP/1.1[0m" 404 -
INFO:werkzeug:198.235.24.13 - - [16/Sep/2024 06:10:31] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:185.100.87.136 - - [16/Sep/2024 12:36:15] code 400, message Bad HTTP/0.9 request type ('\x00\x00\x00\x11\x00\x00\x01é\x00\x01\x00\x00\x00ÿÿÿÿ\x01\x00\x00\x00\x00\x00\x00\x00')
INFO:werkzeug:185.100.87.136 - - [16/Sep/2024 12:36:15] "[31m[1m\x00\x00\x00\x11\x00\x00\x01é\x00\x01\x00\x00\x00ÿÿÿÿ\x01\x00\x00\x00\x00\x00\x00\x00\x0c\x02\x00\x00\x00\x10MyCustomAssembly\x05\x01\x00\x00\x00[0m" 400 -
ERROR:werkzeug:154.213.185.206 - - [16/Sep/2024 14:56:25] code 400, message Bad request syntax ('JDWP-Handshake')
INFO:werkzeug:154.213.185.206 - - [16/Sep/2024 14:56:25] "[31m[1mJDWP-Handshake[0m" 400 -
ERROR:werkzeug:45.84.89.2 - - [16/Sep/2024 20:11:48] code 400, message Bad request version ('\x00\x04\x03\x00\x01\x02\x00')
INFO:werkzeug:45.84.89.2 - - [16/Sep/2024 20:11:48] "[31m[1m\x16\x03\x01\x00\x85\x01\x00\x00\x81\x03\x03UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU\x00\x00\x06À0\x00\x9c\x00\x9d\x01\x00\x00R\x00\x0b\x00\x04\x03\x00\x01\x02\x00[0m" 400 -
INFO:werkzeug:147.185.132.19 - - [16/Sep/2024 20:59:12] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:143.110.162.27 - - [17/Sep/2024 06:33:01] code 400, message Bad request version ('ä\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À')
INFO:werkzeug:143.110.162.27 - - [17/Sep/2024 06:33:01] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03U?·ß\x84ñàB¶ÿPõýt\x13\x88W8iòÈ\x0b-oÔ(ÀZ0Ô\x0cä\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:51] code 400, message Bad request version ('À#À¬À®À+À')
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:51] "[31m[1m\x16\x03\x03\x01\x9b\x01\x00\x01\x97\x03\x03ÜÍ\x10HgyL(Ít{ö\x8eqÄ\x9eæ\x0c)l·Ýâ\x9c\x8eY{ä ÔèÃ 1\x9bßI* ·^¿;\x1d×Äëè¢\x13¯Éÿ±SÂ¥»kÙ\x10OàuU\x00\x8c\x9a\x9a\x00\x16\x003\x00gÀ\x9eÀ¢\x00\x9e\x009\x00kÀ\x9fÀ£\x00\x9f\x00E\x00¾\x00\x88\x00Ä\x00\x9aÀ\x08À\x09À#À¬À®À+À[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:51] code 400, message Bad request version ('À\x9c\x00<\x00/\x00')
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:51] "[31m[1m\x16\x03\x03\x01\x9b\x01\x00\x01\x97\x03\x03á%åÎÔ\x11å®Þ¿\x83*à\\5$ÈâÊhh2,¤YË.|\x08 UF ¥\x0c\x04¢ÔÚ¦V\x04å\x1d\x07Vè\x97WN\x90ð\x87g\x8eÕ³-*8+ÆVd"\x00\x8czz\x00\x05\x00\x04\x00\x07\x00À\x00\x84\x00º\x00A\x00\x9dÀ¡À\x9d\x00=\x005\x00\x9cÀ À\x9c\x00<\x00/\x00[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:51] code 400, message Bad request version ('Â\x93r74~\x01\x90\x8dO\x00HúúÀ\x12À\x07Ì\x14\x13\x01\x13\x02Ì©ÀsÀrÀ,À¯À\xadÀ$À')
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:51] "[31m[1m\x16\x03\x03\x01W\x01\x00\x01S\x03\x03\x08HÀõNÅ\x8c¹¶\x10èÔ>\x1e¤bÀ´\x90yKÌmkï|\x9e^¡0a\x9e ²\x8e\x87ÚG[4ö£ì×¨o\x09¨i Ù°\x8dð\x0dÂ\x93r74~\x01\x90\x8dO\x00HúúÀ\x12À\x07Ì\x14\x13\x01\x13\x02Ì©ÀsÀrÀ,À¯À­À$À[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:52] code 400, message Bad request version ("Â\x9bñµY\x00FzzÀ\x13À'À/À\x14À(À0À`ÀaÀvÀwÌ¨\x13\x05\x13\x04\x13\x03Ì\x13À\x11\x00")
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:52] "[31m[1m\x16\x03\x03\x01I\x01\x00\x01E\x03\x03\x88q\x97Âæ\x99\x06\x1fj\x19_PÅÅ¢\x8cßff[Ü·É\x98­Ë<\x88\x0b¹%Q e\x04;RçÙ«\x1aÈ\x12Ñ\x19Ë\x13\x87\x1fe0:\x92oÛÞ¡Ü\x0e\x85Â\x9bñµY\x00FzzÀ\x13À'À/À\x14À(À0À`ÀaÀvÀwÌ¨\x13\x05\x13\x04\x13\x03Ì\x13À\x11\x00[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:52] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x03\x01r\x01\x00\x01n\x03\x03\x94\x11t¾õÐø{¯"µæt(\x92ÀoLÿå<Æk!0yC\x04ô¶]b')
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:52] "[31m[1m\x16\x03\x03\x01r\x01\x00\x01n\x03\x03\x94\x11t¾õÐø{¯"µæt(\x92ÀoLÿå<Æk!0yC\x04ô¶]b `Ëê½\\1\x98W¤Ê&\x87z\x90·\x8b\x89$\x07ÌùX\x0e°\x15ôãw.nÕ7\x00\x8aÀ\x12À\x13À\x07À'Ì\x14À/\x13\x01À\x14\x13\x02À(Ì©À0ÀsÀ`ÀrÀaÀ,ÀvÀ¯ÀwÀ­Ì¨À$\x13\x05À[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:53] code 400, message Bad request version ('\x18LãÊØ\x89ù¹')
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:53] "[31m[1m\x16\x03\x02\x01\x9b\x01\x00\x01\x97\x03\x02Ú\x1dN´/\x8d\x9bXElØ\x84Áµ\x06ÁyÕ\x8arõ¦\x00ãR¾\x7f\x1b\x85óµü \x18LãÊØ\x89ù¹[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:53] code 400, message Bad request version ('À#À¬À®À+À')
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:53] "[31m[1m\x16\x03\x01\x01¨\x01\x00\x01¤\x03\x03FT%-:rÝyÜ\x87ÒâíH5Çf\x87f(<ÅÊ\x93ÂÜ\x1c åÞÉ  UÌ\x19Þ \x01aÅ\x80\x11ôKÑÏ\x8b·4¹+\x9d©5«'­y\x83ãÀ-2\x17\x00\x8cjj\x00\x16\x003\x00gÀ\x9eÀ¢\x00\x9e\x009\x00kÀ\x9fÀ£\x00\x9f\x00E\x00¾\x00\x88\x00Ä\x00\x9aÀ\x08À\x09À#À¬À®À+À[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:53] code 400, message Bad request version ('À\x9c\x00<\x00/\x00')
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:53] "[31m[1m\x16\x03\x01\x01¨\x01\x00\x01¤\x03\x03\x8e\x8d\x1aÝ\x7fMÖ;]B9¾F\x96\x19)|\x902\x14)\x9dx\x8f³ª°áaØ\x8a° y©ýîX\x8c\x0c¹Ïù­ZÚHG\x18ñuY÷1N¼X>¯\x08ZíçÌ2\x00\x8c::\x00\x05\x00\x04\x00\x07\x00À\x00\x84\x00º\x00A\x00\x9dÀ¡À\x9d\x00=\x005\x00\x9cÀ À\x9c\x00<\x00/\x00[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:54] code 400, message Bad request version ('TÍIó}')
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:54] "[31m[1m\x16\x03\x01\x01\x9e\x01\x00\x01\x9a\x03\x03AIf!wì×\x9cöC\x02¼Q¯\x83ä\x19âAÑ¡ÈõÖ\x0c¾\x18$\x95\x9f76 /B\x87n\x1fTÍIó}[0m" 400 -
ERROR:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:54] code 400, message Bad request syntax ('\x16\x03\x01\x01\x8d\x01\x00\x01\x89\x03\x03?Ð*·¨')
INFO:werkzeug:64.227.34.9 - - [17/Sep/2024 06:59:54] "[31m[1m\x16\x03\x01\x01\x8d\x01\x00\x01\x89\x03\x03?Ð*·¨[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi jinie', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: hi jinie
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e92a8305895ec2589bad23
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9b83b488-7c2c-4424-ae0e-99cb0c6f4bee', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 07:06:45 GMT', 'content-type': 'application/json', 'content-length': '589', 'connection': 'keep-alive', 'x-amzn-requestid': '9b83b488-7c2c-4424-ae0e-99cb0c6f4bee', 'x-amzn-bedrock-invocation-latency': '1847', 'x-amzn-bedrock-output-token-count': '179', 'x-amzn-bedrock-input-token-count': '903'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024de70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hi! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"hi jinie\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":903,"generation_token_count":179,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e92a8505895ec2589bad24
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 07:06:45] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'What are the steps to download my payslips?', 'conversation_id': 'abc'}
INFO:__main__:Received query: What are the steps to download my payslips?
INFO:__main__:Received conversation_id: abc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e92f5a05895ec2589bad26
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd2c7ed82-c809-43d5-bf13-e6a4aab76e6d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 07:27:25 GMT', 'content-type': 'application/json', 'content-length': '1111', 'connection': 'keep-alive', 'x-amzn-requestid': 'd2c7ed82-c809-43d5-bf13-e6a4aab76e6d', 'x-amzn-bedrock-invocation-latency': '2325', 'x-amzn-bedrock-output-token-count': '234', 'x-amzn-bedrock-input-token-count': '849'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0400>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To download your payslips, log in to your GreytHR account and navigate to the payslips section to view your monthly payslips. You can also access the payslips from the 'Accounts portal' tab on MIS, which will further lead you to the GreytHR portal.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can log in to your GreytHR account, navigate to your payslips section to view your monthly payslips there.\",\n            \"source\": \"Text Block 1\"\n        },\n        {\n            \"Statement\": \"As mentioned during your induction, please visit the Accounts portal tab on MIS, it will further lead you to GreytHR portal. You can view/ download payslips from there.\",\n            \"source\": \"Text Block 2\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"abc\",\n        \"query\": \"What are the steps to download my payslips?\",\n        \"source\": \"GreytHR account and MIS portal\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":849,"generation_token_count":234,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e92f5d05895ec2589bad27
INFO:__main__:Process completed successfully.
INFO:werkzeug:182.69.179.183 - - [17/Sep/2024 07:27:25] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is the buddy program ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: what is the buddy program ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e93aa205895ec2589bad29
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b575ddec-1a1b-4937-a488-717b36972f4e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 08:15:34 GMT', 'content-type': 'application/json', 'content-length': '1458', 'connection': 'keep-alive', 'x-amzn-requestid': 'b575ddec-1a1b-4937-a488-717b36972f4e', 'x-amzn-bedrock-invocation-latency': '3506', 'x-amzn-bedrock-output-token-count': '343', 'x-amzn-bedrock-input-token-count': '1302'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f1060>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The Buddy Program is an integral part of the organization's orientation program for new employees. Its purpose is to provide a point of contact for general queries regarding day-to-day operational issues and to help new employees integrate with the organization by providing access to someone familiar with our culture, attitude, and expectations.\",\n    \"References\": [\n        {\n            \"Statement\": \"The Buddy Program is an integral part of the organization's orientation program for new employees.\",\n            \"source\": \"Gemini-BUDDY PROGRAM_Version1.0_India.pdf - Page No: 4\"\n        },\n        {\n            \"Statement\": \"To provide the new employee with a point of contact for general queries regarding day-to-day operational issues, (such as the location of facilities, information processing requirements, and relevant organization policies).\",\n            \"source\": \"Gemini-BUDDY PROGRAM_Version1.0_India.pdf - Page No: 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"what is the buddy program ?\",\n        \"source\": \"Gemini-BUDDY PROGRAM_Version1.0_India.pdf\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1302,"generation_token_count":343,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e93aa605895ec2589bad2a
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 08:15:34] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is the maternity leave policy ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: what is the maternity leave policy ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '154bdb03-40a8-425a-9d72-f87e1bcb6d70', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 08:15:53 GMT', 'content-type': 'application/json', 'content-length': '182', 'connection': 'keep-alive', 'x-amzn-requestid': '154bdb03-40a8-425a-9d72-f87e1bcb6d70', 'x-amzn-bedrock-invocation-latency': '286', 'x-amzn-bedrock-output-token-count': '23', 'x-amzn-bedrock-input-token-count': '362'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f1f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is the employee benefits policy ?\"\n}","prompt_token_count":362,"generation_token_count":23,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is the employee benefits policy ?
INFO:__main__:Query stored successfully with ID: 66e93ab905895ec2589bad2c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8bad2028-a274-4a62-8cc9-8ba2a46d2f3b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 08:15:56 GMT', 'content-type': 'application/json', 'content-length': '1060', 'connection': 'keep-alive', 'x-amzn-requestid': '8bad2028-a274-4a62-8cc9-8ba2a46d2f3b', 'x-amzn-bedrock-invocation-latency': '2602', 'x-amzn-bedrock-output-token-count': '280', 'x-amzn-bedrock-input-token-count': '1187'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2800>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The Employee Benefits Policy at Gemini Solutions is governed by the Remuneration and Benefits Policy, Version 5.0. This policy defines the remuneration and benefits provided to employees, including leave entitlements, travel policy, and other benefits. The policy applies to all full-time employees of Gemini Solutions Pvt. Ltd.\",\n    \"References\": [\n        {\n            \"Statement\": \"Remuneration and Benefits Policy\",\n            \"source\": \"Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf - Page No: 1\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"what is the employee benefits policy ?\",\n        \"source\": \"Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1187,"generation_token_count":280,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e93abc05895ec2589bad2d
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 08:15:56] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: hi
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e94b9c05895ec2589bad2f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2c081144-0cce-4979-bb41-0fbc328ad66d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:27:59 GMT', 'content-type': 'application/json', 'content-length': '586', 'connection': 'keep-alive', 'x-amzn-requestid': '2c081144-0cce-4979-bb41-0fbc328ad66d', 'x-amzn-bedrock-invocation-latency': '1769', 'x-amzn-bedrock-output-token-count': '173', 'x-amzn-bedrock-input-token-count': '756'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2b00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"hi\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":756,"generation_token_count":173,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94b9f05895ec2589bad30
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:27:59] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hey hey hey', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: hey hey hey
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f6bd7c20-ab44-46ee-9d05-77016f7fb850', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:28:09 GMT', 'content-type': 'application/json', 'content-length': '149', 'connection': 'keep-alive', 'x-amzn-requestid': 'f6bd7c20-ab44-46ee-9d05-77016f7fb850', 'x-amzn-bedrock-invocation-latency': '203', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '213'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac141f4f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"hello\"\n}","prompt_token_count":213,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: hello
INFO:__main__:Query stored successfully with ID: 66e94ba905895ec2589bad32
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8cb2f36e-2d2c-481e-854d-8df65d78aa6b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:28:12 GMT', 'content-type': 'application/json', 'content-length': '694', 'connection': 'keep-alive', 'x-amzn-requestid': '8cb2f36e-2d2c-481e-854d-8df65d78aa6b', 'x-amzn-bedrock-invocation-latency': '1836', 'x-amzn-bedrock-output-token-count': '196', 'x-amzn-bedrock-input-token-count': '715'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f1330>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind? Please feel free to ask a specific question, and I'll do my best to provide a clear and concise answer.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"hello\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":715,"generation_token_count":196,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94bac05895ec2589bad33
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:28:12] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi jinie', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: hi jinie
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4f868ca2-1a34-43f3-bb6d-9cd6994ca0a0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:28:50 GMT', 'content-type': 'application/json', 'content-length': '147', 'connection': 'keep-alive', 'x-amzn-requestid': '4f868ca2-1a34-43f3-bb6d-9cd6994ca0a0', 'x-amzn-bedrock-invocation-latency': '223', 'x-amzn-bedrock-output-token-count': '17', 'x-amzn-bedrock-input-token-count': '287'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a36a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"hi\"\n}","prompt_token_count":287,"generation_token_count":17,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: hi jinie
INFO:__main__:Query stored successfully with ID: 66e94bd205895ec2589bad35
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2656a4d4-a67b-4fbb-8eac-3fe2a47862ae', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:28:53 GMT', 'content-type': 'application/json', 'content-length': '627', 'connection': 'keep-alive', 'x-amzn-requestid': '2656a4d4-a67b-4fbb-8eac-3fe2a47862ae', 'x-amzn-bedrock-invocation-latency': '1823', 'x-amzn-bedrock-output-token-count': '181', 'x-amzn-bedrock-input-token-count': '899'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2dd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any queries or questions you may have regarding our company policies. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"hi jinie\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":899,"generation_token_count":181,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94bd505895ec2589bad36
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:28:53] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is hr policy', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: what is hr policy
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '31f060fe-6121-4dde-8a33-b62fc26f6392', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:29:02 GMT', 'content-type': 'application/json', 'content-length': '173', 'connection': 'keep-alive', 'x-amzn-requestid': '31f060fe-6121-4dde-8a33-b62fc26f6392', 'x-amzn-bedrock-invocation-latency': '255', 'x-amzn-bedrock-output-token-count': '21', 'x-amzn-bedrock-input-token-count': '298'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f15a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what are the company policies\"\n}","prompt_token_count":298,"generation_token_count":21,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what are the company policies
INFO:__main__:Query stored successfully with ID: 66e94bde05895ec2589bad38
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '97f1ce8e-d3b2-4dbe-9c37-22662341e429', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:29:06 GMT', 'content-type': 'application/json', 'content-length': '1448', 'connection': 'keep-alive', 'x-amzn-requestid': '97f1ce8e-d3b2-4dbe-9c37-22662341e429', 'x-amzn-bedrock-invocation-latency': '2981', 'x-amzn-bedrock-output-token-count': '325', 'x-amzn-bedrock-input-token-count': '1160'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3c10>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions has various company policies that govern employee behavior and ensure a positive and respectful online presence. These policies include the Social Media Policy, Information Protection Policy, Insider Trading Policy, and others. As a representative of the company, employees are expected to adhere to these policies and maintain a professional online presence. Additionally, the company has policies for software development, housekeeping, and other aspects of employee life.\",\n    \"References\": [\n        {\n            \"Statement\": \"commitment is true for all forms of social media.\",\n            \"source\": \"Social Media Policy_India.pdf - Page 8\"\n        },\n        {\n            \"Statement\": \"Company Policies/Terms of Employment means the Company's policies for employees and the terms of employment as contained in the Employment Letter and the Company Handbook\",\n            \"source\": \"Gemini-ESOP scheme - final 1_India.pdf - Page 3\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"what are the company policies\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1160,"generation_token_count":325,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94be205895ec2589bad39
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:29:06] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail pluxee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how can i avail pluxee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4a41e827-d9fd-4ff5-b622-7963aee3abfb', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:30:12 GMT', 'content-type': 'application/json', 'content-length': '201', 'connection': 'keep-alive', 'x-amzn-requestid': '4a41e827-d9fd-4ff5-b622-7963aee3abfb', 'x-amzn-bedrock-invocation-latency': '313', 'x-amzn-bedrock-output-token-count': '27', 'x-amzn-bedrock-input-token-count': '415'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0a30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how can i access or avail of company benefits or policies\"\n}","prompt_token_count":415,"generation_token_count":27,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how can i access or avail of company benefits or policies
INFO:__main__:Query stored successfully with ID: 66e94c2405895ec2589bad3b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '18a354ad-2ead-4688-abf2-f5b4c79de32f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:30:17 GMT', 'content-type': 'application/json', 'content-length': '2276', 'connection': 'keep-alive', 'x-amzn-requestid': '18a354ad-2ead-4688-abf2-f5b4c79de32f', 'x-amzn-bedrock-invocation-latency': '4717', 'x-amzn-bedrock-output-token-count': '516', 'x-amzn-bedrock-input-token-count': '1257'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f1fc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To access or avail of company benefits or policies, you can refer to the following policies and procedures:\n\n* Company Vehicle Policy: If you drive miles or more per year for work purposes, need a company vehicle for your daily work, or are supposed to get used to a vehicle as a benefit, you can contact HR to inquire about eligibility and complete a form to submit.\n* Remote Working Policy: You can access Gemini Solutions' computer systems and equipment remotely through the Gemini Solutions VPN system as applicable. However, you should not share your login credentials with anyone and use the access only for official duties.\n* Remuneration and Benefits Policy: This policy outlines the key principles for remuneration and benefits, including the purpose, scope, and classification of the policy.\n\nYou can also refer to the Physical Security Policy for information on access rights and card management.\n\nReferences:\n[\n    {\n        \"Statement\": \"Employees may qualify for a company vehicle if they drive miles or more per year for work purposes, need a company vehicle for their daily work, or are supposed to get used to a vehicle as a benefit.\",\n        \"source\": \"Gemini-Vehicle Policy_Version 2.0._India.pdf - Page 4\"\n    },\n    {\n        \"Statement\": \"Employees should not share any of the login credentials with anyone including family members.\",\n        \"source\": \"Gemini-Remote Working Policy_Version 1.0_India.pdf - Page 8\"\n    },\n    {\n        \"Statement\": \"The purpose of the pay and remuneration policy is to outline key principles for remuneration allowing the board of directors and management to keep and attract the best employees on the respective fields of work.\",\n        \"source\": \"Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf - Page 4\"\n    }\n]\nMetadata:\n{\n    \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n    \"query\": \"how can i access or avail of company benefits or policies\",\n    \"source\": \"Gemini-dev\",\n    \"response_length\": \"246\"\n}","prompt_token_count":1257,"generation_token_count":516,"stop_reason":"stop"}
ERROR:__main__:JSONDecodeError: Invalid control character at: line 4 column 123 (char 126)
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:30:17] "[35m[1mPOST /process_query HTTP/1.1[0m" 500 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'pluxee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: pluxee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0875369d-eee4-4d16-893b-8a0101d7d038', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:30:32 GMT', 'content-type': 'application/json', 'content-length': '201', 'connection': 'keep-alive', 'x-amzn-requestid': '0875369d-eee4-4d16-893b-8a0101d7d038', 'x-amzn-bedrock-invocation-latency': '314', 'x-amzn-bedrock-output-token-count': '27', 'x-amzn-bedrock-input-token-count': '423'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f550>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how can i access or avail of company benefits or policies\"\n}","prompt_token_count":423,"generation_token_count":27,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how can i access or avail of company benefits or policies
INFO:__main__:Query stored successfully with ID: 66e94c3805895ec2589bad3d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9a3dac8e-b2f1-46a5-a094-fd83aefe53fa', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:30:41 GMT', 'content-type': 'application/json', 'content-length': '3225', 'connection': 'keep-alive', 'x-amzn-requestid': '9a3dac8e-b2f1-46a5-a094-fd83aefe53fa', 'x-amzn-bedrock-invocation-latency': '7276', 'x-amzn-bedrock-output-token-count': '743', 'x-amzn-bedrock-input-token-count': '1257'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3790>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To access or avail of company benefits or policies, you can refer to the following policies and procedures:\n\n* Company Vehicle Policy: If you drive miles or more per year for work purposes, need a company vehicle for your daily work, or are supposed to get used to a vehicle as a benefit, you may qualify for a company vehicle. Contact HR to complete a form and submit a request. [Reference: Text Block 1, Gemini-Vehicle Policy_Version 2.0._India.pdf, Page No: 4]\n* Remote Working Policy: You can access Gemini Solutions' computer systems and equipment, whether directly or remotely through the Gemini Solutions VPN system as applicable. [Reference: Text Block 2, Gemini-Remote Working Policy_Version 1.0_India.pdf, Page No: 8]\n* Remuneration and Benefits Policy: This policy outlines key principles for remuneration and benefits, including packaging and structuring. [Reference: Text Block 3, Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf, Page No: 4]\n* Physical Security Policy: This policy outlines procedures for access card management, including deactivation and reactivation of access cards. [Reference: Text Block 5, Gemini - Physical Security Policy_v3.4_India.pdf, Page No: 6]\n\nPlease note that these policies and procedures are subject to change and may be updated from time to time. It is your responsibility to stay informed about any changes to these policies and procedures.\n\nIf you have any questions or concerns about company benefits or policies, please feel free to reach out to the HR department.\",\n    \"References\": [\n        {\n            \"Statement\": \"Employees may qualify for a company vehicle if they drive miles or more per year for work purposes, need a company vehicle for their daily work, or are supposed to get used to a vehicle as a benefit.\",\n            \"source\": \"Gemini-Vehicle Policy_Version 2.0._India.pdf, Page No: 4\"\n        },\n        {\n            \"Statement\": \"Employees should not share any of the login credentials with anyone including family members.\",\n            \"source\": \"Gemini-Remote Working Policy_Version 1.0_India.pdf, Page No: 8\"\n        },\n        {\n            \"Statement\": \"The purpose of the pay and remuneration policy is to outline key principles for remuneration allowing the board of directors and management to keep and attract the best employees on the respective fields of work.\",\n            \"source\": \"Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf, Page No: 4\"\n        },\n        {\n            \"Statement\": \"HR Dept. will deactivate the card and retain the original copy of the form.\",\n            \"source\": \"Gemini - Physical Security Policy_v3.4_India.pdf, Page No: 6\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how can i access or avail of company benefits or policies\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"346\"\n    }\n}","prompt_token_count":1257,"generation_token_count":743,"stop_reason":"stop"}
ERROR:__main__:JSONDecodeError: Invalid control character at: line 4 column 123 (char 126)
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:30:41] "[35m[1mPOST /process_query HTTP/1.1[0m" 500 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'okay tell me what i lta', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: okay tell me what i lta
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'bcb549d4-6e49-4114-bd85-2aa961b73c83', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:30:53 GMT', 'content-type': 'application/json', 'content-length': '199', 'connection': 'keep-alive', 'x-amzn-requestid': 'bcb549d4-6e49-4114-bd85-2aa961b73c83', 'x-amzn-bedrock-invocation-latency': '349', 'x-amzn-bedrock-output-token-count': '27', 'x-amzn-bedrock-input-token-count': '404'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f1b40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"okay, tell me what are the company policies or benefits\"\n}","prompt_token_count":404,"generation_token_count":27,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: okay, tell me what are the company policies or benefits
INFO:__main__:Query stored successfully with ID: 66e94c4d05895ec2589bad3f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'bfc05180-0022-4b45-b0ba-d3650348b2d7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:30:57 GMT', 'content-type': 'application/json', 'content-length': '1723', 'connection': 'keep-alive', 'x-amzn-requestid': 'bfc05180-0022-4b45-b0ba-d3650348b2d7', 'x-amzn-bedrock-invocation-latency': '3569', 'x-amzn-bedrock-output-token-count': '390', 'x-amzn-bedrock-input-token-count': '1190'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c0a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions offers various company policies and benefits to its employees. The company has a Remuneration and Benefits Policy that outlines key principles for remuneration, allowing the board of directors and management to keep and attract the best employees. The policy also includes a Loyalty Bonus policy, which recognizes employees' longevity and performance. Additionally, the company provides an annual review and bonus structure.\",\n    \"References\": [\n        {\n            \"Statement\": \"The purpose of the pay and remuneration policy is to outline key principles for remuneration allowing the board of directors and management to keep and attract the best employees on the respective fields of work whilst ensuring a high degree of goal alignment between the individual and the company.\",\n            \"source\": \"Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf - Page No: 4\"\n        },\n        {\n            \"Statement\": \"The objective of this policy is to provide guidelines to the employees of Gemini Solutions actively contributing towards the success and growth in terms of bonus and rewards\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page No: 4\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"okay, tell me what are the company policies or benefits\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1190,"generation_token_count":390,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94c5105895ec2589bad40
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:30:57] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much is the loyalty bonus amount given ?', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how much is the loyalty bonus amount given ?
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '349b9ac4-5bbe-4782-a07e-a0851eb754ad', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:31:22 GMT', 'content-type': 'application/json', 'content-length': '194', 'connection': 'keep-alive', 'x-amzn-requestid': '349b9ac4-5bbe-4782-a07e-a0851eb754ad', 'x-amzn-bedrock-invocation-latency': '331', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '473'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3970>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is the loyalty bonus amount or policy details\"\n}","prompt_token_count":473,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is the loyalty bonus amount or policy details
INFO:__main__:Query stored successfully with ID: 66e94c6a05895ec2589bad42
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f9c1b2bb-d538-456c-a479-8ba166b6a06f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:31:27 GMT', 'content-type': 'application/json', 'content-length': '2063', 'connection': 'keep-alive', 'x-amzn-requestid': 'f9c1b2bb-d538-456c-a479-8ba166b6a06f', 'x-amzn-bedrock-invocation-latency': '4922', 'x-amzn-bedrock-output-token-count': '497', 'x-amzn-bedrock-input-token-count': '1239'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ceb0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The loyalty bonus amount is credited into the Loyalty account of the employee once a year, on the start of the Appraisal Period (currently 1st April). The amount can be redeemed as per the redemption mechanism, which allows employees to encash their bonus after 6 months of credit date into the loyalty account, with 50% being redeemable. The remaining 50% can be redeemed after completing 12 months of credit. Any subsequent payments further top-up in the Loyalty account of an employee shall also follow the same cycle for withdrawal.\",\n    \"References\": [\n        {\n            \"Statement\": \"The amount payable as a loyalty bonus shall be credited into the Loyalty account of the employee (eligible for that appraisal cycle) once on the start of the Appraisal Period (Currently 1st April) every year and can be redeemed as per the redemption mechanism mentioned below.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page 4\"\n        },\n        {\n            \"Statement\": \"Can be redeemed after 6 months of credit date into the loyalty account.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page 4\"\n        },\n        {\n            \"Statement\": \"After completing 6 months of credit 50% (Fifty) and after completing 12 months of credit 50% (Fifty) Any subsequent payments further top-up in the Loyalty account of an employee shall also follow the same cycle for withdrawal.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"what is the loyalty bonus amount or policy details\",\n        \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1239,"generation_token_count":497,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94c6f05895ec2589bad43
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:31:27] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi jinie', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: hi jinie
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e94cbf05895ec2589bad45
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ce653306-7e85-4c5f-bd41-554c93a41763', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:32:49 GMT', 'content-type': 'application/json', 'content-length': '589', 'connection': 'keep-alive', 'x-amzn-requestid': 'ce653306-7e85-4c5f-bd41-554c93a41763', 'x-amzn-bedrock-invocation-latency': '1681', 'x-amzn-bedrock-output-token-count': '179', 'x-amzn-bedrock-input-token-count': '903'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0d00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hi! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"hi jinie\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":903,"generation_token_count":179,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94cc105895ec2589bad46
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:32:49] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'tell me about food wallet ', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: tell me about food wallet 
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f404a4cc-1c5f-4eca-a5b8-d879dee347c1', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:33:09 GMT', 'content-type': 'application/json', 'content-length': '198', 'connection': 'keep-alive', 'x-amzn-requestid': 'f404a4cc-1c5f-4eca-a5b8-d879dee347c1', 'x-amzn-bedrock-invocation-latency': '295', 'x-amzn-bedrock-output-token-count': '26', 'x-amzn-bedrock-input-token-count': '219'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3b50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is food wallet in the context of Gemini Solutions\"\n}","prompt_token_count":219,"generation_token_count":26,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is food wallet in the context of Gemini Solutions
INFO:__main__:Query stored successfully with ID: 66e94cd505895ec2589bad48
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c42242b1-d832-43d2-86f4-73ced0b8a7e8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:33:13 GMT', 'content-type': 'application/json', 'content-length': '1309', 'connection': 'keep-alive', 'x-amzn-requestid': 'c42242b1-d832-43d2-86f4-73ced0b8a7e8', 'x-amzn-bedrock-invocation-latency': '3165', 'x-amzn-bedrock-output-token-count': '346', 'x-amzn-bedrock-input-token-count': '1154'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f18a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"A Food Wallet, also known as Sodexo Food Wallet, is a tax savings option available to employees of Gemini Solutions. It costs INR 2000 per month and is only available for employees under the Old Tax Regime. This amount is credited to the employee's Sodexo (Pluxee) food wallet every month.\",\n    \"References\": [\n        {\n            \"Statement\": \"Sodexo food Wallet as part of your tax savings option costs you INR 2000 per month is available, Note that it is available for only Old tax Regime\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 11\"\n        },\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"what is food wallet in the context of Gemini Solutions\",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1154,"generation_token_count":346,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94cd905895ec2589bad49
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:33:13] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'okay tell me more about pluxee', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: okay tell me more about pluxee
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'fcb56e99-4887-4dfd-9025-6eca39bd92f1', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:34:03 GMT', 'content-type': 'application/json', 'content-length': '193', 'connection': 'keep-alive', 'x-amzn-requestid': 'fcb56e99-4887-4dfd-9025-6eca39bd92f1', 'x-amzn-bedrock-invocation-latency': '300', 'x-amzn-bedrock-output-token-count': '27', 'x-amzn-bedrock-input-token-count': '429'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0c40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is pluxee in the context of Gemini Solutions\"\n}","prompt_token_count":429,"generation_token_count":27,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is pluxee in the context of Gemini Solutions
INFO:__main__:Query stored successfully with ID: 66e94d0b05895ec2589bad4b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '723cd564-33ed-453c-9683-fc51c610caa5', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:34:06 GMT', 'content-type': 'application/json', 'content-length': '757', 'connection': 'keep-alive', 'x-amzn-requestid': '723cd564-33ed-453c-9683-fc51c610caa5', 'x-amzn-bedrock-invocation-latency': '2026', 'x-amzn-bedrock-output-token-count': '216', 'x-amzn-bedrock-input-token-count': '1229'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028d030>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"There is no mention of 'Pluxee' in the provided texts. It is possible that the query is out of relevance or some chitchat. As a bot, I can solve queries regarding company policies, but I couldn't find any information related to 'Pluxee' in the provided texts.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"what is pluxee in the context of Gemini Solutions\",\n        \"source\": \"Provided texts\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1229,"generation_token_count":216,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94d0e05895ec2589bad4c
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:34:06] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'tell me more about pluxee food wallet ', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: tell me more about pluxee food wallet 
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '48bfeb1d-55a7-4f9e-80a7-258bfce19d15', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:34:39 GMT', 'content-type': 'application/json', 'content-length': '205', 'connection': 'keep-alive', 'x-amzn-requestid': '48bfeb1d-55a7-4f9e-80a7-258bfce19d15', 'x-amzn-bedrock-invocation-latency': '323', 'x-amzn-bedrock-output-token-count': '29', 'x-amzn-bedrock-input-token-count': '471'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0880>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is pluxee food wallet in the context of Gemini Solutions\"\n}","prompt_token_count":471,"generation_token_count":29,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is pluxee food wallet in the context of Gemini Solutions
INFO:__main__:Query stored successfully with ID: 66e94d2f05895ec2589bad4e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5659b6fa-19c8-479e-a6ed-169ac24d855f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:34:43 GMT', 'content-type': 'application/json', 'content-length': '1247', 'connection': 'keep-alive', 'x-amzn-requestid': '5659b6fa-19c8-479e-a6ed-169ac24d855f', 'x-amzn-bedrock-invocation-latency': '3066', 'x-amzn-bedrock-output-token-count': '334', 'x-amzn-bedrock-input-token-count': '1130'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028df60>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"In the context of Gemini Solutions, Pluxee Food Wallet refers to a food coupon worth INR 2000/- fixed, provided to employees every month who opt for it. This is part of the tax savings option and is available for Old tax Regime.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        },\n        {\n            \"Statement\": \"Sodexo food Wallet as part of your tax savings option costs you INR 2000 per month is available, Note that it is available for only Old tax Regime\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 11\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"what is pluxee food wallet in the context of Gemini Solutions\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1130,"generation_token_count":334,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e94d3305895ec2589bad4f
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:34:43] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail pluxee', 'conversation_id': '234589076ftre'}
INFO:__main__:Received query: how can i avail pluxee
INFO:__main__:Received conversation_id: 234589076ftre
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e9509a05895ec2589bad51
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '67a8df9f-4f9d-4170-9b21-0d63570f8225', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:49:17 GMT', 'content-type': 'application/json', 'content-length': '767', 'connection': 'keep-alive', 'x-amzn-requestid': '67a8df9f-4f9d-4170-9b21-0d63570f8225', 'x-amzn-bedrock-invocation-latency': '1708', 'x-amzn-bedrock-output-token-count': '178', 'x-amzn-bedrock-input-token-count': '1063'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2470>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To avail the Pluxee (Sodexo) food wallet, you need to opt for it. If you do, INR 2000 will be credited to your wallet every month. **Source:** Accounts - Remuneration.csv, Sheet1, Index 12.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv, Sheet1, Index 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"234589076ftre\",\n        \"query\": \"how can i avail pluxee\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"56\"\n    }\n}","prompt_token_count":1063,"generation_token_count":178,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9509d05895ec2589bad52
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.3.154 - - [17/Sep/2024 09:49:17] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail pluxee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how can i avail pluxee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '72500690-15da-4c42-99f5-5e278c60f7cc', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:49:48 GMT', 'content-type': 'application/json', 'content-length': '189', 'connection': 'keep-alive', 'x-amzn-requestid': '72500690-15da-4c42-99f5-5e278c60f7cc', 'x-amzn-bedrock-invocation-latency': '293', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '771'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2860>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how can i avail the loyalty bonus or benefits\"\n}","prompt_token_count":771,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how can i avail the loyalty bonus or benefits
INFO:__main__:Query stored successfully with ID: 66e950bc05895ec2589bad54
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'dc7044af-1b60-4398-aa64-5cc87b565389', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:49:53 GMT', 'content-type': 'application/json', 'content-length': '1747', 'connection': 'keep-alive', 'x-amzn-requestid': 'dc7044af-1b60-4398-aa64-5cc87b565389', 'x-amzn-bedrock-invocation-latency': '3981', 'x-amzn-bedrock-output-token-count': '434', 'x-amzn-bedrock-input-token-count': '1257'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c340>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To avail the loyalty bonus or benefits, you can follow these steps: * The loyalty bonus is credited into your Loyalty account on the start of the Appraisal Period (1st April every year). * You can redeem your loyalty bonus after 6 months of credit date, subject to a 50% redemption. * Any subsequent payments further top-up in your Loyalty account will follow the same cycle for withdrawal. For more information, refer to the Gemini-Loyalty Bonus_ Version 6.0 _India.pdf document.\",\n    \"References\": [\n        {\n            \"Statement\": \"The amount payable as a loyalty bonus shall be credited into the Loyalty account of the employee (eligible for that appraisal cycle) once on the start of the Appraisal Period (Currently 1st April) every year and can be redeemed as per the redemption mechanism mentioned below.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page No: 4\"\n        },\n        {\n            \"Statement\": \"Any employee can encash in his \"Loyalty Bonus\" as and when he wishes subject to the following rules: Can be redeemed after 6 months of credit date into the loyalty account.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page No: 4\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how can i avail the loyalty bonus or benefits\",\n        \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1257,"generation_token_count":434,"stop_reason":"stop"}
ERROR:__main__:JSONDecodeError: Expecting ',' delimiter: line 11 column 59 (char 998)
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:49:53] "[35m[1mPOST /process_query HTTP/1.1[0m" 500 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail pluxee', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: how can i avail pluxee
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e9512805895ec2589bad56
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '182dc7bd-fde2-4d14-b1d0-e8db6f70a747', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:51:39 GMT', 'content-type': 'application/json', 'content-length': '893', 'connection': 'keep-alive', 'x-amzn-requestid': '182dc7bd-fde2-4d14-b1d0-e8db6f70a747', 'x-amzn-bedrock-invocation-latency': '2535', 'x-amzn-bedrock-output-token-count': '272', 'x-amzn-bedrock-input-token-count': '1154'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c5b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To avail Pluxee (Sodexo) food wallet, you need to opt for it. If you do, INR 2000 will be credited to your Pluxee food wallet every month. **Source:** Accounts - Remuneration.csv, Sheet1, Index 12.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv, Sheet1, Index 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"how can i avail pluxee\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1154,"generation_token_count":272,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9512b05895ec2589bad57
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.3.154 - - [17/Sep/2024 09:51:39] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hey hey', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: hey hey
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'cd1bffd5-cbf7-4193-a00e-d0f6c611d239', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:52:59 GMT', 'content-type': 'application/json', 'content-length': '181', 'connection': 'keep-alive', 'x-amzn-requestid': 'cd1bffd5-cbf7-4193-a00e-d0f6c611d239', 'x-amzn-bedrock-invocation-latency': '280', 'x-amzn-bedrock-output-token-count': '23', 'x-amzn-bedrock-input-token-count': '764'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c790>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is the loyalty bonus or benefits\"\n}","prompt_token_count":764,"generation_token_count":23,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is the loyalty bonus or benefits
INFO:__main__:Query stored successfully with ID: 66e9517b05895ec2589bad59
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4509c1de-403f-40df-9766-0efd6cdef03b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:53:05 GMT', 'content-type': 'application/json', 'content-length': '2103', 'connection': 'keep-alive', 'x-amzn-requestid': '4509c1de-403f-40df-9766-0efd6cdef03b', 'x-amzn-bedrock-invocation-latency': '4855', 'x-amzn-bedrock-output-token-count': '486', 'x-amzn-bedrock-input-token-count': '1229'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028efe0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The Loyalty Bonus policy of Gemini Solutions rewards employees for their contributions to the organization. It is a combination of two components: recognition of an employee's longevity/tenure with the company and recognition of their performance during the last appraisal period. The amount payable as a loyalty bonus is credited into the Loyalty account of the employee once a year and can be redeemed as per the redemption mechanism. The redemption mechanism allows employees to encash their loyalty bonus after 6 months of credit date into the loyalty account.\",\n    \"References\": [\n        {\n            \"Statement\": \"Loyalty Bonus policy of Gemini Solutions illustrates the bonus payable to an employee for the contributions made towards the organization.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page No: 1\"\n        },\n        {\n            \"Statement\": \"The amount payable as a loyalty bonus shall be credited into the Loyalty account of the employee (eligible for that appraisal cycle) once on the start of the Appraisal Period (Currently 1st April) every year and can be redeemed as per the redemption mechanism mentioned below.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page No: 4\"\n        },\n        {\n            \"Statement\": \"Any employee can encash in his 'Loyalty Bonus' as and when he wishes subject to the following rules: Can be redeemed after 6 months of credit date into the loyalty account.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page No: 4\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"what is the loyalty bonus or benefits\",\n        \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1229,"generation_token_count":486,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9518105895ec2589bad5a
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:53:05] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much amount is credited after using pluxee', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: how much amount is credited after using pluxee
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8c553dd8-718f-4f66-a3f8-37ef983f97d0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:54:27 GMT', 'content-type': 'application/json', 'content-length': '193', 'connection': 'keep-alive', 'x-amzn-requestid': '8c553dd8-718f-4f66-a3f8-37ef983f97d0', 'x-amzn-bedrock-invocation-latency': '354', 'x-amzn-bedrock-output-token-count': '27', 'x-amzn-bedrock-input-token-count': '308'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e800>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how much amount is credited to pluxee after usage\"\n}","prompt_token_count":308,"generation_token_count":27,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how much amount is credited to pluxee after usage
INFO:__main__:Query stored successfully with ID: 66e951d305895ec2589bad5c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5cc1304d-e47d-494c-8d63-cd7181577508', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:54:31 GMT', 'content-type': 'application/json', 'content-length': '1131', 'connection': 'keep-alive', 'x-amzn-requestid': '5cc1304d-e47d-494c-8d63-cd7181577508', 'x-amzn-bedrock-invocation-latency': '3138', 'x-amzn-bedrock-output-token-count': '318', 'x-amzn-bedrock-input-token-count': '1187'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028d570>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"According to the company policy, INR 2000 is credited to your Sodexo (Pluxee) food wallet every month. This amount is credited by 10th-11th of every month for the previous month.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv, Sheet1, Index: 12\"\n        },\n        {\n            \"Statement\": \"Sodexo amount gets credited by 10th-11th of every month for the previous month.\",\n            \"source\": \"Accounts - Remuneration.csv, Sheet1, Index: 13\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"how much amount is credited to pluxee after usage\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1187,"generation_token_count":318,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e951d705895ec2589bad5d
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.3.154 - - [17/Sep/2024 09:54:32] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much amount is credited after using pluxee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how much amount is credited after using pluxee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '87bb9c53-cdeb-4668-846f-190201aaa288', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:54:45 GMT', 'content-type': 'application/json', 'content-length': '230', 'connection': 'keep-alive', 'x-amzn-requestid': '87bb9c53-cdeb-4668-846f-190201aaa288', 'x-amzn-bedrock-invocation-latency': '365', 'x-amzn-bedrock-output-token-count': '31', 'x-amzn-bedrock-input-token-count': '847'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0dc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how much amount is credited into the loyalty account after redeeming the loyalty bonus\"\n}","prompt_token_count":847,"generation_token_count":31,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how much amount is credited into the loyalty account after redeeming the loyalty bonus
INFO:__main__:Query stored successfully with ID: 66e951e505895ec2589bad5f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0f1abf43-3f70-4199-9520-af387bf3e75a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:54:50 GMT', 'content-type': 'application/json', 'content-length': '1500', 'connection': 'keep-alive', 'x-amzn-requestid': '0f1abf43-3f70-4199-9520-af387bf3e75a', 'x-amzn-bedrock-invocation-latency': '3528', 'x-amzn-bedrock-output-token-count': '383', 'x-amzn-bedrock-input-token-count': '1292'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028da50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"After redeeming the loyalty bonus, the amount credited into the loyalty account is 50% of the total amount if the redemption is done after completing 6 months of credit, and 100% if the redemption is done after completing 12 months of credit. Any subsequent payments further top-up in the Loyalty account of an employee shall also follow the same cycle for withdrawal.\",\n    \"References\": [\n        {\n            \"Statement\": \"Any employee can encash in his \"Loyalty Bonus\" as and when he wishes subject to the following rules: Can be redeemed after 6 months of credit date into the loyalty account.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page No: 4\"\n        },\n        {\n            \"Statement\": \"After completing 6 months of credit 50% (Fifty) and After completing 12 months of credit 50% (Fifty)\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page No: 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how much amount is credited into the loyalty account after redeeming the loyalty bonus\",\n        \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1292,"generation_token_count":383,"stop_reason":"stop"}
ERROR:__main__:JSONDecodeError: Expecting ',' delimiter: line 7 column 59 (char 478)
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:54:50] "[35m[1mPOST /process_query HTTP/1.1[0m" 500 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'pluxee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: pluxee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '35da46cd-a5e3-4dee-9dc4-125ab4be7f7c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:55:06 GMT', 'content-type': 'application/json', 'content-length': '182', 'connection': 'keep-alive', 'x-amzn-requestid': '35da46cd-a5e3-4dee-9dc4-125ab4be7f7c', 'x-amzn-bedrock-invocation-latency': '343', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '551'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3d60>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is pluxee or how does pluxee work\"\n}","prompt_token_count":551,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is pluxee or how does pluxee work
INFO:__main__:Query stored successfully with ID: 66e951fa05895ec2589bad61
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4adfcb8f-e72b-42c1-8bd3-5ea9f5d04750', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:55:09 GMT', 'content-type': 'application/json', 'content-length': '909', 'connection': 'keep-alive', 'x-amzn-requestid': '4adfcb8f-e72b-42c1-8bd3-5ea9f5d04750', 'x-amzn-bedrock-invocation-latency': '2346', 'x-amzn-bedrock-output-token-count': '254', 'x-amzn-bedrock-input-token-count': '1042'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028efb0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Pluxee is a food wallet credited with INR 2000 every month, as per the company's policy. It is not related to the company's patch management process or exit clearance procedure.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"what is pluxee or how does pluxee work\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1042,"generation_token_count":254,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e951fd05895ec2589bad62
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:55:09] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much amount is credited after using pluxee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how much amount is credited after using pluxee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd04a8fab-ae8e-4cc6-b1ed-64926378e843', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:55:29 GMT', 'content-type': 'application/json', 'content-length': '230', 'connection': 'keep-alive', 'x-amzn-requestid': 'd04a8fab-ae8e-4cc6-b1ed-64926378e843', 'x-amzn-bedrock-invocation-latency': '362', 'x-amzn-bedrock-output-token-count': '31', 'x-amzn-bedrock-input-token-count': '637'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e3b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how much amount is credited into the loyalty account after redeeming the loyalty bonus\"\n}","prompt_token_count":637,"generation_token_count":31,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how much amount is credited into the loyalty account after redeeming the loyalty bonus
INFO:__main__:Query stored successfully with ID: 66e9521105895ec2589bad64
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0fa61783-52f4-4122-a4eb-f8f6fd428557', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:55:34 GMT', 'content-type': 'application/json', 'content-length': '1492', 'connection': 'keep-alive', 'x-amzn-requestid': '0fa61783-52f4-4122-a4eb-f8f6fd428557', 'x-amzn-bedrock-invocation-latency': '3742', 'x-amzn-bedrock-output-token-count': '379', 'x-amzn-bedrock-input-token-count': '1292'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02b00a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"After redeeming the loyalty bonus, the amount credited into the loyalty account is 50% of the total amount if the redemption is done after completing 6 months of credit, and 100% if the redemption is done after completing 12 months of credit. Any subsequent payments further top-up in the Loyalty account of an employee shall also follow the same cycle for withdrawal.\",\n    \"References\": [\n        {\n            \"Statement\": \"Any employee can encash in his \"Loyalty Bonus\" as and when he wishes subject to the following rules: Can be redeemed after 6 months of credit date into the loyalty account.\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page 4\"\n        },\n        {\n            \"Statement\": \"After completing 6 months of credit 50% (Fifty) and After completing 12 months of credit 50% (Fifty)\",\n            \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf - Page 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how much amount is credited into the loyalty account after redeeming the loyalty bonus\",\n        \"source\": \"Gemini-Loyalty Bonus_ Version 6.0 _India.pdf\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1292,"generation_token_count":379,"stop_reason":"stop"}
ERROR:__main__:JSONDecodeError: Expecting ',' delimiter: line 7 column 59 (char 478)
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:55:34] "[35m[1mPOST /process_query HTTP/1.1[0m" 500 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much amount is credited after using pluxee\r\n ', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: how much amount is credited after using pluxee
 
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '88745d42-3149-4c52-886c-0054503a3beb', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:55:51 GMT', 'content-type': 'application/json', 'content-length': '194', 'connection': 'keep-alive', 'x-amzn-requestid': '88745d42-3149-4c52-886c-0054503a3beb', 'x-amzn-bedrock-invocation-latency': '312', 'x-amzn-bedrock-output-token-count': '27', 'x-amzn-bedrock-input-token-count': '486'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ec20>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"how much amount is credited to pluxee after usage\"\n}","prompt_token_count":486,"generation_token_count":27,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how much amount is credited after using pluxee
 
INFO:__main__:Query stored successfully with ID: 66e9522705895ec2589bad66
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c03c2e74-0e5d-4a0c-b229-3a3981812ef6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:55:54 GMT', 'content-type': 'application/json', 'content-length': '842', 'connection': 'keep-alive', 'x-amzn-requestid': 'c03c2e74-0e5d-4a0c-b229-3a3981812ef6', 'x-amzn-bedrock-invocation-latency': '2482', 'x-amzn-bedrock-output-token-count': '249', 'x-amzn-bedrock-input-token-count': '1188'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028d060>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"If you opt for the Sodexo food wallet (Pluxee), INR 2000 will be credited to your account every month.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"how much amount is credited after using pluxee\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"56\"\n    }\n}","prompt_token_count":1188,"generation_token_count":249,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9522a05895ec2589bad67
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.3.154 - - [17/Sep/2024 09:55:54] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much amount is credited after using pluxee', 'conversation_id': '234589076ftre'}
INFO:__main__:Received query: how much amount is credited after using pluxee
INFO:__main__:Received conversation_id: 234589076ftre
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '365b2fb4-9151-4cc3-923d-361e4c252d34', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:57:31 GMT', 'content-type': 'application/json', 'content-length': '211', 'connection': 'keep-alive', 'x-amzn-requestid': '365b2fb4-9151-4cc3-923d-361e4c252d34', 'x-amzn-bedrock-invocation-latency': '349', 'x-amzn-bedrock-output-token-count': '31', 'x-amzn-bedrock-input-token-count': '305'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a04f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how much amount is credited to my pluxee food wallet after using it\"\n}","prompt_token_count":305,"generation_token_count":31,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how much amount is credited to my pluxee food wallet after using it
INFO:__main__:Query stored successfully with ID: 66e9528b05895ec2589bad69
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '978d9baa-b3ca-49a6-b4ad-37ca4bafeefd', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:57:34 GMT', 'content-type': 'application/json', 'content-length': '688', 'connection': 'keep-alive', 'x-amzn-requestid': '978d9baa-b3ca-49a6-b4ad-37ca4bafeefd', 'x-amzn-bedrock-invocation-latency': '1483', 'x-amzn-bedrock-output-token-count': '148', 'x-amzn-bedrock-input-token-count': '971'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c430>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"INR 2000 is credited to your Pluxee food wallet every month.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"234589076ftre\",\n        \"query\": \"how much amount is credited to my pluxee food wallet after using it\",\n        \"source\": \"HR Policy Bot\",\n        \"response_length\": \"37\"\n    }\n}","prompt_token_count":971,"generation_token_count":148,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9528e05895ec2589bad6a
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.3.154 - - [17/Sep/2024 09:57:34] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what what what what what', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: what what what what what
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a9ee6fdd-ed68-46d3-b34f-0fb7a4f9ddb1', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:58:27 GMT', 'content-type': 'application/json', 'content-length': '190', 'connection': 'keep-alive', 'x-amzn-requestid': 'a9ee6fdd-ed68-46d3-b34f-0fb7a4f9ddb1', 'x-amzn-bedrock-invocation-latency': '309', 'x-amzn-bedrock-output-token-count': '26', 'x-amzn-bedrock-input-token-count': '459'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ee60>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is the amount credited after using pluxee\"\n}","prompt_token_count":459,"generation_token_count":26,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is the amount credited after using pluxee
INFO:__main__:Query stored successfully with ID: 66e952c305895ec2589bad6c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b2191078-8480-449e-b980-3c33f93e7744', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:58:31 GMT', 'content-type': 'application/json', 'content-length': '824', 'connection': 'keep-alive', 'x-amzn-requestid': 'b2191078-8480-449e-b980-3c33f93e7744', 'x-amzn-bedrock-invocation-latency': '2491', 'x-amzn-bedrock-output-token-count': '244', 'x-amzn-bedrock-input-token-count': '1185'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02402e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The amount credited after using Pluxee (Sodexo food wallet) is INR 2000 every month.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"what is the amount credited after using pluxee\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"56\"\n    }\n}","prompt_token_count":1185,"generation_token_count":244,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e952c705895ec2589bad6d
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.3.154 - - [17/Sep/2024 09:58:31] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what what what what what', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: what what what what what
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '188e03f7-d4d3-49a5-9233-ebdb2a81dbde', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:58:58 GMT', 'content-type': 'application/json', 'content-length': '182', 'connection': 'keep-alive', 'x-amzn-requestid': '188e03f7-d4d3-49a5-9233-ebdb2a81dbde', 'x-amzn-bedrock-invocation-latency': '312', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '352'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ce50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is pluxee or how does pluxee work\"\n}","prompt_token_count":352,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is pluxee or how does pluxee work
INFO:__main__:Query stored successfully with ID: 66e952e205895ec2589bad6f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1b56919b-ef3a-44f8-b0c3-f8a17ce5a08f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:59:01 GMT', 'content-type': 'application/json', 'content-length': '909', 'connection': 'keep-alive', 'x-amzn-requestid': '1b56919b-ef3a-44f8-b0c3-f8a17ce5a08f', 'x-amzn-bedrock-invocation-latency': '2532', 'x-amzn-bedrock-output-token-count': '254', 'x-amzn-bedrock-input-token-count': '1042'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a5030>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Pluxee is a food wallet credited with INR 2000 every month, as per the company's policy. It is not related to the company's patch management process or exit clearance procedure.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"what is pluxee or how does pluxee work\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1042,"generation_token_count":254,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e952e505895ec2589bad70
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:59:01] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what what what what what what what what what what what what', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: what what what what what what what what what what what what
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'febcf66b-b837-4975-9e54-c4e713c88924', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:59:21 GMT', 'content-type': 'application/json', 'content-length': '182', 'connection': 'keep-alive', 'x-amzn-requestid': 'febcf66b-b837-4975-9e54-c4e713c88924', 'x-amzn-bedrock-invocation-latency': '333', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '425'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e920>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is pluxee or how does pluxee work\"\n}","prompt_token_count":425,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is pluxee or how does pluxee work
INFO:__main__:Query stored successfully with ID: 66e952f905895ec2589bad72
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f65f0ef7-7980-4357-9dc0-171c7637ac9e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:59:25 GMT', 'content-type': 'application/json', 'content-length': '909', 'connection': 'keep-alive', 'x-amzn-requestid': 'f65f0ef7-7980-4357-9dc0-171c7637ac9e', 'x-amzn-bedrock-invocation-latency': '2521', 'x-amzn-bedrock-output-token-count': '254', 'x-amzn-bedrock-input-token-count': '1042'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f670>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Pluxee is a food wallet credited with INR 2000 every month, as per the company's policy. It is not related to the company's patch management process or exit clearance procedure.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"what is pluxee or how does pluxee work\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1042,"generation_token_count":254,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e952fd05895ec2589bad73
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:59:25] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is plexi please tell me , what is it', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: what is plexi please tell me , what is it
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3f37e0e9-a078-4996-8b61-304c2308ce92', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:59:43 GMT', 'content-type': 'application/json', 'content-length': '182', 'connection': 'keep-alive', 'x-amzn-requestid': '3f37e0e9-a078-4996-8b61-304c2308ce92', 'x-amzn-bedrock-invocation-latency': '339', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '424'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e5c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is pluxee or how does pluxee work\"\n}","prompt_token_count":424,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is pluxee or how does pluxee work
INFO:__main__:Query stored successfully with ID: 66e9530f05895ec2589bad75
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8ef8ffcb-e727-4429-bb7d-a536e5211def', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 09:59:46 GMT', 'content-type': 'application/json', 'content-length': '909', 'connection': 'keep-alive', 'x-amzn-requestid': '8ef8ffcb-e727-4429-bb7d-a536e5211def', 'x-amzn-bedrock-invocation-latency': '2527', 'x-amzn-bedrock-output-token-count': '254', 'x-amzn-bedrock-input-token-count': '1042'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a4a00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Pluxee is a food wallet credited with INR 2000 every month, as per the company's policy. It is not related to the company's patch management process or exit clearance procedure.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"what is pluxee or how does pluxee work\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1042,"generation_token_count":254,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9531205895ec2589bad76
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 09:59:46] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much amount is credited after using pluxee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how much amount is credited after using pluxee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e2e07244-a9c2-4d56-a082-457b6c3b11a4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:00:04 GMT', 'content-type': 'application/json', 'content-length': '186', 'connection': 'keep-alive', 'x-amzn-requestid': 'e2e07244-a9c2-4d56-a082-457b6c3b11a4', 'x-amzn-bedrock-invocation-latency': '307', 'x-amzn-bedrock-output-token-count': '26', 'x-amzn-bedrock-input-token-count': '429'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028eb00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how much is credited to pluxee food wallet\"\n}","prompt_token_count":429,"generation_token_count":26,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how much is credited to pluxee food wallet
INFO:__main__:Query stored successfully with ID: 66e9532405895ec2589bad78
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '809ec513-085a-41d3-ac5d-cf0643da29f8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:00:07 GMT', 'content-type': 'application/json', 'content-length': '796', 'connection': 'keep-alive', 'x-amzn-requestid': '809ec513-085a-41d3-ac5d-cf0643da29f8', 'x-amzn-bedrock-invocation-latency': '2321', 'x-amzn-bedrock-output-token-count': '231', 'x-amzn-bedrock-input-token-count': '1044'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a4f70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"INR 2000 is credited to your Sodexo (Pluxee) food wallet every month.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how much is credited to pluxee food wallet\",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"56\"\n    }\n}","prompt_token_count":1044,"generation_token_count":231,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9532705895ec2589bad79
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 10:00:07] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how to avail plexi', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how to avail plexi
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '59843864-75c2-4d58-b120-c5c5bd6d2899', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:01:01 GMT', 'content-type': 'application/json', 'content-length': '173', 'connection': 'keep-alive', 'x-amzn-requestid': '59843864-75c2-4d58-b120-c5c5bd6d2899', 'x-amzn-bedrock-invocation-latency': '349', 'x-amzn-bedrock-output-token-count': '24', 'x-amzn-bedrock-input-token-count': '403'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3af0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how to use pluxee food wallet\"\n}","prompt_token_count":403,"generation_token_count":24,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how to use pluxee food wallet
INFO:__main__:Query stored successfully with ID: 66e9535d05895ec2589bad7b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '921092f7-ba31-402f-8fa6-f7caa8853835', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:01:06 GMT', 'content-type': 'application/json', 'content-length': '1346', 'connection': 'keep-alive', 'x-amzn-requestid': '921092f7-ba31-402f-8fa6-f7caa8853835', 'x-amzn-bedrock-invocation-latency': '3449', 'x-amzn-bedrock-output-token-count': '351', 'x-amzn-bedrock-input-token-count': '1050'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a6080>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The Pluxee food wallet, also known as Sodexo food wallet, is a tax-saving option available for Old Tax Regime employees. To use it, you need to opt for it and INR 2000 will be credited to your wallet every month. This amount will be deducted from your Special Allowance of your CTC. To activate this option, please fill the Tax Saving Form received from colleagues.connect@geminisolutions.com to your official mail id.\",\n    \"References\": [\n        {\n            \"Statement\": \"Sodexo food Wallet option costs you INR 2000 per month, this is a part of your tax savings option.\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 14\"\n        },\n        {\n            \"Statement\": \"INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how to use pluxee food wallet\",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1050,"generation_token_count":351,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9536205895ec2589bad7c
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 10:01:06] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail pulxe ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: how can i avail pulxe ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e9542605895ec2589bad7e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9a574f12-e1d7-4d77-ac78-6a7449d8e18d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:04:26 GMT', 'content-type': 'application/json', 'content-length': '921', 'connection': 'keep-alive', 'x-amzn-requestid': '9a574f12-e1d7-4d77-ac78-6a7449d8e18d', 'x-amzn-bedrock-invocation-latency': '2655', 'x-amzn-bedrock-output-token-count': '270', 'x-amzn-bedrock-input-token-count': '1004'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f38b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Pulxe is not a term used in Gemini Solutions' policies. However, it seems you may be referring to Sodexo (Pluxee) food wallet. If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"how can i avail pulxe ?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1004,"generation_token_count":270,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9542a05895ec2589bad7f
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 10:04:26] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail plexee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how can i avail plexee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3ac9269c-05c8-4671-8020-7e8b33da24b8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:23:55 GMT', 'content-type': 'application/json', 'content-length': '173', 'connection': 'keep-alive', 'x-amzn-requestid': '3ac9269c-05c8-4671-8020-7e8b33da24b8', 'x-amzn-bedrock-invocation-latency': '278', 'x-amzn-bedrock-output-token-count': '24', 'x-amzn-bedrock-input-token-count': '492'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028fa90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how to use pluxee food wallet\"\n}","prompt_token_count":492,"generation_token_count":24,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how to use pluxee food wallet
INFO:__main__:Query stored successfully with ID: 66e958bb05895ec2589bad81
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ce55d885-79fd-4f48-9e14-46d40ad46b95', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:23:59 GMT', 'content-type': 'application/json', 'content-length': '1346', 'connection': 'keep-alive', 'x-amzn-requestid': 'ce55d885-79fd-4f48-9e14-46d40ad46b95', 'x-amzn-bedrock-invocation-latency': '3464', 'x-amzn-bedrock-output-token-count': '351', 'x-amzn-bedrock-input-token-count': '1050'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0fa0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The Pluxee food wallet, also known as Sodexo food wallet, is a tax-saving option available for Old Tax Regime employees. To use it, you need to opt for it and INR 2000 will be credited to your wallet every month. This amount will be deducted from your Special Allowance of your CTC. To activate this option, please fill the Tax Saving Form received from colleagues.connect@geminisolutions.com to your official mail id.\",\n    \"References\": [\n        {\n            \"Statement\": \"Sodexo food Wallet option costs you INR 2000 per month, this is a part of your tax savings option.\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 14\"\n        },\n        {\n            \"Statement\": \"INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how to use pluxee food wallet\",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1050,"generation_token_count":351,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e958bf05895ec2589bad82
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 10:23:59] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how to avail plexee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how to avail plexee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2faeb3aa-fb75-4174-86cf-11ad49bb4eca', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:24:12 GMT', 'content-type': 'application/json', 'content-length': '173', 'connection': 'keep-alive', 'x-amzn-requestid': '2faeb3aa-fb75-4174-86cf-11ad49bb4eca', 'x-amzn-bedrock-invocation-latency': '273', 'x-amzn-bedrock-output-token-count': '24', 'x-amzn-bedrock-input-token-count': '602'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028dbd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how to use pluxee food wallet\"\n}","prompt_token_count":602,"generation_token_count":24,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how to use pluxee food wallet
INFO:__main__:Query stored successfully with ID: 66e958cc05895ec2589bad84
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4a316db4-180c-42ab-b280-2f6ebc066b18', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:24:16 GMT', 'content-type': 'application/json', 'content-length': '1346', 'connection': 'keep-alive', 'x-amzn-requestid': '4a316db4-180c-42ab-b280-2f6ebc066b18', 'x-amzn-bedrock-invocation-latency': '3426', 'x-amzn-bedrock-output-token-count': '351', 'x-amzn-bedrock-input-token-count': '1050'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a38e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The Pluxee food wallet, also known as Sodexo food wallet, is a tax-saving option available for Old Tax Regime employees. To use it, you need to opt for it and INR 2000 will be credited to your wallet every month. This amount will be deducted from your Special Allowance of your CTC. To activate this option, please fill the Tax Saving Form received from colleagues.connect@geminisolutions.com to your official mail id.\",\n    \"References\": [\n        {\n            \"Statement\": \"Sodexo food Wallet option costs you INR 2000 per month, this is a part of your tax savings option.\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 14\"\n        },\n        {\n            \"Statement\": \"INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how to use pluxee food wallet\",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1050,"generation_token_count":351,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e958d005895ec2589bad85
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 10:24:16] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much amount is credited after availing plexee', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how much amount is credited after availing plexee
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '760f8a8f-e33a-4b9f-a161-b0fcf5e40e6c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:48:26 GMT', 'content-type': 'application/json', 'content-length': '211', 'connection': 'keep-alive', 'x-amzn-requestid': '760f8a8f-e33a-4b9f-a161-b0fcf5e40e6c', 'x-amzn-bedrock-invocation-latency': '386', 'x-amzn-bedrock-output-token-count': '31', 'x-amzn-bedrock-input-token-count': '607'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1630>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how much amount is credited to pluxee food wallet after availing it\"\n}","prompt_token_count":607,"generation_token_count":31,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how much amount is credited to pluxee food wallet after availing it
INFO:__main__:Query stored successfully with ID: 66e95e7a05895ec2589bad87
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd5fd3881-e8f7-435d-bdcf-24021c2c341d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:48:29 GMT', 'content-type': 'application/json', 'content-length': '1071', 'connection': 'keep-alive', 'x-amzn-requestid': 'd5fd3881-e8f7-435d-bdcf-24021c2c341d', 'x-amzn-bedrock-invocation-latency': '2723', 'x-amzn-bedrock-output-token-count': '295', 'x-amzn-bedrock-input-token-count': '1054'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0f10>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"INR 2000 is credited to your Pluxee (Sodexo) food wallet every month after availing it.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        },\n        {\n            \"Statement\": \"Sodexo food Wallet option costs you INR 2000 per month, this is a part of your tax savings option.\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 14\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how much amount is credited to pluxee food wallet after availing it\",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1054,"generation_token_count":295,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e95e7d05895ec2589bad88
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 10:48:29] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail plexi', 'conversation_id': 'a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M'}
INFO:__main__:Received query: how can i avail plexi
INFO:__main__:Received conversation_id: a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '84e1851e-482a-48c8-b095-e38225da79d3', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:48:53 GMT', 'content-type': 'application/json', 'content-length': '178', 'connection': 'keep-alive', 'x-amzn-requestid': '84e1851e-482a-48c8-b095-e38225da79d3', 'x-amzn-bedrock-invocation-latency': '321', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '551'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3d30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how can i avail pluxee food wallet\"\n}","prompt_token_count":551,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how can i avail pluxee food wallet
INFO:__main__:Query stored successfully with ID: 66e95e9505895ec2589bad8a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '09a54255-81e4-4df4-aa1a-7bbcd2f2712a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:48:58 GMT', 'content-type': 'application/json', 'content-length': '1268', 'connection': 'keep-alive', 'x-amzn-requestid': '09a54255-81e4-4df4-aa1a-7bbcd2f2712a', 'x-amzn-bedrock-invocation-latency': '3363', 'x-amzn-bedrock-output-token-count': '339', 'x-amzn-bedrock-input-token-count': '1052'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3be0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To avail the Pluxee food wallet, you need to opt for it and fill the Tax Saving Form received from colleagues.connect@geminisolutions.com to your official mail id. The amount of INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month. Note that this option is only available for the Old Tax Regime.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        },\n        {\n            \"Statement\": \"Sodexo food Wallet option costs you INR 2000 per month, this is a part of your tax savings option.\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 14\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1xtpApCxIbCrioG_Gh-le2NdReq2o4uufjlTK0Eekp64Vjm1mXCg85R6W51dacnjlpEonhgzjZOsIoxzn7UTW7O0rz0IKkGwb9NKbHMt37q2_052hmaGJs69TDL5y9m7M\",\n        \"query\": \"how can i avail pluxee food wallet\",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1052,"generation_token_count":339,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e95e9a05895ec2589bad8b
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 10:48:58] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is the tax saving options available ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: what is the tax saving options available ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '598386bf-eecc-42c7-8995-a6b888c6a3bb', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:56:16 GMT', 'content-type': 'application/json', 'content-length': '206', 'connection': 'keep-alive', 'x-amzn-requestid': '598386bf-eecc-42c7-8995-a6b888c6a3bb', 'x-amzn-bedrock-invocation-latency': '354', 'x-amzn-bedrock-output-token-count': '26', 'x-amzn-bedrock-input-token-count': '307'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028d8d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what are the tax saving options available in Gemini Solutions?\"\n}","prompt_token_count":307,"generation_token_count":26,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what are the tax saving options available in Gemini Solutions?
INFO:__main__:Query stored successfully with ID: 66e9605005895ec2589bad8d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '986ffcc8-e815-4b85-b47c-5ae7685311a2', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 10:56:20 GMT', 'content-type': 'application/json', 'content-length': '1272', 'connection': 'keep-alive', 'x-amzn-requestid': '986ffcc8-e815-4b85-b47c-5ae7685311a2', 'x-amzn-bedrock-invocation-latency': '2991', 'x-amzn-bedrock-output-token-count': '321', 'x-amzn-bedrock-input-token-count': '1084'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2ad0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions offers several tax-saving options, including LTA, Sodexo food wallet, books and periodicals, telephone and internet, and PF. Additionally, the company has an Employee Stock Options Plan (ESOP) that allows employees to purchase shares at a discounted rate, which can also help with tax savings.\",\n    \"References\": [\n        {\n            \"Statement\": \"We've got several tax-saving options for you! These include LTA, the Sodexo food wallet, books and periodicals, telephone and internet, and PF.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 10\"\n        },\n        {\n            \"Statement\": \"Employee Stock Options Plan - GSPL\",\n            \"source\": \"Gemini-ESOP scheme - final 1_India.pdf - Page No: 1\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"what are the tax saving options available in Gemini Solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1084,"generation_token_count":321,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9605405895ec2589bad8e
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 10:56:20] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'id card ', 'conversation_id': 'a:1TghGFCic_6XeY6_uUE_tVPEQiH3Msk29A7HXMDxke2ecmM9LYbOiL6iUmwkTykCDBZ_ekOI2IkFbRdkw_STig-RvTRIdpmxk1nlKOGQC164GrBV3XKrl-VsYSsvdPp4S'}
INFO:__main__:Received query: id card 
INFO:__main__:Received conversation_id: a:1TghGFCic_6XeY6_uUE_tVPEQiH3Msk29A7HXMDxke2ecmM9LYbOiL6iUmwkTykCDBZ_ekOI2IkFbRdkw_STig-RvTRIdpmxk1nlKOGQC164GrBV3XKrl-VsYSsvdPp4S
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e972e305895ec2589bad90
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is the sum insured for parents insurance?', 'conversation_id': 'a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41'}
INFO:__main__:Received query: what is the sum insured for parents insurance?
INFO:__main__:Received conversation_id: a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e972e405895ec2589bad92
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4542db41-0452-453f-ba3a-6cb07617afb6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:15:35 GMT', 'content-type': 'application/json', 'content-length': '981', 'connection': 'keep-alive', 'x-amzn-requestid': '4542db41-0452-453f-ba3a-6cb07617afb6', 'x-amzn-bedrock-invocation-latency': '2559', 'x-amzn-bedrock-output-token-count': '260', 'x-amzn-bedrock-input-token-count': '1130'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024e560>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The sum insured for parents insurance is a floater amount from INR 9,000 to 12,000 for both parents. However, please note that you can only add your parents to the insurance policy during the annual renewal period.\",\n    \"References\": [\n        {\n            \"Statement\": \"The premium that you will need to pay for covering your parents is a floater amount from INR 9000-12000 for both Parents.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 4\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41\",\n        \"query\": \"what is the sum insured for parents insurance?\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1130,"generation_token_count":260,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e972e705895ec2589bad93
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:15:35] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '383836e3-e6ce-4f48-89b4-7a85425a9651', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:15:36 GMT', 'content-type': 'application/json', 'content-length': '1550', 'connection': 'keep-alive', 'x-amzn-requestid': '383836e3-e6ce-4f48-89b4-7a85425a9651', 'x-amzn-bedrock-invocation-latency': '3844', 'x-amzn-bedrock-output-token-count': '390', 'x-amzn-bedrock-input-token-count': '1025'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852260>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"You can collect your ID Card from the Office reception of your designated office location within 45 days from your joining date. If you forgot to bring your ID Card, you can get a temp card issued on your name from the reception. In case you lose your ID Card, you can raise a ticket on the helpdesk, and a new ID card will be issued for you, with a charge of INR 500.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can collect the ID Card from Office reception of your designated office location within 45 days from your joining date.\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 22\"\n        },\n        {\n            \"Statement\": \"You can get a temp card issued on your name from the reception\",\n            \"source\": \"ITAdmin - Misscellaneous.csv - Sheet1 - Index: 12\"\n        },\n        {\n            \"Statement\": \"You can raise a ticket on the helpdesk, and a new ID card will be issued for you. The charges for the ID card will be INR 500\",\n            \"source\": \"ITAdmin - Misscellaneous.csv - Sheet1 - Index: 10\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1TghGFCic_6XeY6_uUE_tVPEQiH3Msk29A7HXMDxke2ecmM9LYbOiL6iUmwkTykCDBZ_ekOI2IkFbRdkw_STig-RvTRIdpmxk1nlKOGQC164GrBV3XKrl-VsYSsvdPp4S\",\n        \"query\": \"id card \",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1025,"generation_token_count":390,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e972e805895ec2589bad94
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:15:36] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'if id card is lost ?', 'conversation_id': 'a:1TghGFCic_6XeY6_uUE_tVPEQiH3Msk29A7HXMDxke2ecmM9LYbOiL6iUmwkTykCDBZ_ekOI2IkFbRdkw_STig-RvTRIdpmxk1nlKOGQC164GrBV3XKrl-VsYSsvdPp4S'}
INFO:__main__:Received query: if id card is lost ?
INFO:__main__:Received conversation_id: a:1TghGFCic_6XeY6_uUE_tVPEQiH3Msk29A7HXMDxke2ecmM9LYbOiL6iUmwkTykCDBZ_ekOI2IkFbRdkw_STig-RvTRIdpmxk1nlKOGQC164GrBV3XKrl-VsYSsvdPp4S
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5831e97f-759a-47ad-b48a-1b251f1c2305', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:15:42 GMT', 'content-type': 'application/json', 'content-length': '169', 'connection': 'keep-alive', 'x-amzn-requestid': '5831e97f-759a-47ad-b48a-1b251f1c2305', 'x-amzn-bedrock-invocation-latency': '268', 'x-amzn-bedrock-output-token-count': '23', 'x-amzn-bedrock-input-token-count': '410'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08520b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what if i lose my id card\"\n}","prompt_token_count":410,"generation_token_count":23,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what if i lose my id card
INFO:__main__:Query stored successfully with ID: 66e972ee05895ec2589bad96
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '6d52c740-37b4-4b02-b150-eecb940545f0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:15:46 GMT', 'content-type': 'application/json', 'content-length': '1536', 'connection': 'keep-alive', 'x-amzn-requestid': '6d52c740-37b4-4b02-b150-eecb940545f0', 'x-amzn-bedrock-invocation-latency': '3625', 'x-amzn-bedrock-output-token-count': '395', 'x-amzn-bedrock-input-token-count': '1019'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a16c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"If you lose your ID card, you can raise a ticket on the helpdesk, and a new ID card will be issued for you. The charges for the ID card will be INR 500. You can also get a temporary ID card issued from the reception. Additionally, if you lose your ID card, you should file a report with the nearest police station and share a copy of the report with the Admin team.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can raise a ticket on the helpdesk, and a new ID card will be issued for you. The charges for the ID card will be INR 500\",\n            \"source\": \"ITAdmin - Misscellaneous.csv - Sheet1 - Index: 10\"\n        },\n        {\n            \"Statement\": \"You can get a temp card issued on your name from the reception\",\n            \"source\": \"ITAdmin - Misscellaneous.csv - Sheet1 - Index: 12\"\n        },\n        {\n            \"Statement\": \"Head to the nearest police station and file a report about the loss within 24 hours\",\n            \"source\": \"ITAdmin - Misscellaneous.csv - Sheet1 - Index: 24\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1TghGFCic_6XeY6_uUE_tVPEQiH3Msk29A7HXMDxke2ecmM9LYbOiL6iUmwkTykCDBZ_ekOI2IkFbRdkw_STig-RvTRIdpmxk1nlKOGQC164GrBV3XKrl-VsYSsvdPp4S\",\n        \"query\": \"what if i lose my id card\",\n        \"source\": \"ITAdmin - Misscellaneous.csv\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1019,"generation_token_count":395,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e972f205895ec2589bad97
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:15:46] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'explain the bifurcation of sum insured in insurance?', 'conversation_id': 'a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41'}
INFO:__main__:Received query: explain the bifurcation of sum insured in insurance?
INFO:__main__:Received conversation_id: a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '704fd639-4a5a-4daf-ba80-900d11821b91', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:16:31 GMT', 'content-type': 'application/json', 'content-length': '203', 'connection': 'keep-alive', 'x-amzn-requestid': '704fd639-4a5a-4daf-ba80-900d11821b91', 'x-amzn-bedrock-invocation-latency': '307', 'x-amzn-bedrock-output-token-count': '27', 'x-amzn-bedrock-input-token-count': '301'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e260>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"explain the bifurcation of sum insured in parents insurance\"\n}","prompt_token_count":301,"generation_token_count":27,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: explain the bifurcation of sum insured in parents insurance
INFO:__main__:Query stored successfully with ID: 66e9731f05895ec2589bad99
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2a7ce129-9ee5-43a3-8bcc-4f6c2d58175f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:16:34 GMT', 'content-type': 'application/json', 'content-length': '1031', 'connection': 'keep-alive', 'x-amzn-requestid': '2a7ce129-9ee5-43a3-8bcc-4f6c2d58175f', 'x-amzn-bedrock-invocation-latency': '2710', 'x-amzn-bedrock-output-token-count': '273', 'x-amzn-bedrock-input-token-count': '1135'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2ce0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The sum insured for parents insurance is bifurcated into a floater amount of INR 9,000-12,000 for both parents. This amount can vary each year based on the insurance policy in place. Note that parent-in-laws are not covered under this policy.\",\n    \"References\": [\n        {\n            \"Statement\": \"The premium that you will need to pay for covering your parents is a floater amount from INR 9000-12000 for both Parents.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 4\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41\",\n        \"query\": \"explain the bifurcation of sum insured in parents insurance\",\n        \"source\": \"Gemini Solutions HR Policy Database\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1135,"generation_token_count":273,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9732205895ec2589bad9a
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:16:34] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'explain the structure of floater insurance in gemini?', 'conversation_id': 'a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41'}
INFO:__main__:Received query: explain the structure of floater insurance in gemini?
INFO:__main__:Received conversation_id: a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3def48fd-25f1-4610-96d1-d1942cb5a7c6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:17:42 GMT', 'content-type': 'application/json', 'content-length': '207', 'connection': 'keep-alive', 'x-amzn-requestid': '3def48fd-25f1-4610-96d1-d1942cb5a7c6', 'x-amzn-bedrock-invocation-latency': '312', 'x-amzn-bedrock-output-token-count': '26', 'x-amzn-bedrock-input-token-count': '446'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e380>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"explain the structure of floater insurance in parents insurance\"\n}","prompt_token_count":446,"generation_token_count":26,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: explain the structure of floater insurance in parents insurance
INFO:__main__:Query stored successfully with ID: 66e9736605895ec2589bad9c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '817cee3d-e46f-4461-bd48-d48d4521df37', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:17:47 GMT', 'content-type': 'application/json', 'content-length': '1659', 'connection': 'keep-alive', 'x-amzn-requestid': '817cee3d-e46f-4461-bd48-d48d4521df37', 'x-amzn-bedrock-invocation-latency': '4052', 'x-amzn-bedrock-output-token-count': '420', 'x-amzn-bedrock-input-token-count': '1133'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1600>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The structure of floater insurance in parents insurance at Gemini Solutions is as follows:\n\n* The insurance cover amount for parents is a floater amount from INR 9,000 to 12,000 for both parents.\n* The addition of parents to the insurance policy can only happen at the time of joining or at the time of renewal, and not mid-year.\n* The maximum cover for parents cannot exceed INR 5,00,000, which is the same as the maximum cover for married employees.\n* The premium amount for covering parents is borne by the employee.\n* The employee needs to inform the HR team with the details of their parents, including name, date of birth, and government identity proof, during the annual renewal period.\n\nReferences:\n{\n    \"Statement\": \"The addition can happen only at the time of joining or at the time of renewal. No addition can take place in mid of the year.\",\n    \"source\": \"Text Block 3 - Accounts - Remuneration.csv - Sheet1 - Index: 6\"\n},\n{\n    \"Statement\": \"The premium that you will need to pay for covering your parents is a floater amount from INR 9000-12000 for both Parents.\",\n    \"source\": \"Text Block 5 - Accounts - Remuneration.csv - Sheet1 - Index: 4\"\n}\n\",\n\"Metadata\": {\n    \"conversation_id\": \"a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41\",\n    \"query\": \"explain the structure of floater insurance in parents insurance\",\n    \"source\": \"Text Blocks 1-5\",\n    \"response_length\": \"246\"\n}\n}","prompt_token_count":1133,"generation_token_count":420,"stop_reason":"stop"}
ERROR:__main__:JSONDecodeError: Invalid control character at: line 4 column 106 (char 109)
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:17:47] "[35m[1mPOST /process_query HTTP/1.1[0m" 500 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'explain the insurance process and the amount insured for individual, a prents and everyone?', 'conversation_id': 'a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41'}
INFO:__main__:Received query: explain the insurance process and the amount insured for individual, a prents and everyone?
INFO:__main__:Received conversation_id: a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd9319559-71f9-4376-a5c9-1ab7a163aaf8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:18:28 GMT', 'content-type': 'application/json', 'content-length': '219', 'connection': 'keep-alive', 'x-amzn-requestid': 'd9319559-71f9-4376-a5c9-1ab7a163aaf8', 'x-amzn-bedrock-invocation-latency': '314', 'x-amzn-bedrock-output-token-count': '27', 'x-amzn-bedrock-input-token-count': '456'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1000>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"explain the insurance process and the amount insured for individual parents\"\n}","prompt_token_count":456,"generation_token_count":27,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: explain the insurance process and the amount insured for individual parents
INFO:__main__:Query stored successfully with ID: 66e9739405895ec2589bad9e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2489d494-1747-41d2-8c22-4481749877a8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:18:33 GMT', 'content-type': 'application/json', 'content-length': '1847', 'connection': 'keep-alive', 'x-amzn-requestid': '2489d494-1747-41d2-8c22-4481749877a8', 'x-amzn-bedrock-invocation-latency': '4168', 'x-amzn-bedrock-output-token-count': '429', 'x-amzn-bedrock-input-token-count': '1081'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f37f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To add your parents to the insurance, you need to do it during the annual renewal period at the time of renewal of insurance policy annually. The premium amount for covering both parents is a floater amount from INR 9,000-12,000, which may vary each year. Unfortunately, parent-in-laws are not covered under the insurance policy. You can add your parents or spouse during the annual renewal period by informing the HR team with the required details. No mid-term addition of family members is possible except in case of marriage or child birth.\",\n    \"References\": [\n        {\n            \"Statement\": \"The premium that you will need to pay for covering your parents is a floater amount from INR 9000-12000 for both Parents.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 4\"\n        },\n        {\n            \"Statement\": \"To include your parents or spouse in the insurance, you'll need to do it during the annual renewal period at the time of renewal of insurance policy annually.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 6\"\n        },\n        {\n            \"Statement\": \"Unfortunately we cannot cover parent in laws as per our insurance policy.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41\",\n        \"query\": \"explain the insurance process and the amount insured for individual parents\",\n        \"source\": \"Gemini Solutions HR Policy Database\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1081,"generation_token_count":429,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9739905895ec2589bad9f
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:18:33] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi jinnnie', 'conversation_id': 'a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM'}
INFO:__main__:Received query: hi jinnnie
INFO:__main__:Received conversation_id: a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e973d105895ec2589bada1
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2e6c44ea-960f-408a-aaff-65b211b3e800', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:19:31 GMT', 'content-type': 'application/json', 'content-length': '591', 'connection': 'keep-alive', 'x-amzn-requestid': '2e6c44ea-960f-408a-aaff-65b211b3e800', 'x-amzn-bedrock-invocation-latency': '1914', 'x-amzn-bedrock-output-token-count': '188', 'x-amzn-bedrock-input-token-count': '1011'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ee90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hi! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM\",\n        \"query\": \"hi jinnnie\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1011,"generation_token_count":188,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e973d305895ec2589bada2
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:19:31] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'i dont have lta applied in tax saving options on hris, but i want now to avail the tax benefit, and have actual proof what can i do now', 'conversation_id': 'a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM'}
INFO:__main__:Received query: i dont have lta applied in tax saving options on hris, but i want now to avail the tax benefit, and have actual proof what can i do now
INFO:__main__:Received conversation_id: a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e1e47d8a-fbba-408b-9875-94fe94c51e67', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:20:12 GMT', 'content-type': 'application/json', 'content-length': '279', 'connection': 'keep-alive', 'x-amzn-requestid': 'e1e47d8a-fbba-408b-9875-94fe94c51e67', 'x-amzn-bedrock-invocation-latency': '490', 'x-amzn-bedrock-output-token-count': '49', 'x-amzn-bedrock-input-token-count': '249'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ef80>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"I don't have LTA applied in tax saving options on HRIS, but I want to avail the tax benefit now. What can I do to provide actual proof?\"\n}","prompt_token_count":249,"generation_token_count":49,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: I don't have LTA applied in tax saving options on HRIS, but I want to avail the tax benefit now. What can I do to provide actual proof?
INFO:__main__:Query stored successfully with ID: 66e973fc05895ec2589bada4
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '83e22a4a-1721-466e-a932-43a68550bdaa', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:20:17 GMT', 'content-type': 'application/json', 'content-length': '1868', 'connection': 'keep-alive', 'x-amzn-requestid': '83e22a4a-1721-466e-a932-43a68550bdaa', 'x-amzn-bedrock-invocation-latency': '4636', 'x-amzn-bedrock-output-token-count': '466', 'x-amzn-bedrock-input-token-count': '1375'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0910>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To claim LTA and avail the tax benefit, you need to provide actual proof of your travel. You can do this by gathering the required documents for your journey, such as air travel (original or e-ticket and boarding pass), train travel (original or photocopied train tickets or e-tickets), or bus travel (original or photocopied bus tickets). Fill out the LTA claim form with your travel details and submit it to the accounts team along with your travel proofs. If your trip involves routes not connected by rail or air, you can claim the first-class or deluxe class bus fare for those parts of your journey.\",\n    \"References\": [\n        {\n            \"Statement\": \"Gather Your Travel Proofs: Make sure you have the right documents for your journey.\",\n            \"source\": \"Accounts - LTA Policy.csv - Sheet1 - Index: 3\"\n        },\n        {\n            \"Statement\": \"Fill Out the LTA Claim Form: Complete the form with your travel details.\",\n            \"source\": \"Accounts - LTA Policy.csv - Sheet1 - Index: 3\"\n        },\n        {\n            \"Statement\": \"6.1 Employees, who wish to avail LTA facility with an income tax benefit of the same, will have\",\n            \"source\": \"Gemini-LTA POLICY_Version 4.0_India.pdf - Page No: 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM\",\n        \"query\": \"I don't have LTA applied in tax saving options on HRIS, but I want to avail the tax benefit now. What can I do to provide actual proof?\",\n        \"source\": \"Gemini Solutions HR Policy Database\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1375,"generation_token_count":466,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9740105895ec2589bada5
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:20:17] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'sodexo wallet amount not credited to me, however i have not opted out', 'conversation_id': 'a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM'}
INFO:__main__:Received query: sodexo wallet amount not credited to me, however i have not opted out
INFO:__main__:Received conversation_id: a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2ff57e45-6fc3-4a9c-b701-1c373da6db50', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:23:40 GMT', 'content-type': 'application/json', 'content-length': '227', 'connection': 'keep-alive', 'x-amzn-requestid': '2ff57e45-6fc3-4a9c-b701-1c373da6db50', 'x-amzn-bedrock-invocation-latency': '499', 'x-amzn-bedrock-output-token-count': '38', 'x-amzn-bedrock-input-token-count': '570'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a16c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"Sodexo wallet amount is not credited to me, but I haven't opted out. What can I do?\"\n}","prompt_token_count":570,"generation_token_count":38,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: Sodexo wallet amount is not credited to me, but I haven't opted out. What can I do?
INFO:__main__:Query stored successfully with ID: 66e974cc05895ec2589bada7
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0ea451df-5b92-4763-bc2b-e7d12cb8ed2d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:23:43 GMT', 'content-type': 'application/json', 'content-length': '1061', 'connection': 'keep-alive', 'x-amzn-requestid': '0ea451df-5b92-4763-bc2b-e7d12cb8ed2d', 'x-amzn-bedrock-invocation-latency': '2670', 'x-amzn-bedrock-output-token-count': '291', 'x-amzn-bedrock-input-token-count': '1026'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2aa0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"If you haven't opted out, the Sodexo wallet amount should be credited to your account. Please check the credit date, as it is credited by 10th-11th of every month for the previous month. If the issue persists, you can contact your HR representative or colleagues.connect@geminisolutions.com for assistance.\",\n    \"References\": [\n        {\n            \"Statement\": \"Sodexo amount gets credited by 10th-11th of every month for the previous month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 13\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM\",\n        \"query\": \"Sodexo wallet amount is not credited to me, but I haven't opted out. What can I do?\",\n        \"source\": \"HR Policy Database\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1026,"generation_token_count":291,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e974cf05895ec2589bada8
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:23:43] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'my tax was deducted on higher side', 'conversation_id': 'a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM'}
INFO:__main__:Received query: my tax was deducted on higher side
INFO:__main__:Received conversation_id: a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '43ce8f13-b8c4-4214-ab81-b5bd7982baa0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:24:08 GMT', 'content-type': 'application/json', 'content-length': '214', 'connection': 'keep-alive', 'x-amzn-requestid': '43ce8f13-b8c4-4214-ab81-b5bd7982baa0', 'x-amzn-bedrock-invocation-latency': '385', 'x-amzn-bedrock-output-token-count': '33', 'x-amzn-bedrock-input-token-count': '668'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3370>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"My tax was deducted on the higher side. What can I do to rectify this?\"\n}","prompt_token_count":668,"generation_token_count":33,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: My tax was deducted on the higher side. What can I do to rectify this?
INFO:__main__:Query stored successfully with ID: 66e974e805895ec2589badaa
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a29a6a5b-62f0-4063-a759-b0acd9558724', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:24:12 GMT', 'content-type': 'application/json', 'content-length': '1037', 'connection': 'keep-alive', 'x-amzn-requestid': 'a29a6a5b-62f0-4063-a759-b0acd9558724', 'x-amzn-bedrock-invocation-latency': '2760', 'x-amzn-bedrock-output-token-count': '287', 'x-amzn-bedrock-input-token-count': '1049'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0790>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"If you believe your tax was deducted on the higher side, you can check your tax regime on the GreytHR Portal as per our policy [Reference: Text Block 2, Accounts - Remuneration.csv, Index: 28]. If you need to make any changes, please do so on the portal. For any further assistance or clarification, you can reach out to the HR department.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can choose your tax regime on the GreytHR Portal.\",\n            \"source\": \"Accounts - Remuneration.csv, Index: 28\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:11thc0iilv2mzWc43f_1n8KCkwA97joSKHXCm4O3Wovl83gpWRXDymd38zfwyfNqg1qanB3rXGU6umKkriobv1AnzXTk6e6VpV3lXJ-ld4nTxbEQt0P55evWfOyPNZkGM\",\n        \"query\": \"My tax was deducted on the higher side. What can I do to rectify this?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1049,"generation_token_count":287,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e974ec05895ec2589badab
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:24:12] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is excess pf?', 'conversation_id': 'a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41'}
INFO:__main__:Received query: what is excess pf?
INFO:__main__:Received conversation_id: a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '295f943b-9f15-4023-ba87-343aae141c87', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:33:31 GMT', 'content-type': 'application/json', 'content-length': '182', 'connection': 'keep-alive', 'x-amzn-requestid': '295f943b-9f15-4023-ba87-343aae141c87', 'x-amzn-bedrock-invocation-latency': '313', 'x-amzn-bedrock-output-token-count': '23', 'x-amzn-bedrock-input-token-count': '604'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2ce0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is excess pf in parents insurance\"\n}","prompt_token_count":604,"generation_token_count":23,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is excess pf in parents insurance
INFO:__main__:Query stored successfully with ID: 66e9771b05895ec2589badad
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a55dd70d-bfb8-4c73-a706-2405b11da069', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:33:35 GMT', 'content-type': 'application/json', 'content-length': '1311', 'connection': 'keep-alive', 'x-amzn-requestid': 'a55dd70d-bfb8-4c73-a706-2405b11da069', 'x-amzn-bedrock-invocation-latency': '2908', 'x-amzn-bedrock-output-token-count': '315', 'x-amzn-bedrock-input-token-count': '960'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f06d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Excess PF in parents' insurance refers to the additional 12% of your basic salary that is deducted from your special allowance for both employee and employer contributions. This excess PF can be opted for during joining or the financial year for tax benefits. However, once opted in, you cannot switch back to the minimum PF option.\",\n    \"References\": [\n        {\n            \"Statement\": \"For excess PF, 12% of your basic salary is deducted from your special allowance for both employee and employer contributions.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 24\"\n        },\n        {\n            \"Statement\": \"You can opt for excess PF during joining or the financial year for tax benefits.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 23\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41\",\n        \"query\": \"what is excess pf in parents insurance\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":960,"generation_token_count":315,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9771f05895ec2589badae
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:33:35] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how is bonus distributed?', 'conversation_id': 'a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41'}
INFO:__main__:Received query: how is bonus distributed?
INFO:__main__:Received conversation_id: a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8a92662a-50ea-4c8d-a91c-d69adf2fca80', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:34:50 GMT', 'content-type': 'application/json', 'content-length': '190', 'connection': 'keep-alive', 'x-amzn-requestid': '8a92662a-50ea-4c8d-a91c-d69adf2fca80', 'x-amzn-bedrock-invocation-latency': '287', 'x-amzn-bedrock-output-token-count': '23', 'x-amzn-bedrock-input-token-count': '635'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a25c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how is bonus distributed for parents insurance\"\n}","prompt_token_count":635,"generation_token_count":23,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how is bonus distributed for parents insurance
INFO:__main__:Query stored successfully with ID: 66e9776a05895ec2589badb0
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c86f29d1-72d0-4d79-bca7-c2655d5f490c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:34:54 GMT', 'content-type': 'application/json', 'content-length': '1281', 'connection': 'keep-alive', 'x-amzn-requestid': 'c86f29d1-72d0-4d79-bca7-c2655d5f490c', 'x-amzn-bedrock-invocation-latency': '3019', 'x-amzn-bedrock-output-token-count': '307', 'x-amzn-bedrock-input-token-count': '1155'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f36a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide insurance coverage for parents. However, you can enroll your parents in the Medical Insurance policy provided by Gemini, but you would need to bear a premium amount. The addition can happen only at the time of joining or at the time of renewal. No addition can take place in mid of the year.\",\n    \"References\": [\n        {\n            \"Statement\": \"Unfortunately we cannot cover parent in laws as per our insurance policy.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 5\"\n        },\n        {\n            \"Statement\": \"In case you enroll your parents in the medical insurance policy, you would have to bear a premium amount.\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 7\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41\",\n        \"query\": \"how is bonus distributed for parents insurance\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1155,"generation_token_count":307,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9776e05895ec2589badb1
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:34:54] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'explain gratuity', 'conversation_id': 'a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41'}
INFO:__main__:Received query: explain gratuity
INFO:__main__:Received conversation_id: a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '88198c27-ac37-4a70-8708-485b03606310', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:36:18 GMT', 'content-type': 'application/json', 'content-length': '182', 'connection': 'keep-alive', 'x-amzn-requestid': '88198c27-ac37-4a70-8708-485b03606310', 'x-amzn-bedrock-invocation-latency': '287', 'x-amzn-bedrock-output-token-count': '22', 'x-amzn-bedrock-input-token-count': '509'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0970>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"explain gratuity for parents insurance\"\n}","prompt_token_count":509,"generation_token_count":22,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: explain gratuity for parents insurance
INFO:__main__:Query stored successfully with ID: 66e977c205895ec2589badb3
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ed7e7dd3-7c7e-4232-9c7a-4a47278a3d32', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 12:36:24 GMT', 'content-type': 'application/json', 'content-length': '2256', 'connection': 'keep-alive', 'x-amzn-requestid': 'ed7e7dd3-7c7e-4232-9c7a-4a47278a3d32', 'x-amzn-bedrock-invocation-latency': '5316', 'x-amzn-bedrock-output-token-count': '581', 'x-amzn-bedrock-input-token-count': '1237'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0d00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gratuity is a benefit provided by Gemini Solutions to its employees. According to the company's policy, gratuity is payable to the employee at the rate of 15 days' basic salary for every completed year of service or a part thereof above 6 months. The maximum amount of gratuity that an employee can get is INR 20,00,000. This benefit is applicable to all employees of the firm, including those who resign, retire, or die while in service.\n\nHowever, it's important to note that gratuity is not related to the medical insurance policy for parents. The medical insurance policy is a separate benefit that covers employees and their immediate families. If you want to enroll your parents in the medical insurance policy, you would need to bear a premium amount, which can be added at the time of joining or renewal, but not in the middle of the year.\n\n**Gratuity Calculation:**\n\n* Last Drawn Basic Pay\n* Number of years of completed service (rounded to a full year)\n* 15 / 26\n\nThis calculation is only applicable if the employee has completed a minimum of 5 continuous years of service.\n\n**References:**\n\n* \"Gratuity is payable to the employee at the rate of 15 days' basic salary for every completed year of service or a part thereof above 6 months; based on the last drawn Basic Salary.\" - [Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf, Page 7]\n* \"The maximum amount of gratuity that an employee can get is INR 20,00,000.\" - [Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf, Page 7]\n* \"The Gratuity Scheme covers all employees of the firm.\" - [Gemini-EXIT POLICY_Version 7.0_India.pdf, Page 9]\n* \"Gratuity calculation: Last Drawn Basic Pay X No. of years of completed service (rounded to a full year) X 15 / 26\" - [HR - Exit Policy.csv, Index 14]\n\n**Metadata:**\n{\n    \"conversation_id\": \"a:192HMUPLIEJ4axCjC2GQK1wPTaON3xTropxy3DdAhQrJRsHcJINmtaUsKM6v0l-9By7MoCRKKbzyUw0MLnPzMAlgSBjlMIincMxSF9i6HXZypXnIDGYK8PRisqnlpoE41\",\n    \"query\": \"explain gratuity for parents insurance\",\n    \"source\": \"Gemini Solutions HR Policy Database\",\n    \"response_length\": \"246\"\n}","prompt_token_count":1237,"generation_token_count":581,"stop_reason":"stop"}
ERROR:__main__:JSONDecodeError: Invalid control character at: line 4 column 454 (char 457)
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 12:36:24] "[35m[1mPOST /process_query HTTP/1.1[0m" 500 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is pulxee scheme ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: what is pulxee scheme ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e9a2fb05895ec2589badb5
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a8fcd933-3eea-4f12-af03-32ddc1dd7968', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 15:40:47 GMT', 'content-type': 'application/json', 'content-length': '894', 'connection': 'keep-alive', 'x-amzn-requestid': 'a8fcd933-3eea-4f12-af03-32ddc1dd7968', 'x-amzn-bedrock-invocation-latency': '2540', 'x-amzn-bedrock-output-token-count': '250', 'x-amzn-bedrock-input-token-count': '1262'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0e20>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Pulxee is a food wallet scheme provided by Gemini Solutions, where employees are entitled to a monthly credit of INR 2000. This scheme is also referred to as Sodexo food wallet.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"what is pulxee scheme ?\",\n        \"source\": \"Accounts - Remuneration.csv\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1262,"generation_token_count":250,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9a2ff05895ec2589badb6
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 15:40:47] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail it ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: how can i avail it ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '71561fe1-2749-4c6d-a6fa-6b569d99f8be', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 15:41:02 GMT', 'content-type': 'application/json', 'content-length': '180', 'connection': 'keep-alive', 'x-amzn-requestid': '71561fe1-2749-4c6d-a6fa-6b569d99f8be', 'x-amzn-bedrock-invocation-latency': '305', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '281'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2710>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"how can i avail the Pulxee scheme ?\"\n}","prompt_token_count":281,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how can i avail it ?
INFO:__main__:Query stored successfully with ID: 66e9a30e05895ec2589badb8
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4b776b59-ffae-48da-b129-acea2690bc9f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 15:41:05 GMT', 'content-type': 'application/json', 'content-length': '1160', 'connection': 'keep-alive', 'x-amzn-requestid': '4b776b59-ffae-48da-b129-acea2690bc9f', 'x-amzn-bedrock-invocation-latency': '2787', 'x-amzn-bedrock-output-token-count': '304', 'x-amzn-bedrock-input-token-count': '856'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f37c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To avail exam leaves, you can go to the Leave Management tab on the MIS. For other types of leaves, please refer to the Leave Policy document. During your Notice Period, you can use your Paid Leave (PL) days. If you need to take any time off, just make sure it's covered by your remaining PL balance.\",\n    \"References\": [\n        {\n            \"Statement\": \"To avail exam leaves, just go to the Leave Management tab on the MIS.\",\n            \"source\": \"HR - Leave Policy.csv - Sheet1 - Index: 20\"\n        },\n        {\n            \"Statement\": \"During your Notice Period, you can use your Paid Leave (PL) days.\",\n            \"source\": \"HR - Leave Policy.csv - Sheet1 - Index: 9\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"how can i avail it ?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":856,"generation_token_count":304,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9a31105895ec2589badb9
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 15:41:05] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail pluxee ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: how can i avail pluxee ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '800f8ea1-4265-484d-8f4d-c4de22938e8f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 15:41:24 GMT', 'content-type': 'application/json', 'content-length': '179', 'connection': 'keep-alive', 'x-amzn-requestid': '800f8ea1-4265-484d-8f4d-c4de22938e8f', 'x-amzn-bedrock-invocation-latency': '292', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '450'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852080>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how can i avail the pulxee scheme ?\"\n}","prompt_token_count":450,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how can i avail the pulxee scheme ?
INFO:__main__:Query stored successfully with ID: 66e9a32405895ec2589badbb
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c707b5b1-578e-4214-a2fb-7b15c244f462', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 15:41:28 GMT', 'content-type': 'application/json', 'content-length': '1029', 'connection': 'keep-alive', 'x-amzn-requestid': 'c707b5b1-578e-4214-a2fb-7b15c244f462', 'x-amzn-bedrock-invocation-latency': '2825', 'x-amzn-bedrock-output-token-count': '283', 'x-amzn-bedrock-input-token-count': '1042'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f1b10>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, there is no information available on the 'Pulxee scheme' in the provided texts. It's possible that the scheme may not exist or may be a typo. If you meant to ask about the Sodexo food wallet, you can opt for it by choosing the relevant option, and INR 2000 will be credited to your wallet every month.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"how can i avail the pulxee scheme ?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1042,"generation_token_count":283,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9a32805895ec2589badbc
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 15:41:28] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how can i avail pulxee scheme ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: how can i avail pulxee scheme ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9d2fd37c-b196-436d-b344-ab4e9cb85495', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 15:41:52 GMT', 'content-type': 'application/json', 'content-length': '174', 'connection': 'keep-alive', 'x-amzn-requestid': '9d2fd37c-b196-436d-b344-ab4e9cb85495', 'x-amzn-bedrock-invocation-latency': '276', 'x-amzn-bedrock-output-token-count': '23', 'x-amzn-bedrock-input-token-count': '489'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0ca0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"how can i avail pulxee scheme\"\n}","prompt_token_count":489,"generation_token_count":23,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how can i avail pulxee scheme ?
INFO:__main__:Query stored successfully with ID: 66e9a34005895ec2589badbe
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a6d778d5-e6b4-4818-80ee-d6019eb6940c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 15:41:56 GMT', 'content-type': 'application/json', 'content-length': '1263', 'connection': 'keep-alive', 'x-amzn-requestid': 'a6d778d5-e6b4-4818-80ee-d6019eb6940c', 'x-amzn-bedrock-invocation-latency': '3310', 'x-amzn-bedrock-output-token-count': '337', 'x-amzn-bedrock-input-token-count': '1040'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f1120>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, there is no information available on a 'Pulxee scheme' in the provided texts. It's possible that it's a misspelling or a scheme not mentioned in the provided documents. If you meant to ask about the Sodexo food wallet, it's available to employees who opt for it, with a monthly credit of INR 2000. You can choose your tax regime on the GreytHR Portal.\",\n    \"References\": [\n        {\n            \"Statement\": \"If you opt for it, INR 2000 will be credited to your Sodexo (Pluxee) food wallet every month.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 12\"\n        },\n        {\n            \"Statement\": \"You can choose your tax regime on the GreytHR Portal.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 28\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"how can i avail pulxee scheme ?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1040,"generation_token_count":337,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9a34405895ec2589badbf
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 15:41:56] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:162.216.149.149 - - [17/Sep/2024 17:40:06] code 400, message Bad request version ('À\x13À')
INFO:werkzeug:162.216.149.149 - - [17/Sep/2024 17:40:06] "[31m[1m\x16\x03\x01\x00î\x01\x00\x00ê\x03\x035ÈTcýÊX_2|¹3D\x10·$-àÚ/ñ´á\x96á\x0fú¾²c(ª Û\x0b!&Ô \x85Í)9Â\x1b±Á\x11ºf£K\x8dP°f\x15\x08ù@þÂ¹À\x91\x00&À+À/À,À0Ì©Ì¨À\x09À\x13À[0m" 400 -
ERROR:werkzeug:162.216.149.149 - - [17/Sep/2024 17:40:06] code 400, message Bad request version ('À(À$À\x14À')
INFO:werkzeug:162.216.149.149 - - [17/Sep/2024 17:40:06] "[31m[1m\x16\x03\x01\x00Ê\x01\x00\x00Æ\x03\x03mÉ7+¸ÔZ¸æ]r\x84\x0dá\x95ÃmxÚ?\x06í(e$\x801\\kï\x88I\x00\x00hÌ\x14Ì\x13À/À+À0À,À\x11À\x07À'À#À\x13À\x09À(À$À\x14À[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much money is given for daily expense when travelling outside for company work ', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: how much money is given for daily expense when travelling outside for company work 
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66e9c16305895ec2589badc1
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1c7834ed-f7f3-4c67-87b8-3187d38b7ffb', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 17:50:31 GMT', 'content-type': 'application/json', 'content-length': '1569', 'connection': 'keep-alive', 'x-amzn-requestid': '1c7834ed-f7f3-4c67-87b8-3187d38b7ffb', 'x-amzn-bedrock-invocation-latency': '3421', 'x-amzn-bedrock-output-token-count': '371', 'x-amzn-bedrock-input-token-count': '1117'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f12a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The company provides a fixed per diem allowance of $50 per day for daily expenses while traveling outside for company work, regardless of the duration of stay and destination.\",\n    \"References\": [\n        {\n            \"Statement\": \"The rate is fixed at $50 per day irrespective of the duration of stay and destination.\",\n            \"source\": \"Intra Country Travel Policy 1.pdf - Page 7 - N/A - N/A\"\n        },\n        {\n            \"Statement\": \"Per diems is an allowance that covers expenses related to business travel, which include meals and incidentals expenses. It is paid for the full duration of the employee's stay.\",\n            \"source\": \"International Business Travel Policy.pdf - Page 5 - N/A - N/A\"\n        },\n        {\n            \"Statement\": \"How much per diem allowance(per day expense) does the employee gets per day? Answer: 50$ per day\",\n            \"source\": \"Travel Policy.csv - N/A - Sheet1 - 10\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"how much money is given for daily expense when travelling outside for company work \",\n        \"source\": \"Gemini Solutions - Intra Country Travel Policy, International Business Travel Policy, Travel Policy\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1117,"generation_token_count":371,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9c16705895ec2589badc2
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 17:50:31] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'is this for domestic or for international ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: is this for domestic or for international ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'fb6a1547-e53e-43be-82dd-f6daff1dec3e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 18:15:07 GMT', 'content-type': 'application/json', 'content-length': '186', 'connection': 'keep-alive', 'x-amzn-requestid': 'fb6a1547-e53e-43be-82dd-f6daff1dec3e', 'x-amzn-bedrock-invocation-latency': '352', 'x-amzn-bedrock-output-token-count': '23', 'x-amzn-bedrock-input-token-count': '392'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3790>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"is this for domestic or for international\"\n}","prompt_token_count":392,"generation_token_count":23,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: is this for domestic or for international ?
INFO:__main__:Query stored successfully with ID: 66e9c72b05895ec2589badc4
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e54174b7-41d3-4f9c-a159-4a029b50941f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 17 Sep 2024 18:15:11 GMT', 'content-type': 'application/json', 'content-length': '1550', 'connection': 'keep-alive', 'x-amzn-requestid': 'e54174b7-41d3-4f9c-a159-4a029b50941f', 'x-amzn-bedrock-invocation-latency': '3498', 'x-amzn-bedrock-output-token-count': '353', 'x-amzn-bedrock-input-token-count': '1088'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2b60>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"This policy covers both domestic and international travel. For international travel, employees are strongly encouraged to familiarize themselves with standard conditions of each country concerning holding usage of host currency and to comply with the same. For domestic travel, employees need to fill-up a travel requisition request form on Helpdesk and get it approved by the respective DC Chair.\",\n    \"References\": [\n        {\n            \"Statement\": \"International travel will be purely for business & official purposes.\",\n            \"source\": \"International Business Travel Policy.pdf - Page 4 - N/A - N/A\"\n        },\n        {\n            \"Statement\": \"For any tour/travel on official purpose, the colleagues have to fill-up a travel requisition request form on Helpdesk (https://helpdesk.geminisolutions.com/) and get it approved by the respective DC Chair.\",\n            \"source\": \"Domestic Travel Policy - Final.pdf - Page 8 - N/A - N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"is this for domestic or for international ?\",\n        \"source\": \"ITAdmin - Misscellaneous.csv, International Business Travel Policy.pdf, Domestic Travel Policy - Final.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1088,"generation_token_count":353,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66e9c72f05895ec2589badc5
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [17/Sep/2024 18:15:11] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:188.166.87.67 - - [17/Sep/2024 22:38:03] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:198.235.24.158 - - [18/Sep/2024 04:33:48] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:139.59.161.16 - - [18/Sep/2024 04:57:05] code 400, message Bad request version ('u§Ö\x80»½1\x081j8\x8cÏp;V|k½)ë®\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À')
INFO:werkzeug:139.59.161.16 - - [18/Sep/2024 04:57:05] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03\x1c\x08z¢Wo¹_Ñ\x85u§Ö\x80»½1\x081j8\x8cÏp;V|k½)ë®\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi jinie', 'conversation_id': 'a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd'}
INFO:__main__:Received query: hi jinie
INFO:__main__:Received conversation_id: a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66ea672705895ec2589badc7
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e9323510-c05c-47b0-af32-e7e61d2a8695', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 18 Sep 2024 05:37:46 GMT', 'content-type': 'application/json', 'content-length': '592', 'connection': 'keep-alive', 'x-amzn-requestid': 'e9323510-c05c-47b0-af32-e7e61d2a8695', 'x-amzn-bedrock-invocation-latency': '1798', 'x-amzn-bedrock-output-token-count': '179', 'x-amzn-bedrock-input-token-count': '903'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3fa0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd\",\n        \"query\": \"hi jinie\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":903,"generation_token_count":179,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ea672a05895ec2589badc8
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [18/Sep/2024 05:37:46] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'explain the policy for health insurance', 'conversation_id': 'a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd'}
INFO:__main__:Received query: explain the policy for health insurance
INFO:__main__:Received conversation_id: a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7d393db6-df86-4c31-9796-cbeb7753e566', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 18 Sep 2024 05:38:09 GMT', 'content-type': 'application/json', 'content-length': '192', 'connection': 'keep-alive', 'x-amzn-requestid': '7d393db6-df86-4c31-9796-cbeb7753e566', 'x-amzn-bedrock-invocation-latency': '328', 'x-amzn-bedrock-output-token-count': '24', 'x-amzn-bedrock-input-token-count': '220'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e620>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what are the company's health insurance policies\"\n}","prompt_token_count":220,"generation_token_count":24,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what are the company's health insurance policies
INFO:__main__:Query stored successfully with ID: 66ea674105895ec2589badca
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'bac5ffc6-e128-4db6-8d39-c3396b603714', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 18 Sep 2024 05:38:14 GMT', 'content-type': 'application/json', 'content-length': '1827', 'connection': 'keep-alive', 'x-amzn-requestid': 'bac5ffc6-e128-4db6-8d39-c3396b603714', 'x-amzn-bedrock-invocation-latency': '4413', 'x-amzn-bedrock-output-token-count': '451', 'x-amzn-bedrock-input-token-count': '1241'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024c3d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions provides health insurance coverage to its employees, which includes medical insurance claims up to INR 2,50,000/- for the employee and INR 5,00,000/- for the employee with spouse and two dependent children. The company's medical insurance partner is Raksha Health Insurance TPA Pvt Ltd. The insurance policy also extends to cover the spouse and two dependent children of the employee. The annual premium for the medical insurance policy is INR 60,000/-, which is borne by the company.\",\n    \"References\": [\n        {\n            \"Statement\": \"You as an employee are covered for INR 2,50,000/- of medical insurance claim. The policy also extends and covers your spouse and two dependable children, if applicable and In such a case the medical Insurance policy extends to INR 5,00,000/-\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 5\"\n        },\n        {\n            \"Statement\": \"Raksha health insurance TPA Pvt Ltd is our Medical Insurance partner.\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 5\"\n        },\n        {\n            \"Statement\": \"The annual financial limits are as under Mediclaim Hospitalization Insurance Scheme: 7 Page\",\n            \"source\": \"Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf - Page No: 7\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd\",\n        \"query\": \"what are the company's health insurance policies\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1241,"generation_token_count":451,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ea674605895ec2589badcb
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [18/Sep/2024 05:38:14] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'explain the policy features', 'conversation_id': 'a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd'}
INFO:__main__:Received query: explain the policy features
INFO:__main__:Received conversation_id: a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f37e7113-fd2d-4573-bbfa-d53f3ef9263e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 18 Sep 2024 05:38:40 GMT', 'content-type': 'application/json', 'content-length': '210', 'connection': 'keep-alive', 'x-amzn-requestid': 'f37e7113-fd2d-4573-bbfa-d53f3ef9263e', 'x-amzn-bedrock-invocation-latency': '344', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '524'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2e90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what are the key features of the company's health insurance policy\"\n}","prompt_token_count":524,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what are the key features of the company's health insurance policy
INFO:__main__:Query stored successfully with ID: 66ea676005895ec2589badcd
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '06f5d39b-e978-4399-bfe0-f0d1960639f3', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 18 Sep 2024 05:38:45 GMT', 'content-type': 'application/json', 'content-length': '1909', 'connection': 'keep-alive', 'x-amzn-requestid': '06f5d39b-e978-4399-bfe0-f0d1960639f3', 'x-amzn-bedrock-invocation-latency': '4409', 'x-amzn-bedrock-output-token-count': '484', 'x-amzn-bedrock-input-token-count': '1216'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f760>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The key features of Gemini Solutions' health insurance policy are:\n* Coverage for employees and their immediate families (spouse and two dependent children from birth to 25 years) from the date of joining the firm.\n* Annual financial limits of INR 2,50,000/- for employee-only and INR 5,00,000/- for the employee with wife and up to 2 children.\n* The health insurance premium is covered by the Welfare Contribution, so it is not deducted from the employee's salary.\n* Optional coverage for parents can be added, but the annual premium needs to be paid by the employee.\n* The exact amount of the annual premium can vary each year based on the insurance policy in place.\n\nReferences:\n{\n    \"Statement\": \"You as an employee are covered for INR 2,50,000/- of medical insurance claim.\",\n    \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index 5\"\n},\n{\n    \"Statement\": \"The health insurance premium for you, your spouse, and up to two children is covered by the Welfare Contribution, so you don't need to worry about that part being deducted from your salary.\",\n    \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index 1\"\n},\n{\n    \"Statement\": \"The annual financial limits are as under Mediclaim Hospitalization Insurance Scheme: 7 Page\",\n    \"source\": \"Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf - Page 7\"\n}\n\",\n    \"Metadata\": {\n        \"conversation_id\": \"a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd\",\n        \"query\": \"what are the key features of the company's health insurance policy\",\n        \"source\": \"Gemini-REMUNERATION AND BENEFITS POLICY_Version 5.0_India.pdf\",\n        \"response_length\": \"246\"\n    }\n}","prompt_token_count":1216,"generation_token_count":484,"stop_reason":"stop"}
ERROR:__main__:JSONDecodeError: Invalid control character at: line 4 column 82 (char 85)
INFO:werkzeug:52.172.216.157 - - [18/Sep/2024 05:38:45] "[35m[1mPOST /process_query HTTP/1.1[0m" 500 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'explain the health insurance policy features', 'conversation_id': 'a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd'}
INFO:__main__:Received query: explain the health insurance policy features
INFO:__main__:Received conversation_id: a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'fa9ceec5-14e6-4657-a00f-e044e747b3be', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 18 Sep 2024 05:39:10 GMT', 'content-type': 'application/json', 'content-length': '189', 'connection': 'keep-alive', 'x-amzn-requestid': 'fa9ceec5-14e6-4657-a00f-e044e747b3be', 'x-amzn-bedrock-invocation-latency': '281', 'x-amzn-bedrock-output-token-count': '22', 'x-amzn-bedrock-input-token-count': '536'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2260>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"explain the health insurance policy features\"\n}","prompt_token_count":536,"generation_token_count":22,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: explain the health insurance policy features
INFO:__main__:Query stored successfully with ID: 66ea677e05895ec2589badcf
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e3eecf78-e79d-4d3f-bfc1-5b740267e28d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 18 Sep 2024 05:39:15 GMT', 'content-type': 'application/json', 'content-length': '1848', 'connection': 'keep-alive', 'x-amzn-requestid': 'e3eecf78-e79d-4d3f-bfc1-5b740267e28d', 'x-amzn-bedrock-invocation-latency': '4080', 'x-amzn-bedrock-output-token-count': '446', 'x-amzn-bedrock-input-token-count': '1204'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3fa0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions provides a comprehensive health insurance policy to its employees, which covers medical expenses up to INR 2,50,000/- for the employee only and INR 5,00,000/- for the employee with spouse and up to two children. The policy is provided by Raksha health insurance TPA Pvt Ltd. The health insurance premium for you, your spouse, and up to two children is covered by the Welfare Contribution, so you don't need to worry about that part being deducted from your salary. However, if you would like to add coverage for your parents, you'll need to pay the annual premium. The exact amount can vary each year based on the insurance policy in place.\",\n    \"References\": [\n        {\n            \"Statement\": \"You as an employee are covered for INR 2,50,000/- of medical insurance claim. The policy also extends and covers your spouse and two dependable children, if applicable and In such a case the medical Insurance policy extends to INR 5,00,000/-\",\n            \"source\": \"HR - Onboarding Portal.csv - Sheet1 - Index: 5\"\n        },\n        {\n            \"Statement\": \"The health insurance premium for you, your spouse, and up to two children is covered by the Welfare Contribution, so you don't need to worry about that part being deducted from your salary.\",\n            \"source\": \"Accounts - Remuneration.csv - Sheet1 - Index: 2\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1Ame40W8-C6EjVgnf4XrTG0BC3qer51B4GVmqa0kwS-pSyTHQYulmajp8ao2Kb2FFfaKSexUCPSTgWskl2TsUWFp04FJYcGfjAkdNwKyfcev6lvv2hEOYxA6slta56TBd\",\n        \"query\": \"explain the health insurance policy features\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1204,"generation_token_count":446,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ea678305895ec2589badd0
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [18/Sep/2024 05:39:15] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:44.220.185.197 - - [18/Sep/2024 11:59:26] code 400, message Bad request version ("Ó\x92\x019\x98ü\x92B¡î_POó]{\x9a4\x00V\x13\x02\x13\x03\x13\x01À,À0À+À/Ì©Ì¨\x00\x9f\x00\x9eÌªÀ¯À\xadÀ®À¬À$À(À#À'À")
INFO:werkzeug:44.220.185.197 - - [18/Sep/2024 11:59:26] "[31m[1m\x16\x03\x01\x02\x00\x01\x00\x01ü\x03\x03*üÅ\x1db\x19;tÓ®\x093ý\x10¦î[&`Èq\x0euÂäIÌ\\>ËC\x92 äßzÄ9rd&¤¹\x8f2Y\x0dÓ\x92\x019\x98ü\x92B¡î_POó]{\x9a4\x00V\x13\x02\x13\x03\x13\x01À,À0À+À/Ì©Ì¨\x00\x9f\x00\x9eÌªÀ¯À­À®À¬À$À(À#À'À[0m" 400 -
INFO:werkzeug:44.220.185.197 - - [18/Sep/2024 11:59:26] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:45.84.89.2 - - [18/Sep/2024 21:46:55] code 400, message Bad request version ('\x00\x04\x03\x00\x01\x02\x00')
INFO:werkzeug:45.84.89.2 - - [18/Sep/2024 21:46:55] "[31m[1m\x16\x03\x01\x00\x85\x01\x00\x00\x81\x03\x03UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU\x00\x00\x06À0\x00\x9c\x00\x9d\x01\x00\x00R\x00\x0b\x00\x04\x03\x00\x01\x02\x00[0m" 400 -
INFO:werkzeug:198.235.24.156 - - [19/Sep/2024 02:00:15] "[33mGET / HTTP/1.0[0m" 404 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:40] code 400, message Bad request version ('À#À¬À®À+À')
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:40] "[31m[1m\x16\x03\x03\x01\x9b\x01\x00\x01\x97\x03\x03\x1b*\x01\x90%uGC+o4³\x80C\x11p¯Þ\x1a¿0ÿä\x94´\x02\x12\x8aè3;ì C$e4<]kBð¿\x13¥çî`Ù\x83\x9aöx\x1bÿ5g\x8d\x05ØL§\x9c`´\x00\x8czz\x00\x16\x003\x00gÀ\x9eÀ¢\x00\x9e\x009\x00kÀ\x9fÀ£\x00\x9f\x00E\x00¾\x00\x88\x00Ä\x00\x9aÀ\x08À\x09À#À¬À®À+À[0m" 400 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:41] code 400, message Bad request version ('À\x9c\x00<\x00/\x00')
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:41] "[31m[1m\x16\x03\x03\x01\x9b\x01\x00\x01\x97\x03\x03ÒÀÂÝ\x16ùQ\x93ÿø\x885öç¶»Ü-$­µ \x17¸f\x04­\x18*Ñ:3 Ì±¥\x93ÖnF$´\x15\x0dmLß´ñÀ\x15Õ´¤\x1acs\x1f:e\x98M²¾X\x00\x8cêê\x00\x05\x00\x04\x00\x07\x00À\x00\x84\x00º\x00A\x00\x9dÀ¡À\x9d\x00=\x005\x00\x9cÀ À\x9c\x00<\x00/\x00[0m" 400 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:41] code 400, message Bad request version ('4\x00H\x8a\x8aÀ\x12À\x07Ì\x14\x13\x01\x13\x02Ì©ÀsÀrÀ,À¯À\xadÀ$À')
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:41] "[31m[1m\x16\x03\x03\x01W\x01\x00\x01S\x03\x03^r§¦1iFj-\x8ex(Îq\x07ÕÐa\x0ci¼\x18\x07/|®a\x06\x97~²V âF¬AO\x94cÚà­:ÐRâ JF ïP®¬MþwÉö\x0fL\x0d\x0b4\x00H\x8a\x8aÀ\x12À\x07Ì\x14\x13\x01\x13\x02Ì©ÀsÀrÀ,À¯À­À$À[0m" 400 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:42] code 400, message Bad request version ("\x8e¸àSD\x8dùlb@~\x8fb\x10¸\x81\x9c;N«?»¯:0ÈÓTø²\x9e\x8e\x00FJJÀ\x13À'À/À\x14À(À0À`ÀaÀvÀwÌ¨\x13\x05\x13\x04\x13\x03Ì\x13À\x11\x00")
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:42] "[31m[1m\x16\x03\x03\x01I\x01\x00\x01E\x03\x03\x93]0Öõ·\x18y\x00Ü¸­h\x9eÎ\x15,\x07&ùh\x06Ð|Q\x09Y\x09Hè¨\x0f \x8e¸àSD\x8dùlb@~\x8fb\x10¸\x81\x9c;N«?»¯:0ÈÓTø²\x9e\x8e\x00FJJÀ\x13À'À/À\x14À(À0À`ÀaÀvÀwÌ¨\x13\x05\x13\x04\x13\x03Ì\x13À\x11\x00[0m" 400 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:42] code 400, message Bad request syntax ('\x16\x03\x03\x01r\x01\x00\x01n\x03\x03\x9442û\x0e\x86±â¸')
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:42] "[31m[1m\x16\x03\x03\x01r\x01\x00\x01n\x03\x03\x9442û\x0e\x86±â¸[0m" 400 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:43] code 400, message Bad request version ('À#À¬À®À+À')
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:43] "[31m[1m\x16\x03\x02\x01\x9b\x01\x00\x01\x97\x03\x02Ëbkê¾¼H$k°Ñ\x9ck\x0d0]\x01÷\x17Ú±¥\x18!Ç\x877\x00\x1aÛ\x1a_ a\x04"kñÐF\x1f:>Ö[/\x8eZú\x9crN\x1c¾U\x80¹A\x0cÕé;öGA\x00\x8cÚÚ\x00\x16\x003\x00gÀ\x9eÀ¢\x00\x9e\x009\x00kÀ\x9fÀ£\x00\x9f\x00E\x00¾\x00\x88\x00Ä\x00\x9aÀ\x08À\x09À#À¬À®À+À[0m" 400 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:43] code 400, message Bad request version ('À#À¬À®À+À')
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:43] "[31m[1m\x16\x03\x01\x01¨\x01\x00\x01¤\x03\x03æ:\x0e¸+¨¨THë\x1f%\x94\x9f\x8bÉÀkïN¢\x88:ú«\x99q\x87?\x13ä¹ ¬øºþ\x80O×\x9ba(E\x9d&ý©<\x04$\x89-¬Cù\x97×Ü#\x00T\x1fÉQ\x00\x8c\x9a\x9a\x00\x16\x003\x00gÀ\x9eÀ¢\x00\x9e\x009\x00kÀ\x9fÀ£\x00\x9f\x00E\x00¾\x00\x88\x00Ä\x00\x9aÀ\x08À\x09À#À¬À®À+À[0m" 400 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:44] code 400, message Bad request version ('À\x9c\x00<\x00/\x00')
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:44] "[31m[1m\x16\x03\x01\x01¨\x01\x00\x01¤\x03\x03ÙI\x09ª"\x10À\x86u5ëÓVåða·=*òª@\x88Ô=]·ñgl»¸ \\øëâ"\x90N\x85w¦Ë®Ui\x12\x7fN\x08\x82!ããnÉ%üO/ªä`³\x00\x8cJJ\x00\x05\x00\x04\x00\x07\x00À\x00\x84\x00º\x00A\x00\x9dÀ¡À\x9d\x00=\x005\x00\x9cÀ À\x9c\x00<\x00/\x00[0m" 400 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:44] code 400, message Bad request version ('\x11\x89²ê7\x0fêåØ')
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:44] "[31m[1m\x16\x03\x01\x01\x9e\x01\x00\x01\x9a\x03\x03yÏ6\x1e¢òäf\x8eU½Ì\x97\x06}Âk\x08\x9f\x17x\x8c\x93.£Ô¦\x1a÷ÁYW \x11\x89²ê7\x0fêåØ[0m" 400 -
ERROR:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:45] code 400, message Bad request version ("{Û·Ä\x04ò¹éCî\x159;\x13\x95I\x9e/\x00\x00\x8aÀ\x12À\x13À\x07À'Ì\x14À/\x13\x01À\x14\x13\x02À(Ì©À0ÀsÀ`ÀrÀaÀ,ÀvÀ¯ÀwÀ\xadÌ¨À$\x13\x05À")
INFO:werkzeug:134.209.23.41 - - [19/Sep/2024 05:53:45] "[31m[1m\x16\x03\x01\x01\x8d\x01\x00\x01\x89\x03\x03û\x951p)\x0cI\x84Xº½\x95\x80.\x812\x05\x9aSKO-H§¸+cJZ\x0e¯b ÇÊ%ç\x9coª\x0d"[·Ù\x1d{Û·Ä\x04ò¹éCî\x159;\x13\x95I\x9e/\x00\x00\x8aÀ\x12À\x13À\x07À'Ì\x14À/\x13\x01À\x14\x13\x02À(Ì©À0ÀsÀ`ÀrÀaÀ,ÀvÀ¯ÀwÀ­Ì¨À$\x13\x05À[0m" 400 -
INFO:werkzeug:104.40.75.76 - - [19/Sep/2024 14:07:28] "[33mGET /v2/ HTTP/1.1[0m" 404 -
ERROR:werkzeug:45.84.89.2 - - [19/Sep/2024 20:18:30] code 400, message Bad request version ('\x00\x04\x03\x00\x01\x02\x00')
INFO:werkzeug:45.84.89.2 - - [19/Sep/2024 20:18:30] "[31m[1m\x16\x03\x01\x00\x85\x01\x00\x00\x81\x03\x03UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU\x00\x00\x06À0\x00\x9c\x00\x9d\x01\x00\x00R\x00\x0b\x00\x04\x03\x00\x01\x02\x00[0m" 400 -
INFO:werkzeug:198.244.231.125 - - [19/Sep/2024 20:31:07] "[33mCONNECT www.ipdeny.com:443 HTTP/1.1[0m" 404 -
INFO:werkzeug:205.210.31.31 - - [20/Sep/2024 00:44:44] "[33mGET / HTTP/1.0[0m" 404 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:52] code 400, message Bad request version ('2©?ê*Ã¥Ú')
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:52] "[31m[1m\x16\x03\x03\x01\x9b\x01\x00\x01\x97\x03\x03õq\x0e¬j\x91±{*¥²ú!VV\x7f±Z\x95ÿÆ8äwäl{¥&}y9 £\x80\x9a\\\x1c2©?ê*Ã¥Ú[0m" 400 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:53] code 400, message Bad request syntax ('\x16\x03\x03\x01\x9b\x01\x00\x01\x97\x03\x03-ÒF\x16£')
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:53] "[31m[1m\x16\x03\x03\x01\x9b\x01\x00\x01\x97\x03\x03-ÒF\x16£[0m" 400 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:53] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x03\x01W\x01\x00\x01S\x03\x03\x9e\\êþv^èûi\x9b\x073\x9cg¾}´\x01rèIò¢§\x83ÔãrèÌ\x7f;')
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:53] "[31m[1m\x16\x03\x03\x01W\x01\x00\x01S\x03\x03\x9e\\êþv^èûi\x9b\x073\x9cg¾}´\x01rèIò¢§\x83ÔãrèÌ\x7f; ¢\x8aÂÞR×\x06ÄÛ\x97¬)z`\x0fskªû\x10\x07'ëLöWçuÑ8Äú\x00HúúÀ\x12À\x07Ì\x14\x13\x01\x13\x02Ì©ÀsÀrÀ,À¯À­À$À[0m" 400 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:54] code 400, message Bad request version ('ý2¹ò±\x9e\x9aâ\x8b«§\x05\x00\x0e\x11OoE6§\x828\x9c\x01üy\x10.\x16µ')
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:54] "[31m[1m\x16\x03\x03\x01I\x01\x00\x01E\x03\x030²Ã\x0czÌ\x0fô×YB\\À\x8e\x1dfJ-\x92è`\x81I\x86\x18\x1b\x9dÛ¸ß\x11Ø ý2¹ò±\x9e\x9aâ\x8b«§\x05\x00\x0e\x11OoE6§\x828\x9c\x01üy\x10.\x16µ\x1d[0m" 400 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:54] code 400, message Bad request version ("2:\x0f¼\x91\x0eË¦3/\x9a\x17¥#Õ\x132º¼\x00\x8aÀ\x12À\x13À\x07À'Ì\x14À/\x13\x01À\x14\x13\x02À(Ì©À0ÀsÀ`ÀrÀaÀ,ÀvÀ¯ÀwÀ\xadÌ¨À$\x13\x05À")
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:54] "[31m[1m\x16\x03\x03\x01r\x01\x00\x01n\x03\x03\x0f×%z\x15\x07³ÁÂf@M\x06×ÀMIì\x1dX±jáo¬QÂò5îbv ¼W\x1a\x81èë\x91:\x8e¸\\S\x852:\x0f¼\x91\x0eË¦3/\x9a\x17¥#Õ\x132º¼\x00\x8aÀ\x12À\x13À\x07À'Ì\x14À/\x13\x01À\x14\x13\x02À(Ì©À0ÀsÀ`ÀrÀaÀ,ÀvÀ¯ÀwÀ­Ì¨À$\x13\x05À[0m" 400 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:54] code 400, message Bad request version ('À#À¬À®À+À')
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:54] "[31m[1m\x16\x03\x02\x01\x9b\x01\x00\x01\x97\x03\x02µ+*e«\x06\x11@ÄJÿ\x18s.Á¼û\\o©¼¼JÎ&û\x87¦k\x0eÛ` ë\x0fq]\x87ðÃÜfÿ§<ó9\x93ÿ\x00\x8eÙMÎ\x89\x96Ð½ið\x81ÕR!\x0d\x00\x8cjj\x00\x16\x003\x00gÀ\x9eÀ¢\x00\x9e\x009\x00kÀ\x9fÀ£\x00\x9f\x00E\x00¾\x00\x88\x00Ä\x00\x9aÀ\x08À\x09À#À¬À®À+À[0m" 400 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:55] code 400, message Bad request version ('À#À¬À®À+À')
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:55] "[31m[1m\x16\x03\x01\x01¨\x01\x00\x01¤\x03\x03Zå¦\x01äAÖq_ÐÂ\x86²]\x06è\x9c&B\x85\x97qs\x13zàEÀÆ\x1cC\x80 Á\x93\x1f\x83\x85E!ÕÞL{:VSRAA\x85\x88j\x8f'ûrd¶\x95Lg:ßù\x00\x8cêê\x00\x16\x003\x00gÀ\x9eÀ¢\x00\x9e\x009\x00kÀ\x9fÀ£\x00\x9f\x00E\x00¾\x00\x88\x00Ä\x00\x9aÀ\x08À\x09À#À¬À®À+À[0m" 400 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:55] code 400, message Bad request version ('\x1a\x83')
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:55] "[31m[1m\x16\x03\x01\x01¨\x01\x00\x01¤\x03\x03\x90×ª\x84Ì\x0c7Æ\x0b"u¢Ä\x89\x15>×ÊR¹*×ï¨\x00¶6Õ\x08\x18@M \x80\x1f\x1a\x83[0m" 400 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:56] code 400, message Bad request version ('À#À¬À®À+À')
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:56] "[31m[1m\x16\x03\x01\x01\x9e\x01\x00\x01\x9a\x03\x03s5¥\x90:\x95K¬\x1f\x0fµR­Ò¶=x<1Í»økÛab_¡ÕFB\x93 k(a \x19\x7fØ°èÔ]Áù\x90T1¸-RÚ\x1euÎáÖê/\x14soô3\x00\x82\x9a\x9a\x00\x16\x003\x00gÀ\x9eÀ¢\x00\x9e\x009\x00kÀ\x9fÀ£\x00\x9f\x00E\x00¾\x00\x88\x00Ä\x00\x9aÀ\x08À\x09À#À¬À®À+À[0m" 400 -
ERROR:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:56] code 400, message Bad request version ("\x8aê\x13\x01i\x18¿È\x81\x0f\x92Ïh\x91Xyüy[\x8aÕK\x00\x8aÀ\x12À\x13À\x07À'Ì\x14À/\x13\x01À\x14\x13\x02À(Ì©À0ÀsÀ`ÀrÀaÀ,ÀvÀ¯ÀwÀ\xadÌ¨À$\x13\x05À")
INFO:werkzeug:144.126.207.61 - - [20/Sep/2024 05:30:56] "[31m[1m\x16\x03\x01\x01\x8d\x01\x00\x01\x89\x03\x033\x07hQ\x89ha±ÇÎ\x89Ó4\x155/â\x82¯ÞK\x0fHóÌ¥iSç\x82b\x0b \x9eËÁ-PùæQr \x8aê\x13\x01i\x18¿È\x81\x0f\x92Ïh\x91Xyüy[\x8aÕK\x00\x8aÀ\x12À\x13À\x07À'Ì\x14À/\x13\x01À\x14\x13\x02À(Ì©À0ÀsÀ`ÀrÀaÀ,ÀvÀ¯ÀwÀ­Ì¨À$\x13\x05À[0m" 400 -
INFO:werkzeug:64.62.197.193 - - [20/Sep/2024 05:37:29] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:64.62.197.190 - - [20/Sep/2024 05:37:44] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
INFO:werkzeug:198.235.24.90 - - [20/Sep/2024 07:27:16] "[33mGET / HTTP/1.0[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much money is given for daily expense when travelling outside for company work ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: how much money is given for daily expense when travelling outside for company work ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi jinie', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: hi jinie
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66ed2cb805895ec2589badd3
INFO:__main__:Creating embeddings for the query.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66ed2cb805895ec2589badd4
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '40da4c97-ecba-4468-b59f-01bf6a37d5fa', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:05:16 GMT', 'content-type': 'application/json', 'content-length': '627', 'connection': 'keep-alive', 'x-amzn-requestid': '40da4c97-ecba-4468-b59f-01bf6a37d5fa', 'x-amzn-bedrock-invocation-latency': '1891', 'x-amzn-bedrock-output-token-count': '185', 'x-amzn-bedrock-input-token-count': '903'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a75e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any queries or questions you may have regarding our company policies. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"hi jinie\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":903,"generation_token_count":185,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2cbc05895ec2589badd5
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:05:16] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f5b24843-408d-469a-8c48-3e7e40ce3399', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:05:16 GMT', 'content-type': 'application/json', 'content-length': '972', 'connection': 'keep-alive', 'x-amzn-requestid': 'f5b24843-408d-469a-8c48-3e7e40ce3399', 'x-amzn-bedrock-invocation-latency': '2437', 'x-amzn-bedrock-output-token-count': '240', 'x-amzn-bedrock-input-token-count': '1195'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac13101f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The company provides a fixed per diem allowance of $50 per day for daily expenses while traveling outside for company work, regardless of the duration of stay and destination.\",\n    \"References\": [\n        {\n            \"Statement\": \"The rate is fixed at $50 per day irrespective of the duration of stay and destination.\",\n            \"source\": \"International Business Travel Policy.pdf - Page 5 - N/A - N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"how much money is given for daily expense when travelling outside for company work ?\",\n        \"source\": \"International Business Travel Policy.pdf\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1195,"generation_token_count":240,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2cbc05895ec2589badd6
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:05:16] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is the annual trip scenario?', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: what is the annual trip scenario?
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c92f4782-66e1-4030-898e-da2b96dbbf04', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:05:37 GMT', 'content-type': 'application/json', 'content-length': '212', 'connection': 'keep-alive', 'x-amzn-requestid': 'c92f4782-66e1-4030-898e-da2b96dbbf04', 'x-amzn-bedrock-invocation-latency': '294', 'x-amzn-bedrock-output-token-count': '27', 'x-amzn-bedrock-input-token-count': '226'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024cd00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"What are the annual trip policies and scenarios at Gemini Solutions?\"\n}","prompt_token_count":226,"generation_token_count":27,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What are the annual trip policies and scenarios at Gemini Solutions?
INFO:__main__:Query stored successfully with ID: 66ed2cd105895ec2589badd8
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'eff40ac8-d6f9-4b93-8488-01d4347061e0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:05:42 GMT', 'content-type': 'application/json', 'content-length': '2110', 'connection': 'keep-alive', 'x-amzn-requestid': 'eff40ac8-d6f9-4b93-8488-01d4347061e0', 'x-amzn-bedrock-invocation-latency': '4525', 'x-amzn-bedrock-output-token-count': '468', 'x-amzn-bedrock-input-token-count': '1268'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1480>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"At Gemini Solutions, the annual trip policies and scenarios are governed by the International Business Travel Policy 8.0, Leave Policy Version 5.0, and LTA Policy Version 4.0. The International Business Travel Policy 8.0 outlines the guidelines for initiating travel, expenditure, and reimbursement of expenses on travel, meals, accommodation, and other related items incurred during business trips overseas. The Leave Policy Version 5.0 defines the process and procedures regarding employee leave entitlements, while the LTA Policy Version 4.0 outlines the eligibility and process for claiming Leave Travel Allowance for Gemini employees. Additionally, the company has a Business Continuity and Disaster Recovery (BC & DR) Plan to ensure the continuation of vital business processes in an event of disaster or threat.\",\n    \"References\": [\n        {\n            \"Statement\": \"For this policy, all-expense reimbursements will be made on the following basis: From the day you\",\n            \"source\": \"International Business Travel Policy.pdf - Page No: 4\"\n        },\n        {\n            \"Statement\": \"The purpose of this policy is about granting leave and to help employees to know about their entitlements and to make it easy for employees to avail themselves effectively.\",\n            \"source\": \"Leave Policy Version 5.0 - Page No: 4\"\n        },\n        {\n            \"Statement\": \"To clearly outline the eligibility and process for claiming Leave Travel Allowance for Gemini employees.\",\n            \"source\": \"LTA Policy Version 4.0 - Page No: 4\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"What are the annual trip policies and scenarios at Gemini Solutions?\",\n        \"source\": \"Gemini Solutions Database\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1268,"generation_token_count":468,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2cd605895ec2589badd9
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:05:42] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi ', 'conversation_id': 'a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk'}
INFO:__main__:Received query: hi 
INFO:__main__:Received conversation_id: a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66ed2cdb05895ec2589baddb
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ba87e2d5-b08c-45d7-9eef-bc21068dfff4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:05:50 GMT', 'content-type': 'application/json', 'content-length': '692', 'connection': 'keep-alive', 'x-amzn-requestid': 'ba87e2d5-b08c-45d7-9eef-bc21068dfff4', 'x-amzn-bedrock-invocation-latency': '1908', 'x-amzn-bedrock-output-token-count': '200', 'x-amzn-bedrock-input-token-count': '766'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024e2f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind? Please feel free to ask a specific question, and I'll do my best to provide a clear and concise answer.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk\",\n        \"query\": \"hi \",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":766,"generation_token_count":200,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2cde05895ec2589baddc
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:05:50] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how many leaves ae there', 'conversation_id': 'a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk'}
INFO:__main__:Received query: how many leaves ae there
INFO:__main__:Received conversation_id: a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5b85fe72-76a1-41d8-83b8-0e6324fc9e8d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:06:00 GMT', 'content-type': 'application/json', 'content-length': '169', 'connection': 'keep-alive', 'x-amzn-requestid': '5b85fe72-76a1-41d8-83b8-0e6324fc9e8d', 'x-amzn-bedrock-invocation-latency': '269', 'x-amzn-bedrock-output-token-count': '21', 'x-amzn-bedrock-input-token-count': '238'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024eb30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"how many leaves are there\"\n}","prompt_token_count":238,"generation_token_count":21,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: how many leaves are there
INFO:__main__:Query stored successfully with ID: 66ed2ce805895ec2589badde
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '219533d0-cdae-4ab5-8984-205a8e764346', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:06:05 GMT', 'content-type': 'application/json', 'content-length': '1161', 'connection': 'keep-alive', 'x-amzn-requestid': '219533d0-cdae-4ab5-8984-205a8e764346', 'x-amzn-bedrock-invocation-latency': '2955', 'x-amzn-bedrock-output-token-count': '323', 'x-amzn-bedrock-input-token-count': '933'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1000>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"As a Gemini Solutions employee, you are credited with 7 Casual Leaves (CLs), 7 Sick Leaves (SLs), and 1.5 Privilege Leaves (PLs) annually. Additionally, Technical Trainees can avail 3 Casual Leaves (CL) every quarter.\",\n    \"References\": [\n        {\n            \"Statement\": \"Each year, you’ll receive 7 Casual Leaves (CLs), 7 Sick Leaves (SLs) credited annually and 1.5 Privilege Leaves (PLs) on monthly basis.\",\n            \"source\": \"HR - Leave Policy.csv - Sheet1 - Index: 6\"\n        },\n        {\n            \"Statement\": \"As a technical trainee, you get 3 Casual Leaves (CL) every quarter.\",\n            \"source\": \"HR - Leave Policy.csv - Sheet1 - Index: 1\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk\",\n        \"query\": \"how many leaves are there\",\n        \"source\": \"HR - Leave Policy.csv\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":933,"generation_token_count":323,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2ced05895ec2589baddf
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:06:05] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'what is posh', 'conversation_id': 'a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk'}
INFO:__main__:Received query: what is posh
INFO:__main__:Received conversation_id: a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ff6f78a1-28b0-411a-8de9-ee7883f2cbd1', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:06:53 GMT', 'content-type': 'application/json', 'content-length': '165', 'connection': 'keep-alive', 'x-amzn-requestid': 'ff6f78a1-28b0-411a-8de9-ee7883f2cbd1', 'x-amzn-bedrock-invocation-latency': '255', 'x-amzn-bedrock-output-token-count': '21', 'x-amzn-bedrock-input-token-count': '419'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024c130>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is the policy on\"\n}","prompt_token_count":419,"generation_token_count":21,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is the policy on
INFO:__main__:Query stored successfully with ID: 66ed2d1d05895ec2589bade1
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'bd324d5f-e7b7-4c0f-b135-06a8866d5e4f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:06:57 GMT', 'content-type': 'application/json', 'content-length': '1267', 'connection': 'keep-alive', 'x-amzn-requestid': 'bd324d5f-e7b7-4c0f-b135-06a8866d5e4f', 'x-amzn-bedrock-invocation-latency': '3064', 'x-amzn-bedrock-output-token-count': '309', 'x-amzn-bedrock-input-token-count': '938'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028d9f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions has policies on various aspects, including IT - BYOD Policy, Sexual Harassment Policy, Hardware Policy, and Software Development Policy. These policies aim to ensure a respectful and secure work environment.\",\n    \"References\": [\n        {\n            \"Statement\": \"This policy applies to an allegation of harassment by employees, service providers, vendors, and against the same.\",\n            \"source\": \"SEXUAL HARRASMENT POLICY Updated_India.pdf - Page No: 4\"\n        },\n        {\n            \"Statement\": \"The policy is intended to ensure an environment that is free from any form of harassment or unlawful discrimination and the dignity of each employee is respected and promoted.\",\n            \"source\": \"SEXUAL HARRASMENT POLICY Updated_India.pdf - Page No: 4\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk\",\n        \"query\": \"what is the policy on\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":938,"generation_token_count":309,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2d2105895ec2589bade2
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:06:57] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': '<at>jinie by gemini-dev  what is posh ?</at> ', 'conversation_id': '19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces'}
INFO:__main__:Received query: <at>jinie by gemini-dev  what is posh ?</at> 
INFO:__main__:Received conversation_id: 19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66ed2d8605895ec2589bade4
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f70d688d-b143-41d9-8305-a4d0cf08c311', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:08:41 GMT', 'content-type': 'application/json', 'content-length': '1086', 'connection': 'keep-alive', 'x-amzn-requestid': 'f70d688d-b143-41d9-8305-a4d0cf08c311', 'x-amzn-bedrock-invocation-latency': '2561', 'x-amzn-bedrock-output-token-count': '259', 'x-amzn-bedrock-input-token-count': '1197'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028dc00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"POSH stands for Prevention of Sexual Harassment. According to the policy, any case reported needs to be immediately addressed to someone who has the authority to intervene, preferably an Internal Committee (IC) member.\",\n    \"References\": [\n        {\n            \"Statement\": \"Any case reported needs to be immediately addressed to someone who has the authority to intervene, preferably an Internal Committee (IC) member as per the Prevention of Sexual Harassment (POSH) policy of Gemini Solutions or HR.\",\n            \"source\": \"Gemini-Remote Working Policy_Version 1.0_India.pdf - Page 9\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces\",\n        \"query\": \"<at>jinie by gemini-dev  what is posh ?</at> \",\n        \"source\": \"Gemini-Remote Working Policy_Version 1.0_India.pdf\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1197,"generation_token_count":259,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2d8905895ec2589bade5
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:08:41] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': '<at>jinie by gemini-dev</at> how to use it on someone?', 'conversation_id': '19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces'}
INFO:__main__:Received query: <at>jinie by gemini-dev</at> how to use it on someone?
INFO:__main__:Received conversation_id: 19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1c0cf659-97be-4fbd-a3fd-7ed48ba3d59c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:09:04 GMT', 'content-type': 'application/json', 'content-length': '231', 'connection': 'keep-alive', 'x-amzn-requestid': '1c0cf659-97be-4fbd-a3fd-7ed48ba3d59c', 'x-amzn-bedrock-invocation-latency': '401', 'x-amzn-bedrock-output-token-count': '39', 'x-amzn-bedrock-input-token-count': '342'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1960>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"<at>jinie by gemini-dev  how to implement the POSH policy when a case is reported?</at>\"\n}","prompt_token_count":342,"generation_token_count":39,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: <at>jinie by gemini-dev  how to implement the POSH policy when a case is reported?</at>
INFO:__main__:Query stored successfully with ID: 66ed2da005895ec2589bade7
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7cf560ba-f121-4d5c-b7c7-17beceb44b85', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:09:07 GMT', 'content-type': 'application/json', 'content-length': '1144', 'connection': 'keep-alive', 'x-amzn-requestid': '7cf560ba-f121-4d5c-b7c7-17beceb44b85', 'x-amzn-bedrock-invocation-latency': '2659', 'x-amzn-bedrock-output-token-count': '267', 'x-amzn-bedrock-input-token-count': '1228'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ca60>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"When a case is reported under the Prevention of Sexual Harassment (POSH) policy of Gemini Solutions, it needs to be immediately addressed to someone who has the authority to intervene, preferably an Internal Committee (IC) member. This is as per the POSH policy of Gemini Solutions.\",\n    \"References\": [\n        {\n            \"Statement\": \"Any case reported needs to be immediately addressed to someone who has the authority to intervene, preferably an Internal Committee (IC) member as per the Prevention of Sexual Harassment (POSH) policy of Gemini Solutions or HR.\",\n            \"source\": \"Text Block 1\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces\",\n        \"query\": \"<at>jinie by gemini-dev  how to implement the POSH policy when a case is reported?</at>\",\n        \"source\": \"Gemini-Remote Working Policy_Version 1.0_India.pdf\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1228,"generation_token_count":267,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2da305895ec2589bade8
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:09:08] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': '<at>jinie by gemini-dev</at> whom to report?', 'conversation_id': '19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces'}
INFO:__main__:Received query: <at>jinie by gemini-dev</at> whom to report?
INFO:__main__:Received conversation_id: 19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '289dc3c1-a13c-461a-9e96-e30e8264875d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:09:29 GMT', 'content-type': 'application/json', 'content-length': '218', 'connection': 'keep-alive', 'x-amzn-requestid': '289dc3c1-a13c-461a-9e96-e30e8264875d', 'x-amzn-bedrock-invocation-latency': '402', 'x-amzn-bedrock-output-token-count': '37', 'x-amzn-bedrock-input-token-count': '510'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024e770>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"<at>jinie by gemini-dev  whom to report a case under the POSH policy?</at>\"\n}","prompt_token_count":510,"generation_token_count":37,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: <at>jinie by gemini-dev  whom to report a case under the POSH policy?</at>
INFO:__main__:Query stored successfully with ID: 66ed2db905895ec2589badea
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '14e05b32-cfad-43bf-90c7-312471a04980', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:09:33 GMT', 'content-type': 'application/json', 'content-length': '1158', 'connection': 'keep-alive', 'x-amzn-requestid': '14e05b32-cfad-43bf-90c7-312471a04980', 'x-amzn-bedrock-invocation-latency': '2725', 'x-amzn-bedrock-output-token-count': '275', 'x-amzn-bedrock-input-token-count': '1245'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028cfa0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"According to the Prevention of Sexual Harassment (POSH) policy of Gemini Solutions, any case reported needs to be immediately addressed to someone who has the authority to intervene, preferably an Internal Committee (IC) member.\",\n    \"References\": [\n        {\n            \"Statement\": \"Any case reported needs to be immediately addressed to someone who has the authority to intervene, preferably an Internal Committee (IC) member as per the Prevention of Sexual Harassment (POSH) policy of Gemini Solutions or HR.\",\n            \"source\": \"Text Block 1 - Gemini-Remote Working Policy_Version 1.0_India.pdf - Page No: 9\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces\",\n        \"query\": \"<at>jinie by gemini-dev  whom to report a case under the POSH policy?</at>\",\n        \"source\": \"Text Block 1 - Gemini-Remote Working Policy_Version 1.0_India.pdf\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1245,"generation_token_count":275,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2dbd05895ec2589badeb
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:09:33] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': '<at>jinie by gemini-dev</at> where should i report it?', 'conversation_id': '19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces'}
INFO:__main__:Received query: <at>jinie by gemini-dev</at> where should i report it?
INFO:__main__:Received conversation_id: 19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd356c66b-c1ff-4e36-96a7-b37b3fa2fd33', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:09:54 GMT', 'content-type': 'application/json', 'content-length': '217', 'connection': 'keep-alive', 'x-amzn-requestid': 'd356c66b-c1ff-4e36-96a7-b37b3fa2fd33', 'x-amzn-bedrock-invocation-latency': '396', 'x-amzn-bedrock-output-token-count': '37', 'x-amzn-bedrock-input-token-count': '521'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024fd30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"<at>jinie by gemini-dev</at> whom to report a case under the POSH policy?\"\n}","prompt_token_count":521,"generation_token_count":37,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: <at>jinie by gemini-dev</at> whom to report a case under the POSH policy?
INFO:__main__:Query stored successfully with ID: 66ed2dd205895ec2589baded
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '92c14b10-1e26-4ebc-bd7f-e76b7a6ed52b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 20 Sep 2024 08:09:58 GMT', 'content-type': 'application/json', 'content-length': '1157', 'connection': 'keep-alive', 'x-amzn-requestid': '92c14b10-1e26-4ebc-bd7f-e76b7a6ed52b', 'x-amzn-bedrock-invocation-latency': '2605', 'x-amzn-bedrock-output-token-count': '275', 'x-amzn-bedrock-input-token-count': '1265'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c280>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"According to the Prevention of Sexual Harassment (POSH) policy of Gemini Solutions, any case reported needs to be immediately addressed to someone who has the authority to intervene, preferably an Internal Committee (IC) member.\",\n    \"References\": [\n        {\n            \"Statement\": \"Any case reported needs to be immediately addressed to someone who has the authority to intervene, preferably an Internal Committee (IC) member as per the Prevention of Sexual Harassment (POSH) policy of Gemini Solutions or HR.\",\n            \"source\": \"Text Block 1 - Gemini-Remote Working Policy_Version 1.0_India.pdf - Page No: 9\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"19:3f83b80d-b01e-4077-9fdc-26fbc91dc439_5cec54a4-73a2-43e9-a8b9-e0ffafb1d5a6@unq.gbl.spaces\",\n        \"query\": \"<at>jinie by gemini-dev</at> whom to report a case under the POSH policy?\",\n        \"source\": \"Text Block 1 - Gemini-Remote Working Policy_Version 1.0_India.pdf\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1265,"generation_token_count":275,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66ed2dd605895ec2589badee
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.216.157 - - [20/Sep/2024 08:09:58] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:8.221.141.33 - - [20/Sep/2024 08:16:21] code 400, message Bad request version ('À\x13À')
INFO:werkzeug:8.221.141.33 - - [20/Sep/2024 08:16:21] "[31m[1m\x16\x03\x01\x00î\x01\x00\x00ê\x03\x03I\x06²ù¼\x99iÀYûøºe-\x83Ud]\x0e\x8d·b8´gÆÝ9dZ8f gÁ\x81i³öòË°©\x19NÖ½\x95g|püé<Z¡\x90T·é¥8'O;\x00&À+À/À,À0Ì©Ì¨À\x09À\x13À[0m" 400 -
INFO:werkzeug:8.221.141.33 - - [20/Sep/2024 08:16:31] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:23.145.40.147 - - [20/Sep/2024 08:16:50] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:185.242.226.47 - - [20/Sep/2024 10:27:33] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:165.232.39.167 - - [21/Sep/2024 09:27:44] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03ýÁ\x99{Ç3]\x1bI\x17')
INFO:werkzeug:165.232.39.167 - - [21/Sep/2024 09:27:44] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03ýÁ\x99{Ç3]\x1bI\x17\x85ÖÃê\x94²;åê}é\x80t<4\x9dN\x99\x1bäô*\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
INFO:werkzeug:45.156.129.116 - - [22/Sep/2024 04:36:52] "[33mGET /api/session/properties HTTP/1.1[0m" 404 -
INFO:werkzeug:45.156.129.117 - - [22/Sep/2024 04:37:11] "[33mGET /cgi-bin/authLogin.cgi HTTP/1.1[0m" 404 -
ERROR:werkzeug:159.65.25.121 - - [22/Sep/2024 04:48:39] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03óêo\x8e=1Ä¦ij\x1aÂ¯')
INFO:werkzeug:159.65.25.121 - - [22/Sep/2024 04:48:39] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03óêo\x8e=1Ä¦ij\x1aÂ¯\x1cIâåÔ¥U¹FmsÎÖ'S\x81Å\x16>\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
INFO:werkzeug:198.235.24.129 - - [22/Sep/2024 07:30:49] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:209.38.247.88 - - [22/Sep/2024 09:12:10] "[33mGET / HTTP/1.0[0m" 404 -
INFO:werkzeug:167.172.160.194 - - [22/Sep/2024 09:12:11] "[33mGET /query?q=SHOW+DIAGNOSTICS HTTP/1.1[0m" 404 -
ERROR:werkzeug:161.35.70.41 - - [22/Sep/2024 09:12:11] code 400, message Bad request version ('À\x13À')
INFO:werkzeug:161.35.70.41 - - [22/Sep/2024 09:12:11] "[31m[1m\x16\x03\x01\x00î\x01\x00\x00ê\x03\x03&ÿ;\x15ï\x15ä\x9d\x84\x9axc\x9bJ¼ñ2FæÇ¸\x02Ä¯Å\x1e·2z6ùß ¼w\x16\x07\x82kÊý¸\x1fp4°e\x98R\x89\x03\x84ORs\x91\x08\x1dä¦\x81R:Ó+\x00&À+À/À,À0Ì©Ì¨À\x09À\x13À[0m" 400 -
INFO:werkzeug:161.35.77.208 - - [22/Sep/2024 09:12:11] "[33mGET /solr/admin/info/system HTTP/1.1[0m" 404 -
INFO:werkzeug:161.35.70.41 - - [22/Sep/2024 09:12:11] "[33mGET /v2/_catalog HTTP/1.1[0m" 404 -
INFO:werkzeug:68.183.67.238 - - [22/Sep/2024 09:12:11] "[33mGET /cgi-bin/authLogin.cgi HTTP/1.1[0m" 404 -
INFO:werkzeug:134.122.73.99 - - [22/Sep/2024 09:12:11] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:161.35.70.41 - - [22/Sep/2024 09:12:11] code 400, message Bad request version ('À\x13À')
INFO:werkzeug:161.35.70.41 - - [22/Sep/2024 09:12:11] "[31m[1m\x16\x03\x01\x00î\x01\x00\x00ê\x03\x03ñÂ¹²Ú®# ñÐi\x16×a\x94\x9cé\x86éF\x15"\x85sË\x945*0ÉÓ\x87 \x1cqåDÔBÞf\x18Û\x8d\x03£zÙ²Úo\x8dF\x86X/ ¯b\x1aÊ\x9fõÿ#\x00&À+À/À,À0Ì©Ì¨À\x09À\x13À[0m" 400 -
INFO:werkzeug:161.35.77.208 - - [22/Sep/2024 09:12:11] "[33mGET /solr/admin/cores?action=STATUS&wt=json HTTP/1.1[0m" 404 -
ERROR:werkzeug:161.35.70.41 - - [22/Sep/2024 09:12:11] code 400, message Bad request version ('À\x13À')
INFO:werkzeug:161.35.70.41 - - [22/Sep/2024 09:12:11] "[31m[1m\x16\x03\x01\x00î\x01\x00\x00ê\x03\x03f'}ÿ\x80VkßRHË\x8aî\x80?.O\x9bºÊ\x9dÇ5Ê,¡8O\x86q¬b úüËë[ÝC£\x95£\x8bý\x10`\x1e¹\x98ÿZ%?\x8diDwÞNÿ\x0d:«Ë\x00&À+À/À,À0Ì©Ì¨À\x09À\x13À[0m" 400 -
INFO:werkzeug:52.76.71.100 - - [22/Sep/2024 11:07:05] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
ERROR:werkzeug:154.213.185.206 - - [22/Sep/2024 11:26:21] code 400, message Bad request syntax ('JDWP-Handshake')
INFO:werkzeug:154.213.185.206 - - [22/Sep/2024 11:26:21] "[31m[1mJDWP-Handshake[0m" 400 -
INFO:werkzeug:98.96.193.12 - - [22/Sep/2024 18:09:00] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:51.8.231.209 - - [22/Sep/2024 21:04:56] "[33mGET /v2/ HTTP/1.1[0m" 404 -
ERROR:werkzeug:134.122.73.99 - - [22/Sep/2024 22:36:17] code 400, message Bad request version ("&\x8b\x80wUÂ!å\x00>\x13\x02\x13\x03\x13\x01À,À0\x00\x9fÌ©Ì¨ÌªÀ+À/\x00\x9eÀ$À(\x00kÀ#À'\x00gÀ")
INFO:werkzeug:134.122.73.99 - - [22/Sep/2024 22:36:17] "[31m[1m\x16\x03\x01\x01$\x01\x00\x01 \x03\x03F,v\x00þ\x1c\x02\x01Ë¨\x9câ|\x87\x8a\x13\x9e\x19\x11Ò;\x8c;ÅÕ\x89<k\x96¡rt \x9c\x9d@U-Òë\x0eeï::\x0b\x09\x00\x99^\x9c }\x1däõ\x0d&\x8b\x80wUÂ!å\x00>\x13\x02\x13\x03\x13\x01À,À0\x00\x9fÌ©Ì¨ÌªÀ+À/\x00\x9eÀ$À(\x00kÀ#À'\x00gÀ[0m" 400 -
INFO:werkzeug:165.154.173.204 - - [23/Sep/2024 00:55:06] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:165.154.173.204 - - [23/Sep/2024 00:55:07] code 400, message Bad request syntax ('\x16\x03\x01\x00ò\x01\x00\x00î\x03\x03\x95¥KÐ\x03¥\x84\x10\x1b')
INFO:werkzeug:165.154.173.204 - - [23/Sep/2024 00:55:07] "[31m[1m\x16\x03\x01\x00ò\x01\x00\x00î\x03\x03\x95¥KÐ\x03¥\x84\x10\x1b[0m" 400 -
ERROR:werkzeug:165.154.173.204 - - [23/Sep/2024 00:55:08] code 400, message Bad HTTP/0.9 request type ('t3')
INFO:werkzeug:165.154.173.204 - - [23/Sep/2024 00:55:08] "[31m[1mt3 12.1.2[0m" 400 -
INFO:werkzeug:198.235.24.198 - - [23/Sep/2024 01:12:30] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:154.212.141.202 - - [23/Sep/2024 02:49:29] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'What are the steps to download my payslips?', 'conversation_id': 'abc'}
INFO:__main__:Received query: What are the steps to download my payslips?
INFO:__main__:Received conversation_id: abc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f1557a05895ec2589badf0
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '77062729-11c1-46ad-9d09-22bbe833f19d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 23 Sep 2024 11:48:13 GMT', 'content-type': 'application/json', 'content-length': '1138', 'connection': 'keep-alive', 'x-amzn-requestid': '77062729-11c1-46ad-9d09-22bbe833f19d', 'x-amzn-bedrock-invocation-latency': '2227', 'x-amzn-bedrock-output-token-count': '238', 'x-amzn-bedrock-input-token-count': '849'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024e920>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To download your payslips, you can log in to your GreytHR account and navigate to the payslips section to view your monthly payslips. Alternatively, you can also access your payslips through the 'Accounts portal' tab on MIS, which will further lead you to the GreytHR portal.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can log in to your GreytHR account, navigate to your payslips section to view your monthly payslips there.\",\n            \"source\": \"Text Block 1\"\n        },\n        {\n            \"Statement\": \"As mentioned during your induction, please visit the Accounts portal tab on MIS, it will further lead you to GreytHR portal. You can view/ download payslips from there.\",\n            \"source\": \"Text Block 2\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"abc\",\n        \"query\": \"What are the steps to download my payslips?\",\n        \"source\": \"GreytHR account and MIS portal\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":849,"generation_token_count":238,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f1557d05895ec2589badf1
INFO:__main__:Process completed successfully.
INFO:werkzeug:182.69.180.111 - - [23/Sep/2024 11:48:13] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:118.193.39.117 - - [23/Sep/2024 13:30:47] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:118.193.39.117 - - [23/Sep/2024 13:30:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
INFO:werkzeug:118.193.39.117 - - [23/Sep/2024 13:30:48] "[33mGET /robots.txt HTTP/1.1[0m" 404 -
INFO:werkzeug:118.193.39.117 - - [23/Sep/2024 13:30:48] "[33mGET /sitemap.xml HTTP/1.1[0m" 404 -
ERROR:werkzeug:185.100.87.136 - - [23/Sep/2024 18:09:02] code 400, message Bad HTTP/0.9 request type ('\x00\x00\x00\x11\x00\x00\x01é\x00\x01\x00\x00\x00ÿÿÿÿ\x01\x00\x00\x00\x00\x00\x00\x00')
INFO:werkzeug:185.100.87.136 - - [23/Sep/2024 18:09:02] "[31m[1m\x00\x00\x00\x11\x00\x00\x01é\x00\x01\x00\x00\x00ÿÿÿÿ\x01\x00\x00\x00\x00\x00\x00\x00\x0c\x02\x00\x00\x00\x10MyCustomAssembly\x05\x01\x00\x00\x00[0m" 400 -
INFO:werkzeug:198.235.24.11 - - [23/Sep/2024 19:38:29] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:205.210.31.249 - - [23/Sep/2024 21:24:23] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:205.210.31.23 - - [23/Sep/2024 22:16:59] "[33mGET / HTTP/1.0[0m" 404 -
INFO:werkzeug:45.84.89.2 - - [24/Sep/2024 04:25:07] "[33mGET / HTTP/1.0[0m" 404 -
ERROR:werkzeug:104.248.160.33 - - [24/Sep/2024 05:24:56] code 400, message Bad request syntax ('\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03?Ê\x82}X\x9d\x01\x9e\x07\x02Ø¡Æø\x10XÙ±\x08«\x19¡cH\x99\x8c\x7fsö\x81ÐE\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À')
INFO:werkzeug:104.248.160.33 - - [24/Sep/2024 05:24:56] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03?Ê\x82}X\x9d\x01\x9e\x07\x02Ø¡Æø\x10XÙ±\x08«\x19¡cH\x99\x8c\x7fsö\x81ÐE\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'What are the steps to download my payslips?', 'conversation_id': 'abc'}
INFO:__main__:Received query: What are the steps to download my payslips?
INFO:__main__:Received conversation_id: abc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f257ee05895ec2589badf3
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9521473c-ffd4-4a8c-9d87-5aae0089fd54', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 24 Sep 2024 06:10:57 GMT', 'content-type': 'application/json', 'content-length': '1138', 'connection': 'keep-alive', 'x-amzn-requestid': '9521473c-ffd4-4a8c-9d87-5aae0089fd54', 'x-amzn-bedrock-invocation-latency': '2351', 'x-amzn-bedrock-output-token-count': '238', 'x-amzn-bedrock-input-token-count': '849'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f910>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To download your payslips, you can log in to your GreytHR account and navigate to the payslips section to view your monthly payslips. Alternatively, you can also access your payslips through the 'Accounts portal' tab on MIS, which will further lead you to the GreytHR portal.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can log in to your GreytHR account, navigate to your payslips section to view your monthly payslips there.\",\n            \"source\": \"Text Block 1\"\n        },\n        {\n            \"Statement\": \"As mentioned during your induction, please visit the Accounts portal tab on MIS, it will further lead you to GreytHR portal. You can view/ download payslips from there.\",\n            \"source\": \"Text Block 2\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"abc\",\n        \"query\": \"What are the steps to download my payslips?\",\n        \"source\": \"GreytHR account and MIS portal\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":849,"generation_token_count":238,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f257f105895ec2589badf4
INFO:__main__:Process completed successfully.
INFO:werkzeug:182.78.210.30 - - [24/Sep/2024 06:10:57] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hey hey hey', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: hey hey hey
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f263da05895ec2589badf6
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c78c3cec-5b4e-43c6-9473-f78f74a51348', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 24 Sep 2024 07:01:49 GMT', 'content-type': 'application/json', 'content-length': '755', 'connection': 'keep-alive', 'x-amzn-requestid': 'c78c3cec-5b4e-43c6-9473-f78f74a51348', 'x-amzn-bedrock-invocation-latency': '2070', 'x-amzn-bedrock-output-token-count': '216', 'x-amzn-bedrock-input-token-count': '1132'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a4190>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. However, it seems like your query is a casual greeting. If you have any specific questions or concerns regarding our policies, feel free to ask, and I'll do my best to assist you.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"hey hey hey\",\n        \"source\": \"User query\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1132,"generation_token_count":216,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f263dd05895ec2589badf7
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.4.120 - - [24/Sep/2024 07:01:49] "POST /process_query HTTP/1.1" 200 -
 * Serving Flask app 'app'
 * Debug mode: off
Address already in use
Port 5000 is in use by another program. Either identify and stop that program, or start the server with a different port.
INFO:werkzeug:64.62.156.105 - - [24/Sep/2024 09:03:19] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:64.62.156.107 - - [24/Sep/2024 09:03:41] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi jinie ', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: hi jinie 
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f2c21a05895ec2589badf9
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '32f302b6-6cfa-436b-98b1-e6274c3a8ca6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 24 Sep 2024 13:43:57 GMT', 'content-type': 'application/json', 'content-length': '590', 'connection': 'keep-alive', 'x-amzn-requestid': '32f302b6-6cfa-436b-98b1-e6274c3a8ca6', 'x-amzn-bedrock-invocation-latency': '1829', 'x-amzn-bedrock-output-token-count': '179', 'x-amzn-bedrock-input-token-count': '904'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a32e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hi! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"hi jinie \",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":904,"generation_token_count":179,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f2c21d05895ec2589badfa
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [24/Sep/2024 13:43:57] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:147.185.133.233 - - [24/Sep/2024 19:26:38] code 400, message Bad request version ('À\x13À')
INFO:werkzeug:147.185.133.233 - - [24/Sep/2024 19:26:38] "[31m[1m\x16\x03\x01\x00î\x01\x00\x00ê\x03\x03\x022_Ïª(Ä\x08\x89+u¡\x89j@\x01ÝÅ\x1cO\x83Mj?\x12C\x067\x0c\\\x98l âPqÜ\x8d6G§æ\x89\x13\x06\x14ýï«Ú\x05>\x9c\x83y\x13yÞ\x09¿T\x96kxâ\x00&À+À/À,À0Ì©Ì¨À\x09À\x13À[0m" 400 -
ERROR:werkzeug:147.185.133.233 - - [24/Sep/2024 19:26:38] code 400, message Bad request version ('À(À$À\x14À')
INFO:werkzeug:147.185.133.233 - - [24/Sep/2024 19:26:38] "[31m[1m\x16\x03\x01\x00Ê\x01\x00\x00Æ\x03\x03\x11\x8a(&ÖË\x13D\x81°}+\x16À\x96¾Ó0Vª²w³3*»b?\x1c_7´\x00\x00hÌ\x14Ì\x13À/À+À0À,À\x11À\x07À'À#À\x13À\x09À(À$À\x14À[0m" 400 -
INFO:werkzeug:174.138.61.44 - - [25/Sep/2024 03:26:03] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:167.99.192.113 - - [25/Sep/2024 03:54:47] code 400, message Bad request syntax ('\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03IÛ!Æªr')
INFO:werkzeug:167.99.192.113 - - [25/Sep/2024 03:54:47] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03IÛ!Æªr[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hey hey ', 'conversation_id': 'a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR'}
INFO:__main__:Received query: hey hey 
INFO:__main__:Received conversation_id: a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f39c7305895ec2589badfc
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e9440840-f176-4874-8d4d-c34e70644a92', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 05:15:34 GMT', 'content-type': 'application/json', 'content-length': '753', 'connection': 'keep-alive', 'x-amzn-requestid': 'e9440840-f176-4874-8d4d-c34e70644a92', 'x-amzn-bedrock-invocation-latency': '2055', 'x-amzn-bedrock-output-token-count': '215', 'x-amzn-bedrock-input-token-count': '1076'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852ad0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. However, it seems like your query is a casual greeting. If you have any specific questions or concerns regarding our policies, feel free to ask, and I'll do my best to assist you.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1F6h57q4wG3bftUT4K97xlqqKD4_BVQqc4s2JAheRJxjQFytT73f_pokkWB95A3zG5Rup6d8AFrkjfyQ8Cl2LUNmjyVD3qJMbYsD_WRMnbC4uFD8mMaOWFgLdzlH-82rR\",\n        \"query\": \"hey hey \",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1076,"generation_token_count":215,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f39c7605895ec2589badfd
INFO:__main__:Process completed successfully.
INFO:werkzeug:124.253.3.143 - - [25/Sep/2024 05:15:34] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi', 'conversation_id': 'a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk'}
INFO:__main__:Received query: hi
INFO:__main__:Received conversation_id: a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f3b89e05895ec2589badff
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f41c4ed1-8e6a-4a6e-a434-f9dcd5303c44', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 07:15:45 GMT', 'content-type': 'application/json', 'content-length': '691', 'connection': 'keep-alive', 'x-amzn-requestid': 'f41c4ed1-8e6a-4a6e-a434-f9dcd5303c44', 'x-amzn-bedrock-invocation-latency': '1980', 'x-amzn-bedrock-output-token-count': '200', 'x-amzn-bedrock-input-token-count': '760'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024dff0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind? Please feel free to ask a specific question, and I'll do my best to provide a clear and concise answer.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk\",\n        \"query\": \"hi\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":760,"generation_token_count":200,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f3b8a105895ec2589bae00
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [25/Sep/2024 07:15:45] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how many leaves are there', 'conversation_id': 'a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk'}
INFO:__main__:Received query: how many leaves are there
INFO:__main__:Received conversation_id: a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a515822d-cdf7-4a6f-8d17-9d4b2c26503d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 07:17:56 GMT', 'content-type': 'application/json', 'content-length': '203', 'connection': 'keep-alive', 'x-amzn-requestid': 'a515822d-cdf7-4a6f-8d17-9d4b2c26503d', 'x-amzn-bedrock-invocation-latency': '277', 'x-amzn-bedrock-output-token-count': '26', 'x-amzn-bedrock-input-token-count': '238'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0580>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"How many types of leaves are available in Gemini Solutions?\"\n}","prompt_token_count":238,"generation_token_count":26,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many types of leaves are available in Gemini Solutions?
INFO:__main__:Query stored successfully with ID: 66f3b92405895ec2589bae02
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c589d1bc-efa2-4603-9fd0-840defeffb7a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 07:18:00 GMT', 'content-type': 'application/json', 'content-length': '1101', 'connection': 'keep-alive', 'x-amzn-requestid': 'c589d1bc-efa2-4603-9fd0-840defeffb7a', 'x-amzn-bedrock-invocation-latency': '2497', 'x-amzn-bedrock-output-token-count': '269', 'x-amzn-bedrock-input-token-count': '1144'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f550>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions provides various types of leaves to its employees. However, the exact number of types of leaves available is not explicitly mentioned in the provided documents. The documents primarily focus on the rules and policies governing leaves, employee stock options, and risk management. It is recommended to refer to the company's HR department or employee handbook for detailed information on the types of leaves available.\",\n    \"References\": [\n        {\n            \"Statement\": \"Rules to avail leaves\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page 7\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk\",\n        \"query\": \"How many types of leaves are available in Gemini Solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1144,"generation_token_count":269,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f3b92805895ec2589bae03
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [25/Sep/2024 07:18:00] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how many leaves are there in gemini solutions?', 'conversation_id': 'a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk'}
INFO:__main__:Received query: how many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5cd134f1-e8f7-4b88-a529-be82af14d5ad', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 07:25:30 GMT', 'content-type': 'application/json', 'content-length': '203', 'connection': 'keep-alive', 'x-amzn-requestid': '5cd134f1-e8f7-4b88-a529-be82af14d5ad', 'x-amzn-bedrock-invocation-latency': '298', 'x-amzn-bedrock-output-token-count': '26', 'x-amzn-bedrock-input-token-count': '377'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ece0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"How many types of leaves are available in Gemini Solutions?\"\n}","prompt_token_count":377,"generation_token_count":26,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many types of leaves are available in Gemini Solutions?
INFO:__main__:Query stored successfully with ID: 66f3baea05895ec2589bae05
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8374ad78-9908-431b-9159-a658f888d1e8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 07:25:34 GMT', 'content-type': 'application/json', 'content-length': '1101', 'connection': 'keep-alive', 'x-amzn-requestid': '8374ad78-9908-431b-9159-a658f888d1e8', 'x-amzn-bedrock-invocation-latency': '2482', 'x-amzn-bedrock-output-token-count': '269', 'x-amzn-bedrock-input-token-count': '1144'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f5b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions provides various types of leaves to its employees. However, the exact number of types of leaves available is not explicitly mentioned in the provided documents. The documents primarily focus on the rules and policies governing leaves, employee stock options, and risk management. It is recommended to refer to the company's HR department or employee handbook for detailed information on the types of leaves available.\",\n    \"References\": [\n        {\n            \"Statement\": \"Rules to avail leaves\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page 7\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk\",\n        \"query\": \"How many types of leaves are available in Gemini Solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1144,"generation_token_count":269,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f3baee05895ec2589bae06
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [25/Sep/2024 07:25:34] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:147.185.132.34 - - [25/Sep/2024 08:06:43] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'What are the steps to download my payslips?', 'conversation_id': 'abc'}
INFO:__main__:Received query: What are the steps to download my payslips?
INFO:__main__:Received conversation_id: abc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f4176605895ec2589bae08
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8566f850-6e70-4570-9219-c90a38c45dac', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 14:00:10 GMT', 'content-type': 'application/json', 'content-length': '1138', 'connection': 'keep-alive', 'x-amzn-requestid': '8566f850-6e70-4570-9219-c90a38c45dac', 'x-amzn-bedrock-invocation-latency': '2401', 'x-amzn-bedrock-output-token-count': '238', 'x-amzn-bedrock-input-token-count': '849'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f250>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"To download your payslips, you can log in to your GreytHR account and navigate to the payslips section to view your monthly payslips. Alternatively, you can also access your payslips through the 'Accounts portal' tab on MIS, which will further lead you to the GreytHR portal.\",\n    \"References\": [\n        {\n            \"Statement\": \"You can log in to your GreytHR account, navigate to your payslips section to view your monthly payslips there.\",\n            \"source\": \"Text Block 1\"\n        },\n        {\n            \"Statement\": \"As mentioned during your induction, please visit the Accounts portal tab on MIS, it will further lead you to GreytHR portal. You can view/ download payslips from there.\",\n            \"source\": \"Text Block 2\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"abc\",\n        \"query\": \"What are the steps to download my payslips?\",\n        \"source\": \"GreytHR account and MIS portal\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":849,"generation_token_count":238,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4176a05895ec2589bae09
INFO:__main__:Process completed successfully.
INFO:werkzeug:182.69.182.30 - - [25/Sep/2024 14:00:10] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:werkzeug:223.190.82.227 - - [25/Sep/2024 16:29:46] "[31m[1mPOST /process_query HTTP/1.1[0m" 401 -
INFO:__main__:Flask handler started.
INFO:werkzeug:223.190.82.227 - - [25/Sep/2024 16:31:14] "[31m[1mPOST /process_query HTTP/1.1[0m" 401 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f43b0505895ec2589bae0b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f7fb4f14-ad40-4b42-bcc3-b617563aecdb', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:32:08 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f7fb4f14-ad40-4b42-bcc3-b617563aecdb', 'x-amzn-bedrock-invocation-latency': '1319', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024e9b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f43b0805895ec2589bae0c
INFO:__main__:Process completed successfully.
INFO:werkzeug:223.190.82.227 - - [25/Sep/2024 16:32:08] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c443956c-cea5-4f46-b9b2-e05bc9c83ff4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:33:10 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'c443956c-cea5-4f46-b9b2-e05bc9c83ff4', 'x-amzn-bedrock-invocation-latency': '299', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac13102b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f43b4605895ec2589bae0e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8c9d1c99-7996-453b-b66d-4ade82080917', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:33:13 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '8c9d1c99-7996-453b-b66d-4ade82080917', 'x-amzn-bedrock-invocation-latency': '1343', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e950>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f43b4905895ec2589bae0f
INFO:__main__:Process completed successfully.
INFO:werkzeug:223.190.82.227 - - [25/Sep/2024 16:33:13] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c4a79865-fac4-4fd9-80f9-07520a374942', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:33:40 GMT', 'content-type': 'application/json', 'content-length': '234', 'connection': 'keep-alive', 'x-amzn-requestid': 'c4a79865-fac4-4fd9-80f9-07520a374942', 'x-amzn-bedrock-invocation-latency': '324', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '358'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024fc40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"What information does Gemini Solutions provide about employee leaves or vacation policies?\"\n}","prompt_token_count":358,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What information does Gemini Solutions provide about employee leaves or vacation policies?
INFO:__main__:Query stored successfully with ID: 66f43b6405895ec2589bae11
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '46c680d2-60c6-46b2-89c6-1852f3066844', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:33:44 GMT', 'content-type': 'application/json', 'content-length': '1718', 'connection': 'keep-alive', 'x-amzn-requestid': '46c680d2-60c6-46b2-89c6-1852f3066844', 'x-amzn-bedrock-invocation-latency': '3204', 'x-amzn-bedrock-output-token-count': '326', 'x-amzn-bedrock-input-token-count': '1165'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e7a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions provides information about employee leaves or vacation policies through its Leave Policy Version 5.0. The policy outlines the purpose, scope, and objective of granting leave to employees. It also defines the process and procedures regarding employee leave entitlements, including types of leaves, rules to avail leaves, and leave encashment. The policy encourages employees to discuss and agree on leave timings with their reporting manager and obtain prior sanction before proceeding on leave. Additionally, the policy provides guidelines for sick leaves, emergency leaves, and casual leaves.\",\n    \"References\": [\n        {\n            \"Statement\": \"The purpose of this policy is about granting leave and to help employees to know about their entitlements and to make it easy for employees to avail themselves effectively.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 1\"\n        },\n        {\n            \"Statement\": \"Employees are encouraged to discuss and agree on the timings of their leave with their respective reporting manager/team leads/vertical head and obtain prior sanction before proceeding on leave (2 weeks prior).\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 8\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"What information does Gemini Solutions provide about employee leaves or vacation policies?\",\n        \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1165,"generation_token_count":326,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f43b6805895ec2589bae13
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.89.60.229 - - [25/Sep/2024 16:33:44] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '091165c7-fea1-47d5-8cba-3eb44ebe4d94', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:33:45 GMT', 'content-type': 'application/json', 'content-length': '234', 'connection': 'keep-alive', 'x-amzn-requestid': '091165c7-fea1-47d5-8cba-3eb44ebe4d94', 'x-amzn-bedrock-invocation-latency': '320', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '361'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac18466e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"What information does Gemini Solutions provide about employee leaves or vacation policies?\"\n}","prompt_token_count":361,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What information does Gemini Solutions provide about employee leaves or vacation policies?
INFO:__main__:Query stored successfully with ID: 66f43b6905895ec2589bae14
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '674f1077-f35d-45ac-9150-307f2fd496e3', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:33:49 GMT', 'content-type': 'application/json', 'content-length': '1718', 'connection': 'keep-alive', 'x-amzn-requestid': '674f1077-f35d-45ac-9150-307f2fd496e3', 'x-amzn-bedrock-invocation-latency': '3199', 'x-amzn-bedrock-output-token-count': '326', 'x-amzn-bedrock-input-token-count': '1165'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f1e70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions provides information about employee leaves or vacation policies through its Leave Policy Version 5.0. The policy outlines the purpose, scope, and objective of granting leave to employees. It also defines the process and procedures regarding employee leave entitlements, including types of leaves, rules to avail leaves, and leave encashment. The policy encourages employees to discuss and agree on leave timings with their reporting manager and obtain prior sanction before proceeding on leave. Additionally, the policy provides guidelines for sick leaves, emergency leaves, and casual leaves.\",\n    \"References\": [\n        {\n            \"Statement\": \"The purpose of this policy is about granting leave and to help employees to know about their entitlements and to make it easy for employees to avail themselves effectively.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 1\"\n        },\n        {\n            \"Statement\": \"Employees are encouraged to discuss and agree on the timings of their leave with their respective reporting manager/team leads/vertical head and obtain prior sanction before proceeding on leave (2 weeks prior).\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 8\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"What information does Gemini Solutions provide about employee leaves or vacation policies?\",\n        \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1165,"generation_token_count":326,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f43b6d05895ec2589bae15
INFO:__main__:Process completed successfully.
INFO:werkzeug:35.173.230.113 - - [25/Sep/2024 16:33:49] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'cd79490b-59c9-4f14-b42a-3cdce2d63ec1', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:36:53 GMT', 'content-type': 'application/json', 'content-length': '225', 'connection': 'keep-alive', 'x-amzn-requestid': 'cd79490b-59c9-4f14-b42a-3cdce2d63ec1', 'x-amzn-bedrock-invocation-latency': '436', 'x-amzn-bedrock-output-token-count': '33', 'x-amzn-bedrock-input-token-count': '706'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2ec0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"What types of leaves are mentioned in Gemini Solutions' Leave Policy Version 5.0?\"\n}","prompt_token_count":706,"generation_token_count":33,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What types of leaves are mentioned in Gemini Solutions' Leave Policy Version 5.0?
INFO:__main__:Query stored successfully with ID: 66f43c2505895ec2589bae17
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'cc7f6018-223c-4bc0-9335-0140745bbfad', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:36:57 GMT', 'content-type': 'application/json', 'content-length': '1378', 'connection': 'keep-alive', 'x-amzn-requestid': 'cc7f6018-223c-4bc0-9335-0140745bbfad', 'x-amzn-bedrock-invocation-latency': '2979', 'x-amzn-bedrock-output-token-count': '300', 'x-amzn-bedrock-input-token-count': '1208'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ffd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"According to Gemini Solutions' Leave Policy Version 5.0, the following types of leaves are mentioned: * Sick Leaves: 7 days of sick leave on full fixed pay in one leave year. * Casual Leave: recorded if there is outstanding leave or as Leave without Pay if leave entitlement is exhausted. * Emergency Leave: can be rejected at the discretion of the Supervisor.\",\n    \"References\": [\n        {\n            \"Statement\": \"Every confirmed employee will be allowed 7 days of sick leave on full fixed pay in one leave year.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 5 - Sheet Name: N/A - Index: N/A\"\n        },\n        {\n            \"Statement\": \"Such leave shall be recorded as casual leave if there is outstanding leave or as Leave without Pay if his/her leave entitlement is exhausted.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 8 - Sheet Name: N/A - Index: N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"What types of leaves are mentioned in Gemini Solutions' Leave Policy Version 5.0?\",\n        \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1208,"generation_token_count":300,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f43c2905895ec2589bae18
INFO:__main__:Process completed successfully.
INFO:werkzeug:223.190.82.227 - - [25/Sep/2024 16:36:57] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a22ef435-93a2-47c5-a171-4c5780d165d0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:40:33 GMT', 'content-type': 'application/json', 'content-length': '233', 'connection': 'keep-alive', 'x-amzn-requestid': 'a22ef435-93a2-47c5-a171-4c5780d165d0', 'x-amzn-bedrock-invocation-latency': '400', 'x-amzn-bedrock-output-token-count': '35', 'x-amzn-bedrock-input-token-count': '891'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ccd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"need_to_rewrite\": true,\n    \"query\": \"What types of leaves are mentioned in Gemini Solutions' Leave Policy Version 5.0?\"\n}","prompt_token_count":891,"generation_token_count":35,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What types of leaves are mentioned in Gemini Solutions' Leave Policy Version 5.0?
INFO:__main__:Query stored successfully with ID: 66f43d0105895ec2589bae1a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1bfb859b-a427-455f-8664-1a2bf34c82da', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 16:40:38 GMT', 'content-type': 'application/json', 'content-length': '1618', 'connection': 'keep-alive', 'x-amzn-requestid': '1bfb859b-a427-455f-8664-1a2bf34c82da', 'x-amzn-bedrock-invocation-latency': '3567', 'x-amzn-bedrock-output-token-count': '359', 'x-amzn-bedrock-input-token-count': '1208'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c580>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"According to Gemini Solutions' Leave Policy Version 5.0, the following types of leaves are mentioned: * Sick Leaves: 7 days of sick leave on full fixed pay in one leave year. * Casual Leave: recorded if there is outstanding leave or as Leave without Pay if leave entitlement is exhausted. * Emergency Leave: can be rejected at the discretion of the Supervisor.\",\n    \"References\": [\n        {\n            \"Statement\": \"Every confirmed employee will be allowed 7 days of sick leave on full fixed pay in one leave year.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 5 - Sheet Name: N/A - Index: N/A\"\n        },\n        {\n            \"Statement\": \"Such leave shall be recorded as casual leave if there is outstanding leave or as Leave without Pay if his/her leave entitlement is exhausted.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 8 - Sheet Name: N/A - Index: N/A\"\n        },\n        {\n            \"Statement\": \"Emergency leave can be rejected at the discretion of the Supervisor.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 5 - Sheet Name: N/A - Index: N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"What types of leaves are mentioned in Gemini Solutions' Leave Policy Version 5.0?\",\n        \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1208,"generation_token_count":359,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f43d0605895ec2589bae1b
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.209.34.40 - - [25/Sep/2024 16:40:38] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 4
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0e703eac-79c9-49b7-9f25-9ec391e42f81', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 17:31:11 GMT', 'content-type': 'application/json', 'content-length': '225', 'connection': 'keep-alive', 'x-amzn-requestid': '0e703eac-79c9-49b7-9f25-9ec391e42f81', 'x-amzn-bedrock-invocation-latency': '448', 'x-amzn-bedrock-output-token-count': '33', 'x-amzn-bedrock-input-token-count': '709'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852050>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"What types of leaves are mentioned in Gemini Solutions' Leave Policy Version 5.0?\"\n}","prompt_token_count":709,"generation_token_count":33,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What types of leaves are mentioned in Gemini Solutions' Leave Policy Version 5.0?
INFO:__main__:Query stored successfully with ID: 66f448df05895ec2589bae1d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c86feefb-5ddc-4fd2-a196-95cdbd2b62a0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 17:31:16 GMT', 'content-type': 'application/json', 'content-length': '1378', 'connection': 'keep-alive', 'x-amzn-requestid': 'c86feefb-5ddc-4fd2-a196-95cdbd2b62a0', 'x-amzn-bedrock-invocation-latency': '2926', 'x-amzn-bedrock-output-token-count': '300', 'x-amzn-bedrock-input-token-count': '1208'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c070>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"According to Gemini Solutions' Leave Policy Version 5.0, the following types of leaves are mentioned: * Sick Leaves: 7 days of sick leave on full fixed pay in one leave year. * Casual Leave: recorded if there is outstanding leave or as Leave without Pay if leave entitlement is exhausted. * Emergency Leave: can be rejected at the discretion of the Supervisor.\",\n    \"References\": [\n        {\n            \"Statement\": \"Every confirmed employee will be allowed 7 days of sick leave on full fixed pay in one leave year.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 5 - Sheet Name: N/A - Index: N/A\"\n        },\n        {\n            \"Statement\": \"Such leave shall be recorded as casual leave if there is outstanding leave or as Leave without Pay if his/her leave entitlement is exhausted.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 8 - Sheet Name: N/A - Index: N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"What types of leaves are mentioned in Gemini Solutions' Leave Policy Version 5.0?\",\n        \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":1208,"generation_token_count":300,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f448e405895ec2589bae1e
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.235.103.67 - - [25/Sep/2024 17:31:16] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f4590b05895ec2589bae20
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7d78fe95-73dd-42e6-95ab-fb09b9777a4f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 18:40:14 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '7d78fe95-73dd-42e6-95ab-fb09b9777a4f', 'x-amzn-bedrock-invocation-latency': '1355', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2320>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4590e05895ec2589bae21
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.159.167.123 - - [25/Sep/2024 18:40:14] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:170.64.181.243 - - [25/Sep/2024 19:02:16] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x01\x00{\x01\x00\x00w\x03\x03Ý\x15þ\x96_')
INFO:werkzeug:170.64.181.243 - - [25/Sep/2024 19:02:16] "[31m[1m\x16\x03\x01\x00{\x01\x00\x00w\x03\x03Ý\x15þ\x96_\x1d¥\x14\x9a[0m" 400 -
ERROR:werkzeug:170.64.181.243 - - [25/Sep/2024 19:02:16] code 400, message Bad request version ('À\x14À')
INFO:werkzeug:170.64.181.243 - - [25/Sep/2024 19:02:16] "[31m[1m\x16\x03\x01\x00{\x01\x00\x00w\x03\x03×K#â ª {AçÌ$ü×\x19éþÛ}ÔË_l©\x9d{\x0b'8ÂK²\x00\x00\x1aÀ/À+À\x11À\x07À\x13À\x09À\x14À[0m" 400 -
INFO:werkzeug:170.64.181.243 - - [25/Sep/2024 19:02:17] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd37e6565-7cb5-4386-9f0f-26839fe53b64', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 19:31:40 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'd37e6565-7cb5-4386-9f0f-26839fe53b64', 'x-amzn-bedrock-invocation-latency': '358', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0ca0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f4651c05895ec2589bae23
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7d0c9a07-6da1-4724-a855-3dea81e5a750', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 19:31:43 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '7d0c9a07-6da1-4724-a855-3dea81e5a750', 'x-amzn-bedrock-invocation-latency': '1266', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f0a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4651f05895ec2589bae24
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.235.103.67 - - [25/Sep/2024 19:31:43] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '492c2009-6604-4b4f-8df3-d54e25415def', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 20:31:04 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '492c2009-6604-4b4f-8df3-d54e25415def', 'x-amzn-bedrock-invocation-latency': '287', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f35b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f4730805895ec2589bae26
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f975222c-f240-4cb3-9536-f80bc673096d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 20:31:08 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f975222c-f240-4cb3-9536-f80bc673096d', 'x-amzn-bedrock-invocation-latency': '1339', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028d9f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4730c05895ec2589bae27
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.23.214.241 - - [25/Sep/2024 20:31:08] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'bfb9ac62-4d0d-4ea2-aab7-a60853a0e659', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 21:30:08 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'bfb9ac62-4d0d-4ea2-aab7-a60853a0e659', 'x-amzn-bedrock-invocation-latency': '344', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0fd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f480e005895ec2589bae29
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '88f1387e-324c-4f61-b5ea-d3c34a586127', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 21:30:11 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '88f1387e-324c-4f61-b5ea-d3c34a586127', 'x-amzn-bedrock-invocation-latency': '1344', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e800>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f480e305895ec2589bae2a
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.82.188.164 - - [25/Sep/2024 21:30:11] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f48f2905895ec2589bae2c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd933b530-74e3-4b53-8a8d-3848b07310e6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 22:31:08 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd933b530-74e3-4b53-8a8d-3848b07310e6', 'x-amzn-bedrock-invocation-latency': '1323', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac13fae30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f48f2c05895ec2589bae2d
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.201.235.171 - - [25/Sep/2024 22:31:08] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '38710a4e-62f0-4975-a37b-5aaa741e3441', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 23:30:47 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '38710a4e-62f0-4975-a37b-5aaa741e3441', 'x-amzn-bedrock-invocation-latency': '363', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3670>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f49d2705895ec2589bae2f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4c61f9f0-72da-48dc-b263-81f8546465cb', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Wed, 25 Sep 2024 23:30:50 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '4c61f9f0-72da-48dc-b263-81f8546465cb', 'x-amzn-bedrock-invocation-latency': '1356', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028cc40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f49d2a05895ec2589bae30
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.88.151.218 - - [25/Sep/2024 23:30:50] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f4ab4405895ec2589bae32
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a253e370-ad9c-47af-806b-d50978184e8f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 00:31:03 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'a253e370-ad9c-47af-806b-d50978184e8f', 'x-amzn-bedrock-invocation-latency': '1427', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028d060>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4ab4705895ec2589bae33
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.237.67.81 - - [26/Sep/2024 00:31:03] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f4b97905895ec2589bae35
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4bd4a08d-c81a-4396-9973-a7dac8f8fd86', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 01:31:39 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '4bd4a08d-c81a-4396-9973-a7dac8f8fd86', 'x-amzn-bedrock-invocation-latency': '1333', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c490>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4b97b05895ec2589bae36
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.206.232.214 - - [26/Sep/2024 01:31:39] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:198.235.24.2 - - [26/Sep/2024 02:10:29] "[33mGET / HTTP/1.0[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '10d2210f-1df0-435c-b7ec-47c541c640a4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 02:30:42 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '10d2210f-1df0-435c-b7ec-47c541c640a4', 'x-amzn-bedrock-invocation-latency': '314', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852110>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f4c75205895ec2589bae38
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '82bde951-f011-4da9-8188-55f213b81663', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 02:30:44 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '82bde951-f011-4da9-8188-55f213b81663', 'x-amzn-bedrock-invocation-latency': '1350', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c490>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4c75405895ec2589bae39
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.84.68.90 - - [26/Sep/2024 02:30:44] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '82479103-019e-4443-b4a8-3c470c4f9dab', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 03:30:18 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '82479103-019e-4443-b4a8-3c470c4f9dab', 'x-amzn-bedrock-invocation-latency': '310', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f18a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f4d54a05895ec2589bae3b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd0931ff1-881f-434c-9096-786cee0f5928', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 03:30:21 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd0931ff1-881f-434c-9096-786cee0f5928', 'x-amzn-bedrock-invocation-latency': '1355', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c070>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4d54d05895ec2589bae3c
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.88.252.232 - - [26/Sep/2024 03:30:21] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:40.118.213.55 - - [26/Sep/2024 04:02:06] "[33mGET /v2/ HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f4e36c05895ec2589bae3e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8ef584ff-5bc7-45e3-9084-c5bfdf1cc8cf', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 04:30:39 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '8ef584ff-5bc7-45e3-9084-c5bfdf1cc8cf', 'x-amzn-bedrock-invocation-latency': '1385', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c610>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4e36f05895ec2589bae3f
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.90.40.127 - - [26/Sep/2024 04:30:39] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '655acfc7-779a-4a79-95b1-a21117972928', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 04:41:11 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '655acfc7-779a-4a79-95b1-a21117972928', 'x-amzn-bedrock-invocation-latency': '291', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028cc70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f4e5e705895ec2589bae41
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1632e576-bce1-4835-9fea-e9fcd66ac452', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 04:41:14 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '1632e576-bce1-4835-9fea-e9fcd66ac452', 'x-amzn-bedrock-invocation-latency': '1264', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2f80>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4e5ea05895ec2589bae42
INFO:__main__:Process completed successfully.
INFO:werkzeug:27.59.78.160 - - [26/Sep/2024 04:41:14] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0c522a19-60cc-4938-91fd-1f0b9bf5ab76', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 05:30:39 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '0c522a19-60cc-4938-91fd-1f0b9bf5ab76', 'x-amzn-bedrock-invocation-latency': '309', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024c4f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f4f17f05895ec2589bae44
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ab2e2e5b-7a4c-4459-91c8-1fe8a401d6ff', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 05:30:42 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'ab2e2e5b-7a4c-4459-91c8-1fe8a401d6ff', 'x-amzn-bedrock-invocation-latency': '1347', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ee90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4f18205895ec2589bae45
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.83.13.207 - - [26/Sep/2024 05:30:42] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:3.23.132.121 - - [26/Sep/2024 06:21:46] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f4ffa505895ec2589bae47
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '19aacd0c-0828-4030-8cbb-203963825336', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 06:31:04 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '19aacd0c-0828-4030-8cbb-203963825336', 'x-amzn-bedrock-invocation-latency': '1308', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f040>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f4ffa805895ec2589bae48
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.162.26.152 - - [26/Sep/2024 06:31:04] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '190c06e7-a0fb-4845-9ff1-3ebc162a4aa4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 07:30:48 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '190c06e7-a0fb-4845-9ff1-3ebc162a4aa4', 'x-amzn-bedrock-invocation-latency': '283', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c7c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f50da805895ec2589bae4a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '403dbbe5-9c26-4c76-8b14-c4ef3e10bb10', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 07:30:51 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '403dbbe5-9c26-4c76-8b14-c4ef3e10bb10', 'x-amzn-bedrock-invocation-latency': '1357', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0a90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f50dab05895ec2589bae4b
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.211.248.211 - - [26/Sep/2024 07:30:51] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:161.35.37.214 - - [26/Sep/2024 08:24:26] code 400, message Bad request version ('¼ÕO\x9d\x98\x8c\x8aÙ\x8bÔ\x96:Ü]\x9eáÄi\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À')
INFO:werkzeug:161.35.37.214 - - [26/Sep/2024 08:24:26] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03akrGfMSc\x09þ+µ/\x0c¼ÕO\x9d\x98\x8c\x8aÙ\x8bÔ\x96:Ü]\x9eáÄi\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f51bc305895ec2589bae4d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8b313b91-13a8-4fb9-a4a3-29588ef6c0e4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 08:31:01 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '8b313b91-13a8-4fb9-a4a3-29588ef6c0e4', 'x-amzn-bedrock-invocation-latency': '1409', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0af0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f51bc505895ec2589bae4e
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.90.48.146 - - [26/Sep/2024 08:31:01] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f529d705895ec2589bae50
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ea8e69b1-ddf9-422b-b9f6-cefbdcb9b1dc', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 09:31:05 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'ea8e69b1-ddf9-422b-b9f6-cefbdcb9b1dc', 'x-amzn-bedrock-invocation-latency': '1315', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e920>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f529d905895ec2589bae51
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.231.105.225 - - [26/Sep/2024 09:31:05] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f537f205895ec2589bae53
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'acf97277-f938-4e14-95c8-caed7beba431', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 10:31:17 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'acf97277-f938-4e14-95c8-caed7beba431', 'x-amzn-bedrock-invocation-latency': '1369', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024d090>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f537f505895ec2589bae54
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.82.213.156 - - [26/Sep/2024 10:31:17] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '20b6b119-eb63-4594-9c41-e503c3a476f8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 11:30:30 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '20b6b119-eb63-4594-9c41-e503c3a476f8', 'x-amzn-bedrock-invocation-latency': '299', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028dd50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f545d605895ec2589bae56
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ac6def75-8609-4f26-92b5-1155b4463f73', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 11:30:33 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'ac6def75-8609-4f26-92b5-1155b4463f73', 'x-amzn-bedrock-invocation-latency': '1348', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0a00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f545d905895ec2589bae57
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.236.186.10 - - [26/Sep/2024 11:30:33] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi jinie', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: hi jinie
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f547a505895ec2589bae59
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'fe1c04a5-2c7a-437e-9c83-f5a4b9c11f74', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 11:38:16 GMT', 'content-type': 'application/json', 'content-length': '592', 'connection': 'keep-alive', 'x-amzn-requestid': 'fe1c04a5-2c7a-437e-9c83-f5a4b9c11f74', 'x-amzn-bedrock-invocation-latency': '1775', 'x-amzn-bedrock-output-token-count': '179', 'x-amzn-bedrock-input-token-count': '903'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3cd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"hi jinie\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":903,"generation_token_count":179,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f547a805895ec2589bae5a
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [26/Sep/2024 11:38:16] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'can you tell me about current lwp policy?', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: can you tell me about current lwp policy?
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd6705540-2e67-4e5d-aa35-01876f6b00bc', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 11:40:03 GMT', 'content-type': 'application/json', 'content-length': '195', 'connection': 'keep-alive', 'x-amzn-requestid': 'd6705540-2e67-4e5d-aa35-01876f6b00bc', 'x-amzn-bedrock-invocation-latency': '308', 'x-amzn-bedrock-output-token-count': '28', 'x-amzn-bedrock-input-token-count': '223'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c760>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"what is the current leave without pay (lwp) policy?\"\n}","prompt_token_count":223,"generation_token_count":28,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: what is the current leave without pay (lwp) policy?
INFO:__main__:Query stored successfully with ID: 66f5481305895ec2589bae5c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f60df481-c537-4bfa-b728-b995c917f077', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 11:40:08 GMT', 'content-type': 'application/json', 'content-length': '1556', 'connection': 'keep-alive', 'x-amzn-requestid': 'f60df481-c537-4bfa-b728-b995c917f077', 'x-amzn-bedrock-invocation-latency': '3910', 'x-amzn-bedrock-output-token-count': '399', 'x-amzn-bedrock-input-token-count': '997'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ff40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The current Leave Without Pay (LWP) policy at Gemini Solutions is subject to approval and having no leaves to an employee's credit. During this period, the employee will not be paid any salary. The possible reasons for availing LWP include examination, accident/medical treatment, marriage, and unforeseen circumstances like the death of a family member. The LWP deduction will be done on fixed pay, calculated as Leave without pay x Monthly fixed pay/30.\",\n    \"References\": [\n        {\n            \"Statement\": \"Subject to approval and having no leaves to his/her credit.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page 7\"\n        },\n        {\n            \"Statement\": \"During this period, the employee will not be paid any salary.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page 7\"\n        },\n        {\n            \"Statement\": \"LWP deduction will be done on fixed pay\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page 7\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"what is the current leave without pay (lwp) policy?\",\n        \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":997,"generation_token_count":399,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f5481805895ec2589bae5d
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [26/Sep/2024 11:40:08] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f553f305895ec2589bae5f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b92ce3da-b372-4b0c-9199-ecb1b41ee14a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 12:30:45 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'b92ce3da-b372-4b0c-9199-ecb1b41ee14a', 'x-amzn-bedrock-invocation-latency': '1395', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08528c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f553f505895ec2589bae60
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.156.57.68 - - [26/Sep/2024 12:30:45] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '17125da7-a4e3-4da3-89e6-c1829d4dc2e9', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 13:30:07 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '17125da7-a4e3-4da3-89e6-c1829d4dc2e9', 'x-amzn-bedrock-invocation-latency': '293', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3220>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f561df05895ec2589bae62
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f313168a-39e0-4ea3-9472-0cf153c93198', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 13:30:10 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f313168a-39e0-4ea3-9472-0cf153c93198', 'x-amzn-bedrock-invocation-latency': '1357', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a11b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f561e205895ec2589bae63
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.207.248.233 - - [26/Sep/2024 13:30:10] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f5700905895ec2589bae65
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '70719b18-71f4-4663-a295-13cc01db33f9', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 14:30:36 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '70719b18-71f4-4663-a295-13cc01db33f9', 'x-amzn-bedrock-invocation-latency': '1402', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a20e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f5700c05895ec2589bae66
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.157.207.15 - - [26/Sep/2024 14:30:36] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f57e1e05895ec2589bae68
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'aedfce90-6694-45db-a480-349e387274b0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 15:30:41 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'aedfce90-6694-45db-a480-349e387274b0', 'x-amzn-bedrock-invocation-latency': '1413', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3af0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f57e2105895ec2589bae69
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.204.244.253 - - [26/Sep/2024 15:30:41] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'dc11263a-c9c3-46ad-b069-c4498f1d80f0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 16:30:30 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'dc11263a-c9c3-46ad-b069-c4498f1d80f0', 'x-amzn-bedrock-invocation-latency': '333', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c5e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f58c2605895ec2589bae6b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '25f76a95-3ffc-4d3f-8135-c07353a4315a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 16:30:33 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '25f76a95-3ffc-4d3f-8135-c07353a4315a', 'x-amzn-bedrock-invocation-latency': '1273', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1060>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f58c2905895ec2589bae6c
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.91.25.62 - - [26/Sep/2024 16:30:33] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd4aef437-b913-49e8-a03a-bb55e0693b5b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 17:30:04 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'd4aef437-b913-49e8-a03a-bb55e0693b5b', 'x-amzn-bedrock-invocation-latency': '306', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028dd20>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f59a1c05895ec2589bae6e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5453d3b1-0861-442c-b206-c2977d2cfc65', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 17:30:06 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '5453d3b1-0861-442c-b206-c2977d2cfc65', 'x-amzn-bedrock-invocation-latency': '1353', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2dd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f59a1e05895ec2589bae6f
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.91.195.197 - - [26/Sep/2024 17:30:06] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f5a89105895ec2589bae71
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a5b044ec-6be3-46f9-acf6-5bd933d12153', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 18:31:48 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'a5b044ec-6be3-46f9-acf6-5bd933d12153', 'x-amzn-bedrock-invocation-latency': '1371', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a11b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f5a89405895ec2589bae72
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.95.223.221 - - [26/Sep/2024 18:31:48] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c5e1bd39-2ed8-4dff-9267-535005440341', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 19:30:25 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'c5e1bd39-2ed8-4dff-9267-535005440341', 'x-amzn-bedrock-invocation-latency': '301', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ce50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f5b65105895ec2589bae74
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '98ee20b7-50af-42d6-addb-b3390581635d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 19:30:27 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '98ee20b7-50af-42d6-addb-b3390581635d', 'x-amzn-bedrock-invocation-latency': '1387', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028da20>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f5b65305895ec2589bae75
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.81.160.229 - - [26/Sep/2024 19:30:27] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '14da27fe-3816-4098-8663-4d2c68a7f301', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 20:30:19 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '14da27fe-3816-4098-8663-4d2c68a7f301', 'x-amzn-bedrock-invocation-latency': '370', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024c790>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f5c45b05895ec2589bae77
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7b855db6-5d21-4855-a22b-95ca04584b2b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 20:30:22 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '7b855db6-5d21-4855-a22b-95ca04584b2b', 'x-amzn-bedrock-invocation-latency': '1376', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a26b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f5c45e05895ec2589bae78
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.236.186.10 - - [26/Sep/2024 20:30:22] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f5d26f05895ec2589bae7a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3d656fcc-1be5-4d08-a354-94ba7049591c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 21:30:26 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '3d656fcc-1be5-4d08-a354-94ba7049591c', 'x-amzn-bedrock-invocation-latency': '1429', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a05b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f5d27205895ec2589bae7b
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.91.195.197 - - [26/Sep/2024 21:30:26] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '636a90b3-5d73-4a97-a729-6758d8d767e7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 22:30:20 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '636a90b3-5d73-4a97-a729-6758d8d767e7', 'x-amzn-bedrock-invocation-latency': '326', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac141ff10>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f5e07c05895ec2589bae7d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '810e1e75-e778-4ab1-b51f-acd0f91a71e7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 22:30:22 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '810e1e75-e778-4ab1-b51f-acd0f91a71e7', 'x-amzn-bedrock-invocation-latency': '1354', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3520>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f5e07e05895ec2589bae7e
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.92.128.92 - - [26/Sep/2024 22:30:22] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '525c50d4-d648-4c54-ba69-d7d323fc9f3c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 23:30:05 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '525c50d4-d648-4c54-ba69-d7d323fc9f3c', 'x-amzn-bedrock-invocation-latency': '364', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f2b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f5ee7d05895ec2589bae80
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'fc5429e4-7c03-48f6-a785-daae0670e0ca', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 26 Sep 2024 23:30:08 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'fc5429e4-7c03-48f6-a785-daae0670e0ca', 'x-amzn-bedrock-invocation-latency': '1272', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f4c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f5ee8005895ec2589bae81
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.239.201.90 - - [26/Sep/2024 23:30:08] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:87.236.176.168 - - [26/Sep/2024 23:54:00] code 400, message Bad request version ('RTSP/1.0')
INFO:werkzeug:87.236.176.168 - - [26/Sep/2024 23:54:00] "[31m[1mOPTIONS / RTSP/1.0[0m" 400 -
ERROR:werkzeug:87.236.176.168 - - [26/Sep/2024 23:54:03] code 400, message Bad request version ('GetClassName\x00\x00\x00\x02\x04\x00\x00\x00\x00\x01\x00')
INFO:werkzeug:87.236.176.168 - - [26/Sep/2024 23:54:03] "[31m[1m\x00\x00\x00\x1f\x00\x00\x00\x00\x00\x00\x00\x0cGetClassName\x00\x00\x00\x02\x04\x00\x00\x00\x00\x01\x00[0m" 400 -
INFO:werkzeug:87.236.176.167 - - [26/Sep/2024 23:54:18] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f5fcb205895ec2589bae83
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9ea8886c-f917-4169-9048-67f35c2fe89f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 00:30:45 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '9ea8886c-f917-4169-9048-67f35c2fe89f', 'x-amzn-bedrock-invocation-latency': '1441', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3820>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f5fcb505895ec2589bae84
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.83.165.42 - - [27/Sep/2024 00:30:45] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:45.84.89.2 - - [27/Sep/2024 01:20:17] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '56158632-7aca-422b-adce-35d8374219ec', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 01:30:11 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '56158632-7aca-422b-adce-35d8374219ec', 'x-amzn-bedrock-invocation-latency': '315', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f18d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f60aa305895ec2589bae86
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '28308751-bc66-4faa-8ae8-4ce3ee6aac32', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 01:30:14 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '28308751-bc66-4faa-8ae8-4ce3ee6aac32', 'x-amzn-bedrock-invocation-latency': '1375', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0a30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f60aa605895ec2589bae87
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.214.179.145 - - [27/Sep/2024 01:30:14] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:198.235.24.171 - - [27/Sep/2024 02:21:04] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '35baa2e2-0768-44e2-9c37-6f841a236c49', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 02:30:06 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '35baa2e2-0768-44e2-9c37-6f841a236c49', 'x-amzn-bedrock-invocation-latency': '339', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028cc40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f618ae05895ec2589bae89
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f393e3e4-7c83-4162-89ea-1f37f8d62ab7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 02:30:09 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f393e3e4-7c83-4162-89ea-1f37f8d62ab7', 'x-amzn-bedrock-invocation-latency': '1375', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3160>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f618b105895ec2589bae8a
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.232.105.3 - - [27/Sep/2024 02:30:09] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:178.128.167.206 - - [27/Sep/2024 03:16:01] code 400, message Bad request version ('À\x14À')
INFO:werkzeug:178.128.167.206 - - [27/Sep/2024 03:16:01] "[31m[1m\x16\x03\x01\x00{\x01\x00\x00w\x03\x03\x1fæQÝ'Nk\x09ííÈ\x90Ó tS\x9aYeâ!Y\x11Ð¸\x96\x1b\x87¹Ý\x06Ö\x00\x00\x1aÀ/À+À\x11À\x07À\x13À\x09À\x14À[0m" 400 -
ERROR:werkzeug:178.128.167.206 - - [27/Sep/2024 03:16:01] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x01\x00{\x01\x00\x00w\x03\x03¯«&0\x9cµr¤\x94¬åEi¥·Z4c·\x8a"ëËÛ^0Á@)ô¦²\x00\x00\x1aÀ/À+À\x11À\x07À\x13À')
INFO:werkzeug:178.128.167.206 - - [27/Sep/2024 03:16:01] "[31m[1m\x16\x03\x01\x00{\x01\x00\x00w\x03\x03¯«&0\x9cµr¤\x94¬åEi¥·Z4c·\x8a"ëËÛ^0Á@)ô¦²\x00\x00\x1aÀ/À+À\x11À\x07À\x13À\x09À\x14À[0m" 400 -
INFO:werkzeug:178.128.167.206 - - [27/Sep/2024 03:16:02] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f626cc05895ec2589bae8c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2c3ce61d-6ce2-47f2-8c9b-467f4d6a7c72', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 03:30:23 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '2c3ce61d-6ce2-47f2-8c9b-467f4d6a7c72', 'x-amzn-bedrock-invocation-latency': '1413', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3ee0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f626cf05895ec2589bae8d
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.172.123.115 - - [27/Sep/2024 03:30:23] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f5e8792d-44ea-4922-9f8d-f8f597173e0b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 04:30:21 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'f5e8792d-44ea-4922-9f8d-f8f597173e0b', 'x-amzn-bedrock-invocation-latency': '368', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852e90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f634dd05895ec2589bae8f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3beb4028-0d16-44db-b101-6737e9461cdf', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 04:30:23 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '3beb4028-0d16-44db-b101-6737e9461cdf', 'x-amzn-bedrock-invocation-latency': '1373', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3190>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f634df05895ec2589bae90
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.83.1.181 - - [27/Sep/2024 04:30:23] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f642f805895ec2589bae92
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '205b4f44-fe3f-4df8-9f5a-235999f1dc35', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 05:30:34 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '205b4f44-fe3f-4df8-9f5a-235999f1dc35', 'x-amzn-bedrock-invocation-latency': '1336', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1d50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f642fa05895ec2589bae93
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.90.156.81 - - [27/Sep/2024 05:30:34] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:154.213.187.76 - - [27/Sep/2024 06:00:00] code 400, message Bad request syntax ('JDWP-Handshake')
INFO:werkzeug:154.213.187.76 - - [27/Sep/2024 06:00:00] "[31m[1mJDWP-Handshake[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '47ce657f-d232-4f2b-a525-e428df3682e7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 06:30:07 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '47ce657f-d232-4f2b-a525-e428df3682e7', 'x-amzn-bedrock-invocation-latency': '348', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f31c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f650ef05895ec2589bae95
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b8c421da-c312-4fdb-9793-1b8bbf288d94', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 06:30:09 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'b8c421da-c312-4fdb-9793-1b8bbf288d94', 'x-amzn-bedrock-invocation-latency': '1274', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a4100>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f650f105895ec2589bae96
INFO:__main__:Process completed successfully.
INFO:werkzeug:98.84.43.223 - - [27/Sep/2024 06:30:09] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f65f1d05895ec2589bae98
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ee6c1e72-6862-48e9-ada4-fd222573473f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 07:30:39 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'ee6c1e72-6862-48e9-ada4-fd222573473f', 'x-amzn-bedrock-invocation-latency': '1295', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2bc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f65f1f05895ec2589bae99
INFO:__main__:Process completed successfully.
INFO:werkzeug:174.129.125.232 - - [27/Sep/2024 07:30:39] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:178.128.32.229 - - [27/Sep/2024 08:23:51] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03ÎÕ\x9b³´s')
INFO:werkzeug:178.128.32.229 - - [27/Sep/2024 08:23:51] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03ÎÕ\x9b³´s\x1d\x85\\Í¥?JõfÙ·\x9bÚ\x01ÒêQm3wá^M\x8ajì\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f66d3f05895ec2589bae9b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'cefc79ca-2dbf-431a-9e45-77ea8ccb8022', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 08:30:57 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'cefc79ca-2dbf-431a-9e45-77ea8ccb8022', 'x-amzn-bedrock-invocation-latency': '1384', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3310>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f66d4105895ec2589bae9c
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.55.235.177 - - [27/Sep/2024 08:30:57] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '87192b23-e58a-4656-a027-2b5646fcf648', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 09:30:47 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '87192b23-e58a-4656-a027-2b5646fcf648', 'x-amzn-bedrock-invocation-latency': '355', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0851f90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f67b4705895ec2589bae9e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5b5594f1-2961-48f2-9e01-d6a908cd5497', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 09:30:50 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '5b5594f1-2961-48f2-9e01-d6a908cd5497', 'x-amzn-bedrock-invocation-latency': '1354', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3b50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f67b4a05895ec2589bae9f
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.83.165.42 - - [27/Sep/2024 09:30:50] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8dc7bb22-f41d-4d85-b22f-3da90b7303c3', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 10:30:08 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '8dc7bb22-f41d-4d85-b22f-3da90b7303c3', 'x-amzn-bedrock-invocation-latency': '361', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0640>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f6893005895ec2589baea1
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '692659c5-1490-4c13-be9b-6d9546fdd9d1', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 10:30:10 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '692659c5-1490-4c13-be9b-6d9546fdd9d1', 'x-amzn-bedrock-invocation-latency': '1356', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a4e20>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f6893205895ec2589baea2
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.205.45.31 - - [27/Sep/2024 10:30:10] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f6976105895ec2589baea4
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd31a08b3-84ce-4155-979f-9ceab8c5c42f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 11:30:43 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd31a08b3-84ce-4155-979f-9ceab8c5c42f', 'x-amzn-bedrock-invocation-latency': '1381', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0760>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f6976305895ec2589baea5
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.160.51.77 - - [27/Sep/2024 11:30:43] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:80.66.83.114 - - [27/Sep/2024 12:03:52] code 400, message Bad request syntax ('\x04\x01\x00\x19h/\x12á\x00')
INFO:werkzeug:80.66.83.114 - - [27/Sep/2024 12:03:52] "[31m[1m\x04\x01\x00\x19h/\x12á\x00[0m" 400 -
ERROR:werkzeug:80.66.83.114 - - [27/Sep/2024 12:04:52] code 400, message Bad request syntax ('\x05\x01\x00')
INFO:werkzeug:80.66.83.114 - - [27/Sep/2024 12:04:52] "[31m[1m\x05\x01\x00[0m" 400 -
INFO:werkzeug:80.66.83.114 - - [27/Sep/2024 12:04:52] "[33mCONNECT hotmail-com.olc.protection.outlook.com:25 HTTP/1.1[0m" 404 -
ERROR:werkzeug:80.66.83.114 - - [27/Sep/2024 12:07:07] code 400, message Bad request syntax ('\x04\x01\x00\x194e(\x19\x00')
INFO:werkzeug:80.66.83.114 - - [27/Sep/2024 12:07:07] "[31m[1m\x04\x01\x00\x194e(\x19\x00[0m" 400 -
ERROR:werkzeug:80.66.83.114 - - [27/Sep/2024 12:08:07] code 400, message Bad request syntax ('\x05\x01\x00')
INFO:werkzeug:80.66.83.114 - - [27/Sep/2024 12:08:07] "[31m[1m\x05\x01\x00[0m" 400 -
INFO:werkzeug:80.66.83.114 - - [27/Sep/2024 12:08:07] "[33mCONNECT hotmail-com.olc.protection.outlook.com:25 HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f6a58b05895ec2589baea7
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3749f4fc-df27-43cc-b72e-ff4ff4a49839', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 12:31:10 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '3749f4fc-df27-43cc-b72e-ff4ff4a49839', 'x-amzn-bedrock-invocation-latency': '1360', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0d00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f6a58e05895ec2589baea8
INFO:__main__:Process completed successfully.
INFO:werkzeug:18.208.169.20 - - [27/Sep/2024 12:31:10] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:206.81.7.140 - - [27/Sep/2024 13:22:43] "[33mGET / HTTP/1.0[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f6b3bc05895ec2589baeaa
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '6e1cb08e-3d11-403f-a908-8600a7001e73', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 13:31:43 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '6e1cb08e-3d11-403f-a908-8600a7001e73', 'x-amzn-bedrock-invocation-latency': '1311', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1870>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f6b3bf05895ec2589baeab
INFO:__main__:Process completed successfully.
INFO:werkzeug:98.80.189.228 - - [27/Sep/2024 13:31:43] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'bfb36e29-0373-42a2-a887-6ee827c96443', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 14:30:13 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'bfb36e29-0373-42a2-a887-6ee827c96443', 'x-amzn-bedrock-invocation-latency': '362', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0580>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f6c17505895ec2589baead
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'db1dcd19-8ed3-4422-970f-cc5595bb8719', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 14:30:15 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'db1dcd19-8ed3-4422-970f-cc5595bb8719', 'x-amzn-bedrock-invocation-latency': '1360', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a7190>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f6c17705895ec2589baeae
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.234.177.88 - - [27/Sep/2024 14:30:15] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:80.66.83.114 - - [27/Sep/2024 15:04:06] code 400, message Bad HTTP/0.9 request type ('\x04\x01\x00PUÎ')
INFO:werkzeug:80.66.83.114 - - [27/Sep/2024 15:04:06] "[31m[1m\x04\x01\x00PUÎ s\x00[0m" 400 -
ERROR:werkzeug:80.66.83.114 - - [27/Sep/2024 15:05:06] code 400, message Bad request syntax ('\x05\x01\x00')
INFO:werkzeug:80.66.83.114 - - [27/Sep/2024 15:05:06] "[31m[1m\x05\x01\x00[0m" 400 -
INFO:werkzeug:80.66.83.114 - - [27/Sep/2024 15:05:06] "[33mCONNECT 85.206.160.115:80 HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f6cf9905895ec2589baeb0
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f5c47cfc-7954-467c-aa2e-b0a28a8db6f1', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 15:30:36 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f5c47cfc-7954-467c-aa2e-b0a28a8db6f1', 'x-amzn-bedrock-invocation-latency': '1432', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a29b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f6cf9c05895ec2589baeb1
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.89.26.97 - - [27/Sep/2024 15:30:36] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '30e78d7d-133e-4fb2-b76c-2e934b6d2ac8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 16:30:23 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '30e78d7d-133e-4fb2-b76c-2e934b6d2ac8', 'x-amzn-bedrock-invocation-latency': '373', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f1390>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f6dd9f05895ec2589baeb3
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '20a3ad4f-36d9-4f9d-9fd3-6f3a30eea17d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 16:30:25 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '20a3ad4f-36d9-4f9d-9fd3-6f3a30eea17d', 'x-amzn-bedrock-invocation-latency': '1376', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2980>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f6dda105895ec2589baeb4
INFO:__main__:Process completed successfully.
INFO:werkzeug:98.81.193.17 - - [27/Sep/2024 16:30:25] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f6ebb205895ec2589baeb6
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '455b981a-ec31-4e4a-88a0-3197801ce77b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 17:30:29 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '455b981a-ec31-4e4a-88a0-3197801ce77b', 'x-amzn-bedrock-invocation-latency': '1431', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a6560>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f6ebb505895ec2589baeb7
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.84.169.80 - - [27/Sep/2024 17:30:29] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f6faa505895ec2589baeb9
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1c23c55d-07db-4b90-9373-59ad5ffc9427', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 18:34:16 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '1c23c55d-07db-4b90-9373-59ad5ffc9427', 'x-amzn-bedrock-invocation-latency': '1382', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a5fc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f6faa805895ec2589baeba
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.165.131.137 - - [27/Sep/2024 18:34:16] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '14d5dbf8-a2cc-4216-bdfa-8ffc26c5dc77', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 19:31:04 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '14d5dbf8-a2cc-4216-bdfa-8ffc26c5dc77', 'x-amzn-bedrock-invocation-latency': '378', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2410>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f707f805895ec2589baebc
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'afdfbf22-93d6-457e-ad56-08accbb09287', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 19:31:06 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'afdfbf22-93d6-457e-ad56-08accbb09287', 'x-amzn-bedrock-invocation-latency': '1361', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3c10>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f707fa05895ec2589baebd
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.82.196.133 - - [27/Sep/2024 19:31:06] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1b7a436b-cc34-4eb0-a0c0-6e2c44d75678', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 20:30:39 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '1b7a436b-cc34-4eb0-a0c0-6e2c44d75678', 'x-amzn-bedrock-invocation-latency': '324', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f1c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f715ef05895ec2589baebf
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '66621c37-6bc9-4b5c-a035-fc83c977be3e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 20:30:42 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '66621c37-6bc9-4b5c-a035-fc83c977be3e', 'x-amzn-bedrock-invocation-latency': '1371', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2860>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f715f205895ec2589baec0
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.165.131.137 - - [27/Sep/2024 20:30:42] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0a070360-4360-4221-8dc4-70a2835ca752', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 21:30:32 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '0a070360-4360-4221-8dc4-70a2835ca752', 'x-amzn-bedrock-invocation-latency': '363', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f160>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f723f805895ec2589baec2
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2e1010b1-c1cd-4786-bf3c-879c82b84157', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 21:30:35 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '2e1010b1-c1cd-4786-bf3c-879c82b84157', 'x-amzn-bedrock-invocation-latency': '1379', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a4fa0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f723fb05895ec2589baec3
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.82.196.133 - - [27/Sep/2024 21:30:35] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:162.216.149.97 - - [27/Sep/2024 22:15:43] code 400, message Bad request version ('À\x13À')
INFO:werkzeug:162.216.149.97 - - [27/Sep/2024 22:15:43] "[31m[1m\x16\x03\x01\x00î\x01\x00\x00ê\x03\x031å-¿\x19ýUëB\x088\x0e&þÑ|\x1d ywÌI\x14¢¾\x05\x85g\x96®\x1cÌ  uÂ\x13\x93\x81Ãqt\x1f@£>Áù5\x16Ç\x9dpHç\x16ØåS-\x0dq\x09Ü\x04\x00&À+À/À,À0Ì©Ì¨À\x09À\x13À[0m" 400 -
ERROR:werkzeug:162.216.149.97 - - [27/Sep/2024 22:15:44] code 400, message Bad request version ('À(À$À\x14À')
INFO:werkzeug:162.216.149.97 - - [27/Sep/2024 22:15:44] "[31m[1m\x16\x03\x01\x00Ê\x01\x00\x00Æ\x03\x03ÇcÍy¬\x1cZ\x19\x9cO*õÉTÛ\x96\x88¸Sá#Ep\x097\x8fëEJ55\x80\x00\x00hÌ\x14Ì\x13À/À+À0À,À\x11À\x07À'À#À\x13À\x09À(À$À\x14À[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f7322605895ec2589baec5
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9e988959-d5e2-4cb4-ab68-c4295bbf9e4d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 22:31:04 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '9e988959-d5e2-4cb4-ab68-c4295bbf9e4d', 'x-amzn-bedrock-invocation-latency': '1450', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a5bd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7322805895ec2589baec6
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.165.131.137 - - [27/Sep/2024 22:31:04] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c23100e8-1a5d-49b8-9101-1971c0eead12', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 23:30:35 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'c23100e8-1a5d-49b8-9101-1971c0eead12', 'x-amzn-bedrock-invocation-latency': '345', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f1e40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f7401b05895ec2589baec8
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c5fb95b2-788f-4c37-91ea-e7afe886e709', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Fri, 27 Sep 2024 23:30:37 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'c5fb95b2-788f-4c37-91ea-e7afe886e709', 'x-amzn-bedrock-invocation-latency': '1348', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852440>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7401d05895ec2589baec9
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.175.204.30 - - [27/Sep/2024 23:30:37] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7aa07501-c722-46f2-8635-fbfde0d0a9d6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 00:30:19 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '7aa07501-c722-46f2-8635-fbfde0d0a9d6', 'x-amzn-bedrock-invocation-latency': '379', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1ed0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f74e1b05895ec2589baecb
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '87342fb3-c7d5-4ad9-8368-3bc50b731297', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 00:30:21 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '87342fb3-c7d5-4ad9-8368-3bc50b731297', 'x-amzn-bedrock-invocation-latency': '1350', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a5f90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f74e1d05895ec2589baecc
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.201.5.34 - - [28/Sep/2024 00:30:21] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:45.84.89.3 - - [28/Sep/2024 00:34:18] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f75c4a05895ec2589baece
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'bac32057-2213-4b10-a0e2-151981e298d6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 01:30:53 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'bac32057-2213-4b10-a0e2-151981e298d6', 'x-amzn-bedrock-invocation-latency': '1434', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a5c30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f75c4d05895ec2589baecf
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.144.22.155 - - [28/Sep/2024 01:30:53] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b6d86471-94c8-4db4-83a5-0ad7911debc1', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 02:30:15 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'b6d86471-94c8-4db4-83a5-0ad7911debc1', 'x-amzn-bedrock-invocation-latency': '380', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2bf0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f76a3705895ec2589baed1
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f336d115-264c-4cbf-8076-69aecde97787', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 02:30:18 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f336d115-264c-4cbf-8076-69aecde97787', 'x-amzn-bedrock-invocation-latency': '1374', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a70d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f76a3a05895ec2589baed2
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.3.221.179 - - [28/Sep/2024 02:30:18] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f7786505895ec2589baed4
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '58799d6e-809d-4f18-8239-ed36d40c3108', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 03:30:48 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '58799d6e-809d-4f18-8239-ed36d40c3108', 'x-amzn-bedrock-invocation-latency': '1449', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1b10>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7786805895ec2589baed5
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.158.83.245 - - [28/Sep/2024 03:30:48] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'af06c348-14fe-4aff-b117-797e0f949d05', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 04:30:31 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'af06c348-14fe-4aff-b117-797e0f949d05', 'x-amzn-bedrock-invocation-latency': '347', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3f40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f7866705895ec2589baed7
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '47ff651e-46fd-4799-a267-008b3b47a2de', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 04:30:34 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '47ff651e-46fd-4799-a267-008b3b47a2de', 'x-amzn-bedrock-invocation-latency': '1395', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a6e30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7866a05895ec2589baed8
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.159.32.237 - - [28/Sep/2024 04:30:34] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '19be7f4c-9f00-4543-b7b3-d22e2aa741e4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 05:30:11 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '19be7f4c-9f00-4543-b7b3-d22e2aa741e4', 'x-amzn-bedrock-invocation-latency': '316', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2e90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f7946305895ec2589baeda
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '564facdb-2910-4c0a-972f-c8b883b5741a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 05:30:14 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '564facdb-2910-4c0a-972f-c8b883b5741a', 'x-amzn-bedrock-invocation-latency': '1344', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a63e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7946605895ec2589baedb
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.82.136.179 - - [28/Sep/2024 05:30:14] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:154.213.185.206 - - [28/Sep/2024 05:45:28] code 400, message Bad request syntax ('JDWP-Handshake')
INFO:werkzeug:154.213.185.206 - - [28/Sep/2024 05:45:28] "[31m[1mJDWP-Handshake[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 1
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b97768e6-a256-44b0-b43d-9f69341c69b4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 06:30:12 GMT', 'content-type': 'application/json', 'content-length': '280', 'connection': 'keep-alive', 'x-amzn-requestid': 'b97768e6-a256-44b0-b43d-9f69341c69b4', 'x-amzn-bedrock-invocation-latency': '476', 'x-amzn-bedrock-output-token-count': '38', 'x-amzn-bedrock-input-token-count': '238'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2770>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"What information is available on Gemini Solutions' policies, specifically regarding risk management, ESOP schemes, and privacy policies?\"\n}","prompt_token_count":238,"generation_token_count":38,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What information is available on Gemini Solutions' policies, specifically regarding risk management, ESOP schemes, and privacy policies?
INFO:__main__:Query stored successfully with ID: 66f7a27405895ec2589baedd
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'da8582b8-423e-4293-a62e-a487f1d67bee', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 06:30:17 GMT', 'content-type': 'application/json', 'content-length': '1947', 'connection': 'keep-alive', 'x-amzn-requestid': 'da8582b8-423e-4293-a62e-a487f1d67bee', 'x-amzn-bedrock-invocation-latency': '3212', 'x-amzn-bedrock-output-token-count': '351', 'x-amzn-bedrock-input-token-count': '1008'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a5ed0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions' policies are available on various topics, including risk management, ESOP schemes, and privacy policies. The company has implemented a comprehensive Risk Management Policy (Text Block 2) that provides direction for identifying, assessing, and treating information security risks. The policy extends to all functions and staff of Gemini Solutions. Additionally, the company has a Privacy Policy (Text Block 1 and 5) that outlines its commitment to protecting non-public personal information and employee private data. The policy includes procedures to support privacy objectives and protect data consistent with applicable state and federal regulations. Gemini Solutions also has an Employee Stock Options Plan (Text Block 4) that outlines the ESOP scheme for employees.\",\n    \"References\": [\n        {\n            \"Statement\": \"Gemini Solution is committed to using a comprehensive and systematic approach to manage risks to confidentiality, access authorization, technical safeguards, regulatory compliance, and loss management.\",\n            \"source\": \"Gemini - Risk Management Policy v1.0_India.pdf - Page 3 - N/A - N/A\"\n        },\n        {\n            \"Statement\": \"Gemini Solutions has procedures in place that support privacy objectives and protect non-public personal information and employee private data consistent with applicable state and federal regulations.\",\n            \"source\": \"Gemini - Privacy Policy V1.1_India.pdf - Page 4 - N/A - N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"What information is available on Gemini Solutions' policies, specifically regarding risk management, ESOP schemes, and privacy policies?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1008,"generation_token_count":351,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7a27905895ec2589baede
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.226.239.252 - - [28/Sep/2024 06:30:17] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f7b0d005895ec2589baee0
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '30ef3531-bdc6-4d36-be38-3605569df04e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 07:31:31 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '30ef3531-bdc6-4d36-be38-3605569df04e', 'x-amzn-bedrock-invocation-latency': '1302', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac13fb2b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7b0d305895ec2589baee1
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.226.239.252 - - [28/Sep/2024 07:31:31] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '434d3824-a376-4d87-ba6a-884d420cb475', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 08:31:06 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '434d3824-a376-4d87-ba6a-884d420cb475', 'x-amzn-bedrock-invocation-latency': '292', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2740>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f7beca05895ec2589baee3
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '28875726-6173-49b7-86cd-793dc271edf2', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 08:31:08 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '28875726-6173-49b7-86cd-793dc271edf2', 'x-amzn-bedrock-invocation-latency': '1356', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024d7e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7becc05895ec2589baee4
INFO:__main__:Process completed successfully.
INFO:werkzeug:18.206.224.77 - - [28/Sep/2024 08:31:08] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f7cce105895ec2589baee6
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '68e9dbe1-05ee-43f0-8b26-0393ccaea7b3', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 09:31:15 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '68e9dbe1-05ee-43f0-8b26-0393ccaea7b3', 'x-amzn-bedrock-invocation-latency': '1301', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f520>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7cce305895ec2589baee7
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.208.59.138 - - [28/Sep/2024 09:31:15] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f7db2205895ec2589baee9
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ae774def-649f-408d-8629-bd3c696d5945', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 10:32:04 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'ae774def-649f-408d-8629-bd3c696d5945', 'x-amzn-bedrock-invocation-latency': '1432', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0851e70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7db2405895ec2589baeea
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.235.170.255 - - [28/Sep/2024 10:32:04] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:144.126.238.155 - - [28/Sep/2024 10:34:42] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03)bNa§EÃ7Ê\x90á\x11')
INFO:werkzeug:144.126.238.155 - - [28/Sep/2024 10:34:42] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03)bNa§EÃ7Ê\x90á\x11\x09Së×2úwu\x9etÔõ\x7f£2[0m" 400 -
INFO:werkzeug:65.49.1.16 - - [28/Sep/2024 11:20:45] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:65.49.1.13 - - [28/Sep/2024 11:20:59] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2dfc9a6f-2159-45a4-8498-0d8f599e6572', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 11:30:12 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '2dfc9a6f-2159-45a4-8498-0d8f599e6572', 'x-amzn-bedrock-invocation-latency': '358', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024d330>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f7e8c405895ec2589baeec
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1c117eb4-5d33-4bc6-be1a-f6a7861af797', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 11:30:15 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '1c117eb4-5d33-4bc6-be1a-f6a7861af797', 'x-amzn-bedrock-invocation-latency': '1374', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac141f3a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7e8c705895ec2589baeed
INFO:__main__:Process completed successfully.
INFO:werkzeug:98.81.69.5 - - [28/Sep/2024 11:30:15] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b6a4e426-1d8d-4d4f-9621-c97bced2b3f2', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 12:30:08 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'b6a4e426-1d8d-4d4f-9621-c97bced2b3f2', 'x-amzn-bedrock-invocation-latency': '356', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f04f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f7f6d005895ec2589baeef
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd6d6eee1-35f3-4e35-92fe-fd588976301e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 12:30:11 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd6d6eee1-35f3-4e35-92fe-fd588976301e', 'x-amzn-bedrock-invocation-latency': '1353', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08534c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f7f6d305895ec2589baef0
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.88.214.188 - - [28/Sep/2024 12:30:11] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f8050105895ec2589baef2
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'fee2d8e9-c5cd-4d83-a571-d7ed84e45c26', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 13:30:44 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'fee2d8e9-c5cd-4d83-a571-d7ed84e45c26', 'x-amzn-bedrock-invocation-latency': '1396', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e260>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8050405895ec2589baef3
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.91.209.72 - - [28/Sep/2024 13:30:44] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e158d1dd-4088-4672-b492-5bf12a57c060', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 14:30:29 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'e158d1dd-4088-4672-b492-5bf12a57c060', 'x-amzn-bedrock-invocation-latency': '350', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852bc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f8130505895ec2589baef5
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7c14789f-78a2-4b87-b3a2-235dd0f660ee', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 14:30:31 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '7c14789f-78a2-4b87-b3a2-235dd0f660ee', 'x-amzn-bedrock-invocation-latency': '1291', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028dc00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8130705895ec2589baef6
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.212.37.195 - - [28/Sep/2024 14:30:31] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 1
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '20197d02-fb29-4289-acb8-3ac412f29388', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 15:30:32 GMT', 'content-type': 'application/json', 'content-length': '280', 'connection': 'keep-alive', 'x-amzn-requestid': '20197d02-fb29-4289-acb8-3ac412f29388', 'x-amzn-bedrock-invocation-latency': '412', 'x-amzn-bedrock-output-token-count': '38', 'x-amzn-bedrock-input-token-count': '238'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852380>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"What information is available on Gemini Solutions' policies, specifically regarding risk management, ESOP schemes, and privacy policies?\"\n}","prompt_token_count":238,"generation_token_count":38,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What information is available on Gemini Solutions' policies, specifically regarding risk management, ESOP schemes, and privacy policies?
INFO:__main__:Query stored successfully with ID: 66f8211805895ec2589baef8
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '17839c4b-7100-4f63-b880-910de8bc5d49', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 15:30:37 GMT', 'content-type': 'application/json', 'content-length': '2183', 'connection': 'keep-alive', 'x-amzn-requestid': '17839c4b-7100-4f63-b880-910de8bc5d49', 'x-amzn-bedrock-invocation-latency': '3728', 'x-amzn-bedrock-output-token-count': '393', 'x-amzn-bedrock-input-token-count': '1008'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0851ff0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions' policies are available on various topics, including risk management, ESOP schemes, and privacy policies. The company has implemented a comprehensive Risk Management Policy (Text Block 2) that provides direction for identifying, assessing, and treating information security risks. The policy extends to all functions and staff of Gemini Solutions. Additionally, the company has a Privacy Policy (Text Block 1 and 5) that outlines its commitment to protecting non-public personal information and employee private data. The policy includes procedures to support privacy objectives and protect data consistent with applicable state and federal regulations. Gemini Solutions also has an Employee Stock Options Plan (Text Block 4) that outlines the ESOP scheme for employees.\",\n    \"References\": [\n        {\n            \"Statement\": \"Gemini Solution is committed to using a comprehensive and systematic approach to manage risks to confidentiality, access authorization, technical safeguards, regulatory compliance, and loss management.\",\n            \"source\": \"Gemini - Risk Management Policy v1.0_India.pdf - Page No: 3\"\n        },\n        {\n            \"Statement\": \"Gemini Solutions has procedures in place that support privacy objectives and protect non-public personal information and employee private data consistent with applicable state and federal regulations.\",\n            \"source\": \"Gemini - Privacy Policy V1.1_India.pdf - Page No: 4\"\n        },\n        {\n            \"Statement\": \"Gemini Solutions acquires employee private information in connection with performing the Human Resources function.\",\n            \"source\": \"Gemini - Privacy Policy V1.1_India.pdf - Page No: 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"What information is available on Gemini Solutions' policies, specifically regarding risk management, ESOP schemes, and privacy policies?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1008,"generation_token_count":393,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8211d05895ec2589baef9
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.152.228.120 - - [28/Sep/2024 15:30:37] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 1
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '15efa711-f00e-47fc-97e1-d274420c75f4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 16:30:35 GMT', 'content-type': 'application/json', 'content-length': '235', 'connection': 'keep-alive', 'x-amzn-requestid': '15efa711-f00e-47fc-97e1-d274420c75f4', 'x-amzn-bedrock-invocation-latency': '393', 'x-amzn-bedrock-output-token-count': '30', 'x-amzn-bedrock-input-token-count': '472'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f970>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"What are the company policies or procedures related to employee leaves at Gemini Solutions?\"\n}","prompt_token_count":472,"generation_token_count":30,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What are the company policies or procedures related to employee leaves at Gemini Solutions?
INFO:__main__:Query stored successfully with ID: 66f82f2b05895ec2589baefb
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '6393e95f-d89e-4ecb-8b65-2c2735cdabad', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 16:30:40 GMT', 'content-type': 'application/json', 'content-length': '1987', 'connection': 'keep-alive', 'x-amzn-requestid': '6393e95f-d89e-4ecb-8b65-2c2735cdabad', 'x-amzn-bedrock-invocation-latency': '3683', 'x-amzn-bedrock-output-token-count': '401', 'x-amzn-bedrock-input-token-count': '1127'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c940>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions has a leave policy that aims to grant leave to employees and define their entitlements. The policy applies to all employees of Gemini Solutions Pvt. Ltd. Employees are encouraged to discuss and agree on the timings of their leave with their reporting manager/team leads/vertical head and obtain prior sanction before proceeding on leave (2 weeks prior). The company does not consider Weekends/Public holidays as a leave deduction if the same falls in employees' leave requests. The policy also outlines different types of leaves, including sick leaves, casual leaves, and emergency leaves. Employees are entitled to 7 days of sick leave on full fixed pay in one leave year.\",\n    \"References\": [\n        {\n            \"Statement\": \"Employees are encouraged to discuss and agree on the timings of their leave with them respective reporting manager/team leads/vertical head and obtain prior sanction before proceeding on leave (2 weeks prior).\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 8\"\n        },\n        {\n            \"Statement\": \"Gemini does not consider Weekends/Public holidays as a leave deduction incase the same falls in employees' leave requests.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 8\"\n        },\n        {\n            \"Statement\": \"Every confirmed employee will be allowed 7 days of sick leave on full fixed pay in one leave year.\",\n            \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf - Page No: 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"What are the company policies or procedures related to employee leaves at Gemini Solutions?\",\n        \"source\": \"Gemini-LEAVE POLICY_Version 5.0_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1127,"generation_token_count":401,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f82f3005895ec2589baefc
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.88.214.188 - - [28/Sep/2024 16:30:40] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b2ff6bfd-1508-494f-9635-17b4cd2f711c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 17:30:12 GMT', 'content-type': 'application/json', 'content-length': '201', 'connection': 'keep-alive', 'x-amzn-requestid': 'b2ff6bfd-1508-494f-9635-17b4cd2f711c', 'x-amzn-bedrock-invocation-latency': '356', 'x-amzn-bedrock-output-token-count': '26', 'x-amzn-bedrock-input-token-count': '507'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac141f550>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": true,\n\"query\": \"What are the types of leaves offered by Gemini Solutions?\"\n}","prompt_token_count":507,"generation_token_count":26,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: What are the types of leaves offered by Gemini Solutions?
INFO:__main__:Query stored successfully with ID: 66f83d2405895ec2589baefe
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5fc58897-e718-4e4b-908c-55a405e9e118', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 17:30:15 GMT', 'content-type': 'application/json', 'content-length': '924', 'connection': 'keep-alive', 'x-amzn-requestid': '5fc58897-e718-4e4b-908c-55a405e9e118', 'x-amzn-bedrock-invocation-latency': '1787', 'x-amzn-bedrock-output-token-count': '179', 'x-amzn-bedrock-input-token-count': '1173'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028eb30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions offers various types of leaves to its employees. However, the specific types of leaves offered may vary based on the employee's role, tenure, and other factors. As per our records, the company offers annual leaves, sick leaves, casual leaves, and maternity/paternity leaves. Additionally, the company also provides leaves for festivals and special occasions.\",\n    \"References\": [\n        {\n            \"Statement\": \"N/A\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"What are the types of leaves offered by Gemini Solutions?\",\n        \"source\": \"Gemini - Risk Management Policy v1.0_India.pdf, Gemini-ESOP scheme - final 1_India.pdf\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1173,"generation_token_count":179,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f83d2705895ec2589baeff
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.90.68.231 - - [28/Sep/2024 17:30:15] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f84b3c05895ec2589baf01
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd041ecb8-6372-49b7-9e3b-cda4c5d6a74b', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 18:30:22 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd041ecb8-6372-49b7-9e3b-cda4c5d6a74b', 'x-amzn-bedrock-invocation-latency': '1386', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f250>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f84b3e05895ec2589baf02
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.88.8.181 - - [28/Sep/2024 18:30:22] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f8596605895ec2589baf04
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '6783ceec-0851-4b31-b460-aacc41ccb5f6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 19:30:49 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '6783ceec-0851-4b31-b460-aacc41ccb5f6', 'x-amzn-bedrock-invocation-latency': '1332', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028cca0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8596905895ec2589baf05
INFO:__main__:Process completed successfully.
INFO:werkzeug:18.234.184.194 - - [28/Sep/2024 19:30:49] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5b9ac24c-3554-4c50-8d51-a4824e0fd02f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 20:30:12 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '5b9ac24c-3554-4c50-8d51-a4824e0fd02f', 'x-amzn-bedrock-invocation-latency': '335', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024cee0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f8675405895ec2589baf07
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e2393d8c-570f-4af3-a682-054c1a21f3c3', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 20:30:14 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'e2393d8c-570f-4af3-a682-054c1a21f3c3', 'x-amzn-bedrock-invocation-latency': '1381', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028eda0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8675605895ec2589baf08
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.81.112.224 - - [28/Sep/2024 20:30:14] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:198.235.24.241 - - [28/Sep/2024 21:26:49] "[33mGET / HTTP/1.0[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f8757205895ec2589baf0a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f863888f-1d54-4069-ac57-84cc7d013863', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 21:30:28 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f863888f-1d54-4069-ac57-84cc7d013863', 'x-amzn-bedrock-invocation-latency': '1343', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f220>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8757405895ec2589baf0b
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.93.80.66 - - [28/Sep/2024 21:30:28] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f8839e05895ec2589baf0d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1aa72745-26cf-4f6b-9b5f-407036ad6bdf', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 22:30:56 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '1aa72745-26cf-4f6b-9b5f-407036ad6bdf', 'x-amzn-bedrock-invocation-latency': '1418', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028d6f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f883a005895ec2589baf0e
INFO:__main__:Process completed successfully.
INFO:werkzeug:107.22.151.158 - - [28/Sep/2024 22:30:56] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9e3d4849-5747-411d-9251-145f075fe8f4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 23:30:06 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '9e3d4849-5747-411d-9251-145f075fe8f4', 'x-amzn-bedrock-invocation-latency': '361', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f4c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f8917e05895ec2589baf10
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e0983593-c17c-45a8-9421-672a78b954fb', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sat, 28 Sep 2024 23:30:08 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'e0983593-c17c-45a8-9421-672a78b954fb', 'x-amzn-bedrock-invocation-latency': '1296', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f010>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8918005895ec2589baf11
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.80.237.86 - - [28/Sep/2024 23:30:08] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:35.165.59.24 - - [28/Sep/2024 23:36:37] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:45.84.89.3 - - [28/Sep/2024 23:39:50] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f89fbb05895ec2589baf13
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3814949d-3586-4361-b973-62dc5905bf47', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 00:30:53 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '3814949d-3586-4361-b973-62dc5905bf47', 'x-amzn-bedrock-invocation-latency': '1407', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028dc00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f89fbd05895ec2589baf14
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.200.133.33 - - [29/Sep/2024 00:30:53] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f8adef05895ec2589baf16
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1c3806ad-687f-4439-ad74-444a08059e6a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 01:31:30 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '1c3806ad-687f-4439-ad74-444a08059e6a', 'x-amzn-bedrock-invocation-latency': '1428', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c4f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8adf205895ec2589baf17
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.239.112.93 - - [29/Sep/2024 01:31:30] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '08647b8c-51c6-4658-87b8-0fb69d106c57', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 02:31:10 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '08647b8c-51c6-4658-87b8-0fb69d106c57', 'x-amzn-bedrock-invocation-latency': '371', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028dc90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f8bbee05895ec2589baf19
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '03de2007-563d-4040-827a-48796aadb9b4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 02:31:13 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '03de2007-563d-4040-827a-48796aadb9b4', 'x-amzn-bedrock-invocation-latency': '1384', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1a80>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8bbf105895ec2589baf1a
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.83.3.224 - - [29/Sep/2024 02:31:13] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '20a25a4c-c337-49eb-8d86-2e475d4e5462', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 03:30:05 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '20a25a4c-c337-49eb-8d86-2e475d4e5462', 'x-amzn-bedrock-invocation-latency': '377', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028dc30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f8c9bd05895ec2589baf1c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8ef32975-fb26-45a0-b041-96cab7d49ded', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 03:30:08 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '8ef32975-fb26-45a0-b041-96cab7d49ded', 'x-amzn-bedrock-invocation-latency': '1283', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f580>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8c9c005895ec2589baf1d
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.239.144.121 - - [29/Sep/2024 03:30:08] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f8d7f205895ec2589baf1f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f7d32549-47e7-4d1d-92a7-8425c9fb7647', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 04:30:44 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f7d32549-47e7-4d1d-92a7-8425c9fb7647', 'x-amzn-bedrock-invocation-latency': '1441', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f3a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8d7f405895ec2589baf20
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.85.239.148 - - [29/Sep/2024 04:30:44] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:104.248.172.109 - - [29/Sep/2024 05:30:21] code 400, message Bad HTTP/0.9 request type ('\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03W\x8a\x0fÇ\x13òÂ\x87}I}ÂhT¿\x83')
INFO:werkzeug:104.248.172.109 - - [29/Sep/2024 05:30:21] "[31m[1m\x16\x03\x01\x01ú\x01\x00\x01ö\x03\x03W\x8a\x0fÇ\x13òÂ\x87}I}ÂhT¿\x83 Ã¤¨»\x9d¬³\x84v©«H,É\x8b\x00\x01<Ì\x14Ì\x13Ì\x15À0À,À(À$À\x14À[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f8e60e05895ec2589baf22
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5c0c5c87-f0c8-420d-a7b7-33f642f90083', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 05:30:57 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '5c0c5c87-f0c8-420d-a7b7-33f642f90083', 'x-amzn-bedrock-invocation-latency': '1388', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a21d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8e61105895ec2589baf23
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.242.164.31 - - [29/Sep/2024 05:30:57] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b2f26631-575d-450a-9559-63bbf6b11aa3', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 06:30:26 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'b2f26631-575d-450a-9559-63bbf6b11aa3', 'x-amzn-bedrock-invocation-latency': '366', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028f760>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f8f40205895ec2589baf25
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '016083f2-2105-42ee-97ac-77e8f6e420ab', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 06:30:29 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '016083f2-2105-42ee-97ac-77e8f6e420ab', 'x-amzn-bedrock-invocation-latency': '1390', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a07f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f8f40505895ec2589baf26
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.162.249.29 - - [29/Sep/2024 06:30:29] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f9023105895ec2589baf28
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'bc7c1bab-b15f-45a4-854b-7d08f795daf1', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 07:31:00 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'bc7c1bab-b15f-45a4-854b-7d08f795daf1', 'x-amzn-bedrock-invocation-latency': '1387', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ed40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9023405895ec2589baf29
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.166.223.200 - - [29/Sep/2024 07:31:00] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0f3d27bc-478d-4603-b562-908ab680fd15', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 08:30:22 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '0f3d27bc-478d-4603-b562-908ab680fd15', 'x-amzn-bedrock-invocation-latency': '343', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852e00>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f9101e05895ec2589baf2b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3f12e299-0b72-47ef-abd2-0c4406652f63', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 08:30:25 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '3f12e299-0b72-47ef-abd2-0c4406652f63', 'x-amzn-bedrock-invocation-latency': '1368', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3880>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9102105895ec2589baf2c
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.200.8.186 - - [29/Sep/2024 08:30:25] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f91e5c05895ec2589baf2e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '8eb9b371-6061-4d76-a5fe-8fbf1fa960af', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 09:31:11 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '8eb9b371-6061-4d76-a5fe-8fbf1fa960af', 'x-amzn-bedrock-invocation-latency': '1332', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1150>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f91e5f05895ec2589baf2f
INFO:__main__:Process completed successfully.
INFO:werkzeug:100.24.114.33 - - [29/Sep/2024 09:31:11] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:13.64.108.189 - - [29/Sep/2024 10:10:28] "[33mGET /v2/ HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3bb3884d-dc98-4cb1-82b6-bf9fe0fd7bb2', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 10:30:41 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '3bb3884d-dc98-4cb1-82b6-bf9fe0fd7bb2', 'x-amzn-bedrock-invocation-latency': '329', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0853370>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f92c5105895ec2589baf31
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '216c3d6d-95d5-4db9-8e65-c60614a17b57', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 10:30:44 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '216c3d6d-95d5-4db9-8e65-c60614a17b57', 'x-amzn-bedrock-invocation-latency': '1288', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a09d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f92c5405895ec2589baf32
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.202.24.61 - - [29/Sep/2024 10:30:44] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '6264d4a1-3b90-46f4-bac2-65d16a83a32c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 11:30:40 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '6264d4a1-3b90-46f4-bac2-65d16a83a32c', 'x-amzn-bedrock-invocation-latency': '327', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1bd0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f93a6005895ec2589baf34
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '990b2716-0583-49ae-a2e7-ac0719a749b9', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 11:30:43 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '990b2716-0583-49ae-a2e7-ac0719a749b9', 'x-amzn-bedrock-invocation-latency': '1346', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3580>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f93a6305895ec2589baf35
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.82.242.51 - - [29/Sep/2024 11:30:43] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '47594405-661c-498b-b4d1-dc06cbd728f4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 12:30:34 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '47594405-661c-498b-b4d1-dc06cbd728f4', 'x-amzn-bedrock-invocation-latency': '287', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ce80>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f9486a05895ec2589baf37
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0b03a515-e504-4a25-b28d-943cd110bf08', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 12:30:37 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '0b03a515-e504-4a25-b28d-943cd110bf08', 'x-amzn-bedrock-invocation-latency': '1362', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1180>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9486d05895ec2589baf38
INFO:__main__:Process completed successfully.
INFO:werkzeug:100.24.114.33 - - [29/Sep/2024 12:30:37] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f9568205895ec2589baf3a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'af783d92-7909-4d61-9071-307a6b4a17e6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 13:30:45 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'af783d92-7909-4d61-9071-307a6b4a17e6', 'x-amzn-bedrock-invocation-latency': '1419', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2770>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9568505895ec2589baf3b
INFO:__main__:Process completed successfully.
INFO:werkzeug:100.27.43.213 - - [29/Sep/2024 13:30:45] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e256869a-4db7-44b4-9c30-a209c453b995', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 14:30:30 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'e256869a-4db7-44b4-9c30-a209c453b995', 'x-amzn-bedrock-invocation-latency': '375', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3310>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f9648605895ec2589baf3d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '40cc522f-7670-4a30-be2a-ca724e43601a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 14:30:33 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '40cc522f-7670-4a30-be2a-ca724e43601a', 'x-amzn-bedrock-invocation-latency': '1277', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a4a60>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9648905895ec2589baf3e
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.226.17.97 - - [29/Sep/2024 14:30:33] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '52bb7cc5-653f-4572-ad71-158b55296a4d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 15:30:21 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '52bb7cc5-653f-4572-ad71-158b55296a4d', 'x-amzn-bedrock-invocation-latency': '291', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3a90>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f9728d05895ec2589baf40
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e16c4039-3590-41fc-9eec-5ddf7443ecc5', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 15:30:24 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'e16c4039-3590-41fc-9eec-5ddf7443ecc5', 'x-amzn-bedrock-invocation-latency': '1280', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1750>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9729005895ec2589baf41
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.229.112.54 - - [29/Sep/2024 15:30:24] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'bd67f80a-cf9c-4751-a0db-cf99cb4854d8', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 16:30:20 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'bd67f80a-cf9c-4751-a0db-cf99cb4854d8', 'x-amzn-bedrock-invocation-latency': '388', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024d780>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f9809c05895ec2589baf43
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd680d858-7212-4ff8-9437-7cb09faf221a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 16:30:23 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd680d858-7212-4ff8-9437-7cb09faf221a', 'x-amzn-bedrock-invocation-latency': '1342', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1d50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9809f05895ec2589baf44
INFO:__main__:Process completed successfully.
INFO:werkzeug:107.23.245.220 - - [29/Sep/2024 16:30:23] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f98ec205895ec2589baf46
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '27959359-1cb1-40e5-a4a8-3adeb89cd187', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 17:30:45 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '27959359-1cb1-40e5-a4a8-3adeb89cd187', 'x-amzn-bedrock-invocation-latency': '1431', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a6e30>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f98ec505895ec2589baf47
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.215.103.86 - - [29/Sep/2024 17:30:45] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f99dd105895ec2589baf49
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '71f09fd0-19bb-4d5e-a4ca-6fdee43b8601', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 18:34:59 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '71f09fd0-19bb-4d5e-a4ca-6fdee43b8601', 'x-amzn-bedrock-invocation-latency': '1430', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a7ac0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f99dd305895ec2589baf4a
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.82.144.71 - - [29/Sep/2024 18:34:59] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '28738c24-0425-48c4-bd6d-42bea54082ef', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 19:30:23 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '28738c24-0425-48c4-bd6d-42bea54082ef', 'x-amzn-bedrock-invocation-latency': '334', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028fdc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f9aacf05895ec2589baf4c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '6619000d-c0fd-4651-afa4-ad87a87833b5', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 19:30:26 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '6619000d-c0fd-4651-afa4-ad87a87833b5', 'x-amzn-bedrock-invocation-latency': '1383', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028fee0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9aad205895ec2589baf4d
INFO:__main__:Process completed successfully.
INFO:werkzeug:18.234.202.218 - - [29/Sep/2024 19:30:26] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f9b90305895ec2589baf4f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '769225f4-07fb-474c-b13b-8adb2ff49ab9', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 20:31:03 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '769225f4-07fb-474c-b13b-8adb2ff49ab9', 'x-amzn-bedrock-invocation-latency': '1440', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a6080>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9b90705895ec2589baf50
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.226.17.97 - - [29/Sep/2024 20:31:03] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'da2826b8-f8cb-475f-93d1-690d59c3279f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 21:30:56 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'da2826b8-f8cb-475f-93d1-690d59c3279f', 'x-amzn-bedrock-invocation-latency': '354', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2680>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f9c71005895ec2589baf52
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '86ea05fb-f75e-45d7-aa9e-6b33c37dc1c3', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 21:30:59 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '86ea05fb-f75e-45d7-aa9e-6b33c37dc1c3', 'x-amzn-bedrock-invocation-latency': '1330', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a7880>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9c71305895ec2589baf53
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.214.104.43 - - [29/Sep/2024 21:30:59] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e81f4430-a9c0-4b75-8e5a-18a7c6fe54d5', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 22:30:37 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'e81f4430-a9c0-4b75-8e5a-18a7c6fe54d5', 'x-amzn-bedrock-invocation-latency': '372', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852f20>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f9d50d05895ec2589baf55
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a4cbca33-b194-40f9-be48-1ca240815790', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 22:30:39 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'a4cbca33-b194-40f9-be48-1ca240815790', 'x-amzn-bedrock-invocation-latency': '1397', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a59c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9d50f05895ec2589baf56
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.215.115.128 - - [29/Sep/2024 22:30:39] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f9e33805895ec2589baf58
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3f06a728-67ca-4e2a-a423-defa460a5186', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Sun, 29 Sep 2024 23:31:07 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '3f06a728-67ca-4e2a-a423-defa460a5186', 'x-amzn-bedrock-invocation-latency': '1426', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac141f6d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9e33b05895ec2589baf59
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.228.13.104 - - [29/Sep/2024 23:31:07] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:45.84.89.3 - - [29/Sep/2024 23:40:12] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:87.236.176.44 - - [29/Sep/2024 23:46:20] code 400, message Bad request version ('RTSP/1.0')
INFO:werkzeug:87.236.176.44 - - [29/Sep/2024 23:46:20] "[31m[1mOPTIONS / RTSP/1.0[0m" 400 -
ERROR:werkzeug:87.236.176.44 - - [29/Sep/2024 23:46:23] code 400, message Bad request version ('GetClassName\x00\x00\x00\x02\x04\x00\x00\x00\x00\x01\x00')
INFO:werkzeug:87.236.176.44 - - [29/Sep/2024 23:46:23] "[31m[1m\x00\x00\x00\x1f\x00\x00\x00\x00\x00\x00\x00\x0cGetClassName\x00\x00\x00\x02\x04\x00\x00\x00\x00\x01\x00[0m" 400 -
INFO:werkzeug:87.236.176.50 - - [29/Sep/2024 23:46:39] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66f9f17305895ec2589baf5b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3e4ae9ce-f55f-4e1a-84fe-ae81344298d5', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 00:31:50 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '3e4ae9ce-f55f-4e1a-84fe-ae81344298d5', 'x-amzn-bedrock-invocation-latency': '1470', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a66b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9f17605895ec2589baf5c
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.202.247.237 - - [30/Sep/2024 00:31:50] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '44ebc322-7615-4d4c-a9a3-e4185a416394', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 01:30:39 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '44ebc322-7615-4d4c-a9a3-e4185a416394', 'x-amzn-bedrock-invocation-latency': '342', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2a10>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66f9ff3f05895ec2589baf5e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9745c451-cea2-4371-bb7a-715a00622a96', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 01:30:41 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '9745c451-cea2-4371-bb7a-715a00622a96', 'x-amzn-bedrock-invocation-latency': '1380', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a4820>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66f9ff4105895ec2589baf5f
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.204.73.231 - - [30/Sep/2024 01:30:41] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:147.185.132.186 - - [30/Sep/2024 01:41:32] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:159.203.25.131 - - [30/Sep/2024 02:26:55] code 400, message Bad request version ('À\x14À')
INFO:werkzeug:159.203.25.131 - - [30/Sep/2024 02:26:55] "[31m[1m\x16\x03\x01\x00{\x01\x00\x00w\x03\x03i\x88`\x19´\x81\x1cós[F¶b¥'ñ03ÎøCûâ\x123UÎ2?®Rû\x00\x00\x1aÀ/À+À\x11À\x07À\x13À\x09À\x14À[0m" 400 -
ERROR:werkzeug:159.203.25.131 - - [30/Sep/2024 02:26:56] code 400, message Bad request version ('À\x14À')
INFO:werkzeug:159.203.25.131 - - [30/Sep/2024 02:26:56] "[31m[1m\x16\x03\x01\x00{\x01\x00\x00w\x03\x03§JÝè~ÒãV\x09\x05ªc¹oHR°\x91àn\x02B\x06ûk!}¡\x91 \x0cò\x00\x00\x1aÀ/À+À\x11À\x07À\x13À\x09À\x14À[0m" 400 -
INFO:werkzeug:159.203.25.131 - - [30/Sep/2024 02:26:56] "[33mGET / HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fa0d5d05895ec2589baf61
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '3baf9835-97fd-4030-8d9e-7d98156cb77c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 02:30:56 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '3baf9835-97fd-4030-8d9e-7d98156cb77c', 'x-amzn-bedrock-invocation-latency': '1419', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a5b40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa0d6005895ec2589baf62
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.238.124.53 - - [30/Sep/2024 02:30:56] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0cc38ac9-7ee9-45eb-8f40-480b81c4b008', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 03:30:14 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '0cc38ac9-7ee9-45eb-8f40-480b81c4b008', 'x-amzn-bedrock-invocation-latency': '324', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a7820>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fa1b4605895ec2589baf64
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '59f44fc2-2b74-4a6a-9412-ee416aac75dd', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 03:30:16 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '59f44fc2-2b74-4a6a-9412-ee416aac75dd', 'x-amzn-bedrock-invocation-latency': '1274', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a4e50>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa1b4805895ec2589baf65
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.204.73.231 - - [30/Sep/2024 03:30:16] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fa297205895ec2589baf67
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '273b7663-d60a-4263-8df0-1c26e269016e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 04:30:45 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '273b7663-d60a-4263-8df0-1c26e269016e', 'x-amzn-bedrock-invocation-latency': '1337', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a48e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa297505895ec2589baf68
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.213.106.254 - - [30/Sep/2024 04:30:45] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hey jinie good morning can you tell me about vehicle policy?', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: hey jinie good morning can you tell me about vehicle policy?
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fa367d05895ec2589baf6a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1389499b-39b9-44c3-af81-92e3b2fffb4a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 05:26:27 GMT', 'content-type': 'application/json', 'content-length': '2074', 'connection': 'keep-alive', 'x-amzn-requestid': '1389499b-39b9-44c3-af81-92e3b2fffb4a', 'x-amzn-bedrock-invocation-latency': '4714', 'x-amzn-bedrock-output-token-count': '472', 'x-amzn-bedrock-input-token-count': '1246'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a6530>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions has a Vehicle/Cab Maintenance Policy Version 2.0, which outlines the rules and guidelines for obtaining, qualifying for, and using a company vehicle. The policy applies to all employees who use a company vehicle, both during and outside of working hours. The objective of the policy is to ensure the safety and maintenance of company vehicles. Key points include: * Ensuring vehicles are safe before assigning them, * Scheduling regular maintenance, * Providing car insurance, and * Retiring and replacing cars as needed. Additionally, employees are responsible for paying fines and making bail if they are involved in an accident while driving a company vehicle. The policy also emphasizes the importance of using company-owned vehicles exclusively for business purposes.\",\n    \"References\": [\n        {\n            \"Statement\": \"The purpose of this policy is to provide guidelines for obtaining, qualifying for, and using a company vehicle for all the employees of Gemini Solutions Pvt. Ltd.\",\n            \"source\": \"Gemini-Vehicle Policy_Version 2.0._India.pdf - Page No: 4\"\n        },\n        {\n            \"Statement\": \"Ensuring vehicles are safe before assigning them.\",\n            \"source\": \"Gemini-Vehicle Policy_Version 2.0._India.pdf - Page No: 7\"\n        },\n        {\n            \"Statement\": \"Vehicles owned or leased by the Gemini solutions are to be used exclusively for business purposes.\",\n            \"source\": \"Gemini-Vehicle Policy_Version 2.0._India.pdf - Page No: 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"hey jinie good morning can you tell me about vehicle policy?\",\n        \"source\": \"Gemini-Vehicle Policy_Version 2.0._India.pdf\",\n        \"response_length\": \"246\"\n    }\n}","prompt_token_count":1246,"generation_token_count":472,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa368305895ec2589baf6b
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [30/Sep/2024 05:26:27] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a8be9056-9cc6-4267-a9cb-f2222a027c18', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 05:30:18 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'a8be9056-9cc6-4267-a9cb-f2222a027c18', 'x-amzn-bedrock-invocation-latency': '311', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02a6a70>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fa376a05895ec2589baf6d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '58ca8f11-1281-44df-8902-694cf7f6ac9c', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 05:30:20 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '58ca8f11-1281-44df-8902-694cf7f6ac9c', 'x-amzn-bedrock-invocation-latency': '1335', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac02d41c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa376c05895ec2589baf6e
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.82.165.250 - - [30/Sep/2024 05:30:20] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:64.62.197.138 - - [30/Sep/2024 05:53:06] "[33mGET / HTTP/1.1[0m" 404 -
INFO:werkzeug:64.62.197.148 - - [30/Sep/2024 05:53:21] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fa45aa05895ec2589baf70
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2de04834-c94e-4507-a586-e52abb6174af', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 06:31:09 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '2de04834-c94e-4507-a586-e52abb6174af', 'x-amzn-bedrock-invocation-latency': '1432', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0dc0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa45ad05895ec2589baf71
INFO:__main__:Process completed successfully.
INFO:werkzeug:18.206.216.171 - - [30/Sep/2024 06:31:09] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi', 'conversation_id': 'a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk'}
INFO:__main__:Received query: hi
INFO:__main__:Received conversation_id: a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fa4a5905895ec2589baf73
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4213c361-fa34-410d-a102-3f1b083f8fc4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 06:51:09 GMT', 'content-type': 'application/json', 'content-length': '691', 'connection': 'keep-alive', 'x-amzn-requestid': '4213c361-fa34-410d-a102-3f1b083f8fc4', 'x-amzn-bedrock-invocation-latency': '2019', 'x-amzn-bedrock-output-token-count': '200', 'x-amzn-bedrock-input-token-count': '760'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3190>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hello! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind? Please feel free to ask a specific question, and I'll do my best to provide a clear and concise answer.\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1jcPFMrRpH3U_NnuXsuUV1pEUVK8ewJZqV8lCEDYs80yMrfoZ3HAQbcs7qLS6mICWldCGjVEewZkQwGuZ9kkBagCRUob35YAN7VHgEZ7z0lma6Npj_CgLvI_H-vA6G-Vk\",\n        \"query\": \"hi\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"146\"\n    }\n}","prompt_token_count":760,"generation_token_count":200,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa4a5d05895ec2589baf74
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [30/Sep/2024 06:51:09] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '7bfb9b4f-761e-4c52-a5c8-ccf0325d50de', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 07:30:50 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '7bfb9b4f-761e-4c52-a5c8-ccf0325d50de', 'x-amzn-bedrock-invocation-latency': '290', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f2470>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fa53aa05895ec2589baf76
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '226a500e-2856-4d17-9521-d40721eb48e7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 07:30:53 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '226a500e-2856-4d17-9521-d40721eb48e7', 'x-amzn-bedrock-invocation-latency': '1373', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08521a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa53ad05895ec2589baf77
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.91.167.22 - - [30/Sep/2024 07:30:53] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'how much money is given for daily expense when travelling outside for company work ?', 'conversation_id': 'a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7'}
INFO:__main__:Received query: how much money is given for daily expense when travelling outside for company work ?
INFO:__main__:Received conversation_id: a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fa558705895ec2589baf79
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a35c1c47-49ec-48c1-ab26-194a7fe2148d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 07:38:51 GMT', 'content-type': 'application/json', 'content-length': '1254', 'connection': 'keep-alive', 'x-amzn-requestid': 'a35c1c47-49ec-48c1-ab26-194a7fe2148d', 'x-amzn-bedrock-invocation-latency': '2965', 'x-amzn-bedrock-output-token-count': '297', 'x-amzn-bedrock-input-token-count': '1195'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852c20>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"The company provides a fixed per diem allowance of $50 per day for daily expenses while traveling outside for company work, regardless of the duration of stay and destination.\",\n    \"References\": [\n        {\n            \"Statement\": \"The rate is fixed at $50 per day irrespective of the duration of stay and destination.\",\n            \"source\": \"Intra Country Travel Policy 1.0 - Page 7\"\n        },\n        {\n            \"Statement\": \"Per diems is an allowance that covers expenses related to business travel, which include meals and incidentals expenses. It is paid for the full duration of the employee's stay.\",\n            \"source\": \"International Business Travel Policy - Page 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1vz_gh-aOO2D7zfNgtpVUuCaXQ-3bp5LL5KGHG63DQE1Vb_XVhqsdkc435K3Rs0E27Ok0sY064qvRrsEdxctm7gsa_dx-xth2ez30iTe0ehM02Dl5pDcRGhCPuAxliIU7\",\n        \"query\": \"how much money is given for daily expense when travelling outside for company work ?\",\n        \"source\": \"Gemini Solutions' Travel Policies\",\n        \"response_length\": \"106\"\n    }\n}","prompt_token_count":1195,"generation_token_count":297,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa558b05895ec2589baf7a
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [30/Sep/2024 07:38:51] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fa61c105895ec2589baf7c
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '2c212215-d2af-45f4-b6b6-8151f80bf1fe', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 08:30:59 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '2c212215-d2af-45f4-b6b6-8151f80bf1fe', 'x-amzn-bedrock-invocation-latency': '1378', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a29e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa61c305895ec2589baf7d
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.175.132.10 - - [30/Sep/2024 08:30:59] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:205.210.31.254 - - [30/Sep/2024 08:54:56] "[33mGET / HTTP/1.0[0m" 404 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a50e7b85-5422-4075-8cad-d5e0a8ec9b7f', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 09:30:57 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'a50e7b85-5422-4075-8cad-d5e0a8ec9b7f', 'x-amzn-bedrock-invocation-latency': '325', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1150>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fa6fd105895ec2589baf7f
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '4bd4f14f-196e-4951-8505-8c7b9cc21f0d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 09:30:59 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '4bd4f14f-196e-4951-8505-8c7b9cc21f0d', 'x-amzn-bedrock-invocation-latency': '1335', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0851ff0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa6fd305895ec2589baf80
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.198.50.64 - - [30/Sep/2024 09:30:59] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:35.203.211.53 - - [30/Sep/2024 10:02:07] code 400, message Bad request version ("ë'\x88\x14\x95ÁÊà¿'cnWb\x9d\x11M")
INFO:werkzeug:35.203.211.53 - - [30/Sep/2024 10:02:07] "[31m[1m\x16\x03\x01\x00î\x01\x00\x00ê\x03\x03bY\x9fÊ¬É­¦DFn\x8ci\x8a~å\x1f\x0eï2Vá|GÀ\x04ûsÞâPÕ f<\x19&N'S\x1fë'\x88\x14\x95ÁÊà¿'cnWb\x9d\x11M[0m" 400 -
ERROR:werkzeug:35.203.211.53 - - [30/Sep/2024 10:02:07] code 400, message Bad request syntax ('\x16\x03\x01\x00Ê\x01\x00\x00Æ\x03\x03X\x00\x06\x9a')
INFO:werkzeug:35.203.211.53 - - [30/Sep/2024 10:02:07] "[31m[1m\x16\x03\x01\x00Ê\x01\x00\x00Æ\x03\x03X\x00\x06\x9a[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fa7de605895ec2589baf82
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'ab203606-519e-482d-a871-8a7c8f5b21e6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 10:31:04 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'ab203606-519e-482d-a871-8a7c8f5b21e6', 'x-amzn-bedrock-invocation-latency': '1285', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e170>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa7de805895ec2589baf83
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.223.15.0 - - [30/Sep/2024 10:31:04] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '843f5084-ccac-46d3-8434-c521c3560d04', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 11:30:45 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '843f5084-ccac-46d3-8434-c521c3560d04', 'x-amzn-bedrock-invocation-latency': '284', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac141f430>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fa8be505895ec2589baf85
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd735cb92-7194-4beb-a9c2-e555f42333ce', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 11:30:51 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd735cb92-7194-4beb-a9c2-e555f42333ce', 'x-amzn-bedrock-invocation-latency': '1376', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028dae0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa8beb05895ec2589baf86
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.239.219.39 - - [30/Sep/2024 11:30:51] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '11823616-ef67-43cc-b667-9e256182ba01', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 12:30:45 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '11823616-ef67-43cc-b667-9e256182ba01', 'x-amzn-bedrock-invocation-latency': '333', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1240>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fa99f505895ec2589baf88
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1b6116bb-cfa5-44e7-bd20-bcb91961e7e4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 12:30:47 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '1b6116bb-cfa5-44e7-bd20-bcb91961e7e4', 'x-amzn-bedrock-invocation-latency': '1335', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a2470>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fa99f705895ec2589baf89
INFO:__main__:Process completed successfully.
INFO:werkzeug:34.229.114.181 - - [30/Sep/2024 12:30:47] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66faa80905895ec2589baf8b
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'a9ca8d29-a30e-4d85-af2e-724ca78a3248', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 13:30:52 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'a9ca8d29-a30e-4d85-af2e-724ca78a3248', 'x-amzn-bedrock-invocation-latency': '1287', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028ec20>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66faa80c05895ec2589baf8c
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.174.253.85 - - [30/Sep/2024 13:30:52] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e7296739-5036-43aa-8990-94e650b840a0', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 14:30:27 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'e7296739-5036-43aa-8990-94e650b840a0', 'x-amzn-bedrock-invocation-latency': '331', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a25c0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fab60305895ec2589baf8e
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '74320dd5-a0de-49f7-ac1f-09aae188163a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 14:30:30 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '74320dd5-a0de-49f7-ac1f-09aae188163a', 'x-amzn-bedrock-invocation-latency': '1371', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028fca0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fab60605895ec2589baf8f
INFO:__main__:Process completed successfully.
INFO:werkzeug:35.168.14.235 - - [30/Sep/2024 14:30:30] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fac42105895ec2589baf91
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd0a68fcb-a81d-4d82-877a-c102fd24d601', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 15:30:44 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd0a68fcb-a81d-4d82-877a-c102fd24d601', 'x-amzn-bedrock-invocation-latency': '1387', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028d420>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fac42405895ec2589baf92
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.88.128.81 - - [30/Sep/2024 15:30:44] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fad24905895ec2589baf94
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5c79d4e4-d5d0-46ba-ab41-a2d740a2039e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 16:31:08 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '5c79d4e4-d5d0-46ba-ab41-a2d740a2039e', 'x-amzn-bedrock-invocation-latency': '1351', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f34f0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fad24c05895ec2589baf95
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.166.107.227 - - [30/Sep/2024 16:31:08] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '0536a05b-bd1e-46ae-b706-c4ec5c934181', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 17:30:12 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '0536a05b-bd1e-46ae-b706-c4ec5c934181', 'x-amzn-bedrock-invocation-latency': '332', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f3460>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fae02405895ec2589baf97
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9ffd5cd6-9cd5-4164-8212-bb3eada7ca8d', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 17:30:14 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '9ffd5cd6-9cd5-4164-8212-bb3eada7ca8d', 'x-amzn-bedrock-invocation-latency': '1321', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c880>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fae02605895ec2589baf98
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.202.166.123 - - [30/Sep/2024 17:30:14] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:35.203.210.201 - - [30/Sep/2024 18:15:51] code 400, message Bad request version ('À\x13À')
INFO:werkzeug:35.203.210.201 - - [30/Sep/2024 18:15:51] "[31m[1m\x16\x03\x01\x00î\x01\x00\x00ê\x03\x03p\x93ý4+f\x89¬ 3\x1cËÌ'\x88YgÂÕ\x9f<\x05ò¥\x83ßuÿ\x93\x00õ\x07 /\x0dF1\x19Ò[Ú\x17âÙéL\x0d¾ö\x17@ï÷Ã\x91B·+;\x80µ3Ñ.R\x00&À+À/À,À0Ì©Ì¨À\x09À\x13À[0m" 400 -
ERROR:werkzeug:35.203.210.201 - - [30/Sep/2024 18:15:51] code 400, message Bad request version ('À(À$À\x14À')
INFO:werkzeug:35.203.210.201 - - [30/Sep/2024 18:15:51] "[31m[1m\x16\x03\x01\x00Ê\x01\x00\x00Æ\x03\x038£b'Üá}¡Gò3\x99\x9b\x17e¾ö]«Ö\x7fÚÝ² Îµ\x1fÁgÅõ\x00\x00hÌ\x14Ì\x13À/À+À0À,À\x11À\x07À'À#À\x13À\x09À(À$À\x14À[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66faeeea05895ec2589baf9a
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '1ab3b63f-fc93-4482-b23d-abb6f5d61ce6', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 18:33:17 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '1ab3b63f-fc93-4482-b23d-abb6f5d61ce6', 'x-amzn-bedrock-invocation-latency': '1373', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e3b0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66faeeed05895ec2589baf9b
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.210.117.38 - - [30/Sep/2024 18:33:17] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f7268cd7-7ed5-4bab-a694-78368271a8b2', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 19:30:41 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'f7268cd7-7ed5-4bab-a694-78368271a8b2', 'x-amzn-bedrock-invocation-latency': '349', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028e9e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fafc6105895ec2589baf9d
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd3d54b16-d95d-4817-8fa6-3a520074d2c7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 19:30:44 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd3d54b16-d95d-4817-8fa6-3a520074d2c7', 'x-amzn-bedrock-invocation-latency': '1353', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024e620>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fafc6405895ec2589baf9e
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.83.230.206 - - [30/Sep/2024 19:30:44] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fb0a7e05895ec2589bafa0
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '9e7921ef-cd9b-430c-b950-7a71548a9202', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 20:30:56 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '9e7921ef-cd9b-430c-b950-7a71548a9202', 'x-amzn-bedrock-invocation-latency': '1414', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0400>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb0a8005895ec2589bafa1
INFO:__main__:Process completed successfully.
INFO:werkzeug:44.210.117.38 - - [30/Sep/2024 20:30:56] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b32f0aae-5e1c-4d5b-bb8a-9179da5dcbe7', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 21:30:33 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'b32f0aae-5e1c-4d5b-bb8a-9179da5dcbe7', 'x-amzn-bedrock-invocation-latency': '344', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08527d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fb187905895ec2589bafa3
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '88b682a5-2ca5-46b7-bfb2-fe66f3930a00', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 21:30:36 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '88b682a5-2ca5-46b7-bfb2-fe66f3930a00', 'x-amzn-bedrock-invocation-latency': '1412', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c9a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb187c05895ec2589bafa4
INFO:__main__:Process completed successfully.
INFO:werkzeug:18.232.75.138 - - [30/Sep/2024 21:30:36] "POST /process_query HTTP/1.1" 200 -
INFO:werkzeug:45.84.89.3 - - [30/Sep/2024 22:06:47] "[33mGET / HTTP/1.1[0m" 404 -
ERROR:werkzeug:45.95.169.130 - - [30/Sep/2024 22:12:28] code 400, message Bad HTTP/0.9 request type ('\x00\x00\x00\x11\x00\x00\x01é\x00\x01\x00\x00\x00ÿÿÿÿ\x01\x00\x00\x00\x00\x00\x00\x00')
INFO:werkzeug:45.95.169.130 - - [30/Sep/2024 22:12:28] "[31m[1m\x00\x00\x00\x11\x00\x00\x01é\x00\x01\x00\x00\x00ÿÿÿÿ\x01\x00\x00\x00\x00\x00\x00\x00\x0c\x02\x00\x00\x00\x10MyCustomAssembly\x05\x01\x00\x00\x00[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '171036bd-fd2d-4778-b1ea-97b224237adb', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 22:30:04 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '171036bd-fd2d-4778-b1ea-97b224237adb', 'x-amzn-bedrock-invocation-latency': '360', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac028c6a0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fb266c05895ec2589bafa6
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'c0d00834-6113-4576-8f66-7aabe6b87a87', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 22:30:07 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'c0d00834-6113-4576-8f66-7aabe6b87a87', 'x-amzn-bedrock-invocation-latency': '1377', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f160>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb266f05895ec2589bafa7
INFO:__main__:Process completed successfully.
INFO:werkzeug:35.153.54.50 - - [30/Sep/2024 22:30:07] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fb349a05895ec2589bafa9
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '5d813d91-b2b3-4871-8c0b-2b94ef3a2843', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Mon, 30 Sep 2024 23:30:37 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '5d813d91-b2b3-4871-8c0b-2b94ef3a2843', 'x-amzn-bedrock-invocation-latency': '1398', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ea40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb349d05895ec2589bafaa
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.94.92.137 - - [30/Sep/2024 23:30:37] "POST /process_query HTTP/1.1" 200 -
ERROR:werkzeug:45.79.181.94 - - [30/Sep/2024 23:35:53] code 400, message Bad request syntax ('\x16\x03\x01\x00ê\x01\x00\x00æ\x03\x03Sdx=\x7f\x94£äDÿ¢\x93EJ\x19¬µÚ¨')
INFO:werkzeug:45.79.181.94 - - [30/Sep/2024 23:35:53] "[31m[1m\x16\x03\x01\x00ê\x01\x00\x00æ\x03\x03Sdx=\x7f\x94£äDÿ¢\x93EJ\x19¬µÚ¨[0m" 400 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fb42c005895ec2589bafac
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '778c2e2b-a87f-4b5b-a098-195a4abd4aac', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 00:30:59 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '778c2e2b-a87f-4b5b-a098-195a4abd4aac', 'x-amzn-bedrock-invocation-latency': '1398', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0190>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb42c305895ec2589bafad
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.232.129.22 - - [01/Oct/2024 00:30:59] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fb50ef05895ec2589bafaf
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f1ee4031-c163-4485-afff-8fd23b2c2ab9', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 01:31:30 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f1ee4031-c163-4485-afff-8fd23b2c2ab9', 'x-amzn-bedrock-invocation-latency': '1390', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a3160>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb50f205895ec2589bafb0
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.94.92.137 - - [01/Oct/2024 01:31:30] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '720dfc7c-aefc-49b8-ac56-2e61b10e27a4', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 02:31:02 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '720dfc7c-aefc-49b8-ac56-2e61b10e27a4', 'x-amzn-bedrock-invocation-latency': '301', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac0852290>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fb5ee605895ec2589bafb2
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'f58d5292-a701-460e-a59f-d82e25f2148e', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 02:31:05 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'f58d5292-a701-460e-a59f-d82e25f2148e', 'x-amzn-bedrock-invocation-latency': '1356', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024d330>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb5ee905895ec2589bafb3
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.232.129.22 - - [01/Oct/2024 02:31:05] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '84bd617d-16f5-482f-89e6-67637a9f551a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 03:30:12 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': '84bd617d-16f5-482f-89e6-67637a9f551a', 'x-amzn-bedrock-invocation-latency': '357', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f0820>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fb6cc405895ec2589bafb5
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '6856a54b-2c9c-44ff-8194-679e2260232a', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 03:30:15 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '6856a54b-2c9c-44ff-8194-679e2260232a', 'x-amzn-bedrock-invocation-latency': '1344', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024d870>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb6cc705895ec2589bafb6
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.86.244.74 - - [01/Oct/2024 03:30:15] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fb7ae305895ec2589bafb8
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'e0d98e4e-d2ae-4c36-bf7c-8a0d8c6537aa', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 04:30:30 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'e0d98e4e-d2ae-4c36-bf7c-8a0d8c6537aa', 'x-amzn-bedrock-invocation-latency': '1318', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08f33d0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb7ae605895ec2589bafb9
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.86.244.74 - - [01/Oct/2024 04:30:30] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fb890305895ec2589bafbb
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'd2e2b2c9-8051-4145-93f2-a5ce47a58fac', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 05:30:46 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'd2e2b2c9-8051-4145-93f2-a5ce47a58fac', 'x-amzn-bedrock-invocation-latency': '1311', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024ead0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb890605895ec2589bafbc
INFO:__main__:Process completed successfully.
INFO:werkzeug:3.92.162.30 - - [01/Oct/2024 05:30:46] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fb973505895ec2589bafbe
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'eac63e0c-24dd-47b4-b8de-129b08bfa9e9', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 06:31:20 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': 'eac63e0c-24dd-47b4-b8de-129b08bfa9e9', 'x-amzn-bedrock-invocation-latency': '1439', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024db40>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fb973805895ec2589bafbf
INFO:__main__:Process completed successfully.
INFO:werkzeug:18.212.42.172 - - [01/Oct/2024 06:31:20] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'How many leaves are there in gemini solutions?', 'conversation_id': '5656'}
INFO:__main__:Received query: How many leaves are there in gemini solutions?
INFO:__main__:Received conversation_id: 5656
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b03490bc-3b9f-4194-ab02-64d423e31ec5', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 07:30:48 GMT', 'content-type': 'application/json', 'content-length': '191', 'connection': 'keep-alive', 'x-amzn-requestid': 'b03490bc-3b9f-4194-ab02-64d423e31ec5', 'x-amzn-bedrock-invocation-latency': '294', 'x-amzn-bedrock-output-token-count': '25', 'x-amzn-bedrock-input-token-count': '264'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f5e0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"How many leaves are there in gemini solutions?\"\n}","prompt_token_count":264,"generation_token_count":25,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: How many leaves are there in gemini solutions?
INFO:__main__:Query stored successfully with ID: 66fba52805895ec2589bafc1
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '242a2bc9-3817-4c03-8fa9-3961f5ac0a81', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 07:30:51 GMT', 'content-type': 'application/json', 'content-length': '739', 'connection': 'keep-alive', 'x-amzn-requestid': '242a2bc9-3817-4c03-8fa9-3961f5ac0a81', 'x-amzn-bedrock-invocation-latency': '1341', 'x-amzn-bedrock-output-token-count': '133', 'x-amzn-bedrock-input-token-count': '1199'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024cfa0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Unfortunately, Gemini Solutions does not provide information on the number of leaves (vacation days) in their policies. The provided documents focus on risk management, ESOP schemes, and privacy policies, but do not mention leaves or vacation policies.\",\n    \"References\": [\n        {\n            \"Statement\": \"No relevant information found\",\n            \"source\": \"N/A\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"5656\",\n        \"query\": \"How many leaves are there in gemini solutions?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":1199,"generation_token_count":133,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fba52b05895ec2589bafc2
INFO:__main__:Process completed successfully.
INFO:werkzeug:54.85.181.197 - - [01/Oct/2024 07:30:51] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'hi jinie', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: hi jinie
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:No past queries found. Using the original query.
INFO:__main__:Query stored successfully with ID: 66fba7e505895ec2589bafc4
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '22a5d31c-ea36-4f15-903f-1b5c92be6979', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 07:42:32 GMT', 'content-type': 'application/json', 'content-length': '589', 'connection': 'keep-alive', 'x-amzn-requestid': '22a5d31c-ea36-4f15-903f-1b5c92be6979', 'x-amzn-bedrock-invocation-latency': '1695', 'x-amzn-bedrock-output-token-count': '179', 'x-amzn-bedrock-input-token-count': '903'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a1ea0>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Hi! I'm Jinie, the HR policy bot for Gemini Solutions. I'm here to help you with any company policy-related queries. What's on your mind?\",\n    \"References\": [],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"hi jinie\",\n        \"source\": \" Gemini-dev\",\n        \"response_length\": \"76\"\n    }\n}","prompt_token_count":903,"generation_token_count":179,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fba7e805895ec2589bafc5
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [01/Oct/2024 07:42:32] "POST /process_query HTTP/1.1" 200 -
INFO:__main__:Flask handler started.
INFO:__main__:Received request data: {'query': 'can you tell me about vehicle policy?', 'conversation_id': 'a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc'}
INFO:__main__:Received query: can you tell me about vehicle policy?
INFO:__main__:Received conversation_id: a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc
INFO:__main__:Connecting to MongoDB...
INFO:pymongo.client:You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb
INFO:__main__:Connected to MongoDB successfully.
INFO:__main__:Retrieving past queries from DocumentDB.
INFO:__main__:Past queries exist: 2
INFO:__main__:Rewrite Prompt created successfully.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': '54ab264f-5519-45b5-a004-4c1212082268', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 07:42:38 GMT', 'content-type': 'application/json', 'content-length': '181', 'connection': 'keep-alive', 'x-amzn-requestid': '54ab264f-5519-45b5-a004-4c1212082268', 'x-amzn-bedrock-invocation-latency': '257', 'x-amzn-bedrock-output-token-count': '23', 'x-amzn-bedrock-input-token-count': '221'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac08a0760>}
INFO:__main__:Response Data: {"generation":"\n\n{\n\"need_to_rewrite\": false,\n\"query\": \"can you tell me about vehicle policy\"\n}","prompt_token_count":221,"generation_token_count":23,"stop_reason":"stop"}
INFO:__main__:Rewritten Query: can you tell me about vehicle policy?
INFO:__main__:Query stored successfully with ID: 66fba7ee05895ec2589bafc7
INFO:__main__:Creating embeddings for the query.
INFO:__main__:Performing similarity search on DocumentDB.
INFO:__main__:Found similar documents: 5
INFO:__main__:Prompt generated successfully.
INFO:__main__:Calling LLM to generate the response.
INFO:__main__:LLM request received
INFO:__main__:LLM Call 0
INFO:__main__:Raw Response: {'ResponseMetadata': {'RequestId': 'b3f0961b-aeae-4fa0-925f-cff9e46e5bb2', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Tue, 01 Oct 2024 07:42:43 GMT', 'content-type': 'application/json', 'content-length': '1592', 'connection': 'keep-alive', 'x-amzn-requestid': 'b3f0961b-aeae-4fa0-925f-cff9e46e5bb2', 'x-amzn-bedrock-invocation-latency': '3597', 'x-amzn-bedrock-output-token-count': '368', 'x-amzn-bedrock-input-token-count': '1227'}, 'RetryAttempts': 0}, 'contentType': 'application/json', 'body': <botocore.response.StreamingBody object at 0xfdcac024f400>}
INFO:__main__:Response Data: {"generation":"\n\n{\n    \"Answer\": \"Gemini Solutions has a vehicle policy that allows employees to use their personal vehicles for official purposes within the city limits. The policy is outlined in the Gemini-Local Conveyance Policy and the Vehicle/ Cab Maintenance Policy. According to the policy, employees can use their personal vehicles for official purposes, but it does not include travel from residence to the place of work and back. The policy also outlines the guidelines for company-owned vehicles, including the responsibility of the company to ensure the vehicles are safe, schedule regular maintenance, and provide car insurance.\",\n    \"References\": [\n        {\n            \"Statement\": \"usage of personal two-wheeler/car/any other mode of transport for official purpose within the place of posting.\",\n            \"source\": \"Gemini-Local Conveyance Policy_Version 5.0._India.pdf - Page 4\"\n        },\n        {\n            \"Statement\": \"Vehicles owned or leased by the Gemini solutions are to be used exclusively for business purposes.\",\n            \"source\": \"Gemini-Vehicle Policy_Version 2.0._India.pdf - Page 5\"\n        }\n    ],\n    \"Metadata\": {\n        \"conversation_id\": \"a:1hOMvx-E5nzjFVDC06VJUUJXHYTFkr3w-DCxxvNLI1ObIcxvC8zK_zh3nCyP3GivTCbl2OlfcNmRX1CwgQE71u8SmYBkrl18yi3HGlYM-zoYC3Wn4hN7OQESwKsseQhgc\",\n        \"query\": \"can you tell me about vehicle policy?\",\n        \"source\": \"Gemini-dev\",\n        \"response_length\": \"156\"\n    }\n}","prompt_token_count":1227,"generation_token_count":368,"stop_reason":"stop"}
INFO:__main__:LLM response parsed successfully.
INFO:__main__:Response stored successfully with ID: 66fba7f305895ec2589bafc8
INFO:__main__:Process completed successfully.
INFO:werkzeug:52.172.222.141 - - [01/Oct/2024 07:42:43] "POST /process_query HTTP/1.1" 200 -
