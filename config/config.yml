models:
  - type: main
    engine: bedrock_converse
    model: anthropic.claude-3-5-sonnet-20240620-v1:0
    parameters:
      region_name: "us-west-2"
      # Add this line to stop the stream_usage conflict
      disable_streaming: True

rails:
  input:
    flows:
      - allow policy queries      # Check for valid queries first
      - check jailbreak
      - check sensitive topics
  output:
    flows:
      - self check hallucination

core:
  embedding_search_config:
    max_results: 5
    # Try increasing this slightly if false positives persist
    threshold: 0.85